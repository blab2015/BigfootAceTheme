function setupColorboxScripts(){if($(".chosen-select").chosen(),setTranslatableFields(),void 0!=CKEDITOR){var a=$("#colorbox").find("textarea.ckeditor");a.length&&a.each(function(){CKEDITOR.replace($(this).attr("id"))})}}function setTranslatableFields(){var a=$(".translatable-fields");if(a.length){setupTranslatableFields(a),$(".locales-container").html(Twig.render(localeTabs,{locales:locales,currentLocale:currentLocale,basePath:basePath}));var b=$(".locale-tabs");b.on("click","a",function(a){if(a.stopPropagation(),!$(this).hasClass("active")){var c=$(this).data("locale");$('input[data-locale="'+c+'"], textarea[data-locale="'+c+'"]').closest("div.input-group").show(),$('input[data-locale="'+currentLocale+'"], textarea[data-locale="'+currentLocale+'"]').closest("div.input-group").hide(),$("a",b).removeClass("active"),$(this).addClass("active"),currentLocale=c}return!1})}}function initSelects(){var a=window.tags;0==a.length&&$.ajax({url:tagsPath,async:!1,success:function(b){a=window.tags=$.parseJSON(b)}});var b=new Array;void 0!=a&&$.isArray(a)&&a.length>0&&(b=a);var c=$("input.bigfoot_tags_field");c.tag({placeholder:c.attr("placeholder"),source:b}),$(".chosen-select").chosen()}function strpos(a,b,c){var d=(a+"").indexOf(b,c||0);return-1===d?!1:d}function setupTranslatableFields(a){a.parent().hide(),$('input[type="text"], textarea',a).each(function(){var a=$(this).attr("id"),b=a.substr(0,a.lastIndexOf("-")).replace("_translation",""),c=$("#"+b);c.data("locale",defaultLocale).attr("data-locale",defaultLocale),$(this).appendTo(c.parent())});var b=$('<div class="input-group"></div>'),c=$("input[data-locale], textarea[data-locale]");c.each(function(){$(this).data("flag")||($(this).wrap(b),$(this).parent().addClass($(this).attr("class")+" no-padding-right no-padding-left"),$(this).removeClass().addClass("form-control"),$(this).parent().hasClass("ckeditor")&&($(this).parent().removeClass("ckeditor"),$(this).addClass("ckeditor")),$(this).after($('<span class="input-group-addon"><img src="'+basePath+"/bundles/bigfootcore/img/flags/"+$(this).data("locale")+'.gif" /></span>')),$(this).data("locale")!=currentLocale&&$(this).closest("div.input-group").hide(),$(this).data("flag",!0))})}function setupSortableCollectionItem(){var a=$("input.sortable-field");a.length>0&&a.closest("div.sortable-collection-item").parent().each(function(){$(this).sortable({connectWith:"."+$(this).attr("class"),handle:".accordion-heading",update:function(){{var a=$("input.sortable-field");a.length}$("input.sortable-field").each(function(a){$(this).val(a)})}})})}function addCollectionItem(a,b){var c=$(a),d="__name__";void 0!=b&&(d=b);var e=c.attr("data-prototype"),f=new RegExp(d,"g"),g=e.replace(f,c.children().length),h=$(g);if(c.append(h),setupSortableCollectionItem(),setupTranslatableFields(h.find("div.translatable-fields")),void 0!=CKEDITOR){var i=h.find("textarea.ckeditor");i.length&&i.each(function(){CKEDITOR.replace($(this).attr("id"))})}$(".chosen-select").chosen()}function tableToGrid(a,b){jQuery(a).each(function(){if(!this.grid){jQuery(this).width("99%");var a=jQuery(this).width(),c=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),d=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),c=0<c.length,d=!c&&0<d.length,e=c||d,f=[],g=[];jQuery("th",jQuery(this)).each(function(){0===f.length&&e?(f.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),g.push("__selection__")):(f.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),g.push(jQuery(this).html()))});var h=[],i=[],j=[];for(jQuery("tbody > tr",jQuery(this)).each(function(){var a={},b=0;jQuery("td",jQuery(this)).each(function(){if(0===b&&e){var c=jQuery("input",jQuery(this)),d=c.attr("value");i.push(d||h.length),c.is(":checked")&&j.push(d),a[f[b].name]=c.attr("value")}else a[f[b].name]=jQuery(this).html();b++}),b>0&&h.push(a)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:a,colNames:g,colModel:f,multiselect:c},b||{})),a=0;a<h.length;a++)d=null,0<i.length&&(d=i[a])&&d.replace&&(d=encodeURIComponent(d).replace(/[.\-%]/g,"_")),null===d&&(d=a+1),jQuery(this).jqGrid("addRowData",d,h[a]);for(a=0;a<j.length;a++)jQuery(this).jqGrid("setSelection",j[a])}})}function aceSwitch(a,b,c){setTimeout(function(){$(c).find("input[type=checkbox]").wrap('<label class="inline" />').addClass("ace ace-switch ace-switch-5").after('<span class="lbl"></span>')},0)}function pickDate(a,b,c){setTimeout(function(){$(c).find("input[type=text]").datepicker({format:"yyyy-mm-dd",autoclose:!0})},0)}function style_edit_form(a){a.find("input[name=sdate]").datepicker({format:"yyyy-mm-dd",autoclose:!0}).end().find("input[name=stock]").addClass("ace ace-switch ace-switch-5").wrap('<label class="inline" />').after('<span class="lbl"></span>');var b=a.next().find(".EditButton .fm-button");b.addClass("btn btn-sm").find('[class*="-icon"]').remove(),b.eq(0).addClass("btn-primary").prepend('<i class="icon-ok"></i>'),b.eq(1).prepend('<i class="icon-remove"></i>'),b=a.next().find(".navButton a"),b.find(".ui-icon").remove(),b.eq(0).append('<i class="icon-chevron-left"></i>'),b.eq(1).append('<i class="icon-chevron-right"></i>')}function style_delete_form(a){var b=a.next().find(".EditButton .fm-button");b.addClass("btn btn-sm").find('[class*="-icon"]').remove(),b.eq(0).addClass("btn-danger").prepend('<i class="icon-trash"></i>'),b.eq(1).prepend('<i class="icon-remove"></i>')}function style_search_filters(a){a.find(".delete-rule").val("X"),a.find(".add-rule").addClass("btn btn-xs btn-primary"),a.find(".add-group").addClass("btn btn-xs btn-success"),a.find(".delete-group").addClass("btn btn-xs btn-danger")}function style_search_form(a){var b=a.closest(".ui-jqdialog"),c=b.find(".EditTable");c.find('.EditButton a[id*="_reset"]').addClass("btn btn-sm btn-info").find(".ui-icon").attr("class","icon-retweet"),c.find('.EditButton a[id*="_query"]').addClass("btn btn-sm btn-inverse").find(".ui-icon").attr("class","icon-comment-alt"),c.find('.EditButton a[id*="_search"]').addClass("btn btn-sm btn-purple").find(".ui-icon").attr("class","icon-search")}function beforeDeleteCallback(a){var b=$(a[0]);return b.data("styled")?!1:(b.closest(".ui-jqdialog").find(".ui-jqdialog-titlebar").wrapInner('<div class="widget-header" />'),style_delete_form(b),void b.data("styled",!0))}function beforeEditCallback(a){var b=$(a[0]);b.closest(".ui-jqdialog").find(".ui-jqdialog-titlebar").wrapInner('<div class="widget-header" />'),style_edit_form(b)}function styleCheckbox(){}function updateActionIcons(){}function updatePagerIcons(){var a={"ui-icon-seek-first":"icon-double-angle-left bigger-140","ui-icon-seek-prev":"icon-angle-left bigger-140","ui-icon-seek-next":"icon-angle-right bigger-140","ui-icon-seek-end":"icon-double-angle-right bigger-140"};$(".ui-pg-table:not(.navtable) > tbody > tr > .ui-pg-button > .ui-icon").each(function(){var b=$(this),c=$.trim(b.attr("class").replace("ui-icon",""));c in a&&b.attr("class","ui-icon "+a[c])})}function enableTooltips(a){$(".navtable .ui-pg-button").tooltip({container:"body"}),$(a).find(".ui-pg-div").tooltip({container:"body"})}if(!jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(window.jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');if(a.length){var b=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===b.prop("type")&&a.find(".active").removeClass("active")}this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(window.jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(window.jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target");
if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),window.bootbox=window.bootbox||function a(b,c){"use strict";function d(a){var b=s[q.locale];return b?b[a]:s.en[a]}function e(a,c,d){a.preventDefault();var e=b.isFunction(d)&&d(a)===!1;e||c.modal("hide")}function f(a){var b,c=0;for(b in a)c++;return c}function g(a,c){var d=0;b.each(a,function(a,b){c(a,b,d++)})}function h(a){var c,d;if("object"!=typeof a)throw new Error("Please supply an object of options");if(!a.message)throw new Error("Please specify a message");return a=b.extend({},q,a),a.buttons||(a.buttons={}),a.backdrop=a.backdrop?"static":!1,c=a.buttons,d=f(c),g(c,function(a,e,f){if(b.isFunction(e)&&(e=c[a]={callback:e}),"object"!==b.type(e))throw new Error("button with key "+a+" must be an object");e.label||(e.label=a),e.className||(e.className=2>=d&&f===d-1?"btn-primary":"btn-default")}),a}function i(a,b){var c=a.length,d={};if(1>c||c>2)throw new Error("Invalid argument length");return 2===c||"string"==typeof a[0]?(d[b[0]]=a[0],d[b[1]]=a[1]):d=a[0],d}function j(a,c,d){return b.extend(!0,{},a,i(c,d))}function k(a,b,c){return n(j(m.apply(null,a),b,c),a)}function l(){for(var a={},b=0,c=arguments.length;c>b;b++){var e=arguments[b],f=e.toLowerCase(),g=e.toUpperCase();a[f]={label:d(g)}}return a}function m(){return{buttons:l.apply(null,arguments)}}function n(a,b){var d={};return g(b,function(a,b){d[b]=!0}),g(a.buttons,function(a){if(d[a]===c)throw new Error("button key "+a+" is not allowed (options are "+b.join("\n")+")")}),a}var o={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input form-control' autocomplete=off type=text />"}},p=b("body"),q={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0},r={};r.alert=function(){var a;if(a=k(["ok"],arguments,["message","callback"]),a.callback&&!b.isFunction(a.callback))throw new Error("alert requires callback property to be a function when provided");return a.buttons.ok.callback=a.onEscape=function(){return b.isFunction(a.callback)?a.callback():!0},r.dialog(a)},r.confirm=function(){var a;if(a=k(["cancel","confirm"],arguments,["message","callback"]),a.buttons.cancel.callback=a.onEscape=function(){return a.callback(!1)},a.buttons.confirm.callback=function(){return a.callback(!0)},!b.isFunction(a.callback))throw new Error("confirm requires a callback");return r.dialog(a)},r.prompt=function(){var a,d,e,f,g,h;if(f=b(o.form),d={buttons:l("cancel","confirm"),value:""},a=n(j(d,arguments,["title","callback"]),["cancel","confirm"]),h=a.show===c?!0:a.show,a.message=f,a.buttons.cancel.callback=a.onEscape=function(){return a.callback(null)},a.buttons.confirm.callback=function(){return a.callback(g.val())},a.show=!1,!a.title)throw new Error("prompt requires a title");if(!b.isFunction(a.callback))throw new Error("prompt requires a callback");return g=b(o.inputs.text),g.val(a.value),f.append(g),f.on("submit",function(a){a.preventDefault(),e.find(".btn-primary").click()}),e=r.dialog(a),e.off("shown.bs.modal"),e.on("shown.bs.modal",function(){g.focus()}),h===!0&&e.modal("show"),e},r.dialog=function(a){a=h(a);var c=b(o.dialog),d=c.find(".modal-body"),f=a.buttons,i="",j={onEscape:a.onEscape};if(g(f,function(a,b){i+="<button data-bb-handler='"+a+"' type='button' class='btn "+b.className+"'>"+b.label+"</button>",j[a]=b.callback}),d.find(".bootbox-body").html(a.message),a.animate===!0&&c.addClass("fade"),a.className&&c.addClass(a.className),a.title&&d.before(o.header),a.closeButton){var k=b(o.closeButton);a.title?c.find(".modal-header").prepend(k):k.css("margin-top","-10px").prependTo(d)}return a.title&&c.find(".modal-title").html(a.title),i.length&&(d.after(o.footer),c.find(".modal-footer").html(i)),c.on("hidden.bs.modal",function(a){a.target===this&&c.remove()}),c.on("shown.bs.modal",function(){c.find(".btn-primary:first").focus()}),c.on("escape.close.bb",function(a){j.onEscape&&e(a,c,j.onEscape)}),c.on("click",".modal-footer button",function(a){var d=b(this).data("bb-handler");e(a,c,j[d])}),c.on("click",".bootbox-close-button",function(a){e(a,c,j.onEscape)}),c.on("keyup",function(a){27===a.which&&c.trigger("escape.close.bb")}),p.append(c),c.modal({backdrop:a.backdrop,keyboard:!1,show:!1}),a.show&&c.modal("show"),c},r.setDefaults=function(a){b.extend(q,a)},r.hideAll=function(){b(".bootbox").modal("hide")};var s={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return r.init=function(c){window.bootbox=a(c||b)},r}(window.jQuery),function(){function a(b,c,d){var e=a.resolve(b);if(null==e){d=d||b,c=c||"root";var f=new Error('Failed to require "'+d+'" from "'+c+'"');throw f.path=d,f.parent=c,f.require=!0,f}var g=a.modules[e];return g.exports||(g.exports={},g.client=g.component=!0,g.call(this,g.exports,a.relative(e),g)),g.exports}a.modules={},a.aliases={},a.resolve=function(b){"/"===b.charAt(0)&&(b=b.slice(1));for(var c=[b,b+".js",b+".json",b+"/index.js",b+"/index.json"],d=0;d<c.length;d++){var b=c[d];if(a.modules.hasOwnProperty(b))return b;if(a.aliases.hasOwnProperty(b))return a.aliases[b]}},a.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},a.register=function(b,c){a.modules[b]=c},a.alias=function(b,c){if(!a.modules.hasOwnProperty(b))throw new Error('Failed to alias "'+b+'", it does not exist');a.aliases[c]=b},a.relative=function(b){function c(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function d(c){var e=d.resolve(c);return a(e,b,c)}var e=a.normalize(b,"..");return d.resolve=function(d){var f=d.charAt(0);if("/"==f)return d.slice(1);if("."==f)return a.normalize(e,d);var g=b.split("/"),h=c(g,"deps")+1;return h||(h=0),d=g.slice(0,h+1).join("/")+"/deps/"+d},d.exists=function(b){return a.modules.hasOwnProperty(d.resolve(b))},d},a.register("component-emitter/index.js",function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}c.exports=d,d.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=function(a,b){this._callbacks=this._callbacks||{};var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=c.indexOf(b._off||b);return~d&&c.splice(d,1),this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),a.register("dropzone/index.js",function(a,b,c){c.exports=b("./lib/dropzone.js")}),a.register("dropzone/lib/dropzone.js",function(a,b,c){(function(){var a,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice;d="undefined"!=typeof Emitter&&null!==Emitter?Emitter:b("emitter"),g=function(){},a=function(a){function b(a,d){var e,f,g;if(this.element=a,this.version=b.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(b.instances.push(this),a.dropzone=this,e=null!=(g=b.optionsForElement(this.element))?g:{},this.options=c({},this.defaultOptions,e,null!=d?d:{}),this.options.forceFallback||!b.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.previewsContainer=this.options.previewsContainer?b.getElement(this.options.previewsContainer,"previewsContainer"):this.element,this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:b.getElements(this.options.clickable,"clickable")),this.init()}var c;return j(b,a),b.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","selectedfiles","addedfile","removedfile","thumbnail","error","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded"],b.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can only upload {{maxFiles}} files.",accept:function(a,b){return b()},init:function(){return g},forceFallback:!1,fallback:function(){var a,c,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(c=a,a.className="dz-message");return c||(c=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(c)),d=c.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,d=this.options.thumbnailWidth/this.options.thumbnailHeight,a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:g,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){return this.element===this.previewsContainer?this.element.classList.add("dz-started"):void 0},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var c=this;return a.previewElement=b.createElement(this.options.previewTemplate),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),a.previewElement.querySelector("[data-dz-name]").textContent=a.name,a.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(a.size),this.options.addRemoveLinks&&(a._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;">'+this.options.dictRemoveFile+"</a>"),a._removeLink.addEventListener("click",function(d){return d.preventDefault(),d.stopPropagation(),a.status===b.UPLOADING?b.confirm(c.options.dictCancelUploadConfirmation,function(){return c.removeFile(a)}):c.options.dictRemoveFileConfirmation?b.confirm(c.options.dictRemoveFileConfirmation,function(){return c.removeFile(a)}):c.removeFile(a)}),a.previewElement.appendChild(a._removeLink)),this._updateMaxFilesReachedClass()},removedfile:function(a){var b;return null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c;return a.previewElement.classList.remove("dz-file-preview"),a.previewElement.classList.add("dz-image-preview"),c=a.previewElement.querySelector("[data-dz-thumbnail]"),c.alt=a.name,c.src=b},error:function(a,b){return a.previewElement.classList.add("dz-error"),a.previewElement.querySelector("[data-dz-errormessage]").textContent=b},processing:function(a){return a.previewElement.classList.add("dz-processing"),a._removeLink?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:g,uploadprogress:function(a,b){return a.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+b+"%"},totaluploadprogress:g,sending:g,sendingmultiple:g,success:function(a){return a.previewElement.classList.add("dz-success")},successmultiple:g,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:g,complete:function(a){return a._removeLink?a._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:g,maxfilesexceeded:g,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},c=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?k.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},b.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},b.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},b.prototype.getQueuedFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.QUEUED&&f.push(a);return f},b.prototype.getUploadingFiles=function(){var a,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)a=e[c],a.status===b.UPLOADING&&f.push(a);return f},b.prototype.init=function(){var a,c,d,e,f,g,h,i=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(){return i.hiddenFileInput&&document.body.removeChild(i.hiddenFileInput),i.hiddenFileInput=document.createElement("input"),i.hiddenFileInput.setAttribute("type","file"),i.hiddenFileInput.setAttribute("multiple","multiple"),null!=i.options.acceptedFiles&&i.hiddenFileInput.setAttribute("accept",i.options.acceptedFiles),i.hiddenFileInput.style.visibility="hidden",i.hiddenFileInput.style.position="absolute",i.hiddenFileInput.style.top="0",i.hiddenFileInput.style.left="0",i.hiddenFileInput.style.height="0",i.hiddenFileInput.style.width="0",document.body.appendChild(i.hiddenFileInput),i.hiddenFileInput.addEventListener("change",function(){var a;return a=i.hiddenFileInput.files,a.length&&(i.emit("selectedfiles",a),i.handleFiles(a)),d()})})(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(){return i.updateTotalUploadProgress()}),this.on("removedfile",function(){return i.updateTotalUploadProgress()}),this.on("canceled",function(a){return i.emit("complete",a)}),c=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return i.emit("dragstart",a)},dragenter:function(a){return c(a),i.emit("dragenter",a)},dragover:function(a){return c(a),i.emit("dragover",a)},dragleave:function(a){return i.emit("dragleave",a)},drop:function(a){return c(a),i.drop(a),i.emit("drop",a)},dragend:function(a){return i.emit("dragend",a)}}}],this.clickableElements.forEach(function(a){return i.listeners.push({element:a,events:{click:function(c){return a!==i.element||c.target===i.element||b.elementInside(c.target,i.element.querySelector(".dz-message"))?i.hiddenFileInput.click():void 0}}})}),this.enable(),this.options.init.call(this)},b.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone},b.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getAcceptedFiles(),a.length){for(h=this.getAcceptedFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},b.prototype.getFallbackForm=function(){var a,c,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><button type="submit">Upload!</button></div>',c=b.createElement(d),"FORM"!==this.element.tagName?(e=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(c)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:c)},b.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},b.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},b.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},b.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},b.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},b.prototype.filesize=function(a){var b;return a>=1e11?(a/=1e11,b="TB"):a>=1e8?(a/=1e8,b="GB"):a>=1e5?(a/=1e5,b="MB"):a>=100?(a/=100,b="KB"):(a=10*a,b="b"),"<strong>"+Math.round(a)/10+"</strong> "+b},b.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?this.element.classList.add("dz-max-files-reached"):this.element.classList.remove("dz-max-files-reached")},b.prototype.drop=function(a){var b,c;a.dataTransfer&&(b=a.dataTransfer.files,this.emit("selectedfiles",b),b.length&&(c=a.dataTransfer.items,c&&c.length&&(null!=c[0].webkitGetAsEntry||null!=c[0].getAsEntry)?this.handleItems(c):this.handleFiles(b)))},b.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},b.prototype.handleItems=function(a){var b,c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],null!=c.webkitGetAsEntry?(b=c.webkitGetAsEntry(),b.isFile?this.addFile(c.getAsFile()):b.isDirectory&&this.addDirectory(b,b.name)):this.addFile(c.getAsFile())},b.prototype.accept=function(a,c){return a.size>1024*this.options.maxFilesize*1024?c(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(a,this.options.acceptedFiles)?this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(c(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,c):c(this.options.dictInvalidFileType)},b.prototype.addFile=function(a){var c=this;return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=b.ADDED,this.emit("addedfile",a),this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024&&this.createThumbnail(a),this.accept(a,function(b){return b?(a.accepted=!1,c._errorProcessing([a],b)):c.enqueueFile(a)})},b.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},b.prototype.enqueueFile=function(a){var c=this;if(a.accepted=!0,a.status!==b.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=b.QUEUED,this.options.autoProcessQueue?setTimeout(function(){return c.processQueue()},1):void 0},b.prototype.addDirectory=function(a,b){var c,d,e=this;return c=a.createReader(),d=function(c){var d,f;for(d=0,f=c.length;f>d;d++)a=c[d],a.isFile?a.file(function(a){return e.options.ignoreHiddenFiles&&"."===a.name.substring(0,1)?void 0:(a.fullPath=""+b+"/"+a.name,e.addFile(a))}):a.isDirectory&&e.addDirectory(a,""+b+"/"+a.name)},c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},b.prototype.removeFile=function(a){return a.status===b.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},b.prototype.removeAllFiles=function(a){var c,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)c=f[d],(c.status!==b.UPLOADING||a)&&this.removeFile(c);return null},b.prototype.createThumbnail=function(a){var b,c=this;return b=new FileReader,b.onload=function(){var d;return d=new Image,d.onload=function(){var b,e,f,g,h,i,j,k;return a.width=d.width,a.height=d.height,f=c.options.resize.call(c,a),null==f.trgWidth&&(f.trgWidth=c.options.thumbnailWidth),null==f.trgHeight&&(f.trgHeight=c.options.thumbnailHeight),b=document.createElement("canvas"),e=b.getContext("2d"),b.width=f.trgWidth,b.height=f.trgHeight,e.drawImage(d,null!=(h=f.srcX)?h:0,null!=(i=f.srcY)?i:0,f.srcWidth,f.srcHeight,null!=(j=f.trgX)?j:0,null!=(k=f.trgY)?k:0,f.trgWidth,f.trgHeight),g=b.toDataURL("image/png"),c.emit("thumbnail",a,g)},d.src=b.result},b.readAsDataURL(a)},b.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},b.prototype.processFile=function(a){return this.processFiles([a])},b.prototype.processFiles=function(a){var c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],c.processing=!0,c.status=b.UPLOADING,this.emit("processing",c);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},b.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},b.prototype.cancelUpload=function(a){var c,d,e,f,g,h,i;if(a.status===b.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)c=d[e],c.status=b.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)c=d[f],this.emit("canceled",c);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===b.ADDED||i===b.QUEUED)&&(a.status=b.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},b.prototype.uploadFile=function(a){return this.uploadFiles([a])},b.prototype.uploadFiles=function(a){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=this;for(r=new XMLHttpRequest,s=0,w=a.length;w>s;s++)d=a[s],d.xhr=r;r.open(this.options.method,this.options.url,!0),r.withCredentials=!!this.options.withCredentials,o=null,f=function(){var b,c,e;for(e=[],b=0,c=a.length;c>b;b++)d=a[b],e.push(E._errorProcessing(a,o||E.options.dictResponseError.replace("{{statusCode}}",r.status),r));return e},p=function(b){var c,e,f,g,h,i,j,k,l;if(null!=b)for(e=100*b.loaded/b.total,f=0,i=a.length;i>f;f++)d=a[f],d.upload={progress:e,total:b.total,bytesSent:b.loaded};else{for(c=!0,e=100,g=0,j=a.length;j>g;g++)d=a[g],(100!==d.upload.progress||d.upload.bytesSent!==d.upload.total)&&(c=!1),d.upload.progress=e,d.upload.bytesSent=d.upload.total;if(c)return}for(l=[],h=0,k=a.length;k>h;h++)d=a[h],l.push(E.emit("uploadprogress",d,e,d.upload.bytesSent));return l},r.onload=function(c){var d;if(a[0].status!==b.CANCELED&&4===r.readyState){if(o=r.responseText,r.getResponseHeader("content-type")&&~r.getResponseHeader("content-type").indexOf("application/json"))try{o=JSON.parse(o)}catch(e){c=e,o="Invalid JSON response from server."}return p(),200<=(d=r.status)&&300>d?E._finished(a,o,c):f()}},r.onerror=function(){return a[0].status!==b.CANCELED?f():void 0},n=null!=(A=r.upload)?A:r,n.onprogress=p,i={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&c(i,this.options.headers);for(g in i)h=i[g],r.setRequestHeader(g,h);if(e=new FormData,this.options.params){B=this.options.params;for(m in B)q=B[m],e.append(m,q)}for(t=0,x=a.length;x>t;t++)d=a[t],this.emit("sending",d,r,e);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,r,e),"FORM"===this.element.tagName)for(C=this.element.querySelectorAll("input, textarea, select, button"),u=0,y=C.length;y>u;u++)j=C[u],k=j.getAttribute("name"),l=j.getAttribute("type"),(!l||"checkbox"!==(D=l.toLowerCase())&&"radio"!==D||j.checked)&&e.append(k,j.value);for(v=0,z=a.length;z>v;v++)d=a[v],e.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),d,d.name);return r.send(e)},b.prototype._finished=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.SUCCESS,this.emit("success",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b.prototype._errorProcessing=function(a,c,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=b.ERROR,this.emit("error",e,c,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,c,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},b}(d),a.version="3.7.0",a.options={},a.optionsForElement=function(b){return b.id?a.options[e(b.id)]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(/(^| )dropzone($| )/.test(b.className)?d.push(b):void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(a.optionsForElement(c)!==!1?new a(c):void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},h=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},e=function(a){return a.replace(/[\-_](\w)/g,function(a){return a[1].toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.indexOf(e,a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof c&&null!==c?c.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",f=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},f(window,a._autoDiscoverFunction)}).call(this)}),a.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),a.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=a("dropzone"):"function"==typeof define&&define.amd?define(function(){return a("dropzone")}):this.Dropzone=a("dropzone")}(),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var b;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(b=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,b?this.process(b):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(){var b=this.$menu.find(".active").removeClass("active"),c=b.next();c.length||(c=a(this.$menu.find("li")[0])),c.addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active"),b=a.prev();b.length||(b=this.$menu.find("li").last()),b.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var b=a(this);b.data("typeahead")||b.typeahead(b.data())})}(window.jQuery),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d
},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&l>h-a.helperProportions.width/2&&i+a.helperProportions.height/2>m&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))
}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1
}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!b){for(c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){var b=0,c={},d={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show",a.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),0>b.active&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a(),content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var c,d=this.options,e=d.heightStyle,f=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++b);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(b){var c=a(this),d=c.attr("id"),e=c.next(),f=e.attr("id");d||(d=g+"-header-"+b,c.attr("id",d)),f||(f=g+"-panel-"+b,e.attr("id",f)),c.attr("aria-controls",f),e.attr("aria-labelledby",d)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),"fill"===e?(c=f.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===e&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).css("height","").height())}).height(c))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-expanded":"false","aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,e){var f,g,h,i=this,j=0,k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{},m=k&&l.down||l,n=function(){i._toggleComplete(e)};return"number"==typeof m&&(h=m),"string"==typeof m&&(g=m),g=g||m.easing||l.easing,h=h||m.duration||l.duration,b.length?a.length?(f=a.show().outerHeight(),b.animate(c,{duration:h,easing:g,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(d,{duration:h,easing:g,complete:n,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?j+=c.now:"content"!==i.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-j),j=0)}})):b.animate(c,h,g,n):a.animate(d,h,g,n)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.3"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);
return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,ab=a.drawYear;if(0>_&&(_+=12,ab--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(ab,_,1))>b;)_--,0>_&&(_=11,ab--);for(a.drawMonth=_,a.drawYear=ab,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(ab,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,ab,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(ab,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,ab,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(ab,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,ab,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(ab,_),ab===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(ab,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(ab,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,ab++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.3"}(jQuery),function(a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})
},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(d){var e=this,f=!1,g={};a.each(d,function(a,d){e._setOption(a,d),a in b&&(f=!0),a in c&&(g[a]=d)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(0>e[0]?e[0]:"+"+e[0])+" "+d[1]+(0>e[1]?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),b)},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))
},_setOptions:b(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void b(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var c=this.options.active,d=this.options.collapsible,e=location.hash.substring(1);return null===c&&(e&&this.tabs.each(function(d,f){return a(f).attr("aria-controls")===e?(c=d,!1):b}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===c||-1===c)&&(c=this.tabs.length?0:!1)),c!==!1&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d?!1:0)),!d&&c===!1&&this.anchors.length&&(c=0),c},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(c){var d=a(this.document[0].activeElement).closest("li"),e=this.tabs.index(d),f=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:e++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1,e--;break;case a.ui.keyCode.END:e=this.anchors.length-1;break;case a.ui.keyCode.HOME:e=0;break;case a.ui.keyCode.SPACE:return c.preventDefault(),clearTimeout(this.activating),this._activate(e),b;case a.ui.keyCode.ENTER:return c.preventDefault(),clearTimeout(this.activating),this._activate(e===this.options.active?!1:e),b;default:return}c.preventDefault(),clearTimeout(this.activating),e=this._focusNextTab(e,f),c.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(e).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",e)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(c){return c.altKey&&c.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):c.altKey&&c.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):b},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,c){return"active"===a?(this._activate(c),b):"disabled"===a?(this._setupDisabled(c),b):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c),b)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a){function b(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(c,d,e){function f(a){j.of=a,g.is(":hidden")||g.position(j)}var g,h,i,j=a.extend({},this.options.position);if(e){if(g=this._find(d),g.length)return void g.find(".ui-tooltip-content").html(e);d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title")),g=this._tooltip(d),b(d,g.attr("id")),g.find(".ui-tooltip-content").html(e),this.options.track&&c&&/^mouse/.test(c.type)?(this._on(this.document,{mousemove:f}),f(c)):g.position(a.extend({of:d},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(j.of),clearInterval(i))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var c=a.Event(b);c.currentTarget=d[0],this.close(c,!0)}},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(h.mouseleave="close"),c&&"focusin"!==c.type||(h.focusout="close"),this._on(!0,d,h)}},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),c(e),f.stop(!0),this._hide(f,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:f}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[c]=b,e},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function c(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function d(b,c){var d,e,g={};for(d in c)e=c[d],b[d]!==e&&(f[d]||(a.fx.step[d]||!isNaN(parseFloat(e)))&&(g[d]=e));return g}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var b=a(this);return{el:b,start:c(this)}}),f=function(){a.each(e,function(a,c){b[c]&&g[c+"Class"](b[c])})},f(),j=j.map(function(){return this.end=c(this.el[0]),this.diff=d(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var d=0;b.length>d;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;d.length>f;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function b(b){function d(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=c.complete,h=c.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),d()):g.call(e[0],c,d)}var c=d.apply(this,arguments),e=c.mode,f=c.queue,g=a.effects.effect[c.effect];return a.fx.off||!g?e?this[e](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):f===!1?this.each(b):this.queue(f||"fx",b)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var b=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(d,e){var f,g,h,i=a(this),j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(i,d.mode||"hide"),l=d.direction||"up",m=b.test(l),n=m?"height":"width",o=m?"top":"left",p=c.test(l),q={},r="show"===k;i.parent().is(".ui-effects-wrapper")?a.effects.save(i.parent(),j):a.effects.save(i,j),i.show(),f=a.effects.createWrapper(i).css({overflow:"hidden"}),g=f[n](),h=parseFloat(f.css(o))||0,q[n]=r?g:0,p||(i.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?h:g+h),r&&(f.css(n,0),p||f.css(o,h+g)),f.animate(q,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&i.hide(),a.effects.restore(i,j),a.effects.removeWrapper(i),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()
}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery),function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind("touchstart",a.proxy(b,"_touchStart")).bind("touchmove",a.proxy(b,"_touchMove")).bind("touchend",a.proxy(b,"_touchEnd")),e.call(b)}}}(jQuery),!function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li class="'+b.join(" ")+'"'+c+' data-option-array-index="'+a.array_index+'">'+a.search_text+"</li>"):""},a.prototype.result_add_group=function(a){return(a.search_match||a.group_match)&&a.active_options>0?'<li class="group-result">'+a.search_text+"</li>":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(e+=1),b.search_match?(g.length&&(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(){var b,e;b=a(this),e=b.data("chosen"),"destroy"===d&&e?e.destroy():e||b.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b,c,d;return b=-(null!=(c=a.originalEvent)?c.wheelDelta:void 0)||(null!=(d=a.originialEvent)?d.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){return this.container.is(a(b.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),d=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[d].selected=!1),this.result_single_selected=b),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0
},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),function(a,b){var c=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.spinner.defaults,c),this.$input=this.$element.find(".spinner-input"),this.$element.on("keyup",this.$input,a.proxy(this.change,this)),this.options.hold?(this.$element.on("mousedown",".spinner-up",a.proxy(function(){this.startSpin(!0)},this)),this.$element.on("mouseup",".spinner-up, .spinner-down",a.proxy(this.stopSpin,this)),this.$element.on("mouseout",".spinner-up, .spinner-down",a.proxy(this.stopSpin,this)),this.$element.on("mousedown",".spinner-down",a.proxy(function(){this.startSpin(!1)},this))):(this.$element.on("click",".spinner-up",a.proxy(function(){this.step(!0)},this)),this.$element.on("click",".spinner-down",a.proxy(function(){this.step(!1)},this))),this.switches={count:1,enabled:!0},this.switches.speed="medium"===this.options.speed?300:"fast"===this.options.speed?100:500,this.lastValue=null,this.render(),this.options.disabled&&this.disable()};c.prototype={constructor:c,render:function(){this.$input.val(this.options.value),this.$input.attr("maxlength",(this.options.max+"").split("").length)},change:function(){var a=this.$input.val();a/1?this.options.value=a/1:(a=a.replace(/[^0-9]/g,""),this.$input.val(a),this.options.value=a/1),this.triggerChangedEvent()},stopSpin:function(){clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent()},triggerChangedEvent:function(){var a=this.value();a!==this.lastValue&&(this.lastValue=a,this.$element.trigger("changed",a),this.$element.trigger("change"))},startSpin:function(b){if(!this.options.disabled){var c=this.switches.count;1===c?(this.step(b),c=1):c=3>c?1.5:8>c?2.5:4,this.switches.timeout=setTimeout(a.proxy(function(){this.iterator(b)},this),this.switches.speed/c),this.switches.count++}},iterator:function(a){this.step(a),this.startSpin(a)},step:function(a){var b=this.options.value,c=a?this.options.max:this.options.min;if(a?c>b:b>c){var d=b+(a?1:-1)*this.options.step;this.value((a?d>c:c>d)?c:d)}},value:function(a){return!isNaN(parseFloat(a))&&isFinite(a)?(a=parseFloat(a),this.options.value=a,this.$input.val(a),this):this.options.value},disable:function(){this.options.disabled=!0,this.$input.attr("disabled",""),this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1,this.$input.removeAttr("disabled"),this.$element.find("button").removeClass("disabled")}},a.fn.spinner=function(d,e){var f,g=this.each(function(){var b=a(this),g=b.data("spinner"),h="object"==typeof d&&d;g||b.data("spinner",g=new c(this,h)),"string"==typeof d&&(f=g[d](e))});return f===b?g:f},a.fn.spinner.defaults={value:1,min:1,max:999,step:1,hold:!0,speed:"medium",disabled:!1},a.fn.spinner.Constructor=c,a(function(){a("body").on("mousedown.spinner.data-api",".spinner",function(){var b=a(this);b.data("spinner")||b.spinner(b.data())})})}(window.jQuery),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var f=this;switch(this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in d?this.language:this.language.split("-")[0],this.language=this.language in d?this.language:"en",this.isRTL=d[this.language].rtl||!1,this.format=e.parseFormat(c.format||this.element.data("date-format")||d[this.language].format||"mm/dd/yyyy"),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this._attachEvents(),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=a(e.template).appendTo(this.isInline?this.element:"body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.picker.addClass(this.isInline?"datepicker-inline":"datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),a(document).on("mousedown",function(b){0===a(b.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&f.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.viewMode=this.startViewMode=0,c.startView||this.element.data("date-start-view")){case 2:case"decade":this.viewMode=this.startViewMode=2;break;case 1:case"year":this.viewMode=this.startViewMode=1}if(this.minViewMode=c.minViewMode||this.element.data("date-min-view-mode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=this.startViewMode=Math.max(this.startViewMode,this.minViewMode),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.calendarWeeks=!1,"calendarWeeks"in c?this.calendarWeeks=c.calendarWeeks:"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks")),this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this.weekStart=(c.weekStart||this.element.data("date-weekstart")||d[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&b.preventDefault(),this.element.trigger({type:"show",date:this.date})},hide:function(){this.isInline||this.picker.is(":visible")&&(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):(this.component&&this.element.find("input").val(a),this.element.data("date",a))},getFormattedDate:function(a){return void 0===a&&(a=this.format),e.formatDate(this.date,a,this.language)},setStartDate:function(a){this.startDate=a||-1/0,this.startDate!==-1/0&&(this.startDate=e.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,1/0!==this.endDate&&(this.endDate=e.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:c.top+d,left:c.left,zIndex:b})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),this.date=e.parseDate(a,this.format,this.language),b&&this.setValue(),this.viewDate=new Date(this.date<this.startDate?this.startDate:this.date>this.endDate?this.endDate:this.date),this.fill()},fillDow:function(){var a=this.weekStart,b="<tr>";if(this.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.weekStart+7;)b+='<th class="dow">'+d[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+d[this.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},fill:function(){var c=new Date(this.viewDate),f=c.getUTCFullYear(),g=c.getUTCMonth(),h=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,i=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,j=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,k=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,l=this.date&&this.date.valueOf(),m=new Date;this.picker.find(".datepicker-days thead th.switch").text(d[this.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(d[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=b(f,g-1,28,0,0,0,0),o=e.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(o),n.setUTCDate(o-(n.getUTCDay()-this.weekStart+7)%7);var p=new Date(n);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();for(var q,r=[];n.valueOf()<p;){if(n.getUTCDay()==this.weekStart&&(r.push("<tr>"),this.calendarWeeks)){var s=new Date(+n+(this.weekStart-n.getUTCDay()-7)%7*864e5),t=new Date(+s+(11-s.getUTCDay())%7*864e5),u=new Date(+(u=b(t.getUTCFullYear(),0,1))+(11-u.getUTCDay())%7*864e5),v=(t-u)/864e5/7+1;r.push('<td class="cw">'+v+"</td>")}q="",n.getUTCFullYear()<f||n.getUTCFullYear()==f&&n.getUTCMonth()<g?q+=" old":(n.getUTCFullYear()>f||n.getUTCFullYear()==f&&n.getUTCMonth()>g)&&(q+=" new"),this.todayHighlight&&n.getUTCFullYear()==m.getFullYear()&&n.getUTCMonth()==m.getMonth()&&n.getUTCDate()==m.getDate()&&(q+=" today"),l&&n.valueOf()==l&&(q+=" active"),(n.valueOf()<this.startDate||n.valueOf()>this.endDate||-1!==a.inArray(n.getUTCDay(),this.daysOfWeekDisabled))&&(q+=" disabled"),r.push('<td class="day'+q+'">'+n.getUTCDate()+"</td>"),n.getUTCDay()==this.weekEnd&&r.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(r.join(""));var w=this.date&&this.date.getUTCFullYear(),x=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");w&&w==f&&x.eq(this.date.getUTCMonth()).addClass("active"),(h>f||f>j)&&x.addClass("disabled"),f==h&&x.slice(0,i).addClass("disabled"),f==j&&x.slice(k+1).addClass("disabled"),r="",f=10*parseInt(f/10,10);var y=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var z=-1;11>z;z++)r+='<span class="year'+(-1==z||10==z?" old":"")+(w==f?" active":"")+(h>f||f>j?" disabled":"")+'">'+f+"</span>",f+=1;y.html(r)},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.startDate!==-1/0&&b<=this.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&b>=this.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}},click:function(c){c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var f=e.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,f);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,f)}this.fill();break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0),this.showMode(-2);var h="linked"==this.todayBtn?null:"view";this._setDate(g,h)}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=1,j=d.parent().find("span").index(d),k=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(j),this.element.trigger({type:"changeMonth",date:this.viewDate}),1==this.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}else{var k=parseInt(d.text(),10)||0,i=1,j=0;this.viewDate.setUTCFullYear(k),this.element.trigger({type:"changeYear",date:this.viewDate}),2==this.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var i=parseInt(d.text(),10)||1,k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth();d.is(".old")?0===j?(j=11,k-=1):j-=1:d.is(".new")&&(11==j?(j=0,k+=1):j+=1),this._setDate(b(k,j,i,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date});var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),!this.autoclose||b&&"date"!=b||this.hide())},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this.element.trigger({type:"changeDate",date:this.date});var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+e.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}},a.fn.datepicker=function(b){var d=Array.apply(null,arguments);return d.shift(),this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof b&&b;f||e.data("datepicker",f=new c(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof b&&"function"==typeof f[b]&&f[b].apply(f,d)})},a.fn.datepicker.defaults={},a.fn.datepicker.Constructor=c;var d=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today"}},e={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,e.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(e,f,g){if(e instanceof Date)return e;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){var h,i,j=/([\-+]\d+)([dmwy])/,k=e.match(/([\-+]\d+)([dmwy])/g);e=new Date;for(var l=0;l<k.length;l++)switch(h=j.exec(k[l]),i=parseInt(h[1]),h[2]){case"d":e.setUTCDate(e.getUTCDate()+i);break;case"m":e=c.prototype.moveMonth.call(c.prototype,e,i);break;case"w":e.setUTCDate(e.getUTCDate()+7*i);break;case"y":e=c.prototype.moveYear.call(c.prototype,e,i)}return b(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}var m,n,h,k=e&&e.match(this.nonpunctuation)||[],e=new Date,o={},p=["yyyy","yy","M","MM","m","mm","d","dd"],q={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};q.M=q.MM=q.mm=q.m,q.dd=q.d,e=b(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);var r=f.parts.slice();if(k.length!=r.length&&(r=a(r).filter(function(b,c){return-1!==a.inArray(c,p)}).toArray()),k.length==r.length){for(var l=0,s=r.length;s>l;l++){if(m=parseInt(k[l],10),h=r[l],isNaN(m))switch(h){case"MM":n=a(d[g].months).filter(function(){var a=this.slice(0,k[l].length),b=k[l].slice(0,a.length);return a==b}),m=a.inArray(n[0],d[g].months)+1;break;case"M":n=a(d[g].monthsShort).filter(function(){var a=this.slice(0,k[l].length),b=k[l].slice(0,a.length);return a==b}),m=a.inArray(n[0],d[g].monthsShort)+1}o[h]=m}for(var t,l=0;l<p.length;l++)t=p[l],t in o&&!isNaN(o[t])&&q[t](e,o[t])}return e},formatDate:function(b,c,e){var f={d:b.getUTCDate(),D:d[e].daysShort[b.getUTCDay()],DD:d[e].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:d[e].monthsShort[b.getUTCMonth()],MM:d[e].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};f.dd=(f.d<10?"0":"")+f.d,f.mm=(f.m<10?"0":"")+f.m;for(var b=[],g=a.extend([],c.separators),h=0,i=c.parts.length;i>h;h++)g.length&&b.push(g.shift()),b.push(f[c.parts[h]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};e.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+e.headTemplate+"<tbody></tbody>"+e.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+e.headTemplate+e.contTemplate+e.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=e}(window.jQuery),function(a,b,c,d){"use strict";var e=function(b,c){this.widget="",this.$element=a(b),this.defaultTime=c.defaultTime,this.disableFocus=c.disableFocus,this.isOpen=c.isOpen,this.minuteStep=c.minuteStep,this.modalBackdrop=c.modalBackdrop,this.secondStep=c.secondStep,this.showInputs=c.showInputs,this.showMeridian=c.showMeridian,this.showSeconds=c.showSeconds,this.template=c.template,this.appendWidgetTo=c.appendWidgetTo,this._init()};e.prototype={constructor:e,_init:function(){var b=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":a.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)})):this.$element.on(this.template?{"focus.timepicker":a.proxy(this.showWidget,this),"click.timepicker":a.proxy(this.showWidget,this),"blur.timepicker":a.proxy(this.blurElement,this)}:{"focus.timepicker":a.proxy(this.highlightUnit,this),"click.timepicker":a.proxy(this.highlightUnit,this),"keydown.timepicker":a.proxy(this.elementKeydown,this),"blur.timepicker":a.proxy(this.blurElement,this)}),this.$widget=this.template!==!1?a(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",a.proxy(this.widgetClick,this)):!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){a(this).on({"click.timepicker":function(){a(this).select()},"keydown.timepicker":a.proxy(b.widgetKeydown,b)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=d,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(1===this.hour)this.hour=12;else{if(12===this.hour)return this.hour--,this.toggleMeridian();if(0===this.hour)return this.hour=11,this.toggleMeridian();this.hour--}else 0===this.hour?this.hour=23:this.hour--;this.update()},decrementMinute:function(a){var b;b=a?this.minute-a:this.minute-this.minuteStep,0>b?(this.decrementHour(),this.minute=b+60):this.minute=b,this.update()},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(!0),this.second=a+60):this.second=a,this.update()},elementKeydown:function(a){switch(a.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":a.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(a.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(a.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:a.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:a.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(a.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(a,b,c,d){return a=10>a?"0"+a:a,b=10>b?"0"+b:b,c=10>c?"0"+c:c,a+":"+b+(this.showSeconds?":"+c:"")+(this.showMeridian?" "+d:"")},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(c.selection){a.focus();var b=c.selection.createRange(),d=c.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-d}},getTemplate:function(){var a,b,c,d,e,f;switch(this.showInputs?(b='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',c='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',d='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',e='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(b='<span class="bootstrap-timepicker-hour"></span>',c='<span class="bootstrap-timepicker-minute"></span>',d='<span class="bootstrap-timepicker-second"></span>',e='<span class="bootstrap-timepicker-meridian"></span>'),f='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+b+'</td> <td class="separator">:</td><td>'+c+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+d+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+e+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":a='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">×</a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":a='<div class="bootstrap-timepicker-widget dropdown-menu">'+f+"</div>"}return a},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){this.isOpen!==!1&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),a(c).off("mousedown.timepicker"),this.isOpen=!1)
},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&2>=this.position?this.highlightHour():this.position>=3&&5>=this.position?this.highlightMinute():this.position>=6&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var a=this.$element.get(0);this.highlightedUnit="hour",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(0,2)},0)},highlightMinute:function(){var a=this.$element.get(0);this.highlightedUnit="minute",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(3,5)},0)},highlightSecond:function(){var a=this.$element.get(0);this.highlightedUnit="second",a.setSelectionRange&&setTimeout(function(){a.setSelectionRange(6,8)},0)},highlightMeridian:function(){var a=this.$element.get(0);this.highlightedUnit="meridian",a.setSelectionRange&&(this.showSeconds?setTimeout(function(){a.setSelectionRange(9,11)},0):setTimeout(function(){a.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour)return this.hour++,this.toggleMeridian();12===this.hour&&(this.hour=0)}return 23===this.hour?(this.hour=0,d):(this.hour++,this.update(),d)},incrementMinute:function(a){var b;b=a?this.minute+a:this.minute+this.minuteStep-this.minute%this.minuteStep,b>59?(this.incrementHour(),this.minute=b-60):this.minute=b,this.update()},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(!0),this.second=a-60):this.second=a,this.update()},remove:function(){a("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(a){if(this.$element.val())this.updateFromElementVal();else if("current"===a){var b=new Date,c=b.getHours(),d=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,e=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,f="AM";this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="PM"):f="AM"),this.hour=c,this.minute=d,this.second=e,this.meridian=f,this.update()}else a===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(a)},setTime:function(a){var b,c;this.showMeridian?(b=a.split(" "),c=b[0].split(":"),this.meridian=b[1]):c=a.split(":"),this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:1>this.hour&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":("pm"===this.meridian||"p"===this.meridian)&&(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:0>this.hour&&(this.hour=0),0>this.minute?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var b=this;a(c).on("mousedown.timepicker",function(c){0===a(c.target).closest(".bootstrap-timepicker-widget").length&&b.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var a=this.$element.val();a&&this.setTime(a)},updateWidget:function(){if(this.$widget!==!1){var a=10>this.hour?"0"+this.hour:this.hour,b=10>this.minute?"0"+this.minute:this.minute,c=10>this.second?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(a),this.$widget.find("input.bootstrap-timepicker-minute").val(b),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(c),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(a),this.$widget.find("span.bootstrap-timepicker-minute").text(b),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(c),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(b)}},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("a").data("action");c&&this[c]()},widgetKeydown:function(b){var c=a(b.target).closest("input"),d=c.attr("name");switch(b.keyCode){case 9:if(this.showMeridian){if("meridian"===d)return this.hideWidget()}else if(this.showSeconds){if("second"===d)return this.hideWidget()}else if("minute"===d)return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(b.preventDefault(),d){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(b.preventDefault(),d){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},a.fn.timepicker=function(b){var c=Array.apply(null,arguments);return c.shift(),this.each(function(){var d=a(this),f=d.data("timepicker"),g="object"==typeof b&&b;f||d.data("timepicker",f=new e(this,a.extend({},a.fn.timepicker.defaults,g,a(this).data()))),"string"==typeof b&&f[b].apply(f,c)})},a.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"},a.fn.timepicker.Constructor=e}(jQuery,window,document),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function d(){}function e(a){g(this,a)}function f(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,i=a.minutes||a.minute||a.m||0,j=a.seconds||a.second||a.s||0,k=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=k+1e3*j+6e4*i+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,j+=h(k/1e3),b.seconds=j%60,i+=h(j/60),b.minutes=i%60,g+=h(i/60),b.hours=g%24,f+=h(g/24),f+=7*e,b.days=f%30,d+=h(f/30),b.months=d%12,c+=h(d/12),b.years=c}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a,b){return b.abbr=a,J[a]||(J[a]=new d),J[a].set(b),J[a]}function n(a){return a?(!J[a]&&K&&require("./lang/"+a),J[a]):F.fn._lang}function o(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function p(a){var b,c,d=a.match(M);for(b=0,c=d.length;c>b;b++)d[b]=eb[d[b]]?eb[d[b]]:o(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function q(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&N.test(b);)b=b.replace(N,c);return bb[b]||(bb[b]=p(b)),bb[b](a)}function r(a){switch(a){case"DDDD":return Q;case"YYYY":return R;case"YYYYY":return S;case"S":case"SS":case"SSS":case"DDD":return P;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return T;case"X":return W;case"Z":case"ZZ":return U;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return O;default:return new RegExp(a.replace("\\",""))}}function s(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=n(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,d=(b+"").match($),d&&d[1]&&(c._tzh=~~d[1]),d&&d[2]&&(c._tzm=~~d[2]),d&&"+"===d[0]&&(c._tzh=-c._tzh,c._tzm=-c._tzm)}null==b&&(c._isValid=!1)}function t(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=a._tzh||0,d[4]+=a._tzm||0,c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function u(a){var b,c,d=a._f.match(M),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(r(d[b]).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),eb[d[b]]&&s(d[b],c,a);a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),t(a)}function v(a){for(var b,c,d,f,h=99;a._f.length;){if(b=g({},a),b._f=a._f.pop(),u(b),c=new e(b),c.isValid()){d=c;break}f=l(b._a,c.toArray()),h>f&&(h=f,d=c)}g(a,d)}function w(a){var b,c=a._i;if(X.exec(c)){for(a._f="YYYY-MM-DDT",b=0;4>b;b++)if(Z[b][1].exec(c)){a._f+=Z[b][0];break}U.exec(c)&&(a._f+=" Z"),u(a)}else a._d=new Date(c)}function x(b){var c=b._i,d=L.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?w(b):k(c)?(b._a=c.slice(0),t(b)):b._d=new Date(c instanceof Date?+c:c)}function y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function z(a,b,c){var d=I(Math.abs(a)/1e3),e=I(d/60),f=I(e/60),g=I(f/24),h=I(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",I(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,y.apply({},i)}function A(a,b,c){var d=c-b,e=c-a.day();return e>d&&(e-=7),d-7>e&&(e+=7),Math.ceil(F(a).add("d",e).dayOfYear()/7)}function B(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=n().preparse(b)),F.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?v(a):u(a):x(a),new e(a))}function C(a,b){F.fn[a]=F.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function D(a){F.duration.fn[a]=function(){return this._data[a]}}function E(a,b){F.duration.fn["as"+a]=function(){return+this/b}}for(var F,G,H="2.0.0",I=Math.round,J={},K="undefined"!=typeof module&&module.exports,L=/^\/?Date\((\-?\d+)/i,M=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,O=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,R=/\d{1,4}/,S=/[+\-]?\d{1,6}/,T=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,U=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,W=/[\+\-]?\d+(\.\d{1,3})?/,X=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",Z=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],$=/([\+\-]|\d\d)/gi,_="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ab={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},bb={},cb="DDD w W M D d".split(" "),db="M D H h m s w W".split(" "),eb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},X:function(){return this.unix()}};cb.length;)G=cb.pop(),eb[G+"o"]=c(eb[G]);for(;db.length;)G=db.pop(),eb[G+G]=b(eb[G],2);for(eb.DDDD=b(eb.DDD,3),d.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=F([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return A(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},F=function(a,b,c){return B({_i:a,_f:b,_l:c,_isUTC:!1})},F.utc=function(a,b,c){return B({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},F.unix=function(a){return F(1e3*a)},F.duration=function(a,b){var c,d=F.isDuration(a),e="number"==typeof a,g=d?a._data:e?{}:a;return e&&(b?g[b]=a:g.milliseconds=a),c=new f(g),d&&a.hasOwnProperty("_lang")&&(c._lang=a._lang),c},F.version=H,F.defaultFormat=Y,F.lang=function(a,b){return a?(b?m(a,b):J[a]||n(a),void(F.duration.fn._lang=F.fn._lang=n(a))):F.fn._lang._abbr},F.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),n(a)},F.isMoment=function(a){return a instanceof e},F.isDuration=function(a){return a instanceof f},F.fn=e.prototype={clone:function(){return F(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return F.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?F.utc(this._a):F(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=q(this,a||F.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?F(a).utc():F(a).local(),g=6e4*(this.zone()-f.zone());return b&&(b=b.replace(/s$/,"")),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-F(this).startOf("month")-(f-F(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:h(e)},from:function(a,b){return F.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(F(),a)},calendar:function(){var a=this.diff(F().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<F([this.year()]).zone()||this.zone()<F([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a=a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+F(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+F(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+F(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return F.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=I((F(this).startOf("day")-F(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},isoWeek:function(a){var b=A(this,1,4);return null==a?b:this.add("d",7*(a-b))},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},lang:function(b){return b===a?this._lang:(this._lang=n(b),this)}},G=0;G<_.length;G++)C(_[G].toLowerCase().replace(/s$/,""),_[G]);C("year","FullYear"),F.fn.days=F.fn.day,F.fn.weeks=F.fn.week,F.fn.isoWeeks=F.fn.isoWeek,F.duration.fn=f.prototype={weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},lang:F.fn.lang};for(G in ab)ab.hasOwnProperty(G)&&(E(G,ab[G]),D(G.toLowerCase()));E("Weeks",6048e5),F.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),K&&(module.exports=F),"undefined"==typeof ender&&(this.moment=F),"function"==typeof define&&define.amd&&define("moment",[],function(){return F})}.call(this),!function(a){var b=function(b,c,d){var e,f="object"==typeof c;this.startDate=moment().startOf("day"),this.endDate=moment().startOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.ranges={},this.opens="right",this.buttonClasses=["btn","btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},this.element=a(b),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:a.proxy(this.show,this),focus:a.proxy(this.show,this)}):this.element.on("click",a.proxy(this.show,this)),e=this.locale,f&&("object"==typeof c.locale&&a.each(e,function(a,b){e[a]=c.locale[a]||b}),c.applyClass&&(this.applyClass=c.applyClass),c.cancelClass&&(this.cancelClass=c.cancelClass));var g='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left; padding-left: 11px"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.cancelClass+' cancelBtn">'+this.locale.cancelLabel+"</button></div></div></div>";if(this.container=a(g).appendTo("body"),f){if("string"==typeof c.format&&(this.format=c.format),"string"==typeof c.separator&&(this.separator=c.separator),"string"==typeof c.startDate&&(this.startDate=moment(c.startDate,this.format)),"string"==typeof c.endDate&&(this.endDate=moment(c.endDate,this.format)),"string"==typeof c.minDate&&(this.minDate=moment(c.minDate,this.format)),"string"==typeof c.maxDate&&(this.maxDate=moment(c.maxDate,this.format)),"object"==typeof c.startDate&&(this.startDate=moment(c.startDate)),"object"==typeof c.endDate&&(this.endDate=moment(c.endDate)),"object"==typeof c.minDate&&(this.minDate=moment(c.minDate)),"object"==typeof c.maxDate&&(this.maxDate=moment(c.maxDate)),"object"==typeof c.ranges){for(var h in c.ranges){var i=moment(c.ranges[h][0]),j=moment(c.ranges[h][1]);this.minDate&&i.isBefore(this.minDate)&&(i=moment(this.minDate)),this.maxDate&&j.isAfter(this.maxDate)&&(j=moment(this.maxDate)),this.minDate&&j.isBefore(this.minDate)||this.maxDate&&i.isAfter(this.maxDate)||(this.ranges[h]=[i,j])}var k="<ul>";for(var h in this.ranges)k+="<li>"+h+"</li>";k+="<li>"+this.locale.customRangeLabel+"</li>",k+="</ul>",this.container.find(".ranges").prepend(k)}if("object"==typeof c.dateLimit&&(this.dateLimit=c.dateLimit),"object"==typeof c.locale&&"number"==typeof c.locale.firstDay){this.locale.firstDay=c.locale.firstDay;for(var l=c.locale.firstDay;l>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),l--}"string"==typeof c.opens&&(this.opens=c.opens),"boolean"==typeof c.showWeekNumbers&&(this.showWeekNumbers=c.showWeekNumbers),"string"==typeof c.buttonClasses&&(this.buttonClasses=[c.buttonClasses]),"object"==typeof c.buttonClasses&&(this.buttonClasses=c.buttonClasses),"boolean"==typeof c.showDropdowns&&(this.showDropdowns=c.showDropdowns),"boolean"==typeof c.timePicker&&(this.timePicker=c.timePicker),"number"==typeof c.timePickerIncrement&&(this.timePickerIncrement=c.timePickerIncrement),"boolean"==typeof c.timePicker12Hour&&(this.timePicker12Hour=c.timePicker12Hour)}this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.startOf("day"));var m=this.container;if(a.each(this.buttonClasses,function(a,b){m.find("button").addClass(b)}),"right"==this.opens){var n=this.container.find(".calendar.left"),o=this.container.find(".calendar.right");n.removeClass("left").addClass("right"),o.removeClass("right").addClass("left")}if(("undefined"==typeof c||"undefined"==typeof c.ranges)&&(this.container.find(".calendar").show(),this.move()),"function"==typeof d&&(this.cb=d),this.container.addClass("opens"+this.opens),(!f||"undefined"==typeof c.startDate&&"undefined"==typeof c.endDate)&&a(this.element).is("input[type=text]")){var i,j,p=a(this.element).val(),q=p.split(this.separator);2==q.length&&(i=moment(q[0],this.format),j=moment(q[1],this.format)),null!=i&&null!=j&&(this.startDate=i,this.endDate=j)}this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},this.container.on("mousedown",a.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",a.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",a.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button.applyBtn",a.proxy(this.clickApply,this)),this.container.find(".ranges").on("click","button.cancelBtn",a.proxy(this.clickCancel,this)),this.container.find(".ranges").on("click",".daterangepicker_start_input",a.proxy(this.showCalendars,this)),this.container.find(".ranges").on("click",".daterangepicker_end_input",a.proxy(this.showCalendars,this)),this.container.find(".calendar").on("click","td.available",a.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",a.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",a.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",a.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",a.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",a.proxy(this.updateView,this)),this.container.find(".calendar").on("change","select.yearselect",a.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.monthselect",a.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.hourselect",a.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.minuteselect",a.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.ampmselect",a.proxy(this.updateTime,this)),this.element.on("keyup",a.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};b.prototype={constructor:b,mousedown:function(a){a.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var a=this.element.val().split(this.separator),b=moment(a[0],this.format),c=moment(a[1],this.format);null!=b&&null!=c&&(c.isBefore(b)||(this.startDate=b,this.endDate=c,this.notify(),this.updateCalendars()))}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate)},move:function(){var b=a(this.container).find(".ranges").outerWidth();if(a(this.container).find(".calendar").is(":visible")){var c=24;b+=2*a(this.container).find(".calendar").outerWidth()+c}"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight(),right:a(window).width()-this.element.offset().left-this.element.outerWidth(),left:"auto","min-width":b}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left,right:"auto","min-width":b}),this.container.offset().left+this.container.outerWidth()>a(window).width()&&this.container.css({left:"auto",right:0}))},show:function(b){this.container.show(),this.move(),b&&(b.stopPropagation(),b.preventDefault()),a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger("shown",{target:b.target,picker:this})},hide:function(){this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),a(document).off("mousedown",this.hide),this.element.trigger("hidden",{picker:this})},enterRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.updateView();else{var c=this.ranges[b];this.container.find("input[name=daterangepicker_start]").val(c[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(c[1].format(this.format))}},showCalendars:function(){this.container.find(".calendar").show(),this.move()},updateInputText:function(){this.element.is("input")&&this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))},clickRange:function(a){var b=a.target.innerHTML;if(b==this.locale.customRangeLabel)this.showCalendars();else{var c=this.ranges[b];this.startDate=c[0],this.endDate=c[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.container.find(".calendar").hide(),this.hide()
}},clickPrev:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(b){var c=a(b.target).parents(".calendar");c.hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");f.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[d][e].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[d][e].format(this.format))},clickDate:function(b){var c=a(b.target).attr("data-title"),d=c.substr(1,1),e=c.substr(3,1),f=a(b.target).parents(".calendar");if(f.hasClass("left")){var g=this.leftCalendar.calendar[d][e],h=this.endDate;if("object"==typeof this.dateLimit){var i=moment(g).add(this.dateLimit).startOf("day");h.isAfter(i)&&(h=i)}}else{var g=this.startDate,h=this.rightCalendar.calendar[d][e];if("object"==typeof this.dateLimit){var j=moment(h).subtract(this.dateLimit).startOf("day");g.isBefore(j)&&(g=j)}}f.find("td").removeClass("active"),g.isSame(h)||g.isBefore(h)?(a(b.target).addClass("active"),this.startDate=g,this.endDate=h):g.isAfter(h)&&(a(b.target).addClass("active"),this.startDate=g,this.endDate=moment(g).add("day",1).startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars()},clickApply:function(){this.updateInputText(),this.hide()},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.updateView(),this.updateCalendars(),this.hide()},updateMonthYear:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=this.container.find(".calendar.left");c||(d=this.container.find(".calendar.right"));var e=d.find(".monthselect").val(),f=d.find(".yearselect").val();c?this.leftCalendar.month.month(e).year(f):this.rightCalendar.month.month(e).year(f),this.updateCalendars()},updateTime:function(b){var c=a(b.target).closest(".calendar").hasClass("left"),d=this.container.find(".calendar.left");c||(d=this.container.find(".calendar.right"));var e=parseInt(d.find(".hourselect").val()),f=parseInt(d.find(".minuteselect").val());if(this.timePicker12Hour){var g=d.find(".ampmselect").val();"PM"==g&&12>e&&(e+=12),"AM"==g&&12==e&&(e=0)}if(c){var h=this.startDate;h.hour(e),h.minute(f),this.startDate=h,this.leftCalendar.month.hour(e).minute(f)}else{var i=this.endDate;i.hour(e),i.minute(f),this.endDate=i,this.rightCalendar.month.hour(e).minute(f)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var a=!0,b=0;for(var c in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[c][0])&&this.endDate.isSame(this.ranges[c][1])&&(a=!1,this.container.find(".ranges li:eq("+b+")").addClass("active")):this.startDate.format("YYYY-MM-DD")==this.ranges[c][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[c][1].format("YYYY-MM-DD")&&(a=!1,this.container.find(".ranges li:eq("+b+")").addClass("active")),b++;a&&this.container.find(".ranges li:last").addClass("active")},buildCalendar:function(a,b,c,d){for(var e=moment([b,a,1]),f=moment(e).subtract("month",1).month(),g=moment(e).subtract("month",1).year(),h=moment([g,f]).daysInMonth(),i=e.day(),j=[],k=0;6>k;k++)j[k]=[];var l=h-i+this.locale.firstDay+1;l>h&&(l-=7),i==this.locale.firstDay&&(l=h-6);for(var m=moment([g,f,l,c,d]),k=0,n=0,o=0;42>k;k++,n++,m=moment(m).add("day",1))k>0&&n%7==0&&(n=0,o++),j[o][n]=m;return j},renderDropdowns:function(a,b,c){for(var d=a.month(),e='<select class="monthselect">',f=!1,g=!1,h=0;12>h;h++)(!f||h>=b.month())&&(!g||h<=c.month())&&(e+="<option value='"+h+"'"+(h===d?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>");e+="</select>";for(var i=a.year(),j=c&&c.year()||i+5,k=b&&b.year()||i-50,l='<select class="yearselect">',m=k;j>=m;m++)l+='<option value="'+m+'"'+(m===i?' selected="selected"':"")+">"+m+"</option>";return l+="</select>",e+l},renderCalendar:function(b,c,d,e){var f='<div class="calendar-date">';f+='<table class="table-condensed">',f+="<thead>",f+="<tr>",this.showWeekNumbers&&(f+="<th></th>"),f+=!d||d.isBefore(b[1][1])?'<th class="prev available"><i class="icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var g=this.locale.monthNames[b[1][1].month()]+b[1][1].format(" YYYY");this.showDropdowns&&(g=this.renderDropdowns(b[1][1],d,e)),f+='<th colspan="5" style="width: auto">'+g+"</th>",f+=!e||e.isAfter(b[1][1])?'<th class="next available"><i class="icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",f+="</tr>",f+="<tr>",this.showWeekNumbers&&(f+='<th class="week">'+this.locale.weekLabel+"</th>"),a.each(this.locale.daysOfWeek,function(a,b){f+="<th>"+b+"</th>"}),f+="</tr>",f+="</thead>",f+="<tbody>";for(var h=0;6>h;h++){f+="<tr>",this.showWeekNumbers&&(f+='<td class="week">'+b[h][0].week()+"</td>");for(var i=0;7>i;i++){var j="available ";j+=b[h][i].month()==b[1][1].month()?"":"off",d&&b[h][i].isBefore(d)||e&&b[h][i].isAfter(e)?j=" off disabled ":b[h][i].format("YYYY-MM-DD")==c.format("YYYY-MM-DD")?(j+=" active ",b[h][i].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(j+=" start-date "),b[h][i].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(j+=" end-date ")):b[h][i]>=this.startDate&&b[h][i]<=this.endDate&&(j+=" in-range ",b[h][i].isSame(this.startDate)&&(j+=" start-date "),b[h][i].isSame(this.endDate)&&(j+=" end-date "));var k="r"+h+"c"+i;f+='<td class="'+j.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+k+'">'+b[h][i].date()+"</td>"}f+="</tr>"}if(f+="</tbody>",f+="</table>",f+="</div>",this.timePicker){f+='<div class="calendar-time">',f+='<select class="hourselect">';var l=0,m=23,n=c.hour();this.timePicker12Hour&&(l=1,m=12,n>=12&&(n-=12),0==n&&(n=12));for(var o=l;m>=o;o++)f+=o==n?'<option value="'+o+'" selected="selected">'+o+"</option>":'<option value="'+o+'">'+o+"</option>";f+="</select> : ",f+='<select class="minuteselect">';for(var o=0;60>o;o+=this.timePickerIncrement){var p=o;10>p&&(p="0"+p),f+=o==c.minute()?'<option value="'+o+'" selected="selected">'+p+"</option>":'<option value="'+o+'">'+p+"</option>"}f+="</select> ",this.timePicker12Hour&&(f+='<select class="ampmselect">',f+=c.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',f+="</select>"),f+="</div>"}return f}},a.fn.daterangepicker=function(c,d){return this.each(function(){var e=a(this);e.data("daterangepicker")||e.data("daterangepicker",new b(e,c,d))}),this}}(window.jQuery),!function(a){var b=function(a){this.value={h:1,s:1,b:1,a:1},this.setColor(a)};b.prototype={constructor:b,setColor:function(b){b=b.toLowerCase();var c=this;a.each(d.stringParsers,function(a,e){var f=e.re.exec(b),g=f&&e.parse(f),h=e.space||"rgba";return g?(c.value="hsla"===h?d.RGBtoHSB.apply(null,d.HSLtoRGB.apply(null,g)):d.RGBtoHSB.apply(null,g),!1):void 0})},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setLightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d||this.value.a}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return"#"+(1<<24|parseInt(e.r)<<16|parseInt(e.g)<<8|parseInt(e.b)).toString(16).substr(1)},toHSL:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b);var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&1>=f?f:2-f,f/=2,g>1&&(g=1),{h:e,s:g,l:f,a:d||this.value.a}}};var c=function(b,c){this.element=a(b);var e=c.format||this.element.data("color-format")||"hex";this.format=d.translateFormats[e],this.isInput=this.element.is("input"),this.component=this.element.is(".color")?this.element.find(".add-on"):!1,this.picker=a(d.template).appendTo("body").on("mousedown",a.proxy(this.mousedown,this)),this.isInput?this.element.on({focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on({click:a.proxy(this.show,this)}):this.element.on({click:a.proxy(this.show,this)}),("rgba"===e||"hsla"===e)&&(this.picker.addClass("alpha"),this.alpha=this.picker.find(".colorpicker-alpha")[0].style),this.component?(this.picker.find(".colorpicker-color").hide(),this.preview=this.element.find("i")[0].style):this.preview=this.picker.find("div:last")[0].style,this.base=this.picker.find("div:first")[0].style,this.update()};c.prototype={constructor:c,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),this.isInput||b&&(b.stopPropagation(),b.preventDefault()),a(document).on({mousedown:a.proxy(this.hide,this)}),this.element.trigger({type:"show",color:this.color})},update:function(){this.color=new b(this.isInput?this.element.prop("value"):this.element.data("color")),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor()},setValue:function(a){this.color=new b(a),this.picker.find("i").eq(0).css({left:100*this.color.value.s,top:100-100*this.color.value.b}).end().eq(1).css("top",100*(1-this.color.value.h)).end().eq(2).css("top",100*(1-this.color.value.a)),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.isInput?this.element.prop("value",this.format.call(this)):(a(document).off({mousedown:this.hide}),this.component&&this.element.find("input").prop("value",this.format.call(this)),this.element.data("color",this.format.call(this))),this.element.trigger({type:"hide",color:this.color})},place:function(){var a=this.component?this.component.offset():this.element.offset();this.picker.css({top:a.top+this.height,left:a.left})},previewColor:function(){try{this.preview.backgroundColor=this.format.call(this)}catch(a){this.preview.backgroundColor=this.color.toHex()}this.base.backgroundColor=this.color.toHex(this.color.value.h,1,1,1),this.alpha&&(this.alpha.backgroundColor=this.color.toHex())},pointer:null,slider:null,mousedown:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target),e=c.closest("div");if(!e.is(".colorpicker")){if(e.is(".colorpicker-saturation"))this.slider=a.extend({},d.sliders.saturation);else if(e.is(".colorpicker-hue"))this.slider=a.extend({},d.sliders.hue);else{if(!e.is(".colorpicker-alpha"))return!1;this.slider=a.extend({},d.sliders.alpha)}var f=e.offset();this.slider.knob=e.find("i")[0].style,this.slider.left=b.pageX-f.left,this.slider.top=b.pageY-f.top,this.pointer={left:b.pageX,top:b.pageY},a(document).on({mousemove:a.proxy(this.mousemove,this),mouseup:a.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.slider.maxLeft,this.slider.left+((a.pageX||this.pointer.left)-this.pointer.left))),c=Math.max(0,Math.min(this.slider.maxTop,this.slider.top+((a.pageY||this.pointer.top)-this.pointer.top)));return this.slider.knob.left=b+"px",this.slider.knob.top=c+"px",this.slider.callLeft&&this.color[this.slider.callLeft].call(this.color,b/100),this.slider.callTop&&this.color[this.slider.callTop].call(this.color,c/100),this.previewColor(),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(b){return b.stopPropagation(),b.preventDefault(),a(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),!1}},a.fn.colorpicker=function(b,d){return this.each(function(){var e=a(this),f=e.data("colorpicker"),g="object"==typeof b&&b;f||e.data("colorpicker",f=new c(this,a.extend({},a.fn.colorpicker.defaults,g))),"string"==typeof b&&f[b](d)})},a.fn.colorpicker.defaults={},a.fn.colorpicker.Constructor=c;var d={translateFormats:{rgb:function(){var a=this.color.toRGB();return"rgb("+a.r+","+a.g+","+a.b+")"},rgba:function(){var a=this.color.toRGB();return"rgba("+a.r+","+a.g+","+a.b+","+a.a+")"},hsl:function(){var a=this.color.toHSL();return"hsl("+Math.round(360*a.h)+","+Math.round(100*a.s)+"%,"+Math.round(100*a.l)+"%)"},hsla:function(){var a=this.color.toHSL();return"hsla("+Math.round(360*a.h)+","+Math.round(100*a.s)+"%,"+Math.round(100*a.l)+"%,"+a.a+")"},hex:function(){return this.color.toHex()}},sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g==a?(b-c)/h:g==b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:e||1,s:f,b:g,a:d||1}},HueToRGB:function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,e){0>b&&(b=0);var f;f=.5>=c?c*(1+b):c+b-c*b;var g=2*c-f,h=a+1/3,i=a,j=a-1/3,k=Math.round(255*d.HueToRGB(g,f,h)),l=Math.round(255*d.HueToRGB(g,f,i)),m=Math.round(255*d.HueToRGB(g,f,j));return[k,l,m,e||1]},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}}],template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'}}(window.jQuery),function(a){"use strict";var b={},c=Math.max,d=Math.min;b.c={},b.c.d=a(document),b.c.t=function(a){return a.originalEvent.touches.length-1},b.o=function(){var c=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.usesExcanvas="undefined"!=typeof G_vmlCanvasManager,this.run=function(){var b=function(a,b){var d;for(d in b)c.o[d]=b[d];c.init(),c._configure()._draw()};if(!this.$.data("kontroled"))return this.$.data("kontroled",!0),this.extend(),this.o=a.extend({min:this.$.data("min")||0,max:this.$.data("max")||100,stopper:!0,readOnly:this.$.data("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")||.35,width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inline:!1,draw:null,change:null,cancel:null,release:null},this.o),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(b){var d=a(this);c.i[b]=d,c.v[b]=d.val(),d.bind("change",function(){var a={};a[b]=d.val(),c.val(a)})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.$.val(),""==this.v&&(this.v=this.o.min),this.$.bind("change",function(){c.val(c.$.val())})),!this.o.displayInput&&this.$.hide(),this.$c=a(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$.wrap(a('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>')).before(this.$c),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.usesExcanvas&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext("2d"),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",b).parent().bind("configure",b),this._listen()._configure()._xy().init(),this.isInit=!0,this._draw(),this},this._draw=function(){var a=!0;c.g=c.c,c.clear(),c.dH&&(a=c.dH()),a!==!1&&c.draw()},this._touch=function(a){var d=function(a){var b=c.xy2val(a.originalEvent.touches[c.t].pageX,a.originalEvent.touches[c.t].pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(b),c._draw()))};return this.t=b.c.t(a),d(a),b.c.d.bind("touchmove.k",d).bind("touchend.k",function(){b.c.d.unbind("touchmove.k touchend.k"),c.rH&&c.rH(c.cv)===!1||c.val(c.cv)}),this},this._mouse=function(a){var d=function(a){var b=c.xy2val(a.pageX,a.pageY);b!=c.cv&&(c.cH&&c.cH(b)===!1||(c.change(b),c._draw()))};return d(a),b.c.d.bind("mousemove.k",d).bind("keyup.k",function(a){if(27===a.keyCode){if(b.c.d.unbind("mouseup.k mousemove.k keyup.k"),c.eH&&c.eH()===!1)return;c.cancel()}}).bind("mouseup.k",function(){b.c.d.unbind("mousemove.k mouseup.k keyup.k"),c.rH&&c.rH(c.cv)===!1||c.val(c.cv)}),this},this._xy=function(){var a=this.$c.offset();return this.x=a.left,this.y=a.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(a){a.preventDefault(),c._xy()._mouse(a)}).bind("touchstart",function(a){a.preventDefault(),c._xy()._touch(a)}),this.listen()),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(a,b){var c;return a=a.substring(1,7),c=[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)],"rgba("+c[0]+","+c[1]+","+c[2]+","+b+")"},this.copy=function(a,b){for(var c in a)b[c]=a[c]}},b.Dial=function(){b.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=a.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(a){return null==a?this.v:(this.cv=this.o.stopper?c(d(a,this.o.max),this.o.min):a,this.v=this.cv,this.$.val(this.v),this._draw(),void 0)},this.xy2val=function(a,b){var e,f;return e=Math.atan2(a-(this.x+this.w2),-(b-this.y-this.w2))-this.angleOffset,this.angleArc!=this.PI2&&0>e&&e>-.5?e=0:0>e&&(e+=this.PI2),f=~~(.5+e*(this.o.max-this.o.min)/this.angleArc)+this.o.min,this.o.stopper&&(f=c(d(f,this.o.max),this.o.min)),f},this.listen=function(){var b,e,f=this,g=function(a){a.preventDefault();var b=a.originalEvent,c=b.detail||b.wheelDeltaX,d=b.detail||b.wheelDeltaY,e=parseInt(f.$.val()||f.o.min)+(c>0||d>0?1:0>c||0>d?-1:0);f.cH&&f.cH(e)===!1||f.val(e)},h=1,i={37:-1,38:1,39:1,40:-1};this.$.bind("keydown",function(g){var j=g.keyCode;if(j>=96&&105>=j&&(j=g.keyCode=j-48),b=parseInt(String.fromCharCode(j)),isNaN(b)&&(13!==j&&8!==j&&9!==j&&189!==j&&g.preventDefault(),a.inArray(j,[37,38,39,40])>-1)){g.preventDefault();var k=parseInt(f.$.val())+i[j]*h;f.o.stopper&&(k=c(d(k,f.o.max),f.o.min)),f.change(k),f._draw(),e=window.setTimeout(function(){h*=2},30)}}).bind("keyup",function(){isNaN(b)?e&&(window.clearTimeout(e),e=null,h=1,f.val(f.$.val())):f.$.val()>f.o.max&&f.$.val(f.o.max)||f.$.val()<f.o.min&&f.$.val(f.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",g),this.$.bind("mousewheel DOMMouseScroll",g)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.o.width/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2,this.lineWidth=this.xy*this.o.thickness,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var a=c(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.o.width/2+4>>0)+"px",height:(this.o.width/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.o.width/3>>0)+"px","margin-left":"-"+(3*this.o.width/4+2>>0)+"px",border:0,background:"none",font:"bold "+(this.o.width/a>>0)+"px Arial","text-align":"center",color:this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(a){this.cv=a,this.$.val(a)},this.angle=function(a){return(a-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.draw=function(){var a,b,c=this.g,d=this.angle(this.cv),e=this.startAngle,f=e+d,g=1;c.lineWidth=this.lineWidth,this.o.cursor&&(e=f-this.cursorExt)&&(f+=this.cursorExt),c.beginPath(),c.strokeStyle=this.o.bgColor,c.arc(this.xy,this.xy,this.radius,this.endAngle,this.startAngle,!0),c.stroke(),this.o.displayPrevious&&(b=this.startAngle+this.angle(this.v),a=this.startAngle,this.o.cursor&&(a=b-this.cursorExt)&&(b+=this.cursorExt),c.beginPath(),c.strokeStyle=this.pColor,c.arc(this.xy,this.xy,this.radius,a,b,!1),c.stroke(),g=this.cv==this.v),c.beginPath(),c.strokeStyle=g?this.o.fgColor:this.fgColor,c.arc(this.xy,this.xy,this.radius,e,f,!1),c.stroke()},this.cancel=function(){this.val(this.v)}},a.fn.dial=a.fn.knob=function(c){return this.each(function(){var d=new b.Dial;d.o=c,d.$=a(this),d.run()}).parent()}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["../../../../../../../../."],a):a(window.jQuery||window.$)}(function(a){var b,c={className:"autosizejs",append:"",callback:!1,resizeDelay:10},d='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',e=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],f=a(d).data("autosize",!0)[0];f.style.lineHeight="99px","99px"===a(f).css("lineHeight")&&e.push("lineHeight"),f.style.lineHeight="",a.fn.autosize=function(d){return d=a.extend({},c,d||{}),f.parentNode!==document.body&&a(document.body).append(f),this.each(function(){function c(){var b,c;"getComputedStyle"in window?(b=window.getComputedStyle(m),c=m.getBoundingClientRect().width,a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){c-=parseInt(b[d],10)}),f.style.width=c+"px"):f.style.width=Math.max(n.width(),0)+"px"}function g(){var g={};if(b=m,f.className=d.className,j=parseInt(n.css("maxHeight"),10),a.each(e,function(a,b){g[b]=n.css(b)}),a(f).css(g),c(),window.chrome){var h=m.style.width;m.style.width="0px",m.offsetWidth,m.style.width=h}}function h(){var a,e;b!==m?g():c(),f.value=m.value+d.append,f.style.overflowY=m.style.overflowY,e=parseInt(m.style.height,10),f.scrollTop=0,f.scrollTop=9e4,a=f.scrollTop,j&&a>j?(m.style.overflowY="scroll",a=j):(m.style.overflowY="hidden",k>a&&(a=k)),a+=o,e!==a&&(m.style.height=a+"px",p&&d.callback.call(m,m))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(d.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(d.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width();n.data("autosize")||(n.data("autosize",!0),("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))&&(o=n.outerHeight()-n.height()),k=Math.max(parseInt(n.css("minHeight"),10)-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===n.css("resize")||"vertical"===n.css("resize")?"none":"horizontal"}),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),d.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})}}),function(a){a.fn.inputlimiter=function(b){{var c=a.extend({},a.fn.inputlimiter.defaults,b);a(this)}c.boxAttach&&!a("#"+c.boxId).length&&(a("<div/>").appendTo("body").attr({id:c.boxId,"class":c.boxClass}).css({position:"absolute"}).hide(),a.fn.bgiframe&&a("#"+c.boxId).bgiframe());var d=function(){var b=a(this),d=g(b.val());!c.allowExceed&&d>c.limit&&b.val(h(b.val())),c.boxAttach&&a("#"+c.boxId).css({width:b.outerWidth()-(a("#"+c.boxId).outerWidth()-a("#"+c.boxId).width())+"px",left:b.offset().left+"px",top:b.offset().top+b.outerHeight()-1+"px","z-index":2e3});var e=c.limit-d>0?c.limit-d:0,f=c.remTextFilter(c,e),i=c.limitTextFilter(c);if(c.limitTextShow){a("#"+c.boxId).html(f+" "+i);var j=a("<span/>").appendTo("body").attr({id:"19cc9195583bfae1fad88e19d443be7a","class":c.boxClass}).html(f+" "+i).innerWidth();a("#19cc9195583bfae1fad88e19d443be7a").remove(),j>a("#"+c.boxId).innerWidth()&&a("#"+c.boxId).html(f+"<br />"+i),a("#"+c.boxId).show()}else a("#"+c.boxId).html(f).show()},e=function(b){var d=g(a(this).val());if(!c.allowExceed&&d>c.limit){var e=b.ctrlKey||b.altKey||b.metaKey;if(!e&&b.which>=32&&b.which<=122&&this.selectionStart===this.selectionEnd)return!1}},f=function(){var b=a(this);if(count=g(b.val()),!c.allowExceed&&count>c.limit&&b.val(h(b.val())),c.boxAttach)a("#"+c.boxId).fadeOut("fast");else if(c.remTextHideOnBlur){var d=c.limitText;d=d.replace(/\%n/g,c.limit),d=d.replace(/\%s/g,1===c.limit?"":"s"),a("#"+c.boxId).html(d)}},g=function(b){if("words"===c.limitBy.toLowerCase())return b.length>0?a.trim(b).replace(/\ +(?= )/g,"").split(" ").length:0;var d=b.length,e=b.match(/\n/g);return e&&c.lineReturnCount>1&&(d+=e.length*(c.lineReturnCount-1)),d},h=function(b){return"words"===c.limitBy.toLowerCase()?a.trim(b).replace(/\ +(?= )/g,"").split(" ").splice(0,c.limit).join(" ")+" ":b.substring(0,c.limit)};a(this).each(function(){var g=a(this);(!b||!b.limit)&&c.useMaxlength&&parseInt(g.attr("maxlength"))>0&&parseInt(g.attr("maxlength"))!=c.limit?g.inputlimiter(a.extend({},c,{limit:parseInt(g.attr("maxlength"))})):(!c.allowExceed&&c.useMaxlength&&"characters"===c.limitBy.toLowerCase()&&g.attr("maxlength",c.limit),g.unbind(".inputlimiter"),g.bind("keyup.inputlimiter",d),g.bind("keypress.inputlimiter",e),g.bind("blur.inputlimiter",f))})},a.fn.inputlimiter.remtextfilter=function(a,b){var c=a.remText;return 0===b&&null!==a.remFullText&&(c=a.remFullText),c=c.replace(/\%n/g,b),c=c.replace(/\%s/g,a.zeroPlural?1===b?"":"s":1>=b?"":"s")},a.fn.inputlimiter.limittextfilter=function(a){var b=a.limitText;return b=b.replace(/\%n/g,a.limit),b=b.replace(/\%s/g,a.limit<=1?"":"s")},a.fn.inputlimiter.defaults={limit:255,boxAttach:!0,boxId:"limiterBox",boxClass:"limiterBox",remText:"%n character%s remaining.",remTextFilter:a.fn.inputlimiter.remtextfilter,remTextHideOnBlur:!0,remFullText:null,limitTextShow:!0,limitText:"Field limited to %n character%s.",limitTextFilter:a.fn.inputlimiter.limittextfilter,zeroPlural:!0,allowExceed:!1,useMaxlength:!0,limitBy:"characters",lineReturnCount:1}}(jQuery),function(a){function b(){var a=document.createElement("input"),b="onpaste";return a.setAttribute(b,""),"function"==typeof a[b]?"paste":"input"}var c,d=b()+".mask",e=navigator.userAgent,f=/iphone/i.test(e),g=/android/i.test(e);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;return 0===this.length||this.is(":hidden")?void 0:"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(b,e){var h,i,j,k,l,m;return!b&&this.length>0?(h=a(this[0]),h.data(a.mask.dataName)()):(e=a.extend({placeholder:a.mask.placeholder,completed:null},e),i=a.mask.definitions,j=[],k=m=b.length,l=null,a.each(b.split(""),function(a,b){"?"==b?(m--,k=a):i[b]?(j.push(RegExp(i[b])),null===l&&(l=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(a){for(;m>++a&&!j[a];);return a}function n(a){for(;--a>=0&&!j[a];);return a}function o(a,b){var c,d;if(!(0>a)){for(c=a,d=h(b);m>c;c++)if(j[c]){if(!(m>d&&j[c].test(w[d])))break;w[c]=w[d],w[d]=e.placeholder,d=h(d)}t(),v.caret(Math.max(l,a))}}function p(a){var b,c,d,f;for(b=a,c=e.placeholder;m>b;b++)if(j[b]){if(d=h(b),f=w[b],w[b]=c,!(m>d&&j[d].test(f)))break;c=f}}function q(a){var b,c,d,e=a.which;8===e||46===e||f&&127===e?(b=v.caret(),c=b.begin,d=b.end,0===d-c&&(c=46!==e?n(c):d=h(c-1),d=46===e?h(d):d),s(c,d),o(c,d-1),a.preventDefault()):27==e&&(v.val(x),v.caret(0,u()),a.preventDefault())}function r(b){var c,d,f,i=b.which,k=v.caret();b.ctrlKey||b.altKey||b.metaKey||32>i||i&&(0!==k.end-k.begin&&(s(k.begin,k.end),o(k.begin,k.end-1)),c=h(k.begin-1),m>c&&(d=String.fromCharCode(i),j[c].test(d)&&(p(c),w[c]=d,t(),f=h(c),g?setTimeout(a.proxy(a.fn.caret,v,f),0):v.caret(f),e.completed&&f>=m&&e.completed.call(v))),b.preventDefault())}function s(a,b){var c;for(c=a;b>c&&m>c;c++)j[c]&&(w[c]=e.placeholder)}function t(){v.val(w.join(""))}function u(a){var b,c,d=v.val(),f=-1;for(b=0,pos=0;m>b;b++)if(j[b]){for(w[b]=e.placeholder;pos++<d.length;)if(c=d.charAt(pos-1),j[b].test(c)){w[b]=c,f=b;break}if(pos>d.length)break}else w[b]===d.charAt(pos)&&b!==k&&(pos++,f=b);return a?t():k>f+1?(v.val(""),s(0,m)):(t(),v.val(v.val().substring(0,f+1))),k?b:l}var v=a(this),w=a.map(b.split(""),function(a){return"?"!=a?i[a]?e.placeholder:a:void 0
}),x=v.val();v.data(a.mask.dataName,function(){return a.map(w,function(a,b){return j[b]&&a!=e.placeholder?a:null}).join("")}),v.attr("readonly")||v.one("unmask",function(){v.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){clearTimeout(c);var a;x=v.val(),a=u(),c=setTimeout(function(){t(),a==b.length?v.caret(0,a):v.caret(a)},10)}).bind("blur.mask",function(){u(),v.val()!=x&&v.change()}).bind("keydown.mask",q).bind("keypress.mask",r).bind(d,function(){setTimeout(function(){var a=u(!0);v.caret(a),e.completed&&a==v.val().length&&e.completed.call(v)},0)}),u()}))}})}(jQuery),!function(a){var b=function(b,c){this.element=a(b),this.options=a.extend(!0,{},a.fn.tag.defaults,c),this.values=a.grep(a.map(this.element.val().split(","),a.trim),function(a){return a.length>0}),this.show()};b.prototype={constructor:b,show:function(){var b=this;b.element.parent().prepend(b.element.detach().hide()),b.element.wrap(a('<div class="tags">')).parent().on("click",function(){b.input.focus()}),b.values.length&&a.each(b.values,function(){b.createBadge(this)}),b.input=a('<input type="text">').attr("placeholder",b.options.placeholder).insertAfter(b.element).on("focus",function(){b.element.parent().addClass("tags-hover")}).on("blur",function(){b.skip||(b.process(),b.element.parent().removeClass("tags-hover"),b.element.siblings(".tag").removeClass("tag-important")),b.skip=!1}).on("keydown",function(c){if(188==c.keyCode||13==c.keyCode||9==c.keyCode)!a.trim(a(this).val())||b.element.siblings(".typeahead").length&&!b.element.siblings(".typeahead").is(":hidden")?188==c.keyCode&&(!b.element.siblings(".typeahead").length||b.element.siblings(".typeahead").is(":hidden")?c.preventDefault():(b.input.data("typeahead").select(),c.stopPropagation(),c.preventDefault())):(9!=c.keyCode&&c.preventDefault(),b.process());else if(a.trim(a(this).val())||8!=c.keyCode)b.element.siblings(".tag").removeClass("tag-important");else{var d=b.element.siblings(".tag").length;if(d){var e=b.element.siblings(".tag:eq("+(d-1)+")");e.hasClass("tag-important")?b.remove(d-1):e.addClass("tag-important")}}}).typeahead({source:b.options.source,matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())&&(-1==b.inValues(a)||b.options.allowDuplicates)},updater:a.proxy(b.add,b)}),a(b.input.data("typeahead").$menu).on("mousedown",function(){b.skip=!0}),this.element.trigger("shown")},inValues:function(b){if(this.options.caseInsensitive){var c=-1;return a.each(this.values,function(a,d){return d.toLowerCase()==b.toLowerCase()?(c=a,!1):void 0}),c}return a.inArray(b,this.values)},createBadge:function(b){var c=this;a("<span/>",{"class":"tag"}).text(b).append(a('<button type="button" class="close">&times;</button>').on("click",function(){c.remove(c.element.siblings(".tag").index(a(this).closest(".tag")))})).insertBefore(c.element)},add:function(b){var c=this;if(!c.options.allowDuplicates){var d=c.inValues(b);if(-1!=d){var e=c.element.siblings(".tag:eq("+d+")");return e.addClass("tag-warning"),void setTimeout(function(){a(e).removeClass("tag-warning")},500)}}this.values.push(b),this.createBadge(b),this.element.val(this.values.join(", ")),this.element.trigger("added",[b])},remove:function(a){if(a>=0){var b=this.values.splice(a,1);this.element.siblings(".tag:eq("+a+")").remove(),this.element.val(this.values.join(", ")),this.element.trigger("removed",[b])}},process:function(){var b=a.grep(a.map(this.input.val().split(","),a.trim),function(a){return a.length>0}),c=this;a.each(b,function(){c.add(this)}),this.input.val("")},skip:!1};var c=a.fn.tag;a.fn.tag=function(c){return this.each(function(){var d=a(this),e=d.data("tag"),f="object"==typeof c&&c;e||d.data("tag",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tag.defaults={allowDuplicates:!1,caseInsensitive:!0,placeholder:"",source:[]},a.fn.tag.Constructor=b,a.fn.tag.noConflict=function(){return a.fn.tag=c,this},a(window).on("load",function(){a('[data-provide="tag"]').each(function(){var b=a(this);b.data("tag")||b.tag(b.data())})})}(window.jQuery),function(a){var b=function(b){var c=a.Deferred(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.onerror=c.reject,d.onprogress=c.notify,d.readAsDataURL(b),c.promise()};a.fn.cleanHtml=function(){var b=a(this).html();return b&&b.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")},a.fn.wysiwyg=function(c){var d,e,f,g=this,h=function(){e.activeToolbarClass&&a(e.toolbarSelector).find(f).each(function(){try{var b=a(this).data(e.commandRole);document.queryCommandState(b)?a(this).addClass(e.activeToolbarClass):a(this).removeClass(e.activeToolbarClass)}catch(c){}})},i=function(a,b){var c=a.split(" "),d=c.shift(),e=c.join(" ")+(b||"");document.execCommand(d,0,e),h()},j=function(b){a.each(b,function(a,b){g.keydown(a,function(a){g.attr("contenteditable")&&g.is(":visible")&&(a.preventDefault(),a.stopPropagation(),i(b))}).keyup(a,function(a){g.attr("contenteditable")&&g.is(":visible")&&(a.preventDefault(),a.stopPropagation())})})},k=function(){try{var a=window.getSelection();if(a.getRangeAt&&a.rangeCount)return a.getRangeAt(0)}catch(b){}},l=function(){d=k()},m=function(){try{var a=window.getSelection();if(d){try{a.removeAllRanges()}catch(b){document.body.createTextRange().select(),document.selection.empty()}a.addRange(d)}}catch(c){}},n=function(c){g.focus(),a.each(c,function(c,d){/^image\//.test(d.type)?a.when(b(d)).done(function(a){i("insertimage",a)}).fail(function(a){e.fileUploadError("file-reader",a)}):e.fileUploadError("unsupported-file-type",d.type)})},o=function(a,b){m(),document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,b||"transparent"),l(),a.data(e.selectionMarker,b)},p=function(b,c){b.find(f).click(function(){m(),g.focus(),i(a(this).data(c.commandRole)),l()}),b.find("[data-toggle=dropdown]").click(m),b.find("input[type=text][data-"+c.commandRole+"]").on("webkitspeechchange change",function(){var b=this.value;this.value="",m(),b&&(g.focus(),i(a(this).data(c.commandRole),b)),l()}).on("focus",function(){var b=a(this);b.data(c.selectionMarker)||(o(b,c.selectionColor),b.focus())}).on("blur",function(){var b=a(this);b.data(c.selectionMarker)&&o(b,!1)}),b.find("input[type=file][data-"+c.commandRole+"]").change(function(){m(),"file"===this.type&&this.files&&this.files.length>0&&n(this.files),l(),this.value=""})},q=function(){g.on("dragenter dragover",!1).on("drop",function(a){var b=a.originalEvent.dataTransfer;a.stopPropagation(),a.preventDefault(),b&&b.files&&b.files.length>0&&n(b.files)})};return e=a.extend({},a.fn.wysiwyg.defaults,c),f="a[data-"+e.commandRole+"],button[data-"+e.commandRole+"],input[type=button][data-"+e.commandRole+"]",j(e.hotKeys),e.dragAndDropImages&&q(),p(a(e.toolbarSelector),e),g.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){l(),h()}),a(window).bind("touchend",function(a){var b=g.is(a.target)||g.has(a.target).length>0,c=k(),d=c&&c.startContainer===c.endContainer&&c.startOffset===c.endOffset;(!d||b)&&(l(),h())}),this},a.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,fileUploadError:function(a,b){console.log("File upload error",a,b)}}}(window.jQuery),"ace"in window||(window.ace={}),jQuery(function(){window.ace.click_event=$.fn.tap?"tap":"click"}),function(a,b){var c="multiple"in document.createElement("INPUT"),d="FileList"in window,e="FileReader"in window,f=function(b,c){var d=this;this.settings=a.extend({},a.fn.ace_file_input.defaults,c),this.$element=a(b),this.element=b,this.disabled=!1,this.can_reset=!0,this.$element.on("change.ace_inner_call",function(a,b){return b!==!0?h.call(d):void 0}),this.$element.wrap('<div class="ace-file-input" />'),this.apply_settings()};f.error={FILE_LOAD_FAILED:1,IMAGE_LOAD_FAILED:2,THUMBNAIL_FAILED:3},f.prototype.apply_settings=function(){var a=this,b=!!this.settings.icon_remove;this.multi=this.$element.attr("multiple")&&c,this.well_style="well"==this.settings.style,this.well_style?this.$element.parent().addClass("ace-file-multiple"):this.$element.parent().removeClass("ace-file-multiple"),this.$element.parent().find(":not(input[type=file])").remove(),this.$element.after('<label class="file-label" data-title="'+this.settings.btn_choose+'"><span class="file-name" data-title="'+this.settings.no_file+'">'+(this.settings.no_icon?'<i class="'+this.settings.no_icon+'"></i>':"")+"</span></label>"+(b?'<a class="remove" href="#"><i class="'+this.settings.icon_remove+'"></i></a>':"")),this.$label=this.$element.next(),this.$label.on("click",function(){this.disabled||a.element.disabled||a.$element.attr("readonly")||a.$element.click()}),b&&this.$label.next("a").on(ace.click_event,function(){if(!a.can_reset)return!1;var b=!0;return a.settings.before_remove&&(b=a.settings.before_remove.call(a.element)),b?a.reset_input():!1}),this.settings.droppable&&d&&g.call(this)},f.prototype.show_file_list=function(b){var c="undefined"==typeof b?this.$element.data("ace_input_files"):b;if(c&&0!=c.length){this.well_style&&(this.$label.find(".file-name").remove(),this.settings.btn_change||this.$label.addClass("hide-placeholder")),this.$label.attr("data-title",this.settings.btn_change).addClass("selected");for(var d=0;d<c.length;d++){var f="string"==typeof c[d]?c[d]:a.trim(c[d].name),g=f.lastIndexOf("\\")+1;0==g&&(g=f.lastIndexOf("/")+1),f=f.substr(g);var h="icon-file";if(/\.(jpe?g|png|gif|svg|bmp|tiff?)$/i.test(f)?h="icon-picture":/\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i.test(f)?h="icon-film":/\.(mp3|ogg|wav|wma|amr|aac)$/i.test(f)&&(h="icon-music"),this.well_style){this.$label.append('<span class="file-name" data-title="'+f+'"><i class="'+h+'"></i></span>');var j=a.trim(c[d].type),k=e&&this.settings.thumbnail&&(j.length>0&&j.match("image")||0==j.length&&"icon-picture"==h);if(k){var l=this;a.when(i.call(this,c[d])).fail(function(a){l.settings.preview_error&&l.settings.preview_error.call(l,f,a.code)})}}else this.$label.find(".file-name").attr({"data-title":f}).find('[class*="icon-"]').attr("class",h)}return!0}},f.prototype.reset_input=function(){return this.$label.attr({"data-title":this.settings.btn_choose,"class":"file-label"}).find(".file-name:first").attr({"data-title":this.settings.no_file,"class":"file-name"}).find('[class*="icon-"]').attr("class",this.settings.no_icon).prev("img").remove(),this.settings.no_icon||this.$label.find('[class*="icon-"]').remove(),this.$label.find(".file-name").not(":first").remove(),this.$element.data("ace_input_files")&&(this.$element.removeData("ace_input_files"),this.$element.removeData("ace_input_method")),this.reset_input_field(),!1},f.prototype.reset_input_field=function(){this.$element.wrap("<form>").closest("form").get(0).reset(),this.$element.unwrap()},f.prototype.enable_reset=function(a){this.can_reset=a},f.prototype.disable=function(){this.disabled=!0,this.$element.attr("disabled","disabled").addClass("disabled")},f.prototype.enable=function(){this.disabled=!1,this.$element.removeAttr("disabled").removeClass("disabled")},f.prototype.files=function(){return a(this).data("ace_input_files")||null},f.prototype.method=function(){return a(this).data("ace_input_method")||""},f.prototype.update_settings=function(b){this.settings=a.extend({},this.settings,b),this.apply_settings()};var g=function(){var b=this,c=this.element.parentNode;a(c).on("dragenter",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover",function(a){a.preventDefault(),a.stopPropagation()}).on("drop",function(a){a.preventDefault(),a.stopPropagation();var c=a.originalEvent.dataTransfer,e=c.files;if(!b.multi&&e.length>1){var f=[];f.push(e[0]),e=f}var g=!0;return b.settings.before_change&&(g=b.settings.before_change.call(b.element,e,!0)),g&&0!=g.length?((g instanceof Array||d&&g instanceof FileList)&&(e=g),b.$element.data("ace_input_files",e),b.$element.data("ace_input_method","drop"),b.show_file_list(e),b.$element.triggerHandler("change",[!0]),!0):!1})},h=function(){var b=!0;if(this.settings.before_change&&(b=this.settings.before_change.call(this.element,this.element.files||[this.element.value],!1)),!b||0==b.length)return this.$element.data("ace_input_files")||this.reset_input_field(),!1;var c=d?b instanceof Array||b instanceof FileList?b:this.element.files:null;if(this.$element.data("ace_input_method","select"),c&&c.length>0)this.$element.data("ace_input_files",c);else{var e=a.trim(this.element.value);e&&e.length>0&&(c=[],c.push(e),this.$element.data("ace_input_files",c))}return c&&0!=c.length?(this.show_file_list(c),!0):!1},i=function(b){var c=this,d=c.$label.find(".file-name:last"),e=new a.Deferred,g=new FileReader;return g.onload=function(g){d.prepend("<img class='middle' style='display:none;' />");var h=d.find("img:last").get(0);a(h).one("load",function(){var g=50;"large"==c.settings.thumbnail?g=150:"fit"==c.settings.thumbnail&&(g=d.width()),d.addClass(g>50?"large":"");var i=j(h,g,b.type);if(null==i)return a(this).remove(),void e.reject({code:f.error.THUMBNAIL_FAILED});var k=i.w,l=i.h;"small"==c.settings.thumbnail&&(k=l=g),a(h).css({"background-image":"url("+i.src+")",width:k,height:l}).data("thumb",i.src).attr({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="}).show(),e.resolve()}).one("error",function(){d.find("img").remove(),e.reject({code:f.error.IMAGE_LOAD_FAILED})}),h.src=g.target.result},g.onerror=function(){e.reject({code:f.error.FILE_LOAD_FAILED})},g.readAsDataURL(b),e.promise()},j=function(a,b){var c=a.width,d=a.height;(c>b||d>b)&&(c>d?(d=parseInt(b/c*d),c=b):(c=parseInt(b/d*c),d=b));var e;try{var f=document.createElement("canvas");f.width=c,f.height=d;var g=f.getContext("2d");g.drawImage(a,0,0,a.width,a.height,0,0,c,d),e=f.toDataURL()}catch(h){e=null}return/^data\:image\/(png|jpe?g|gif);base64,[0-9A-Za-z\+\/\=]+$/.test(e)||(e=null),e?{src:e,w:c,h:d}:null};a.fn.ace_file_input=function(c,d){var e,g=this.each(function(){var b=a(this),g=b.data("ace_file_input"),h="object"==typeof c&&c;g||b.data("ace_file_input",g=new f(this,h)),"string"==typeof c&&(e=g[c](d))});return e===b?g:e},a.fn.ace_file_input.defaults={style:!1,no_file:"No File ...",no_icon:"icon-upload-alt",btn_choose:"Choose",btn_change:"Change",icon_remove:"icon-remove",droppable:!1,thumbnail:!1,before_change:null,before_remove:null,preview_error:null}}(window.jQuery),function(a){a.fn.ace_spinner=function(b){return this.each(function(){var c=b.icon_up||"icon-chevron-up",d=b.icon_down||"icon-chevron-down",e=b.on_sides||!1,f=b.btn_up_class||"",g=b.btn_down_class||"",h=b.max||999;h=(""+h).length,a(this).addClass("spinner-input form-control").wrap('<div class="ace-spinner">');var i=a(this).closest(".ace-spinner").spinner(b).wrapInner("<div class='input-group'></div>");e?(a(this).before('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-down btn-xs '+g+'">								<i class="'+d+'"></i>							</button>						</div>').after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+f+'">								<i class="'+c+'"></i>							</button>						</div>'),i.addClass("touch-spinner"),i.css("width",20*h+40+"px")):(a(this).after('<div class="spinner-buttons input-group-btn">							<button type="button" class="btn spinner-up btn-xs '+f+'">								<i class="'+c+'"></i>							</button>							<button type="button" class="btn spinner-down btn-xs '+g+'">								<i class="'+d+'"></i>							</button>						</div>'),"ontouchend"in document||b.touch_spinner?(i.addClass("touch-spinner"),i.css("width",20*h+40+"px")):(a(this).next().addClass("btn-group-vertical"),i.css("width",20*h+10+"px"))),a(this).on("mousewheel DOMMouseScroll",function(a){var b=a.originalEvent.detail<0||a.originalEvent.wheelDelta>0?1:-1;return i.spinner("step",b>0),i.spinner("triggerChangedEvent"),!1});var j=a(this);i.on("changed",function(){j.trigger("change")})}),this}}(window.jQuery),function(a){a.fn.ace_wizard=function(){return this.each(function(){var b=a(this);b.wizard();var c=b.siblings(".wizard-actions").eq(0),d=b.data("wizard");d.$prevBtn.remove(),d.$nextBtn.remove(),d.$prevBtn=c.find(".btn-prev").eq(0).on(ace.click_event,function(){b.wizard("previous")}).attr("disabled","disabled"),d.$nextBtn=c.find(".btn-next").eq(0).on(ace.click_event,function(){b.wizard("next")}).removeAttr("disabled"),d.nextText=d.$nextBtn.text()}),this}}(window.jQuery),function(a){a.fn.ace_colorpicker=function(b){var c=a.extend({pull_right:!1,caret:!0},b);return this.each(function(){var b=a(this),d="",e="";a(this).hide().find("option").each(function(){var a="colorpick-btn";this.selected&&(a+=" selected",e=this.value),d+='<li><a class="'+a+'" href="#" style="background-color:'+this.value+';" data-color="'+this.value+'"></a></li>'}).end().on("change.ace_inner_call",function(){a(this).next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker"><a data-toggle="dropdown" class="dropdown-toggle" href="#"><span class="btn-colorpicker" style="background-color:'+e+'"></span></a><ul class="dropdown-menu'+(c.caret?" dropdown-caret":"")+(c.pull_right?" pull-right":"")+'">'+d+"</ul></div>").next().find(".dropdown-menu").on(ace.click_event,function(c){var d=a(c.target);if(!d.is(".colorpick-btn"))return!1;d.closest("ul").find(".selected").removeClass("selected"),d.addClass("selected");var e=d.data("color");return b.val(e).change(),c.preventDefault(),!0})}),this}}(window.jQuery),function(a){a.fn.ace_tree=function(b){var c={"open-icon":"icon-folder-open","close-icon":"icon-folder-close",selectable:!0,"selected-icon":"icon-ok","unselected-icon":"tree-dot"};return c=a.extend({},c,b),this.each(function(){var b=a(this);b.html('<div class = "tree-folder" style="display:none;">				<div class="tree-folder-header">					<i class="'+c["close-icon"]+'"></i>					<div class="tree-folder-name"></div>				</div>				<div class="tree-folder-content"></div>				<div class="tree-loader" style="display:none"></div>			</div>			<div class="tree-item" style="display:none;">				'+(null==c["unselected-icon"]?"":'<i class="'+c["unselected-icon"]+'"></i>')+'				<div class="tree-item-name"></div>			</div>'),b.addClass(1==c.selectable?"tree-selectable":"tree-unselectable"),b.tree(c)}),this}}(window.jQuery),function(a){a.fn.ace_wysiwyg=function(b){var c=a.extend({speech_button:!0,wysiwyg:{}},b),d=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"],e={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"icon-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"icon-text-height",title:"Font Size"},bold:{icon:"icon-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"icon-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"icon-strikethrough",title:"Strikethrough"},underline:{icon:"icon-underline",title:"Underline"},insertunorderedlist:{icon:"icon-list-ul",title:"Bullet list"},insertorderedlist:{icon:"icon-list-ol",title:"Number list"},outdent:{icon:"icon-indent-left",title:"Reduce indent (Shift+Tab)"},indent:{icon:"icon-indent-right",title:"Indent (Tab)"},justifyleft:{icon:"icon-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"icon-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"icon-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"icon-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"icon-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},unlink:{icon:"icon-unlink",title:"Remove Hyperlink"},insertImage:{icon:"icon-picture",title:"Insert picture",button_text:'<i class="icon-file"></i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:!0},foreColor:{values:d,title:"Change Color"},backColor:{values:d,title:"Change Background Color"},undo:{icon:"icon-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"icon-repeat",title:"Redo (Ctrl/Cmd+Y)"},viewSource:{icon:"icon-code",title:"View Source"}},f=c.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];return this.each(function(){var b=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ';for(var d in f)if(f.hasOwnProperty(d)){var g=f[d];if(null===g){b+=' </div> <div class="btn-group"> ';continue}if("string"==typeof g&&g in e)g=e[g],g.name=f[d];else{if(!("object"==typeof g&&g.name in e))continue;g=a.extend(e[g.name],g)}var h="className"in g?g.className:"";switch(g.name){case"font":b+=' <a class="btn btn-sm '+h+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i><i class="icon-angle-down icon-on-right"></i></a> ',b+=' <ul class="dropdown-menu dropdown-light">';for(var i in g.values)g.values.hasOwnProperty(i)&&(b+=' <li><a data-edit="fontName '+g.values[i]+'" style="font-family:\''+g.values[i]+"'\">"+g.values[i]+"</a></li> ");b+=" </ul>";break;case"fontSize":b+=' <a class="btn btn-sm '+h+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i>&nbsp;<i class="icon-angle-down icon-on-right"></i></a> ',b+=' <ul class="dropdown-menu dropdown-light"> ';for(var j in g.values)g.values.hasOwnProperty(j)&&(b+=' <li><a data-edit="fontSize '+j+'"><font size="'+j+'">'+g.values[j]+"</font></a></li> ");b+=" </ul> ";break;case"createLink":b+=' <div class="inline position-relative"> <a class="btn btn-sm '+h+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ',b+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+g.placeholder+'" type="text" data-edit="'+g.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+g.button_class+'" type="button">'+g.button_text+"</button>								</span>							</div>						</div> </div>";break;case"insertImage":b+=' <div class="inline position-relative"> <a class="btn btn-sm '+h+' dropdown-toggle" data-toggle="dropdown" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ',b+=' <div class="dropdown-menu dropdown-caret pull-right">							<div class="input-group">								<input class="form-control" placeholder="'+g.placeholder+'" type="text" data-edit="'+g.name+'" />								<span class="input-group-btn">									<button class="btn btn-sm '+g.button_insert_class+'" type="button">'+g.button_insert+"</button>								</span>							</div>",g.choose_file&&"FileReader"in window&&(b+='<div class="space-2"></div>							 <div class="center">								<button class="btn btn-sm '+g.button_class+' wysiwyg-choose-file" type="button">'+g.button_text+'</button>								<input type="file" data-edit="'+g.name+'" />							  </div>'),b+=" </div> </div>";break;case"foreColor":case"backColor":b+=' <select class="hide wysiwyg_colorpicker" title="'+g.title+'"> ';for(var k in g.values)b+=' <option value="'+g.values[k]+'">'+g.values[k]+"</option> ";b+=" </select> ",b+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+g.name+'" /> ';break;case"viewSource":b+=' <a class="btn btn-sm '+h+'" data-view="source" title="'+g.title+'"><i class="'+g.icon+'"></i></a> ';break;default:b+=' <a class="btn btn-sm '+h+'" data-edit="'+g.name+'" title="'+g.title+'"><i class="'+g.icon+'"></i></a> '}}b+=" </div> </div> ",b=c.toolbar_place?c.toolbar_place.call(this,b):a(this).before(b).prev(),b.find("a[title]").tooltip({animation:!1,container:"body"}),b.find(".dropdown-menu input:not([type=file])").on(ace.click_event,function(){return!1}).on("change",function(){a(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(b){27==b.which&&(this.value="",a(this).change())}),b.find("input[type=file]").prev().on(ace.click_event,function(){a(this).next().click()}),b.find(".wysiwyg_colorpicker").each(function(){a(this).ace_colorpicker({pull_right:!0}).change(function(){a(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:!1,container:"body"})});var l;if(c.speech_button&&"onwebkitspeechchange"in(l=document.createElement("input"))){var m=a(this).offset();b.append(l),a(l).attr({type:"text","data-edit":"inserttext","x-webkit-speech":""}).addClass("wysiwyg-speech-input").css({position:"absolute"}).offset({top:m.top,left:m.left+a(this).innerWidth()-35})}else l=null;var n=a(this),o=!1;b.find("a[data-view=source]").on("click",function(b){if(b.preventDefault(),o){var c=n.next();n.html(c.val()).show(),c.remove(),a(this).removeClass("active")}else a("<textarea />").css({width:n.outerWidth(),height:n.outerHeight()}).val(n.html()).insertAfter(n),n.hide(),a(this).addClass("active");o=!o});var p=a.extend({},{activeToolbarClass:"active",toolbarSelector:b},c.wysiwyg||{});a(this).wysiwyg(p)}),this}}(window.jQuery),"ace"in window||(window.ace={}),jQuery(function(a){window.ace.click_event=a.fn.tap?"tap":"click"}),jQuery(function(){ace.handle_side_menu(jQuery),ace.enable_search_ahead(jQuery),ace.general_things(jQuery),ace.widget_boxes(jQuery),ace.widget_reload_handler(jQuery)}),ace.handle_side_menu=function(a){a("#menu-toggler").on(ace.click_event,function(){return a("#sidebar").toggleClass("display"),a(this).toggleClass("display"),!1});var b=a("#sidebar").hasClass("menu-min");a("#sidebar-collapse").on(ace.click_event,function(){b=a("#sidebar").hasClass("menu-min"),ace.settings.sidebar_collapsed(!b)});a(".nav-list").on(ace.click_event,function(c){var d=a(c.target).closest("a");if(d&&0!=d.length){if(b=a("#sidebar").hasClass("menu-min"),d.hasClass("dropdown-toggle")){var e=d.next().get(0);if(!a(e).is(":visible")){var f=a(e.parentNode).closest("ul");if(b&&f.hasClass("nav-list"))return;f.find("> .open > .submenu").each(function(){this==e||a(this.parentNode).hasClass("active")||a(this).slideUp(200).parent().removeClass("open")})}return b&&a(e.parentNode.parentNode).hasClass("nav-list")?!1:(a(e).slideToggle(200).parent().toggleClass("open"),!1)}if(b&&"tap"==ace.click_event&&d.get(0).parentNode.parentNode==this){var g=d.find(".menu-text").get(0);if(c.target!=g&&!a.contains(g,c.target))return!1}}})},ace.general_things=function(a){a('.ace-nav [class*="icon-animated-"]').closest("a").on("click",function(){var b=a(this).find('[class*="icon-animated-"]').eq(0),c=b.attr("class").match(/icon\-animated\-([\d\w]+)/);b.removeClass(c[0]),a(this).off("click")}),a(".nav-list .badge[title],.nav-list .label[title]").tooltip({placement:"right"}),a("#ace-settings-btn").on(ace.click_event,function(){a(this).toggleClass("open"),a("#ace-settings-box").toggleClass("open")}),a("#ace-settings-navbar").on("click",function(){ace.settings.navbar_fixed(this.checked)}).each(function(){this.checked=ace.settings.is("navbar","fixed")}),a("#ace-settings-sidebar").on("click",function(){ace.settings.sidebar_fixed(this.checked)}).each(function(){this.checked=ace.settings.is("sidebar","fixed")}),a("#ace-settings-breadcrumbs").on("click",function(){ace.settings.breadcrumbs_fixed(this.checked)}).each(function(){this.checked=ace.settings.is("breadcrumbs","fixed")}),a("#ace-settings-add-container").on("click",function(){ace.settings.main_container_fixed(this.checked)}).each(function(){this.checked=ace.settings.is("main-container","fixed")}),a("#ace-settings-rtl").removeAttr("checked").on("click",function(){ace.switch_direction(jQuery)}),a("#btn-scroll-up").on(ace.click_event,function(){var b=Math.min(400,Math.max(100,parseInt(a("html").scrollTop()/3)));return a("html,body").animate({scrollTop:0},b),!1});try{a("#skin-colorpicker").ace_colorpicker()}catch(b){}a("#skin-colorpicker").on("change",function(){var b=a(this).find("option:selected").data("skin"),c=a(document.body);c.removeClass("skin-1 skin-2 skin-3"),"default"!=b&&c.addClass(b),"skin-1"==b?a(".ace-nav > li.grey").addClass("dark"):a(".ace-nav > li.grey").removeClass("dark"),"skin-2"==b?(a(".ace-nav > li").addClass("no-border margin-1"),a(".ace-nav > li:not(:last-child)").addClass("light-pink").find('> a > [class*="icon-"]').addClass("pink").end().eq(0).find(".badge").addClass("badge-warning")):(a(".ace-nav > li").removeClass("no-border margin-1"),a(".ace-nav > li:not(:last-child)").removeClass("light-pink").find('> a > [class*="icon-"]').removeClass("pink").end().eq(0).find(".badge").removeClass("badge-warning")),"skin-3"==b?a(".ace-nav > li.grey").addClass("red").find(".badge").addClass("badge-yellow"):a(".ace-nav > li.grey").removeClass("red").find(".badge").removeClass("badge-yellow")})},ace.widget_boxes=function(a){a(document).on("hide.bs.collapse show.bs.collapse",function(b){var c=b.target.getAttribute("id");a('[href*="#'+c+'"]').find('[class*="icon-"]').each(function(){var c,d=a(this),e=null,f=null;return(e=d.attr("data-icon-show"))?f=d.attr("data-icon-hide"):(c=d.attr("class").match(/icon\-(.*)\-(up|down)/))&&(e="icon-"+c[1]+"-down",f="icon-"+c[1]+"-up"),e?("show"==b.type?d.removeClass(e).addClass(f):d.removeClass(f).addClass(e),!1):void 0})}),a(document).on("click.ace.widget","[data-action]",function(b){b.preventDefault();var c=a(this),d=c.data("action"),e=c.closest(".widget-box");if(!e.hasClass("ui-sortable-helper"))if("collapse"==d){var f,g=e.hasClass("collapsed")?"show":"hide",h="show"==g?"shown":"hidden";if(e.trigger(f=a.Event(g+".ace.widget")),f.isDefaultPrevented())return;var i=e.find(".widget-body"),j=c.find("[class*=icon-]").eq(0),k=j.attr("class").match(/icon\-(.*)\-(up|down)/),l="icon-"+k[1]+"-down",m="icon-"+k[1]+"-up",n=i.find(".widget-body-inner");i=0==n.length?i.wrapInner('<div class="widget-body-inner"></div>').find(":first-child").eq(0):n.eq(0);var o=300,p=200;"show"==g?(j&&j.addClass(m).removeClass(l),e.removeClass("collapsed"),i.slideUp(0,function(){i.slideDown(o,function(){e.trigger(f=a.Event(h+".ace.widget"))})})):(j&&j.addClass(l).removeClass(m),i.slideUp(p,function(){e.addClass("collapsed"),e.trigger(f=a.Event(h+".ace.widget"))}))}else if("close"==d){var f;if(e.trigger(f=a.Event("close.ace.widget")),f.isDefaultPrevented())return;var q=parseInt(c.data("close-speed"))||300;e.hide(q,function(){e.trigger(f=a.Event("closed.ace.widget")),e.remove()})}else if("reload"==d){var f;if(e.trigger(f=a.Event("reload.ace.widget")),f.isDefaultPrevented())return;c.blur();var r=!1;"static"==e.css("position")&&(r=!0,e.addClass("position-relative")),e.append('<div class="widget-box-overlay"><i class="icon-spinner icon-spin icon-2x white"></i></div>'),e.one("reloaded.ace.widget",function(){e.find(".widget-box-overlay").remove(),r&&e.removeClass("position-relative")})}else if("settings"==d){var f=a.Event("settings.ace.widget");e.trigger(f)}})},ace.widget_reload_handler=function(a){a(document).on("reload.ace.widget",".widget-box",function(){var b=a(this);setTimeout(function(){b.trigger("reloaded.ace.widget")},parseInt(1e3*Math.random()+1e3))})},ace.enable_search_ahead=function(a){ace.variable_US_STATES=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];
try{a("#nav-search-input").typeahead({source:ace.variable_US_STATES,updater:function(b){return a("#nav-search-input").focus(),b}})}catch(b){}},ace.switch_direction=function(a){function b(a,b){c.find("."+a).removeClass(a).addClass("tmp-rtl-"+a).end().find("."+b).removeClass(b).addClass(a).end().find(".tmp-rtl-"+a).removeClass("tmp-rtl-"+a).addClass(b)}var c=a(document.body);c.toggleClass("rtl").find(".dropdown-menu:not(.datepicker-dropdown,.colorpicker)").toggleClass("pull-right").end().find(".pull-right:not(.dropdown-menu,blockquote,.profile-skills .pull-right)").removeClass("pull-right").addClass("tmp-rtl-pull-right").end().find(".pull-left:not(.dropdown-submenu,.profile-skills .pull-left)").removeClass("pull-left").addClass("pull-right").end().find(".tmp-rtl-pull-right").removeClass("tmp-rtl-pull-right").addClass("pull-left").end().find(".chosen-container").toggleClass("chosen-rtl").end(),b("align-left","align-right"),b("no-padding-left","no-padding-right"),b("arrowed","arrowed-right"),b("arrowed-in","arrowed-in-right"),b("messagebar-item-left","messagebar-item-right");var d=a("#piechart-placeholder");if(d.size()>0){var e=a(document.body).hasClass("rtl")?"nw":"ne";d.data("draw").call(d.get(0),d,d.data("chart"),e)}},$(document).ready(function(){setupSortableCollectionItem(),$("body").on("click","a.deleteCollectionItem",function(a){a.preventDefault(),$(this).closest(".form-group").remove()})}),jQuery(function(a){a("[data-rel=tooltip]").tooltip({container:"body"}),a("[data-rel=popover]").popover({container:"body"}),a(".chosen-select-no-search").chosen({disable_search:!0}),a(".chosen-select").chosen(),a(".date-picker").datepicker({autoclose:!0}).next().on(ace.click_event,function(){a(this).prev().focus()}),a(".timepicker").timepicker({minuteStep:15,showSeconds:!1,showMeridian:!1}).next().on(ace.click_event,function(){a(this).prev().focus()}),a.bigfoot.portfolio(),setTranslatableFields(),a(".colorbox").colorbox({width:1024,height:728,onComplete:function(){setupColorboxScripts()}}),a("body").on("click","a.in-modal",function(b){b.preventDefault(),a.get(a(this).attr("href"),function(b){var c=Twig.render(modaleTemplate,{modal_content:b}),d=a(c);d.on("shown",function(){console.log(a(".chosen-select",d).length),a(".chosen-select",d).chosen()}),d.modal("show")})}),a(".carousel").each(function(){var b=Math.min(5,a(this).children().length);a(this).parent(".wrapper").css("width",c+"px");var c=500+50*(b-1);a(this).carouFredSel({width:c,height:250,align:!1,padding:[0,c-50*b,0,0],items:{width:50,height:250,visible:b,minimum:1},scroll:{items:1,duration:750,onBefore:function(a){a.items.old.add(a.items.visible).find("span").stop().slideUp()},onAfter:function(a){a.items.visible.last().find("span").stop().slideDown()}},auto:!1}),a(this).children().click(function(){a(this).trigger("slideTo",[this,-1*b+1,"prev"])})})}),$(function(){$("body").on("click","a.addCollectionItem",function(a){a.preventDefault(),addCollectionItem($(this).data("collection-id"),$(this).data("prototype-name"))})}),$(function(){$("a#edit-form-delete-action").on(ace.click_event,function(){bootbox.confirm($(this).data("confirm-message"),function(a){a&&$("form#delete-form").submit()})}),$("body").on("click","a.confirm-action",function(a){a.preventDefault();var b=$(this).attr("href");bootbox.confirm($(this).data("confirm-message"),function(a){a&&window.location.replace(b)})})}),window.tags=[],$(document).ready(function(){var a=$("#seh_city_region"),b=$("#seh_city_department"),c=$("#seh_city_region").attr("data-action");a.on("change",function(){var a=$(this).val();""!=a&&(b.empty(),$.ajax({type:"POST",url:c,data:"idRegion="+a,success:function(a){b.html(a),b.removeAttr("disabled"),b.trigger("chosen:updated")}}))})}),function(a){a.bigfoot||(a.bigfoot=new Object),a.bigfoot.portfolio=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("bigfoot.portfolio",d),d.init=function(){d.options=a.extend({},a.bigfoot.portfolio.defaultOptions,c,d.$el.data()),a.event.props.push("dataTransfer"),d.listener()},d.listener=function(){a("body").on("click",d.options.portfolioPopinOpenClass,d.openPortfolio),a("body").delegate(d.options.portfolioDragContainerId,"dragenter dragexit dragover",d.preventDefault),a("body").delegate(d.options.portfolioDragContainerId,"drop",d.dragMedia),a("body").delegate(d.options.portfolioToggleEditClass,"click",d.editFormMedia),a("body").delegate(d.options.portfolioAddTagClass,"click",d.addTagMedia),a("body").delegate(d.options.portfolioEditFormClass,"submit",d.submitFormMedia),a("body").delegate(d.options.portfolioToggleUseClass,"click",d.useMedia),a("body").delegate(d.options.portfolioMediaDeleteClass,"click",d.deleteMedia),a("body").delegate(d.options.portfolioValidateClass,"click",d.validate),a("body").delegate(d.options.portfolioSearchFormClass,"submit",d.submitSearchForm),a("body").delegate(d.options.portfolioSearchFormTableClass,"change",d.changeTableSelection)},d.preventDefault=function(a){a.stopPropagation(),a.preventDefault()},d.openPortfolio=function(b){d.preventDefault(b);var c=a(this),e=c.attr("href");0==e.indexOf("#")?(a(e).modalmanager("createModal"),a(e).modalmanager("appendModal")):a.get(e,function(b){a(d.options.portfolioPopinClass).remove();var e=a(b);e.on("shown",function(){a(".chosen-select",e).chosen()}),e.attr("data-field-id",c.parent(".field-media").find("input").attr("id")),a(".media-to-update").removeClass("media-to-update"),c.children("img").addClass("media-to-update"),e.modal("show"),e.on("hidden.bs.modal",function(){a(d.options.portfolioPopinClass).modal("hide")}),a("table tbody",a("#media")).sortable({axis:"y",handle:"img",update:function(a,b){var c=b.item;console.log(c.prevAll().length)}}),a("#dragContainer",e).ace_file_input({style:"well",btn_choose:"Drop files here or click to choose",btn_change:!1,no_icon:"icon-cloud-upload",droppable:!0,thumbnail:!1,preview_error:function(){}}).on("change",function(){d.dragMedia(a(this).data("ace_input_files")),a("a.remove").click()})})},d.dragMedia=function(b){a.each(b,function(c,d){var e=new FileReader;e.onload=function(b){return function(){var c=this.result,d={name:b.name,value:c},e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAI2klEQVR4Xu2d3WsUZxTGz2w2H9pkjVFjSYofpYXapXcizZUXpqEqeFEoFrwyFT8hfpCgkEsveudF/4Z60dxYEQWjeJMLQxAKYgtaREswJKG0WfO1mw/T92z3wNDjMGMnO+++neeBlx1mx43s+c3znnNm3lmPoomPyzx69OirUqn0fWNj4/v19fWURi0uLtLKygrt2LGDzHcxMjY29u2xY8eeE9EbclBexGOyt2/f/nrv3r3XW1tbqa6ujtKs5eVlmp6eJs/z6M2bN6/v37//5YkTJ8YqEKz93wDgaL/37NmzX3fu3Nn5T/Ch1dVVGh8fJ9ba2trrW7duHbp06dKoaxBkKFzs9ZuMfMGH2AXb29upoaGBmpqacocPH75z7dq1zyvfqUeOKBsRgFyKgy9nuWyy7ROLp4BCoUC7du2imZmZMgRE5JQTZCNOAU1pDLgEW17923JMLpejhYUFfi1DcPDgQacgyEQ8JstzXgolEAQCkslkaHZ2lrZu3Urz8/NULBZzPT09ajpwGQAEXrb1Pspms1wOkimNacOGDVwmliHo7u4OhgAAuD89CAjcExB3bGtrK0OwtLTEQ0HgKgBieWlN+MKmAgFAXEAgYGfIHThw4M6FCxc+YQicTAIhgUCf/fzKALALsLgk3Lhxo79ryC+5o0ePDj1+/LjnwYMHk9xCqG0A4AAS3MhdQTnWtMfZBVTr2JTQn169enXY9FK6b9y4McXswAHcA0JNDWbIFCAOIMfwq4Kgv7//nikZv7h7965AAACccgG9zw8AB1k5wL8gyA8ODt4jIh8EbgAg8xwg0O/LdxMFAi4bFQSOOQAk9i8SB3gXCK5cuaIgcBMAXBVUAESAgBPG/OXLlxUEjlQBmAYk+PyeBiAcAm4bMwQDAwMKAsccAF1BLgWVFAQKHm4Zl6cDrg4UBC47ABwiHAJxDYbAKH/x4kUFgesOAAcIdwKBgN/Lnz9/XkFgGQAok8lEKgVZMSCQz8n39fUpCGoBAKY8rfYuEISVhHEhEOXPnDmjILAHAM5+sfqgSkCdHDEgkL+lIAAAls9+z/OCIFD718sJTp8+rSBAFZCAONgceIEgxBlkOz4E2l3yp06dUhDYdQBMC9z759eI+VH8xPDkyZMKAjhAMsFWUwE7oWzLXUDc1VNa5+mgt7e3fCl5ZGREIKgiAJDM+YGloOzv6OgoA2DWCNK+fftIaR0Tw3PnzrETKAgAQHJO8Nb84MiRIzQ0NEQPHz7k+wH5fTmOA8vbMrj/L9syuB3s36dAlHsNjfJnz55VECQBAFteGl3Ab/dqW9TZ2UmmgUMvXrzQ35WuKiIDJ5AZ66epqSlZhsbVgYIADpAABD4neGtOtHv3bt4vN4qq28MkWZRjopxccrt5c3MzTUxM8N3G7CJ54zr9BoBBIirxRyYLAFrCAoZqComFs60zBL45nAPHEPhtXpLKILfl9wQCnk4YAl58wiuRviGi7/jPMltVXRcgHa/oVQEkc7tIz+2evPJQsMnwq7W1lZdp0+bNm3kq6CCiHLOGKSC5xpCy7QAXEItXTmDmcTUlvAtUDEBLS0v5c4yaK6u3F+0kgYCAgxkIgkicQPICAUQesyPTQsRy0V8VNPAuuw4ACN6WJMrx/oCLG6g+A4MQFUJeicwu8OrVK1m679UGAIAgLHcSCMQNop31+vMEshptBSMnUFVDQG7wX9ddKHDsOgA6hCFTQqAjKGcIEbecOfkTuCwDABeQGj5a8DUI6rMiuDAngfbXBfg7XMF2BAhYPiCi5Aph0HDCyHApYJIuA4XyEHIxHah8IcbDKfns5ylAYKjtKQAQiBMIDBzAoEvMUeZ1mf95OJAEAoJQJxUgIkoAsDAFxLUcgKBdQUPBQAR99wKWNI2ccABI9wWi2b8GQNYSyA0mDpeBgCEQAi2S3EFdV7BaBgp9UglURcgX/A+jVACsVw6gsEvX1UEoU7MBh8LygjQ/KhYA4FnBeDpZSp4VjKeQwQFg/dFPSPcBQPBRBcD6k3tya9bmHAWFBxUOAOtHDgDrRxWA4GsHQB8AWb/LDoDA66QvOjCJ3xHkflKIjD/+8nBLQvBRBSD4+OFIBF/9VmFaHADB1xCkvAqA7VtZGlYFAtHksV19ZeMQCBDC5+oQudQHgCyUzPjRKJz1ge6SqiQQwddK4eJQBJ4hs5gDxM9EEXj3qwD9KBRX5U4FZP+eQJuBRuB1LKw6AAJvv7mUnj4AAo8+AIKuKzJLDqAtkRNB9O0drj6yMbJO1wPucnJrzQH0WaMfkoygW7B/20mggJAAELh8LT88UbtJoAZCYKix+hjKOtfAQGnKg6cCrAuAsDQsrQ6Q4DOC7AvSj45PlwNAWBkE6RIQAOAilb2HRWOxqLPWL4IDYM0BAIAyTl0NhKQLiNXBeK5QivsAaALZXxdgEQgIfQBcC0AVAKU2B4DQB0AZCAcACKgCYP/pdAAIOQCEVnB8YWEILgZpIQlMFRBYxIokEElgmgXBAXAxKNXCo2izcUoRa0L2n2IHwLIw+63g+vp6siOoWCzarwJaWlrI8zxKVlChUKBSqWTnARGTk5Mk4uC3t7fT7OxsWENIkRq7uaQ/O/6x2mZt/x9Us2dubq4MAGt+fp4WFhYWaR3kUbjazPjo+PHjP/T29n7c1dWllon5XoO2BYaox0qmKwDJtoJFJUY6kPozgv+e7Av7dyobV+/LvvDvJOyz1P6nT5/S8PDw6M2bN/uI6LkZf1bTARjFlaGhoR+3bNkyYMhr3LNnD23fvl2TqoEI/yJ0IIIDoAOvth0OvOwPPJYd9+XLl/TkyZNpE/zrzDjHptoO0GzGB2Z8Zqy/a//+/Ye2bdu2iawIGh8fnxodHf2JiH424xczJsxYqCYAjZVp4EOeCszorECRpSQFrVXO9gJzYMZvZvxuxgw7QTWnALaY1wxfZfsvM1rMqBeAEhMAKFUAmKyMOZkCqp0DFM34w/faaMUBoOVKDGYrwV9iMKqXA+ieQV0Fmrrku4iQJOSVsRo3+BBEfwPU0aQn/ONAQQAAAABJRU5ErkJggg==";strpos(b.type,"image")!==!1&&(e=c),a.post(defaultPortfolioRoute+"upload",d,function(b){var c=JSON.parse(b);a("#droppedFiles").prepend(c.html)})}}(b[c]),e.readAsDataURL(d)}),a("#droppedFiles").fadeIn()},d.editFormMedia=function(b){d.preventDefault(b);var c=a(this),e=c.parent("td").parent("tr");return a(d.options.portfolioToggleEditClass,e).toggle(),c.hasClass("on")?a.get(c.attr("href"),function(b){b=a.parseJSON(b),e.after(b.html),initSelects()}):c.hasClass("off")&&a(d.options.portfolioEditFormClass+"-"+e.attr("data-media-id")).remove(),!1},d.addTagMedia=function(b){d.preventDefault(b);var c=a(this);return a.post(c.attr("href"),{tag:a("#"+c.data("field-id")).val()},function(b){var d=JSON.parse(b);a("#"+c.data("field-id")).val(""),a("#PortfolioMedia_portfolio_tags").append(d.html)}),!1},d.submitFormMedia=function(b){d.preventDefault(b);var c=a(this);return a.post(c.attr("action"),c.serialize(),function(b){var c=JSON.parse(b),e=d.options.portfolioMediaItemClass+'[data-media-id="'+c.id+'"]',f=a(e);a(d.options.portfolioEditFormClass+"-"+c.id).remove(),f.replaceWith(c.html)}),!1},d.submitSearchForm=function(b){d.preventDefault(b);var c=a(this),e=a(d.options.portfolioPopinClass).data("selected");return a.post(c.attr("action")+"?ids="+e,c.serialize(),function(b){var c=JSON.parse(b),e=a(d.options.portfolioListClass);e.replaceWith(c.html)}),!1},d.useMedia=function(b){d.preventDefault(b);var c=a(d.options.portfolioPopinClass),e=c.data("selected")&&strpos(";",c.data("selected"))?c.data("selected").split(";"):new Array,f=a(this),g=f.parent("td").parent("tr"),h=g.data("media-id"),i=d.options.portfolioMediaItemClass+'[data-media-id="'+g.attr("data-media-id")+'"]',j=a(i);if(a(d.options.portfolioToggleUseClass,j).toggle(),f.hasClass("on")){a(i,a("#media")).remove(),j.removeClass("used").addClass("unused");for(var k in e)if(e[k]==h){e.splice(k,1);break}}else a("table tbody",a("#media")).append(g.clone()),j.removeClass("unused").addClass("used"),e.push(h);c.data("selected",e.join(";"))},d.deleteMedia=function(b){d.preventDefault(b);var c=a(this);return a.post(c.attr("href"),function(b){var c=JSON.parse(b);a(d.options.portfolioMediaItemClass+'[data-media-id="'+c.id+'"]').remove()}),!1},d.validate=function(b){d.preventDefault(b);var c=a("#"+a(d.options.portfolioPopinClass).data("field-id")),e=c.parent(".field-media").children("a"),f=[];a.each(a("table tbody tr",a("#media")),function(b,c){f.push(a(c).attr("data-media-id"))});var g=f.join(";");if(c.attr("value",g),0==e.children("img").length){var h=e.data("base-href");g.length&&(h+="/"+g),e.attr("href",h)}else{var i=e.attr("href").split("/");i[i.length-1]=g,e.attr("href",i.join("/"))}return a(d.options.portfolioPopinClass).modal("hide"),!1},d.changeTableSelection=function(b){d.preventDefault(b);var c=a(d.options.portfolioSearchFormTableClass),e=a(d.options.portfolioSearchFormColumnClass);return e.children("option:not(:first)").remove(),c.val()?(a.get(defaultPortfolioRoute+"list-fields?table="+c.val(),function(b){var c=JSON.parse(b);a.each(c,function(b,c){e.append(a("<option>",{value:b,text:c}))})}),e.removeAttr("disabled")):e.attr("disabled","disabled"),!1},d.init()},a.bigfoot.portfolio.defaultOptions={portfolioDragContainerId:"#dragContainer",portfolioPopinClass:".portfolio-popin",portfolioPopinOpenClass:".portfolio-popin-open",portfolioValidateClass:".portfolio-validate",portfolioMediaItemClass:".portfolio-media-item",portfolioMediaDeleteClass:".portfolio-media-delete",portfolioEditFormClass:".portfolio-edit-form",portfolioToggleEditClass:".portfolio-toggle-edit",portfolioToggleUseClass:".portfolio-toggle-use",portfolioAddTagClass:".portfolio-add-tag",portfolioSearchFormClass:".portfolio-search-form",portfolioSearchFormTableClass:".portfolio-search-form-table",portfolioSearchFormColumnClass:".portfolio-search-form-column",portfolioListClass:".portfolio-list",portfolioLimit:1,portfolioType:["image"]},a.fn.bigfoot_portfolio=function(b){return this.each(function(){new a.bigfoot.portfolio(this,b)})},a.fn.getbigfoot_portfolio=function(){this.data("bigfoot.portfolio")}}(jQuery),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=ab+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=z.length,c=(R+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?A.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in s[0]&&!s[0].contains(a.target)&&(a.stopPropagation(),s.focus())}function k(){var b,c=a.data(Q,_);null==c?(L=a.extend({},$),console&&console.log&&console.log("Error: cboxElement missing settings object")):L=a.extend({},c);for(b in L)a.isFunction(L[b])&&"on"!==b.slice(0,2)&&(L[b]=L[b].call(Q));L.rel=L.rel||Q.rel||a(Q).data("rel")||"nofollow",L.href=L.href||a(Q).attr("href"),L.title=L.title||Q.title,"string"==typeof L.href&&(L.href=a.trim(L.href))}function l(c,d){a(b).trigger(c),ib.trigger(c),a.isFunction(d)&&d.call(Q)}function m(){var a,b,c,d,e,f=ab+"Slideshow_",g="click."+ab;L.slideshow&&z[1]?(b=function(){clearTimeout(a)},c=function(){(L.loop||z[R+1])&&(a=setTimeout(X.next,L.slideshowSpeed))},d=function(){G.html(L.slideshowStop).unbind(g).one(g,e),ib.bind(eb,c).bind(db,b).bind(fb,e),s.removeClass(f+"off").addClass(f+"on")},e=function(){b(),ib.unbind(eb,c).unbind(db,b).unbind(fb,e),G.html(L.slideshowStart).unbind(g).one(g,function(){X.next(),d()}),s.removeClass(f+"on").addClass(f+"off")},L.slideshowAuto?d():e()):s.removeClass(f+"off "+f+"on")}function n(c){V||(Q=c,k(),z=a(Q),R=0,"nofollow"!==L.rel&&(z=a("."+bb).filter(function(){var b,c=a.data(this,_);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===L.rel}),R=z.index(Q),-1===R&&(z=z.add(Q),R=z.length-1)),r.css({opacity:parseFloat(L.opacity),cursor:L.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Y&&s.add(r).removeClass(Y),L.className&&s.add(r).addClass(L.className),Y=L.className,L.closeButton?J.html(L.close).appendTo(u):J.appendTo("<div/>"),T||(T=U=!0,s.css({visibility:"hidden",display:"block"}),B=d(jb,"LoadedContent","width:0; height:0; overflow:hidden"),u.css({width:"",height:""}).append(B),M=v.height()+y.height()+u.outerHeight(!0)-u.height(),N=w.width()+x.width()+u.outerWidth(!0)-u.width(),O=B.outerHeight(!0),P=B.outerWidth(!0),L.w=g(L.initialWidth,"x"),L.h=g(L.initialHeight,"y"),X.position(),m(),l(cb,L.onOpen),K.add(E).hide(),s.focus(),L.trapFocus&&b.addEventListener&&(b.addEventListener("focus",j,!0),ib.one(gb,function(){b.removeEventListener("focus",j,!0)})),L.returnFocus&&ib.one(gb,function(){a(Q).focus()})),q())}function o(){!s&&b.body&&(Z=!1,A=a(c),s=d(jb).attr({id:_,"class":a.support.opacity===!1?ab+"IE":"",role:"dialog",tabindex:"-1"}).hide(),r=d(jb,"Overlay").hide(),D=a([d(jb,"LoadingOverlay")[0],d(jb,"LoadingGraphic")[0]]),t=d(jb,"Wrapper"),u=d(jb,"Content").append(E=d(jb,"Title"),F=d(jb,"Current"),I=a('<button type="button"/>').attr({id:ab+"Previous"}),H=a('<button type="button"/>').attr({id:ab+"Next"}),G=d("button","Slideshow"),D),J=a('<button type="button"/>').attr({id:ab+"Close"}),t.append(d(jb).append(d(jb,"TopLeft"),v=d(jb,"TopCenter"),d(jb,"TopRight")),d(jb,!1,"clear:left").append(w=d(jb,"MiddleLeft"),u,x=d(jb,"MiddleRight")),d(jb,!1,"clear:left").append(d(jb,"BottomLeft"),y=d(jb,"BottomCenter"),d(jb,"BottomRight"))).find("div div").css({"float":"left"}),C=d(jb,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),K=H.add(I).add(F).add(G),a(b.body).append(r,s.append(t,C)))}function p(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),n(this))}return s?(Z||(Z=!0,H.click(function(){X.next()}),I.click(function(){X.prev()}),J.click(function(){X.close()}),r.click(function(){L.overlayClose&&X.close()}),a(b).bind("keydown."+ab,function(a){var b=a.keyCode;T&&L.escKey&&27===b&&(a.preventDefault(),X.close()),T&&L.arrowKey&&z[1]&&!a.altKey&&(37===b?(a.preventDefault(),I.click()):39===b&&(a.preventDefault(),H.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+ab,"."+bb,c):a("."+bb).live("click."+ab,c)),!0):!1}function q(){var e,f,j,m=X.prep,n=++kb;U=!0,S=!1,Q=z[R],k(),l(hb),l(db,L.onLoad),L.h=L.height?g(L.height,"y")-O-M:L.innerHeight&&g(L.innerHeight,"y"),L.w=L.width?g(L.width,"x")-P-N:L.innerWidth&&g(L.innerWidth,"x"),L.mw=L.w,L.mh=L.h,L.maxWidth&&(L.mw=g(L.maxWidth,"x")-P-N,L.mw=L.w&&L.w<L.mw?L.w:L.mw),L.maxHeight&&(L.mh=g(L.maxHeight,"y")-O-M,L.mh=L.h&&L.h<L.mh?L.h:L.mh),e=L.href,W=setTimeout(function(){D.show()},100),L.inline?(j=d(jb).hide().insertBefore(a(e)[0]),ib.one(hb,function(){j.replaceWith(B.children())}),m(a(e))):L.iframe?m(" "):L.html?m(L.html):h(L,e)?(e=i(L,e),S=b.createElement("img"),a(S).addClass(ab+"Photo").bind("error",function(){L.title=!1,m(d(jb,"Error").html(L.imgError))}).one("load",function(){var b;n===kb&&(S.alt=a(Q).attr("alt")||a(Q).attr("data-alt")||"",L.retinaImage&&c.devicePixelRatio>1&&(S.height=S.height/c.devicePixelRatio,S.width=S.width/c.devicePixelRatio),L.scalePhotos&&(f=function(){S.height-=S.height*b,S.width-=S.width*b},L.mw&&S.width>L.mw&&(b=(S.width-L.mw)/S.width,f()),L.mh&&S.height>L.mh&&(b=(S.height-L.mh)/S.height,f())),L.h&&(S.style.marginTop=Math.max(L.mh-S.height,0)/2+"px"),z[1]&&(L.loop||z[R+1])&&(S.style.cursor="pointer",S.onclick=function(){X.next()}),S.style.width=S.width+"px",S.style.height=S.height+"px",setTimeout(function(){m(S)},1))}),setTimeout(function(){S.src=e},1)):e&&C.load(e,L.data,function(b,c){n===kb&&m("error"===c?d(jb,"Error").html(L.xhrError):a(this).contents())})}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,trapFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0},_="colorbox",ab="cbox",bb=ab+"Element",cb=ab+"_open",db=ab+"_load",eb=ab+"_complete",fb=ab+"_cleanup",gb=ab+"_closed",hb=ab+"_purge",ib=a("<a/>"),jb="div",kb=0,lb={};a.colorbox||(a(o),X=a.fn[_]=a[_]=function(b,c){var d=this;if(b=b||{},o(),p()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,_,a.extend({},a.data(this,_)||$,b))}).addClass(bb),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&n(d[0])}return d},X.position=function(b,c){function d(){v[0].style.width=y[0].style.width=u[0].style.width=parseInt(s[0].style.width,10)-N+"px",u[0].style.height=w[0].style.height=x[0].style.height=parseInt(s[0].style.height,10)-M+"px"}var f,h,i,j=0,k=0,l=s.offset();if(A.unbind("resize."+ab),s.css({top:-9e4,left:-9e4}),h=A.scrollTop(),i=A.scrollLeft(),L.fixed?(l.top-=h,l.left-=i,s.css({position:"fixed"})):(j=h,k=i,s.css({position:"absolute"})),k+=L.right!==!1?Math.max(A.width()-L.w-P-N-g(L.right,"x"),0):L.left!==!1?g(L.left,"x"):Math.round(Math.max(A.width()-L.w-P-N,0)/2),j+=L.bottom!==!1?Math.max(e()-L.h-O-M-g(L.bottom,"y"),0):L.top!==!1?g(L.top,"y"):Math.round(Math.max(e()-L.h-O-M,0)/2),s.css({top:l.top,left:l.left,visibility:"visible"}),t[0].style.width=t[0].style.height="9999px",f={width:L.w+P+N,height:L.h+O+M,top:j,left:k},b){var m=0;a.each(f,function(a){return f[a]!==lb[a]?void(m=b):void 0}),b=m}lb=f,b||s.css(f),s.dequeue().animate(f,{duration:b||0,complete:function(){d(),U=!1,t[0].style.width=L.w+P+N+"px",t[0].style.height=L.h+O+M+"px",L.reposition&&setTimeout(function(){A.bind("resize."+ab,X.position)},1),c&&c()},step:d})},X.resize=function(a){var b;T&&(a=a||{},a.width&&(L.w=g(a.width,"x")-P-N),a.innerWidth&&(L.w=g(a.innerWidth,"x")),B.css({width:L.w}),a.height&&(L.h=g(a.height,"y")-O-M),a.innerHeight&&(L.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=B.scrollTop(),B.css({height:"auto"}),L.h=B.height()),B.css({height:L.h}),b&&B.scrollTop(b),X.position("none"===L.transition?0:L.speed))},X.prep=function(c){function e(){return L.w=L.w||B.width(),L.w=L.mw&&L.mw<L.w?L.mw:L.w,L.w}function g(){return L.h=L.h||B.height(),L.h=L.mh&&L.mh<L.h?L.mh:L.h,L.h}if(T){var j,k="none"===L.transition?0:L.speed;B.empty().remove(),B=d(jb,"LoadedContent").append(c),B.hide().appendTo(C.show()).css({width:e(),overflow:L.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(u),C.hide(),a(S).css({"float":"none"}),j=function(){function c(){a.support.opacity===!1&&s[0].style.removeAttribute("filter")}var e,g,j=z.length,m="frameBorder",n="allowTransparency";T&&(g=function(){clearTimeout(W),D.hide(),l(eb,L.onComplete)},E.html(L.title).add(B).show(),j>1?("string"==typeof L.current&&F.html(L.current.replace("{current}",R+1).replace("{total}",j)).show(),H[L.loop||j-1>R?"show":"hide"]().html(L.next),I[L.loop||R?"show":"hide"]().html(L.previous),L.slideshow&&G.show(),L.preloading&&a.each([f(-1),f(1)],function(){var c,d,e=z[this],f=a.data(e,_);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href"),c&&h(f,c)&&(c=i(f,c),d=b.createElement("img"),d.src=c)})):K.hide(),L.iframe?(e=d("iframe")[0],m in e&&(e[m]=0),n in e&&(e[n]="true"),L.scrolling||(e.scrolling="no"),a(e).attr({src:L.href,name:(new Date).getTime(),"class":ab+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",g).appendTo(B),ib.one(hb,function(){e.src="//about:blank"}),L.fastIframe&&a(e).trigger("load")):g(),"fade"===L.transition?s.fadeTo(k,1,c):c())},"fade"===L.transition?s.fadeTo(k,0,function(){X.position(0,j)}):X.position(k,j)}},X.next=function(){!U&&z[1]&&(L.loop||z[R+1])&&(R=f(1),n(z[R]))},X.prev=function(){!U&&z[1]&&(L.loop||R)&&(R=f(-1),n(z[R]))},X.close=function(){T&&!V&&(V=!0,T=!1,l(fb,L.onCleanup),A.unbind("."+ab),r.fadeTo(L.fadeOut||0,0),s.stop().fadeTo(L.fadeOut||0,0,function(){s.add(r).css({opacity:1,cursor:"auto"}).hide(),l(hb),B.empty().remove(),setTimeout(function(){V=!1,l(gb,L.onClosed)},1)}))},X.remove=function(){s&&(s.stop(),a.colorbox.close(),s.stop().remove(),r.remove(),V=!1,s=null,a("."+bb).removeData(_).removeClass(bb),a(b).unbind("click."+ab))},X.element=function(){return a(Q)},X.settings=$)}(jQuery,document,window),function(a){a.gritter={},a.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3},a.gritter.add=function(a){try{return b.add(a||{})}catch(c){var d="Gritter Error: "+c;"undefined"!=typeof console&&console.error?console.error(d,a):alert(d)}},a.gritter.remove=function(a,c){b.removeSpecific(a,c||{})},a.gritter.removeAll=function(a){b.stop(a||{})};var b={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(c){if("string"==typeof c&&(c={text:c}),null===c.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var d=c.title,e=c.text,f=c.image||"",g=c.sticky||!1,h=c.class_name||a.gritter.options.class_name,i=a.gritter.options.position,j=c.time||"";this._verifyWrapper(),this._item_count++;var k=this._item_count,l=this._tpl_item;a(["before_open","after_open","before_close","after_close"]).each(function(d,e){b["_"+e+"_"+k]=a.isFunction(c[e])?c[e]:function(){}}),this._custom_timer=0,j&&(this._custom_timer=j);var m=""!=f?'<img src="'+f+'" class="gritter-image" />':"",n=""!=f?"gritter-with-image":"gritter-without-image";if(d=d?this._str_replace("[[title]]",d,this._tpl_title):"",l=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[d,e,this._tpl_close,m,this._item_count,n,h],l),this["_before_open_"+k]()===!1)return!1;a("#gritter-notice-wrapper").addClass(i).append(l);var o=a("#gritter-item-"+this._item_count);return o.fadeIn(this.fade_in_speed,function(){b["_after_open_"+k](a(this))}),g||this._setFadeTimer(o,k),a(o).bind("mouseenter mouseleave",function(c){"mouseenter"==c.type?g||b._restoreItemIfFading(a(this),k):g||b._setFadeTimer(a(this),k),b._hoverState(a(this),c.type)}),a(o).find(".gritter-close").click(function(){b.removeSpecific(k,{},null,!0)}),k},_countRemoveWrapper:function(b,c,d){c.remove(),this["_after_close_"+b](c,d),0==a(".gritter-item-wrapper").length&&a("#gritter-notice-wrapper").remove()},_fade:function(a,c,d,e){var d=d||{},f="undefined"!=typeof d.fade?d.fade:!0,g=d.speed||this.fade_out_speed,h=e;this["_before_close_"+c](a,h),e&&a.unbind("mouseenter mouseleave"),f?a.animate({opacity:0},g,function(){a.animate({height:0},300,function(){b._countRemoveWrapper(c,a,h)})}):this._countRemoveWrapper(c,a)},_hoverState:function(a,b){"mouseenter"==b?(a.addClass("hover"),a.find(".gritter-close").show()):(a.removeClass("hover"),a.find(".gritter-close").hide())},removeSpecific:function(b,c,d,e){if(!d)var d=a("#gritter-item-"+b);this._fade(d,b,c||{},e)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]),a.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in a.gritter.options)this[opt]=a.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,c){var d=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+c]=setTimeout(function(){b._fade(a,c)},d)},stop:function(b){var c=a.isFunction(b.before_close)?b.before_close:function(){},d=a.isFunction(b.after_close)?b.after_close:function(){},e=a("#gritter-notice-wrapper");c(e),e.fadeOut(function(){a(this).remove(),d()})},_str_replace:function(a,b,c,d){var e=0,f=0,g="",h="",i=0,j=0,k=[].concat(a),l=[].concat(b),m=c,n=l instanceof Array,o=m instanceof Array;for(m=[].concat(m),d&&(this.window[d]=0),e=0,i=m.length;i>e;e++)if(""!==m[e])for(f=0,j=k.length;j>f;f++)g=m[e]+"",h=n?void 0!==l[f]?l[f]:"":l[0],m[e]=g.split(k[f]).join(h),d&&m[e]!==g&&(this.window[d]+=(g.length-m[e].length)/k[f].length);return o?m:m[0]},_verifyWrapper:function(){0==a("#gritter-notice-wrapper").length&&a("body").append(this._tpl_wrap)}}}(jQuery),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):void(this.opts=f(a||{},h.defaults,n))}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));
return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),function(b){b.jgrid=b.jgrid||{},b.extend(b.jgrid,{version:"4.5.2",htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?(""+a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?(""+a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},format:function(a){var c=b.makeArray(arguments).slice(1);return null==a&&(a=""),a.replace(/\{(\d+)\}/g,function(a,b){return c[b]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1;return null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1)),a},getCellIndex:function(a){return a=b(a),a.is("tr")?-1:(a=(a.is("td")||a.is("th")?a:a.closest("td,th"))[0],b.jgrid.msie?b.inArray(a,a.parentNode.cells):a.cellIndex)},stripHtml:function(a){var a=""+a,b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""))&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):"":a},stripPref:function(a,c){var d=b.type(a);return("string"===d||"number"===d)&&(a=""+a,c=""!==a?(""+c).replace(""+a,""):c),c},parse:function(d){return"while(1);"===d.substr(0,9)&&(d=d.substr(9)),"/*"===d.substr(0,2)&&(d=d.substr(2,d.length-4)),d||(d="{}"),!0===b.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(d):eval("("+d+")")},parseDate:function(a,c,d,e){var f,g,h=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,i="string"==typeof c?c.match(h):null,h=function(a,b){for(a=""+a,b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},j={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k=0,k=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b};if(void 0===e&&(e=b.jgrid.formatter.date),void 0===e.parseRe&&(e.parseRe=/[Tt\\\/:_;.,\t\s-]/),e.masks.hasOwnProperty(a)&&(a=e.masks[a]),c&&null!=c)if(isNaN(c-0)||"u"!==(""+a).toLowerCase())if(c.constructor===Date)k=c;else if(null!==i)k=new Date(parseInt(i[1],10)),i[3]&&(a=60*Number(i[5])+Number(i[6]),a*="-"===i[4]?1:-1,a-=k.getTimezoneOffset(),k.setTime(Number(Number(k)+6e4*a)));else{for(c=(""+c).replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe),a=a.replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe),f=0,g=a.length;g>f;f++)"M"===a[f]&&(i=b.inArray(c[f],e.monthNames),-1!==i&&12>i&&(c[f]=i+1,j.m=c[f])),"F"===a[f]&&(i=b.inArray(c[f],e.monthNames,12),-1!==i&&i>11&&(c[f]=i+1-12,j.m=c[f])),"a"===a[f]&&(i=b.inArray(c[f],e.AmPm),-1!==i&&2>i&&c[f]===e.AmPm[i]&&(c[f]=i,j.h=k(c[f],j.h))),"A"===a[f]&&(i=b.inArray(c[f],e.AmPm),-1!==i&&i>1&&c[f]===e.AmPm[i]&&(c[f]=i-2,j.h=k(c[f],j.h))),"g"===a[f]&&(j.h=parseInt(c[f],10)),void 0!==c[f]&&(j[a[f].toLowerCase()]=parseInt(c[f],10));if(j.f&&(j.m=j.f),0===j.m&&0===j.y&&0===j.d)return"&#160;";j.m=parseInt(j.m,10)-1,k=j.y,k>=70&&99>=k?j.y=1900+j.y:k>=0&&69>=k&&(j.y=2e3+j.y),k=new Date(j.y,j.m,j.d,j.h,j.i,j.s,j.u)}else k=new Date(1e3*parseFloat(c));else k=new Date(j.y,j.m,j.d,j.h,j.i,j.s,j.u);if(void 0===d)return k;e.masks.hasOwnProperty(d)?d=e.masks[d]:d||(d="Y-m-d"),a=k.getHours(),c=k.getMinutes(),j=k.getDate(),i=k.getMonth()+1,f=k.getTimezoneOffset(),g=k.getSeconds();var l=k.getMilliseconds(),m=k.getDay(),n=k.getFullYear(),o=(m+6)%7+1,p=(new Date(n,i-1,j)-new Date(n,0,1))/864e5,q={d:h(j),D:e.dayNames[m],j:j,l:e.dayNames[m+7],N:o,S:e.S(j),w:m,z:p,W:5>o?Math.floor((p+o-1)/7)+1:Math.floor((p+o-1)/7)||(4>(new Date(n-1,0,1).getDay()+6)%7?53:52),F:e.monthNames[i-1+12],m:h(i),M:e.monthNames[i-1],n:i,t:"?",L:"?",o:"?",Y:n,y:(""+n).substring(2),a:12>a?e.AmPm[0]:e.AmPm[1],A:12>a?e.AmPm[2]:e.AmPm[3],B:"?",g:a%12||12,G:a,h:h(a%12||12),H:h(a),i:h(c),s:h(g),u:l,e:"?",I:"?",O:(f>0?"-":"+")+h(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4),P:"?",T:((""+k).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(k/1e3)};return d.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return q.hasOwnProperty(a)?q[a]:a.substring(1)})},jqID:function(a){return(""+a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a||b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(a,b){var c,d,e,f=[];if("function"==typeof b)return b(a);if(c=a[b],void 0===c)try{if("string"==typeof b&&(f=b.split(".")),e=f.length)for(c=a;c&&e--;)d=f.shift(),c=c[d]}catch(g){}return c},getXmlData:function(a,c,d){var e="string"==typeof c?c.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof c?c(a):e&&e[2]?e[1]?b(e[1],a).attr(e[2]):b(a).attr(e[2]):(a=b(c,a),d?a:0<a.length?b(a).text():void 0)},cellWidth:function(){var a=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),c=a.appendTo("body").find("td").width();return a.remove(),5!==c},cell_width:!0,ajaxOptions:{},from:function(d){return new function(d,c){"string"==typeof d&&(d=b.data(d));var e=this,a=d,j=!0,g=!1,h=c,i=/[\$,%]/g,k=null,l=null,o=0,n=!1,m="",t=[],A=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return 0<d.length&&(A="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===a?!1:0===a.length?!1:!0},this._getStr=function(a){var b=[];return g&&b.push("jQuery.trim("),b.push("String("+a+")"),g&&b.push(")"),j||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return g&&(a=b.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),j?a:a.toLowerCase()},this._funcLoop=function(c){var d=[];return b.each(a,function(a,b){d.push(c(b))}),d},this._append=function(a){var b;for(h=null===h?"":h+(""===m?" && ":m),b=0;o>b;b++)h+="(";n&&(h+="!"),h+="("+a+")",n=!1,m="",o=0},this._setCommand=function(a,b){k=a,l=b},this._resetNegate=function(){n=!1},this._repeatCommand=function(a,b){return null===k?e:null!==a&&null!==b?k(a,b):null!==l&&A?k(l,a):k(a)},this._equals=function(a,b){return 0===e._compare(a,b,1)},this._compare=function(a,b,c){var d=Object.prototype.toString;return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===d.call(a)&&"[object Date]"===d.call(b)?b>a?-c:a>b?c:0:(!j&&"number"!=typeof a&&"number"!=typeof b&&(a=""+a,b=""+b),b>a?-c:a>b?c:0)},this._performSort=function(){0!==t.length&&(a=e._doSort(a,0))},this._doSort=function(a,b){var c=t[b].by,d=t[b].dir,f=t[b].type,g=t[b].datefmt;if(b===t.length-1)return e._getOrder(a,c,d,f,g);b++;for(var h,c=e._getGroup(a,c,d,f,g),d=[],f=0;f<c.length;f++)for(h=e._doSort(c[f].items,b),g=0;g<h.length;g++)d.push(h[g]);return d},this._getOrder=function(a,c,d,f,g){var h,k,l=[],m=[],n="a"===d?1:-1;void 0===f&&(f="text"),k="float"===f||"number"===f||"currency"===f||"numeric"===f?function(a){return a=parseFloat((""+a).replace(i,"")),isNaN(a)?0:a}:"int"===f||"integer"===f?function(a){return a?parseFloat((""+a).replace(i,"")):0}:"date"===f||"datetime"===f?function(a){return b.jgrid.parseDate(g,a).getTime()}:b.isFunction(f)?f:function(a){return a=a?b.trim(""+a):"",j?a:a.toLowerCase()},b.each(a,function(a,d){h=""!==c?b.jgrid.getAccessor(d,c):d,void 0===h&&(h=""),h=k(h,d),m.push({vSort:h,index:a})}),m.sort(function(a,b){return a=a.vSort,b=b.vSort,e._compare(a,b,n)});for(var f=0,o=a.length;o>f;)d=m[f].index,l.push(a[d]),f++;return l},this._getGroup=function(a,c,d,f,g){var h,i=[],j=null,k=null;return b.each(e._getOrder(a,c,d,f,g),function(a,d){h=b.jgrid.getAccessor(d,c),null==h&&(h=""),e._equals(k,h)||(k=h,null!==j&&i.push(j),j=e._group(c,h)),j.items.push(d)}),null!==j&&i.push(j),i},this.ignoreCase=function(){return j=!1,e},this.useCase=function(){return j=!0,e},this.trim=function(){return g=!0,e},this.noTrim=function(){return g=!1,e},this.execute=function(){var d=h,g=[];return null===d?e:(b.each(a,function(){eval(d)&&g.push(this)}),a=g,e)},this.data=function(){return a},this.select=function(c){if(e._performSort(),!e._hasData())return[];if(e.execute(),b.isFunction(c)){var d=[];return b.each(a,function(a,b){d.push(c(b))}),d}return a},this.hasMatch=function(){return e._hasData()?(e.execute(),0<a.length):!1},this.andNot=function(a,b,c){return n=!n,e.and(a,b,c)},this.orNot=function(a,b,c){return n=!n,e.or(a,b,c)},this.not=function(a,b,c){return e.andNot(a,b,c)},this.and=function(a,b,c){return m=" && ",void 0===a?e:e._repeatCommand(a,b,c)},this.or=function(a,b,c){return m=" || ",void 0===a?e:e._repeatCommand(a,b,c)},this.orBegin=function(){return o++,e},this.orEnd=function(){return null!==h&&(h+=")"),e},this.isNot=function(a){return n=!n,e.is(a)},this.is=function(a){return e._append("this."+a),e._resetNegate(),e},this._compareValues=function(a,c,d,f,g){var h;h=A?"jQuery.jgrid.getAccessor(this,'"+c+"')":"this",void 0===d&&(d=null);var j=d,k=void 0===g.stype?"text":g.stype;if(null!==d)switch(k){case"int":case"integer":j=isNaN(Number(j))||""===j?"0":j,h="parseInt("+h+",10)",j="parseInt("+j+",10)";break;case"float":case"number":case"numeric":j=(""+j).replace(i,""),j=isNaN(Number(j))||""===j?"0":j,h="parseFloat("+h+")",j="parseFloat("+j+")";break;case"date":case"datetime":j=""+b.jgrid.parseDate(g.newfmt||"Y-m-d",j).getTime(),h='jQuery.jgrid.parseDate("'+g.srcfmt+'",'+h+").getTime()";break;default:h=e._getStr(h),j=e._getStr('"'+e._toStr(j)+'"')}return e._append(h+" "+f+" "+j),e._setCommand(a,c),e._resetNegate(),e},this.equals=function(a,b,c){return e._compareValues(e.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return e._compareValues(e.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return e._compareValues(e.equals,a,null,"===",c)},this.greater=function(a,b,c){return e._compareValues(e.greater,a,b,">",c)},this.less=function(a,b,c){return e._compareValues(e.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return e._compareValues(e.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return e._compareValues(e.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,c){var d=null==c?a:c,d=g?b.trim(d.toString()).length:d.toString().length;return A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+e._getStr('"'+e._toStr(c)+'"')):(d=g?b.trim(c.toString()).length:c.toString().length,e._append(e._getStr("this")+".substr(0,"+d+") == "+e._getStr('"'+e._toStr(a)+'"'))),e._setCommand(e.startsWith,a),e._resetNegate(),e},this.endsWith=function(a,c){var d=null==c?a:c,d=g?b.trim(d.toString()).length:d.toString().length;return e._append(A?e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+e._toStr(c)+'"':e._getStr("this")+".substr("+e._getStr("this")+'.length-"'+e._toStr(a)+'".length,"'+e._toStr(a)+'".length) == "'+e._toStr(a)+'"'),e._setCommand(e.endsWith,a),e._resetNegate(),e},this.contains=function(a,b){return e._append(A?e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+e._toStr(b)+'",0) > -1':e._getStr("this")+'.indexOf("'+e._toStr(a)+'",0) > -1'),e._setCommand(e.contains,a),e._resetNegate(),e},this.groupBy=function(b,c,d,f){return e._hasData()?e._getGroup(a,b,c,d,f):null},this.orderBy=function(a,c,d,f){return c=null==c?"a":b.trim(c.toString().toLowerCase()),null==d&&(d="text"),null==f&&(f="Y-m-d"),("desc"===c||"descending"===c)&&(c="d"),("asc"===c||"ascending"===c)&&(c="a"),t.push({by:a,dir:c,type:d,datefmt:f}),e},e}(d,null)},getMethod:function(a){return this.getAccessor(b.fn.jqGrid,a)},extend:function(a){b.extend(b.fn.jqGrid,a),this.no_legacy_api||b.fn.extend(a)}}),b.fn.jqGrid=function(a){if("string"==typeof a){var c=b.jgrid.getMethod(a);if(!c)throw"jqGrid - No such method: "+a;var d=b.makeArray(arguments).slice(1);return c.apply(this,d)}return this.each(function(){if(!this.grid){var c=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},b.jgrid.defaults,a||{}),d=this,e={headers:[],cols:[],footers:[],dragStart:function(a,e,f){this.resizing={idx:a,startX:e.clientX,sOL:f[0]},this.hDiv.style.cursor="col-resize",this.curGbox=b("#rs_m"+b.jgrid.jqID(c.id),"#gbox_"+b.jgrid.jqID(c.id)),this.curGbox.css({display:"block",left:f[0],top:f[1],height:f[2]}),b(d).triggerHandler("jqGridResizeStart",[e,a]),b.isFunction(c.resizeStart)&&c.resizeStart.call(d,e,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var b,d=a.clientX-this.resizing.startX,a=this.headers[this.resizing.idx],e="ltr"===c.direction?a.width+d:a.width-d;e>33&&(this.curGbox.css({left:this.resizing.sOL+d}),!0===c.forceFit?(b=this.headers[this.resizing.idx+c.nv],d="ltr"===c.direction?b.width-d:b.width+d,d>33&&(a.newWidth=e,b.newWidth=d)):(this.newWidth="ltr"===c.direction?c.tblwidth+d:c.tblwidth-d,a.newWidth=e))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var a=this.resizing.idx,e=this.headers[a].newWidth||this.headers[a].width,e=parseInt(e,10);this.resizing=!1,b("#rs_m"+b.jgrid.jqID(c.id)).css("display","none"),c.colModel[a].width=e,this.headers[a].width=e,this.headers[a].el.style.width=e+"px",this.cols[a].style.width=e+"px",0<this.footers.length&&(this.footers[a].style.width=e+"px"),!0===c.forceFit?(e=this.headers[a+c.nv].newWidth||this.headers[a+c.nv].width,this.headers[a+c.nv].width=e,this.headers[a+c.nv].el.style.width=e+"px",this.cols[a+c.nv].style.width=e+"px",0<this.footers.length&&(this.footers[a+c.nv].style.width=e+"px"),c.colModel[a+c.nv].width=e):(c.tblwidth=this.newWidth||c.tblwidth,b("table:first",this.bDiv).css("width",c.tblwidth+"px"),b("table:first",this.hDiv).css("width",c.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,c.footerrow&&(b("table:first",this.sDiv).css("width",c.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),b(d).triggerHandler("jqGridResizeStop",[e,a]),b.isFunction(c.resizeStop)&&c.resizeStop.call(d,e,a)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){e.timer&&clearTimeout(e.timer),e.timer=null;var a=b(e.bDiv).height();if(a){var d,f,g=b("table:first",e.bDiv);if(g[0].rows.length)try{f=(d=g[0].rows[1])?b(d).outerHeight()||e.prevRowHeight:e.prevRowHeight}catch(h){f=e.prevRowHeight}if(f){e.prevRowHeight=f;var i=c.rowNum;d=e.scrollTop=e.bDiv.scrollTop;var j=Math.round(g.position().top)-d,k=j+g.height();f*=i;var l,m,n;a>k&&0>=j&&(void 0===c.lastpage||parseInt((k+d+f-1)/f,10)<=c.lastpage)&&(m=parseInt((a-k+f-1)/f,10),k>=0||2>m||!0===c.scroll?(l=Math.round((k+d)/f)+1,j=-1):j=1),j>0&&(l=parseInt(d/f,10)+1,m=parseInt((d+a)/f,10)+2-l,n=!0),!m||c.lastpage&&(l>c.lastpage||1===c.lastpage||l===c.page&&l===c.lastpage)||(e.hDiv.loading?e.timer=setTimeout(e.populateVisible,c.scrollTimeout):(c.page=l,n&&(e.selectionPreserver(g[0]),e.emptyRows.call(g[0],!1,!1)),e.populate(m)))}}},scrollGrid:function(a){if(c.scroll){var b=e.bDiv.scrollTop;void 0===e.scrollTop&&(e.scrollTop=0),b!==e.scrollTop&&(e.scrollTop=b,e.timer&&clearTimeout(e.timer),e.timer=setTimeout(e.populateVisible,c.scrollTimeout))}e.hDiv.scrollLeft=e.bDiv.scrollLeft,c.footerrow&&(e.sDiv.scrollLeft=e.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,f=a.grid.bDiv.scrollLeft,g=function(){var h;if(c.selrow=null,c.selarrrow=[],c.multiselect&&e&&0<e.length)for(h=0;h<e.length;h++)e[h]!==d&&b(a).jqGrid("setSelection",e[h],!1,null);d&&b(a).jqGrid("setSelection",d,!1,null),a.grid.bDiv.scrollLeft=f,b(a).unbind(".selectionPreserver",g)};b(a).bind("jqGridGridComplete.selectionPreserver",g)}};if("TABLE"!==this.tagName.toUpperCase())alert("Element is not a table");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{b(this).empty().attr("tabindex","0"),this.p=c,this.p.useProp=!!b.fn.prop;var f,g;if(0===this.p.colNames.length)for(f=0;f<this.p.colModel.length;f++)this.p.colNames[f]=this.p.colModel[f].label||this.p.colModel[f].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var h=b("<div class='ui-jqgrid-view'></div>"),i=b.jgrid.msie;d.p.direction=b.trim(d.p.direction.toLowerCase()),-1===b.inArray(d.p.direction,["ltr","rtl"])&&(d.p.direction="ltr"),g=d.p.direction,b(h).insertBefore(this),b(this).removeClass("scroll").appendTo(h);var j=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(j).attr({id:"gbox_"+this.id,dir:g}).insertBefore(h),b(h).attr("id","gview_"+this.id).appendTo(j),b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(h),b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(h),b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var k=function(a,b){return a=parseInt(a,10),isNaN(a)?b||0:a},l=function(a,c,f,g,h,i){var j=d.p.colModel[a],k=j.align,l='style="',m=j.classes,n=j.name,o=[];return k&&(l+="text-align:"+k+";"),j.hidden===!0&&(l+="display:none;"),0===c?l+="width: "+e.headers[a].width+"px;":j.cellattr&&b.isFunction(j.cellattr)&&(a=j.cellattr.call(d,h,f,g,j,i))&&"string"==typeof a&&(a=a.replace(/style/i,"style").replace(/title/i,"title"),a.indexOf("title")>-1&&(j.title=!1),a.indexOf("class")>-1&&(m=void 0),o=a.split(/[^-]style/),2===o.length?(o[1]=b.trim(o[1].replace("=","")),(0===o[1].indexOf("'")||0===o[1].indexOf('"'))&&(o[1]=o[1].substring(1)),l+=o[1].replace(/'/gi,'"')):l+='"'),o.length||(o[0]="",l+='"'),l+=(void 0!==m?' class="'+m+'"':"")+(j.title&&f?' title="'+b.jgrid.stripHtml(f)+'"':""),l+=' aria-describedby="'+d.p.id+"_"+n+'"',l+o[0]},m=function(a){return null==a||""===a?"&#160;":d.p.autoencode?b.jgrid.htmlEncode(a):""+a},n=function(a,c,e,f,g){var h=d.p.colModel[e];return void 0!==h.formatter?(a=""+d.p.idPrefix!=""?b.jgrid.stripPref(d.p.idPrefix,a):a,a={rowId:a,colModel:h,gid:d.p.id,pos:e},c=b.isFunction(h.formatter)?h.formatter.call(d,c,a,f,g):b.fmatter?b.fn.fmatter.call(d,h.formatter,c,a,f,g):m(c)):c=m(c),c},o=function(a,b,c,d,e,f){return b=n(a,b,c,e,"add"),'<td role="gridcell" '+l(c,d,b,e,a,f)+">"+b+"</td>"},p=function(a,b,c,e){return e='<input role="checkbox" type="checkbox" id="jqg_'+d.p.id+"_"+a+'" class="cbox" name="jqg_'+d.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>",'<td role="gridcell" '+l(b,c,"",null,a,!0)+">"+e+"</td>"},q=function(a,b,c,d){return c=(parseInt(c,10)-1)*parseInt(d,10)+1+b,'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+l(a,b,c,null,b,!0)+">"+c+"</td>"},r=function(a){var b,c,e=[],f=0;for(c=0;c<d.p.colModel.length;c++)b=d.p.colModel[c],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(e[f]="local"===a?b.name:"xml"===a||"xmlstring"===a?b.xmlmap||b.name:b.jsonmap||b.name,f++);return e},s=function(a){var c=d.p.remapColumns;return c&&c.length||(c=b.map(d.p.colModel,function(a,b){return b})),a&&(c=b.map(c,function(b){return a>b?null:b-a})),c},t=function(a,c){var d;this.p.deepempty?b(this.rows).slice(1).remove():(d=this.rows.length>0?this.rows[0]:null,b(this.firstChild).empty().append(d)),a&&this.p.scroll&&(b(this.grid.bDiv.firstChild).css({height:"auto"}),b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),c===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},u=function(){var a,c,e,f=d.p.data.length;for(a=d.p.rownumbers===!0?1:0,c=d.p.multiselect===!0?1:0,e=d.p.subGrid===!0?1:0,a=d.p.keyIndex===!1||d.p.loadonce===!0?d.p.localReader.id:d.p.colModel[d.p.keyIndex+c+e+a].name,c=0;f>c;c++)e=b.jgrid.getAccessor(d.p.data[c],a),void 0===e&&(e=""+(c+1)),d.p._index[e]=c},v=function(a,c,e,f,g,h){var i,j="-1",k="",c=c?"display:none;":"",e="ui-widget-content jqgrow ui-row-"+d.p.direction+(e?" "+e:"")+(h?" ui-state-highlight":""),h=b(d).triggerHandler("jqGridRowAttr",[f,g,a]);if("object"!=typeof h&&(h=b.isFunction(d.p.rowattr)?d.p.rowattr.call(d,f,g,a):{}),!b.isEmptyObject(h)){h.hasOwnProperty("id")&&(a=h.id,delete h.id),h.hasOwnProperty("tabindex")&&(j=h.tabindex,delete h.tabindex),h.hasOwnProperty("style")&&(c+=h.style,delete h.style),h.hasOwnProperty("class")&&(e+=" "+h["class"],delete h["class"]);try{delete h.role}catch(l){}for(i in h)h.hasOwnProperty(i)&&(k+=" "+i+"="+h[i])}return'<tr role="row" id="'+a+'" tabindex="'+j+'" class="'+e+'"'+(""===c?"":' style="'+c+'"')+k+">"},w=function(a,c,e,f,g){var h=new Date,i="local"!==d.p.datatype&&d.p.loadonce||"xmlstring"===d.p.datatype,j=d.p.xmlReader,k="local"===d.p.datatype?"local":"xml";if(i&&(d.p.data=[],d.p._index={},d.p.localReader.id="_id_"),d.p.reccount=0,b.isXMLDoc(a)){-1!==d.p.treeANode||d.p.scroll?e=e>1?e:1:(t.call(d,!1,!0),e=1);var l,m,n,u,w,x,y,z,A,B=b(d),C=0,D=d.p.multiselect===!0?1:0,E=0,F=d.p.rownumbers===!0?1:0,G=[],H={},I=[],J=d.p.altRows===!0?d.p.altclass:"";d.p.subGrid===!0&&(E=1,u=b.jgrid.getMethod("addSubGridCell")),j.repeatitems||(G=r(k)),w=d.p.keyIndex===!1?b.isFunction(j.id)?j.id.call(d,a):j.id:d.p.keyIndex,G.length>0&&!isNaN(w)&&(d.p.remapColumns&&d.p.remapColumns.length&&(w=b.inArray(w,d.p.remapColumns)),w=G[w]),k=-1===(""+w).indexOf("[")?G.length?function(a,c){return b(w,a).text()||c}:function(a,c){return b(j.cell,a).eq(w).text()||c}:function(a,b){return a.getAttribute(w.replace(/[\[\]]/g,""))||b},d.p.userData={},d.p.page=b.jgrid.getXmlData(a,j.page)||d.p.page||0,d.p.lastpage=b.jgrid.getXmlData(a,j.total),void 0===d.p.lastpage&&(d.p.lastpage=1),d.p.records=b.jgrid.getXmlData(a,j.records)||0,b.isFunction(j.userdata)?d.p.userData=j.userdata.call(d,a)||{}:b.jgrid.getXmlData(a,j.userdata,!0).each(function(){d.p.userData[this.getAttribute("name")]=b(this).text()}),a=b.jgrid.getXmlData(a,j.root,!0),(a=b.jgrid.getXmlData(a,j.row,!0))||(a=[]);var K=a.length,L=0,M=[],N=parseInt(d.p.rowNum,10),O=d.p.scroll?b.jgrid.randId():1;if(K>0&&d.p.page<=0&&(d.p.page=1),a&&K){g&&(N*=g+1);var P,g=b.isFunction(d.p.afterInsertRow),Q=!1;for(d.p.grouping&&(Q=d.p.groupingView.groupCollapse===!0,P=b.jgrid.getMethod("groupingPrepare"));K>L;){y=a[L],z=k(y,O+L),z=d.p.idPrefix+z,l=0===e?0:e+1,A=(l+L)%2===1?J:"";var R=I.length;if(I.push(""),F&&I.push(q(0,L,d.p.page,d.p.rowNum)),D&&I.push(p(z,F,L,!1)),E&&I.push(u.call(B,D+F,L+e)),j.repeatitems){x||(x=s(D+E+F));var S=b.jgrid.getXmlData(y,j.cell,!0);b.each(x,function(a){var b=S[this];return b?(n=b.textContent||b.text,H[d.p.colModel[a+D+E+F].name]=n,void I.push(o(z,n,a+D+E+F,L+e,y,H))):!1})}else for(l=0;l<G.length;l++)n=b.jgrid.getXmlData(y,G[l]),H[d.p.colModel[l+D+E+F].name]=n,I.push(o(z,n,l+D+E+F,L+e,y,H));if(I[R]=v(z,Q,A,H,y,!1),I.push("</tr>"),d.p.grouping&&(M=P.call(B,I,M,H,L),I=[]),(i||d.p.treeGrid===!0)&&(H._id_=b.jgrid.stripPref(d.p.idPrefix,z),d.p.data.push(H),d.p._index[H._id_]=d.p.data.length-1),d.p.gridview===!1&&(b("tbody:first",c).append(I.join("")),B.triggerHandler("jqGridAfterInsertRow",[z,H,y]),g&&d.p.afterInsertRow.call(d,z,H,y),I=[]),H={},C++,L++,C===N)break}}if(d.p.gridview===!0&&(m=d.p.treeANode>-1?d.p.treeANode:0,d.p.grouping?(B.jqGrid("groupingRender",M,d.p.colModel.length),M=null):d.p.treeGrid===!0&&m>0?b(d.rows[m]).after(I.join("")):b("tbody:first",c).append(I.join(""))),d.p.subGrid===!0)try{B.jqGrid("addSubGrid",D+F)}catch(T){}if(d.p.totaltime=new Date-h,C>0&&0===d.p.records&&(d.p.records=K),I=null,d.p.treeGrid===!0)try{B.jqGrid("setTreeNode",m+1,C+m+1)}catch(U){}if(d.p.treeGrid||d.p.scroll||(d.grid.bDiv.scrollTop=0),d.p.reccount=C,d.p.treeANode=-1,d.p.userDataOnFooter&&B.jqGrid("footerData","set",d.p.userData,!0),i&&(d.p.records=K,d.p.lastpage=Math.ceil(K/N)),f||d.updatepager(!1,!0),i)for(;K>C;){if(y=a[C],z=k(y,C+O),z=d.p.idPrefix+z,j.repeatitems){x||(x=s(D+E+F));var V=b.jgrid.getXmlData(y,j.cell,!0);b.each(x,function(a){var b=V[this];return b?(n=b.textContent||b.text,void(H[d.p.colModel[a+D+E+F].name]=n)):!1})}else for(l=0;l<G.length;l++)n=b.jgrid.getXmlData(y,G[l]),H[d.p.colModel[l+D+E+F].name]=n;H._id_=b.jgrid.stripPref(d.p.idPrefix,z),d.p.data.push(H),d.p._index[H._id_]=d.p.data.length-1,H={},C++}}},x=function(a,c,e,f,g){var h=new Date;if(a){-1!==d.p.treeANode||d.p.scroll?e=e>1?e:1:(t.call(d,!1,!0),e=1);var i,j="local"!==d.p.datatype&&d.p.loadonce||"jsonstring"===d.p.datatype;j&&(d.p.data=[],d.p._index={},d.p.localReader.id="_id_"),d.p.reccount=0,"local"===d.p.datatype?(c=d.p.localReader,i="local"):(c=d.p.jsonReader,i="json");var k,l,m,n,u=b(d),w=0,x=[],y=d.p.multiselect?1:0,z=d.p.subGrid===!0?1:0,A=d.p.rownumbers===!0?1:0,B=s(y+z+A);i=r(i);var C,D,E,F,G,H,I={},J=[],K=d.p.altRows===!0?d.p.altclass:"";d.p.page=b.jgrid.getAccessor(a,c.page)||d.p.page||0,D=b.jgrid.getAccessor(a,c.total),z&&(n=b.jgrid.getMethod("addSubGridCell")),d.p.lastpage=void 0===D?1:D,d.p.records=b.jgrid.getAccessor(a,c.records)||0,d.p.userData=b.jgrid.getAccessor(a,c.userdata)||{},E=d.p.keyIndex===!1?b.isFunction(c.id)?c.id.call(d,a):c.id:d.p.keyIndex,c.repeatitems||(x=i,x.length>0&&!isNaN(E)&&(d.p.remapColumns&&d.p.remapColumns.length&&(E=b.inArray(E,d.p.remapColumns)),E=x[E])),D=b.jgrid.getAccessor(a,c.root),null==D&&b.isArray(a)&&(D=a),D||(D=[]),a=D.length,l=0,a>0&&d.p.page<=0&&(d.p.page=1);var L,M=parseInt(d.p.rowNum,10),N=d.p.scroll?b.jgrid.randId():1,O=!1;g&&(M*=g+1),"local"===d.p.datatype&&!d.p.deselectAfterSort&&(O=!0);var P,Q=b.isFunction(d.p.afterInsertRow),R=[],S=!1;for(d.p.grouping&&(S=d.p.groupingView.groupCollapse===!0,P=b.jgrid.getMethod("groupingPrepare"));a>l;){g=D[l],G=b.jgrid.getAccessor(g,E),void 0===G&&("number"==typeof E&&null!=d.p.colModel[E+y+z+A]&&(G=b.jgrid.getAccessor(g,d.p.colModel[E+y+z+A].name)),void 0===G&&(G=N+l,0===x.length&&c.cell&&(k=b.jgrid.getAccessor(g,c.cell)||g,G=null!=k&&void 0!==k[E]?k[E]:G))),G=d.p.idPrefix+G,k=1===e?0:e,H=(k+l)%2===1?K:"",O&&(L=d.p.multiselect?-1!==b.inArray(G,d.p.selarrrow):G===d.p.selrow);var T=J.length;for(J.push(""),A&&J.push(q(0,l,d.p.page,d.p.rowNum)),y&&J.push(p(G,A,l,L)),z&&J.push(n.call(u,y+A,l+e)),C=i,c.repeatitems&&(c.cell&&(g=b.jgrid.getAccessor(g,c.cell)||g),b.isArray(g)&&(C=B)),m=0;m<C.length;m++)k=b.jgrid.getAccessor(g,C[m]),I[d.p.colModel[m+y+z+A].name]=k,J.push(o(G,k,m+y+z+A,l+e,g,I));if(J[T]=v(G,S,H,I,g,L),J.push("</tr>"),d.p.grouping&&(R=P.call(u,J,R,I,l),J=[]),(j||d.p.treeGrid===!0)&&(I._id_=b.jgrid.stripPref(d.p.idPrefix,G),d.p.data.push(I),d.p._index[I._id_]=d.p.data.length-1),d.p.gridview===!1&&(b("#"+b.jgrid.jqID(d.p.id)+" tbody:first").append(J.join("")),u.triggerHandler("jqGridAfterInsertRow",[G,I,g]),Q&&d.p.afterInsertRow.call(d,G,I,g),J=[]),I={},w++,l++,w===M)break}if(d.p.gridview===!0&&(F=d.p.treeANode>-1?d.p.treeANode:0,d.p.grouping?u.jqGrid("groupingRender",R,d.p.colModel.length):d.p.treeGrid===!0&&F>0?b(d.rows[F]).after(J.join("")):b("#"+b.jgrid.jqID(d.p.id)+" tbody:first").append(J.join(""))),d.p.subGrid===!0)try{u.jqGrid("addSubGrid",y+A)}catch(U){}if(d.p.totaltime=new Date-h,w>0&&0===d.p.records&&(d.p.records=a),d.p.treeGrid===!0)try{u.jqGrid("setTreeNode",F+1,w+F+1)}catch(V){}if(d.p.treeGrid||d.p.scroll||(d.grid.bDiv.scrollTop=0),d.p.reccount=w,d.p.treeANode=-1,d.p.userDataOnFooter&&u.jqGrid("footerData","set",d.p.userData,!0),j&&(d.p.records=a,d.p.lastpage=Math.ceil(a/M)),f||d.updatepager(!1,!0),j)for(;a>w&&D[w];){if(g=D[w],G=b.jgrid.getAccessor(g,E),void 0===G&&("number"==typeof E&&null!=d.p.colModel[E+y+z+A]&&(G=b.jgrid.getAccessor(g,d.p.colModel[E+y+z+A].name)),void 0===G&&(G=N+w,0===x.length&&c.cell&&(e=b.jgrid.getAccessor(g,c.cell)||g,G=null!=e&&void 0!==e[E]?e[E]:G))),g){for(G=d.p.idPrefix+G,C=i,c.repeatitems&&(c.cell&&(g=b.jgrid.getAccessor(g,c.cell)||g),b.isArray(g)&&(C=B)),m=0;m<C.length;m++)I[d.p.colModel[m+y+z+A].name]=b.jgrid.getAccessor(g,C[m]);I._id_=b.jgrid.stripPref(d.p.idPrefix,G),d.p.data.push(I),d.p._index[I._id_]=d.p.data.length-1,I={}}w++}}},y=function(){function a(b){var c,d,e,f,g,h=0;if(null!=b.groups){for((d=b.groups.length&&"OR"===b.groupOp.toString().toUpperCase())&&q.orBegin(),c=0;c<b.groups.length;c++){h>0&&d&&q.or();try{a(b.groups[c])}catch(i){alert(i)}h++}d&&q.orEnd()}if(null!=b.rules)try{for((e=b.rules.length&&"OR"===b.groupOp.toString().toUpperCase())&&q.orBegin(),c=0;c<b.rules.length;c++)g=b.rules[c],f=b.groupOp.toString().toUpperCase(),p[g.op]&&g.field&&(h>0&&f&&"OR"===f&&(q=q.or()),q=p[g.op](q,f)(g.field,g.data,j[g.field])),h++;e&&q.orEnd()}catch(k){alert(k)}}var c,e,f,g=d.p.multiSort?[]:"",h=[],i=!1,j={},k=[],l=[];if(b.isArray(d.p.data)){var m,n,o=d.p.grouping?d.p.groupingView:!1;if(b.each(d.p.colModel,function(){if(e=this.sorttype||"text","date"===e||"datetime"===e?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(c=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat,f=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat):c=f=this.datefmt||"Y-m-d",j[this.name]={stype:e,srcfmt:c,newfmt:f}):j[this.name]={stype:e,srcfmt:"",newfmt:""},d.p.grouping)for(n=0,m=o.groupField.length;m>n;n++)if(this.name===o.groupField[n]){var a=this.name;this.index&&(a=this.index),k[n]=j[a],l[n]=a}d.p.multiSort?this.lso&&(g.push(this.name),a=this.lso.split("-"),h.push(a[a.length-1])):i||this.index!==d.p.sortname&&this.name!==d.p.sortname||(g=this.name,i=!0)}),!d.p.treeGrid){var p={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull
},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},q=b.jgrid.from(d.p.data);if(d.p.ignoreCase&&(q=q.ignoreCase()),d.p.search===!0){var r=d.p.postData.filters;if(r)"string"==typeof r&&(r=b.jgrid.parse(r)),a(r);else try{q=p[d.p.postData.searchOper](q)(d.p.postData.searchField,d.p.postData.searchString,j[d.p.postData.searchField])}catch(s){}}if(d.p.grouping)for(n=0;m>n;n++)q.orderBy(l[n],o.groupOrder[n],k[n].stype,k[n].srcfmt);d.p.multiSort?b.each(g,function(a){q.orderBy(this,h[a],j[this].stype,j[this].srcfmt)}):g&&d.p.sortorder&&i&&("DESC"===d.p.sortorder.toUpperCase()?q.orderBy(d.p.sortname,"d",j[g].stype,j[g].srcfmt):q.orderBy(d.p.sortname,"a",j[g].stype,j[g].srcfmt));var r=q.select(),t=parseInt(d.p.rowNum,10),u=r.length,v=parseInt(d.p.page,10),w=Math.ceil(u/t),x={},r=r.slice((v-1)*t,v*t),j=q=null;return x[d.p.localReader.total]=w,x[d.p.localReader.page]=v,x[d.p.localReader.records]=u,x[d.p.localReader.root]=r,x[d.p.localReader.userdata]=d.p.userData,r=null,x}b(d).jqGrid("SortTree",g,d.p.sortorder,j[g].stype,j[g].srcfmt)}},z=function(){if(d.grid.hDiv.loading=!0,!d.p.hiddengrid)switch(d.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(d.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(d.p.id)).show(),b("#load_"+b.jgrid.jqID(d.p.id)).show()}},A=function(){switch(d.grid.hDiv.loading=!1,d.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(d.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(d.p.id)).hide(),b("#load_"+b.jgrid.jqID(d.p.id)).hide()}},B=function(a){if(!d.grid.hDiv.loading){var c,e=d.p.scroll&&a===!1,f={},g=d.p.prmNames;d.p.page<=0&&(d.p.page=1),null!==g.search&&(f[g.search]=d.p.search),null!==g.nd&&(f[g.nd]=(new Date).getTime()),null!==g.rows&&(f[g.rows]=d.p.rowNum),null!==g.page&&(f[g.page]=d.p.page),null!==g.sort&&(f[g.sort]=d.p.sortname),null!==g.order&&(f[g.order]=d.p.sortorder),null!==d.p.rowTotal&&null!==g.totalrows&&(f[g.totalrows]=d.p.rowTotal);var h=b.isFunction(d.p.loadComplete),i=h?d.p.loadComplete:null,j=0,a=a||1;if(a>1?null!==g.npage?(f[g.npage]=a,j=a-1,a=1):i=function(b){d.p.page++,d.grid.hDiv.loading=!1,h&&d.p.loadComplete.call(d,b),B(a-1)}:null!==g.npage&&delete d.p.postData[g.npage],d.p.grouping){b(d).jqGrid("groupingSetup");var k,l=d.p.groupingView,m="";for(k=0;k<l.groupField.length;k++){var n=l.groupField[k];b.each(d.p.colModel,function(a,b){b.name===n&&b.index&&(n=b.index)}),m+=n+" "+l.groupOrder[k]+", "}f[g.sort]=m+f[g.sort]}b.extend(d.p.postData,f);var o=d.p.scroll?d.rows.length-1:1,f=b(d).triggerHandler("jqGridBeforeRequest");if(f!==!1&&"stop"!==f)if(b.isFunction(d.p.datatype))d.p.datatype.call(d,d.p.postData,"load_"+d.p.id);else{if(b.isFunction(d.p.beforeRequest)&&(f=d.p.beforeRequest.call(d),void 0===f&&(f=!0),f===!1))return;switch(c=d.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:d.p.url,type:d.p.mtype,dataType:c,data:b.isFunction(d.p.serializeGridData)?d.p.serializeGridData.call(d,d.p.postData):d.p.postData,success:function(f,g,h){b.isFunction(d.p.beforeProcessing)&&d.p.beforeProcessing.call(d,f,g,h)===!1?A():("xml"===c?w(f,d.grid.bDiv,o,a>1,j):x(f,d.grid.bDiv,o,a>1,j),b(d).triggerHandler("jqGridLoadComplete",[f]),i&&i.call(d,f),b(d).triggerHandler("jqGridAfterLoadComplete",[f]),e&&d.grid.populateVisible(),(d.p.loadonce||d.p.treeGrid)&&(d.p.datatype="local"),1===a&&A())},error:function(c,e,f){b.isFunction(d.p.loadError)&&d.p.loadError.call(d,c,e,f),1===a&&A()},beforeSend:function(a,c){var e=!0;return b.isFunction(d.p.loadBeforeSend)&&(e=d.p.loadBeforeSend.call(d,a,c)),void 0===e&&(e=!0),e===!1?!1:void z()}},b.jgrid.ajaxOptions,d.p.ajaxGridOptions));break;case"xmlstring":z(),f="string"!=typeof d.p.datastr?d.p.datastr:b.parseXML(d.p.datastr),w(f,d.grid.bDiv),b(d).triggerHandler("jqGridLoadComplete",[f]),h&&d.p.loadComplete.call(d,f),b(d).triggerHandler("jqGridAfterLoadComplete",[f]),d.p.datatype="local",d.p.datastr=null,A();break;case"jsonstring":z(),f="string"==typeof d.p.datastr?b.jgrid.parse(d.p.datastr):d.p.datastr,x(f,d.grid.bDiv),b(d).triggerHandler("jqGridLoadComplete",[f]),h&&d.p.loadComplete.call(d,f),b(d).triggerHandler("jqGridAfterLoadComplete",[f]),d.p.datatype="local",d.p.datastr=null,A();break;case"local":case"clientside":z(),d.p.datatype="local",f=y(),x(f,d.grid.bDiv,o,a>1,j),b(d).triggerHandler("jqGridLoadComplete",[f]),i&&i.call(d,f),b(d).triggerHandler("jqGridAfterLoadComplete",[f]),e&&d.grid.populateVisible(),A()}}}},C=function(a){b("#cb_"+b.jgrid.jqID(d.p.id),d.grid.hDiv)[d.p.useProp?"prop":"attr"]("checked",a),d.p.frozenColumns&&b("#cb_"+b.jgrid.jqID(d.p.id),d.grid.fhDiv)[d.p.useProp?"prop":"attr"]("checked",a)},D=function(a,c){var e,f,h,i,j="",l="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",m="",n=function(a){var c;return b.isFunction(d.p.onPaging)&&(c=d.p.onPaging.call(d,a)),d.p.selrow=null,d.p.multiselect&&(d.p.selarrrow=[],C(!1)),d.p.savedRow=[],"stop"===c?!1:!0},a=a.substr(1),c=c+("_"+a);if(e="pg_"+a,f=a+"_left",h=a+"_center",i=a+"_right",b("#"+b.jgrid.jqID(a)).append("<div id='"+e+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+f+"' align='left'></td><td id='"+h+"' align='center' style='white-space:pre;'></td><td id='"+i+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),d.p.rowList.length>0){for(m="<td dir='"+g+"'>",m+="<select class='ui-pg-selbox' role='listbox'>",f=0;f<d.p.rowList.length;f++)m+='<option role="option" value="'+d.p.rowList[f]+'"'+(d.p.rowNum===d.p.rowList[f]?' selected="selected"':"")+">"+d.p.rowList[f]+"</option>";m+="</select></td>"}"rtl"===g&&(l+=m),d.p.pginput===!0&&(j="<td dir='"+g+"'>"+b.jgrid.format(d.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(a)+"'></span>")+"</td>"),d.p.pgbuttons===!0?(f=["first"+c,"prev"+c,"next"+c,"last"+c],"rtl"===g&&f.reverse(),l+="<td id='"+f[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",l+="<td id='"+f[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",l=l+(""!==j?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+j+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+f[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>"),l+="<td id='"+f[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):""!==j&&(l+=j),"ltr"===g&&(l+=m),l+="</tr></tbody></table>",d.p.viewrecords===!0&&b("td#"+a+"_"+d.p.recordpos,"#"+e).append("<div dir='"+g+"' style='text-align:"+d.p.recordpos+"' class='ui-paging-info'></div>"),b("td#"+a+"_"+d.p.pagerpos,"#"+e).append(l),m=b(".ui-jqgrid").css("font-size")||"11px",b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+m+";visibility:hidden;' ></div>"),l=b(l).clone().appendTo("#testpg").width(),b("#testpg").remove(),l>0&&(""!==j&&(l+=50),b("td#"+a+"_"+d.p.pagerpos,"#"+e).width(l)),d.p._nvtd=[],d.p._nvtd[0]=Math.floor(l?(d.p.width-l)/2:d.p.width/3),d.p._nvtd[1]=0,l=null,b(".ui-pg-selbox","#"+e).bind("change",function(){return n("records")?(d.p.page=Math.round(d.p.rowNum*(d.p.page-1)/this.value-.5)+1,d.p.rowNum=this.value,d.p.pager&&b(".ui-pg-selbox",d.p.pager).val(this.value),d.p.toppager&&b(".ui-pg-selbox",d.p.toppager).val(this.value),B(),!1):!1}),d.p.pgbuttons===!0&&(b(".ui-pg-button","#"+e).hover(function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")}),b("#first"+b.jgrid.jqID(c)+", #prev"+b.jgrid.jqID(c)+", #next"+b.jgrid.jqID(c)+", #last"+b.jgrid.jqID(c)).click(function(){var a=k(d.p.page,1),b=k(d.p.lastpage,1),e=!1,f=!0,g=!0,h=!0,i=!0;return 0===b||1===b?i=h=g=f=!1:b>1&&a>=1?1===a?g=f=!1:a===b&&(i=h=!1):b>1&&0===a&&(i=h=!1,a=b-1),n(this.id)?(this.id==="first"+c&&f&&(d.p.page=1,e=!0),this.id==="prev"+c&&g&&(d.p.page=a-1,e=!0),this.id==="next"+c&&h&&(d.p.page=a+1,e=!0),this.id==="last"+c&&i&&(d.p.page=b,e=!0),e&&B(),!1):!1})),d.p.pginput===!0&&b("input.ui-pg-input","#"+e).keypress(function(a){return 13===(a.charCode||a.keyCode||0)?n("user")?(b(this).val(k(b(this).val(),1)),d.p.page=b(this).val()>0?b(this).val():d.p.page,B(),!1):!1:this})},E=function(a,c){var e,f,g="",h=d.p.colModel,i=!1;f=d.p.frozenColumns?c:d.grid.headers[a].el;var j="";b("span.ui-grid-ico-sort",f).addClass("ui-state-disabled"),b(f).attr("aria-selected","false"),h[a].lso?"asc"===h[a].lso?(h[a].lso=h[a].lso+"-desc",j="desc"):"desc"===h[a].lso?(h[a].lso=h[a].lso+"-asc",j="asc"):("asc-desc"===h[a].lso||"desc-asc"===h[a].lso)&&(h[a].lso=""):h[a].lso=j=h.firstsortorder||"asc",j?(b("span.s-ico",f).show(),b("span.ui-icon-"+j,f).removeClass("ui-state-disabled"),b(f).attr("aria-selected","true")):d.p.viewsortcols[0]||b("span.s-ico",f).hide(),d.p.sortorder="",b.each(h,function(a){this.lso&&(a>0&&i&&(g+=", "),e=this.lso.split("-"),g+=h[a].index||h[a].name,g+=" "+e[e.length-1],i=!0,d.p.sortorder=e[e.length-1])}),f=g.lastIndexOf(d.p.sortorder),g=g.substring(0,f),d.p.sortname=g},F=function(a,c,e,f,g){if(d.p.colModel[c].sortable){var h;if(!(d.p.savedRow.length>0)){if(e||(d.p.lastsort===c?"asc"===d.p.sortorder?d.p.sortorder="desc":"desc"===d.p.sortorder&&(d.p.sortorder="asc"):d.p.sortorder=d.p.colModel[c].firstsortorder||"asc",d.p.page=1),d.p.multiSort)E(c,g);else{if(f){if(d.p.lastsort===c&&d.p.sortorder===f&&!e)return;d.p.sortorder=f}e=d.grid.headers[d.p.lastsort].el,g=d.p.frozenColumns?g:d.grid.headers[c].el,b("span.ui-grid-ico-sort",e).addClass("ui-state-disabled"),b(e).attr("aria-selected","false"),d.p.frozenColumns&&(d.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),d.grid.fhDiv.find("th").attr("aria-selected","false")),b("span.ui-icon-"+d.p.sortorder,g).removeClass("ui-state-disabled"),b(g).attr("aria-selected","true"),d.p.viewsortcols[0]||d.p.lastsort===c||(d.p.frozenColumns&&d.grid.fhDiv.find("span.s-ico").hide(),b("span.s-ico",e).hide(),b("span.s-ico",g).show()),a=a.substring(5+d.p.id.length+1),d.p.sortname=d.p.colModel[c].index||a,h=d.p.sortorder}"stop"===b(d).triggerHandler("jqGridSortCol",[a,c,h])?d.p.lastsort=c:b.isFunction(d.p.onSortCol)&&"stop"===d.p.onSortCol.call(d,a,c,h)?d.p.lastsort=c:("local"===d.p.datatype?d.p.deselectAfterSort&&b(d).jqGrid("resetSelection"):(d.p.selrow=null,d.p.multiselect&&C(!1),d.p.selarrrow=[],d.p.savedRow=[]),d.p.scroll&&(g=d.grid.bDiv.scrollLeft,t.call(d,!0,!1),d.grid.hDiv.scrollLeft=g),d.p.subGrid&&"local"===d.p.datatype&&b("td.sgexpanded","#"+b.jgrid.jqID(d.p.id)).each(function(){b(this).trigger("click")}),B(),d.p.lastsort=c,d.p.sortname!==a&&c&&(d.p.lastsort=c))}}},G=function(a){return a=b(d.grid.headers[a].el),a=[a.position().left+a.outerWidth()],"rtl"===d.p.direction&&(a[0]=d.p.width-a[0]),a[0]=a[0]-d.grid.bDiv.scrollLeft,a.push(b(d.grid.hDiv).position().top),a.push(b(d.grid.bDiv).offset().top-b(d.grid.hDiv).offset().top+b(d.grid.bDiv).height()),a},H=function(a){var c,e=d.grid.headers,f=b.jgrid.getCellIndex(a);for(c=0;c<e.length;c++)if(a===e[c].el){f=c;break}return f};for(this.p.id=this.id,-1===b.inArray(d.p.multikey,["shiftKey","altKey","ctrlKey"])&&(d.p.multikey=!1),d.p.keyIndex=!1,f=0;f<d.p.colModel.length;f++)d.p.colModel[f]=b.extend(!0,{},d.p.cmTemplate,d.p.colModel[f].template||{},d.p.colModel[f]),!1===d.p.keyIndex&&!0===d.p.colModel[f].key&&(d.p.keyIndex=f);if(d.p.sortorder=d.p.sortorder.toLowerCase(),b.jgrid.cell_width=b.jgrid.cellWidth(),!0===d.p.grouping&&(d.p.scroll=!1,d.p.rownumbers=!1,d.p.treeGrid=!1,d.p.gridview=!0),!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(I){}"local"!==d.p.datatype&&(d.p.localReader={id:"_id_"})}if(this.p.subGrid)try{b(d).jqGrid("setSubGrid")}catch(J){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cell_width?d.p.multiselectWidth+d.p.cellLayout:d.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:d.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),d.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},d.p.xmlReader),d.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.jsonReader),d.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.localReader),d.p.scroll&&(d.p.pgbuttons=!1,d.p.pginput=!1,d.p.rowList=[]),d.p.data.length&&u();var K,L,M,N,O,P,Q,R,S="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",T=R="",U=[],V=[];if(L=[],!0===d.p.shrinkToFit&&!0===d.p.forceFit)for(f=d.p.colModel.length-1;f>=0;f--)if(!d.p.colModel[f].hidden){d.p.colModel[f].resizable=!1;break}if("horizontal"===d.p.viewsortcols[1]&&(R=" ui-i-asc",T=" ui-i-desc"),K=i?"class='ui-th-div-ie'":"",R="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+R+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+g+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+T+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+g+"'></span></span>"),d.p.multiSort)for(U=d.p.sortname.split(","),f=0;f<U.length;f++)L=b.trim(U[f]).split(" "),U[f]=b.trim(L[0]),V[f]=L[1]?b.trim(L[1]):d.p.sortorder||"asc";for(f=0;f<this.p.colNames.length;f++)L=d.p.headertitles?' title="'+b.jgrid.stripHtml(d.p.colNames[f])+'"':"",S+="<th id='"+d.p.id+"_"+d.p.colModel[f].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+g+"'"+L+">",L=d.p.colModel[f].index||d.p.colModel[f].name,S+="<div id='jqgh_"+d.p.id+"_"+d.p.colModel[f].name+"' "+K+">"+d.p.colNames[f],d.p.colModel[f].width=d.p.colModel[f].width?parseInt(d.p.colModel[f].width,10):150,"boolean"!=typeof d.p.colModel[f].title&&(d.p.colModel[f].title=!0),d.p.colModel[f].lso="",L===d.p.sortname&&(d.p.lastsort=f),d.p.multiSort&&(L=b.inArray(L,U),-1!==L&&(d.p.colModel[f].lso=V[L])),S+=R+"</div></th>";if(R=null,b(this).append(S+"</tr></thead>"),b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}),this.p.multiselect){var W,X=[];b("#cb_"+b.jgrid.jqID(d.p.id),this).bind("click",function(){d.p.selarrrow=[];var a=d.p.frozenColumns===!0?d.p.id+"_frozen":"";this.checked?(b(d.rows).each(function(c){c>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!0),b(this).addClass("ui-state-highlight").attr("aria-selected","true"),d.p.selarrrow.push(this.id),d.p.selrow=this.id,a&&(b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!0),b("#"+b.jgrid.jqID(this.id),d.grid.fbDiv).addClass("ui-state-highlight")))}),W=!0,X=[]):(b(d.rows).each(function(c){c>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")&&(b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!1),b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),X.push(this.id),a&&(b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!1),b("#"+b.jgrid.jqID(this.id),d.grid.fbDiv).removeClass("ui-state-highlight")))}),d.p.selrow=null,W=!1),b(d).triggerHandler("jqGridSelectAll",[W?d.p.selarrrow:X,W]),b.isFunction(d.p.onSelectAll)&&d.p.onSelectAll.call(d,W?d.p.selarrrow:X,W)})}!0===d.p.autowidth&&(S=b(j).innerWidth(),d.p.width=S>0?S:"nw"),function(){var a,c,f,g,h=0,i=b.jgrid.cell_width?0:k(d.p.cellLayout,0),j=0,l=k(d.p.scrollOffset,0),m=!1,n=0;b.each(d.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),d.p.grouping&&d.p.autowidth){var a=b.inArray(this.name,d.p.groupingView.groupField);a>=0&&d.p.groupingView.groupColumnShow.length>a&&(this.hidden=!d.p.groupingView.groupColumnShow[a])}this.widthOrg=c=k(this.width,0),this.hidden===!1&&(h+=c+i,this.fixed?n+=c+i:j++)}),isNaN(d.p.width)&&(d.p.width=h+(d.p.shrinkToFit!==!1||isNaN(d.p.height)?0:l)),e.width=d.p.width,d.p.tblwidth=h,d.p.shrinkToFit===!1&&d.p.forceFit===!0&&(d.p.forceFit=!1),d.p.shrinkToFit===!0&&j>0&&(f=e.width-i*j-n,isNaN(d.p.height)||(f-=l,m=!0),h=0,b.each(d.p.colModel,function(b){this.hidden!==!1||this.fixed||(this.width=c=Math.round(f*this.width/(d.p.tblwidth-i*j-n)),h+=c,a=b)}),g=0,m?e.width-n-(h+i*j)!==l&&(g=e.width-n-(h+i*j)-l):!m&&1!==Math.abs(e.width-n-(h+i*j))&&(g=e.width-n-(h+i*j)),d.p.colModel[a].width=d.p.colModel[a].width+g,d.p.tblwidth=h+g+i*j+n,d.p.tblwidth>d.p.width&&(d.p.colModel[a].width=d.p.colModel[a].width-(d.p.tblwidth-parseInt(d.p.width,10)),d.p.tblwidth=d.p.width))}(),b(j).css("width",e.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+d.p.id+"'>&#160;</div>"),b(h).css("width",e.width+"px");var S=b("thead:first",d).get(0),Y="";d.p.footerrow&&(Y+="<table role='grid' style='width:"+d.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+g+"'>");var h=b("tr:first",S),Z="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(d.p.disableClick=!1,b("th",h).each(function(a){M=d.p.colModel[a].width,void 0===d.p.colModel[a].resizable&&(d.p.colModel[a].resizable=!0),d.p.colModel[a].resizable?(N=document.createElement("span"),b(N).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+g).css("cursor","col-resize"),b(this).addClass(d.p.resizeclass)):N="",b(this).css("width",M+"px").prepend(N);var c="";d.p.colModel[a].hidden&&(b(this).css("display","none"),c="display:none;"),Z+="<td role='gridcell' style='height:0px;width:"+M+"px;"+c+"'></td>",e.headers[a]={width:M,el:this},O=d.p.colModel[a].sortable,"boolean"!=typeof O&&(O=d.p.colModel[a].sortable=!0),c=d.p.colModel[a].name,"cb"===c||"subgrid"===c||"rn"===c||d.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable"),O&&(d.p.multiSort?d.p.viewsortcols[0]?(b("div span.s-ico",this).show(),d.p.colModel[a].lso&&b("div span.ui-icon-"+d.p.colModel[a].lso,this).removeClass("ui-state-disabled")):d.p.colModel[a].lso&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+d.p.colModel[a].lso,this).removeClass("ui-state-disabled")):d.p.viewsortcols[0]?(b("div span.s-ico",this).show(),a===d.p.lastsort&&b("div span.ui-icon-"+d.p.sortorder,this).removeClass("ui-state-disabled")):a===d.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+d.p.sortorder,this).removeClass("ui-state-disabled"))),d.p.footerrow&&(Y+="<td role='gridcell' "+l(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if(1===b(a.target).closest("th>span.ui-jqgrid-resize").length){var c=H(this);if(d.p.forceFit===!0){var f,g=d.p,h=c;for(f=c+1;f<d.p.colModel.length;f++)if(d.p.colModel[f].hidden!==!0){h=f;break}g.nv=h-c}return e.dragStart(c,a,G(c)),!1}}).click(function(a){if(d.p.disableClick)return d.p.disableClick=!1;var c,e,f="th>div.ui-jqgrid-sortable";if(d.p.viewsortcols[2]||(f="th>div>span>span.ui-grid-ico-sort"),a=b(a.target).closest(f),1===a.length){var g;if(d.p.frozenColumns){var h=b(this)[0].id.substring(5);b(d.p.colModel).each(function(a){return this.name===h?(g=a,!1):void 0})}else g=H(this);return d.p.viewsortcols[2]||(c=!0,e=a.attr("sort")),null!=g&&F(b("div",this)[0].id,g,c,e,this),!1}}),d.p.sortable&&b.fn.sortable)try{b(d).jqGrid("sortableColumns",h)}catch($){}d.p.footerrow&&(Y+="</tr></tbody></table>"),Z+="</tr>",this.appendChild(document.createElement("tbody")),b(this).addClass("ui-jqgrid-btable").append(Z);var Z=null,h=b("<table class='ui-jqgrid-htable' style='width:"+d.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(S),_=d.p.caption&&!0===d.p.hiddengrid?!0:!1;f=b("<div class='ui-jqgrid-hbox"+("rtl"===g?"-rtl":"")+"'></div>"),S=null,e.hDiv=document.createElement("div"),b(e.hDiv).css({width:e.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(f),b(f).append(h),h=null,_&&b(e.hDiv).hide(),d.p.pager&&("string"==typeof d.p.pager?"#"!==d.p.pager.substr(0,1)&&(d.p.pager="#"+d.p.pager):d.p.pager="#"+b(d.p.pager).attr("id"),b(d.p.pager).css({width:e.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(j),_&&b(d.p.pager).hide(),D(d.p.pager,"")),!1===d.p.cellEdit&&!0===d.p.hoverrows&&b(d).bind("mouseover",function(a){Q=b(a.target).closest("tr.jqgrow"),"ui-subgrid"!==b(Q).attr("class")&&b(Q).addClass("ui-state-hover")}).bind("mouseout",function(a){Q=b(a.target).closest("tr.jqgrow"),b(Q).removeClass("ui-state-hover")});var ab,bb,cb;b(d).before(e.hDiv).click(function(a){if(P=a.target,Q=b(P,d.rows).closest("tr.jqgrow"),0===b(Q).length||Q[0].className.indexOf("ui-state-disabled")>-1||(b(P,d).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==d.id)return this;var c=b(P).hasClass("cbox"),e=b(d).triggerHandler("jqGridBeforeSelectRow",[Q[0].id,a]);if((e=e===!1||"stop"===e?!1:!0)&&b.isFunction(d.p.beforeSelectRow)&&(e=d.p.beforeSelectRow.call(d,Q[0].id,a)),"A"!==P.tagName&&("INPUT"!==P.tagName&&"TEXTAREA"!==P.tagName&&"OPTION"!==P.tagName&&"SELECT"!==P.tagName||c)&&e===!0)if(ab=Q[0].id,bb=b.jgrid.getCellIndex(P),cb=b(P).closest("td,th").html(),b(d).triggerHandler("jqGridCellSelect",[ab,bb,cb,a]),b.isFunction(d.p.onCellSelect)&&d.p.onCellSelect.call(d,ab,bb,cb,a),d.p.cellEdit===!0)if(d.p.multiselect&&c)b(d).jqGrid("setSelection",ab,!0,a);else{ab=Q[0].rowIndex;try{b(d).jqGrid("editCell",ab,bb,!0)}catch(f){}}else if(d.p.multikey)a[d.p.multikey]?b(d).jqGrid("setSelection",ab,!0,a):d.p.multiselect&&c&&(c=b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+ab).is(":checked"),b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+ab)[d.p.useProp?"prop":"attr"]("checked",c));else{if(d.p.multiselect&&d.p.multiboxonly&&!c){var g=d.p.frozenColumns?d.p.id+"_frozen":"";b(d.p.selarrrow).each(function(a,c){var e=d.rows.namedItem(c);b(e).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(c))[d.p.useProp?"prop":"attr"]("checked",!1),g&&(b("#"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(g)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(d.p.id)+"_"+b.jgrid.jqID(c),"#"+b.jgrid.jqID(g))[d.p.useProp?"prop":"attr"]("checked",!1))}),d.p.selarrrow=[]}b(d).jqGrid("setSelection",ab,!0,a)}}).bind("reloadGrid",function(a,c){if(d.p.treeGrid===!0&&(d.p.datatype=d.p.treedatatype),c&&c.current&&d.grid.selectionPreserver(d),"local"===d.p.datatype?(b(d).jqGrid("resetSelection"),d.p.data.length&&u()):d.p.treeGrid||(d.p.selrow=null,d.p.multiselect&&(d.p.selarrrow=[],C(!1)),d.p.savedRow=[]),d.p.scroll&&t.call(d,!0,!1),c&&c.page){var e=c.page;e>d.p.lastpage&&(e=d.p.lastpage),1>e&&(e=1),d.p.page=e,d.grid.bDiv.scrollTop=d.grid.prevRowHeight?(e-1)*d.grid.prevRowHeight*d.p.rowNum:0}return d.grid.prevRowHeight&&d.p.scroll?(delete d.p.lastpage,d.grid.populateVisible()):d.grid.populate(),d.p._inlinenav===!0&&b(d).jqGrid("showAddEditButtons"),!1}).dblclick(function(a){P=a.target,Q=b(P,d.rows).closest("tr.jqgrow"),0!==b(Q).length&&(ab=Q[0].rowIndex,bb=b.jgrid.getCellIndex(P),b(d).triggerHandler("jqGridDblClickRow",[b(Q).attr("id"),ab,bb,a]),b.isFunction(d.p.ondblClickRow)&&d.p.ondblClickRow.call(d,b(Q).attr("id"),ab,bb,a))}).bind("contextmenu",function(a){P=a.target,Q=b(P,d.rows).closest("tr.jqgrow"),0!==b(Q).length&&(d.p.multiselect||b(d).jqGrid("setSelection",Q[0].id,!0,a),ab=Q[0].rowIndex,bb=b.jgrid.getCellIndex(P),b(d).triggerHandler("jqGridRightClickRow",[b(Q).attr("id"),ab,bb,a]),b.isFunction(d.p.onRightClickRow)&&d.p.onRightClickRow.call(d,b(Q).attr("id"),ab,bb,a))}),e.bDiv=document.createElement("div"),i&&"auto"===(""+d.p.height).toLowerCase()&&(d.p.height="100%"),b(e.bDiv).append(b('<div style="position:relative;'+(i&&8>b.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:d.p.height+(isNaN(d.p.height)?"":"px"),width:e.width+"px"}).scroll(e.scrollGrid),b("table:first",e.bDiv).css({width:d.p.tblwidth+"px"}),b.support.tbody||2===b("tbody",this).length&&b("tbody:gt(0)",this).remove(),d.p.multikey&&(b.jgrid.msie?b(e.bDiv).bind("selectstart",function(){return!1}):b(e.bDiv).bind("mousedown",function(){return!1})),_&&b(e.bDiv).hide(),e.cDiv=document.createElement("div");var db=!0===d.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){db.addClass("ui-state-hover")},function(){db.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===g?"left":"right","0px"):"";if(b(e.cDiv).append(db).append("<span class='ui-jqgrid-title"+("rtl"===g?"-rtl":"")+"'>"+d.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),b(e.cDiv).insertBefore(e.hDiv),d.p.toolbar[0]&&(e.uDiv=document.createElement("div"),"top"===d.p.toolbar[1]?b(e.uDiv).insertBefore(e.hDiv):"bottom"===d.p.toolbar[1]&&b(e.uDiv).insertAfter(e.hDiv),"both"===d.p.toolbar[1]?(e.ubDiv=document.createElement("div"),b(e.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(e.hDiv),b(e.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(e.hDiv),_&&b(e.ubDiv).hide()):b(e.uDiv).width(e.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),_&&b(e.uDiv).hide()),d.p.toppager&&(d.p.toppager=b.jgrid.jqID(d.p.id)+"_toppager",e.topDiv=b("<div id='"+d.p.toppager+"'></div>")[0],d.p.toppager="#"+d.p.toppager,b(e.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(e.width).insertBefore(e.hDiv),D(d.p.toppager,"_t")),d.p.footerrow&&(e.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],f=b("<div class='ui-jqgrid-hbox"+("rtl"===g?"-rtl":"")+"'></div>"),b(e.sDiv).append(f).width(e.width).insertAfter(e.hDiv),b(f).append(Y),e.footers=b(".ui-jqgrid-ftable",e.sDiv)[0].rows[0].cells,d.p.rownumbers&&(e.footers[0].className="ui-state-default jqgrid-rownum"),_&&b(e.sDiv).hide()),f=null,d.p.caption){var eb=d.p.datatype;!0===d.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",e.cDiv).click(function(a){var c,f=b.isFunction(d.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",h=this;return d.p.toolbar[0]===!0&&("both"===d.p.toolbar[1]&&(g+=", #"+b(e.ubDiv).attr("id")),g+=", #"+b(e.uDiv).attr("id")),c=b(g,"#gview_"+b.jgrid.jqID(d.p.id)).length,"visible"===d.p.gridstate?b(g,"#gbox_"+b.jgrid.jqID(d.p.id)).slideUp("fast",function(){c--,0===c&&(b("span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),d.p.gridstate="hidden",b("#gbox_"+b.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(d.p.id)).hide(),b(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,a]),f&&(_||d.p.onHeaderClick.call(d,d.p.gridstate,a)))}):"hidden"===d.p.gridstate&&b(g,"#gbox_"+b.jgrid.jqID(d.p.id)).slideDown("fast",function(){c--,0===c&&(b("span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),_&&(d.p.datatype=eb,B(),_=!1),d.p.gridstate="visible",b("#gbox_"+b.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(d.p.id)).show(),b(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,a]),f&&(_||d.p.onHeaderClick.call(d,d.p.gridstate,a)))}),!1}),_&&(d.p.datatype="local",b(".ui-jqgrid-titlebar-close",e.cDiv).trigger("click")))}else b(e.cDiv).hide();b(e.hDiv).after(e.bDiv).mousemove(function(a){return e.resizing?(e.dragMove(a),!1):void 0}),b(".ui-jqgrid-labels",e.hDiv).bind("selectstart",function(){return!1}),b(document).mouseup(function(){return e.resizing?(e.dragEnd(),!1):!0}),d.formatCol=l,d.sortData=F,d.updatepager=function(a,c){var e,f,g,h,i,j,l,m="",n=d.p.pager?"_"+b.jgrid.jqID(d.p.pager.substr(1)):"",o=d.p.toppager?"_"+d.p.toppager.substr(1):"";g=parseInt(d.p.page,10)-1,0>g&&(g=0),g*=parseInt(d.p.rowNum,10),i=g+d.p.reccount,d.p.scroll&&(e=b("tbody:first > tr:gt(0)",d.grid.bDiv),g=i-e.length,d.p.reccount=e.length,(e=e.outerHeight()||d.grid.prevRowHeight)&&(f=g*e,l=parseInt(d.p.records,10)*e,b(">div:first",d.grid.bDiv).css({height:l}).children("div:first").css({height:f,display:f?"":"none"}),0==d.grid.bDiv.scrollTop&&d.p.page>1&&(d.grid.bDiv.scrollTop=d.p.rowNum*(d.p.page-1)*e)),d.grid.bDiv.scrollLeft=d.grid.hDiv.scrollLeft),m=d.p.pager||"",(m+=d.p.toppager?m?","+d.p.toppager:d.p.toppager:"")&&(l=b.jgrid.formatter.integer||{},e=k(d.p.page),f=k(d.p.lastpage),b(".selbox",m)[this.p.useProp?"prop":"attr"]("disabled",!1),d.p.pginput===!0&&(b(".ui-pg-input",m).val(d.p.page),h=d.p.toppager?"#sp_1"+n+",#sp_1"+o:"#sp_1"+n,b(h).html(b.fmatter?b.fmatter.util.NumberFormat(d.p.lastpage,l):d.p.lastpage)),d.p.viewrecords&&(0===d.p.reccount?b(".ui-paging-info",m).html(d.p.emptyrecords):(h=g+1,j=d.p.records,b.fmatter&&(h=b.fmatter.util.NumberFormat(h,l),i=b.fmatter.util.NumberFormat(i,l),j=b.fmatter.util.NumberFormat(j,l)),b(".ui-paging-info",m).html(b.jgrid.format(d.p.recordtext,h,i,j)))),d.p.pgbuttons===!0&&(0>=e&&(e=f=0),1===e||0===e?(b("#first"+n+", #prev"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),d.p.toppager&&b("#first_t"+o+", #prev_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first"+n+", #prev"+n).removeClass("ui-state-disabled"),d.p.toppager&&b("#first_t"+o+", #prev_t"+o).removeClass("ui-state-disabled")),e===f||0===e?(b("#next"+n+", #last"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),d.p.toppager&&b("#next_t"+o+", #last_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next"+n+", #last"+n).removeClass("ui-state-disabled"),d.p.toppager&&b("#next_t"+o+", #last_t"+o).removeClass("ui-state-disabled")))),a===!0&&d.p.rownumbers===!0&&b(">td.jqgrid-rownum",d.rows).each(function(a){b(this).html(g+1+a)}),c&&d.p.jqgdnd&&b(d).jqGrid("gridDnD","updateDnD"),b(d).triggerHandler("jqGridGridComplete"),b.isFunction(d.p.gridComplete)&&d.p.gridComplete.call(d),b(d).triggerHandler("jqGridAfterGridComplete")},d.refreshIndex=u,d.setHeadCheckBox=C,d.constructTr=v,d.formatter=function(a,b,c,d,e){return n(a,b,c,d,e)},b.extend(e,{populate:B,emptyRows:t}),this.grid=e,d.addXmlData=function(a){w(a,d.grid.bDiv)},d.addJSONData=function(a){x(a,d.grid.bDiv)},this.grid.cols=this.rows[0].cells,b(d).triggerHandler("jqGridInitGrid"),b.isFunction(d.p.onInitGrid)&&d.p.onInitGrid.call(d),B(),d.p.hiddengrid=!1}}}})},b.jgrid.extend({getGridParam:function(a){var b=this[0];return b&&b.grid?a?void 0!==b.p[a]?b.p[a]:null:b.p:void 0},setGridParam:function(a){return this.each(function(){this.grid&&"object"==typeof a&&b.extend(!0,this.p,a)})},getDataIDs:function(){var a,c=[],d=0,e=0;return this.each(function(){if((a=this.rows.length)&&a>0)for(;a>d;)b(this.rows[d]).hasClass("jqgrow")&&(c[e]=this.rows[d].id,e++),d++}),c},setSelection:function(a,c,d){return this.each(function(){var e,f,g,h,i,j;void 0===a||(c=!1===c?!1:!0,!(f=this.rows.namedItem(""+a))||!f.className||-1<f.className.indexOf("ui-state-disabled"))||(!0===this.p.scrollrows&&(g=this.rows.namedItem(a).rowIndex,g>=0&&(e=b(this.grid.bDiv)[0].clientHeight,h=b(this.grid.bDiv)[0].scrollTop,i=b(this.rows[g]).position().top,g=this.rows[g].clientHeight,i+g>=e+h?b(this.grid.bDiv)[0].scrollTop=i-(e+h)+g+h:e+h>i&&h>i&&(b(this.grid.bDiv)[0].scrollTop=i))),!0===this.p.frozenColumns&&(j=this.p.id+"_frozen"),this.p.multiselect?(this.setHeadCheckBox(!1),this.p.selrow=f.id,h=b.inArray(this.p.selrow,this.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&b(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==f.className&&b(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,this.p.selarrrow.splice(h,1),i=this.p.selarrrow[0],this.p.selrow=void 0===i?null:i),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(f.id))[this.p.useProp?"prop":"attr"]("checked",e),j&&(-1===h?b("#"+b.jgrid.jqID(a),"#"+b.jgrid.jqID(j)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(a),"#"+b.jgrid.jqID(j)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a),"#"+b.jgrid.jqID(j))[this.p.useProp?"prop":"attr"]("checked",e)),c&&(b(this).triggerHandler("jqGridSelectRow",[f.id,e,d]),this.p.onSelectRow&&this.p.onSelectRow.call(this,f.id,e,d))):"ui-subgrid"!==f.className&&(this.p.selrow!==f.id?(b(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),j&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(j)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(a),"#"+b.jgrid.jqID(j)).addClass("ui-state-highlight")),e=!0):e=!1,this.p.selrow=f.id,c)&&(b(this).triggerHandler("jqGridSelectRow",[f.id,e,d]),this.p.onSelectRow&&this.p.onSelectRow.call(this,f.id,e,d)))
})},resetSelection:function(a){return this.each(function(){var c,d,e,f=this;!0===f.p.frozenColumns&&(e=f.p.id+"_frozen"),void 0!==a?(d=a===f.p.selrow?f.p.selrow:a,b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(d)).removeClass("ui-state-highlight").attr("aria-selected","false"),e&&b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(e)).removeClass("ui-state-highlight"),f.p.multiselect&&(b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f.p.id))[f.p.useProp?"prop":"attr"]("checked",!1),e&&b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(e))[f.p.useProp?"prop":"attr"]("checked",!1),f.setHeadCheckBox(!1)),d=null):f.p.multiselect?(b(f.p.selarrrow).each(function(a,d){c=f.rows.namedItem(d),b(c).removeClass("ui-state-highlight").attr("aria-selected","false"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(d))[f.p.useProp?"prop":"attr"]("checked",!1),e&&(b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(e)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(e))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.setHeadCheckBox(!1),f.p.selarrrow=[]):f.p.selrow&&(b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),e&&b("#"+b.jgrid.jqID(f.p.selrow),"#"+b.jgrid.jqID(e)).removeClass("ui-state-highlight"),f.p.selrow=null),!0===f.p.cellEdit&&0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(b("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover")),f.p.savedRow=[]})},getRowData:function(a){var c,d,e={},f=!1,g=0;return this.each(function(){var h,i,j=this;if(void 0===a)f=!0,c=[],d=j.rows.length;else{if(i=j.rows.namedItem(a),!i)return e;d=2}for(;d>g;)f&&(i=j.rows[g]),b(i).hasClass("jqgrow")&&(b('td[role="gridcell"]',i).each(function(a){if(h=j.p.colModel[a].name,"cb"!==h&&"subgrid"!==h&&"rn"!==h)if(!0===j.p.treeGrid&&h===j.p.ExpandColumn)e[h]=b.jgrid.htmlDecode(b("span:first",this).html());else try{e[h]=b.unformat.call(j,this,{rowId:i.id,colModel:j.p.colModel[a]},a)}catch(c){e[h]=b.jgrid.htmlDecode(b(this).html())}}),f&&(c.push(e),e={})),g++}),c||e},delRowData:function(a){var c,d,e=!1;return this.each(function(){if(c=this.rows.namedItem(a),!c)return!1;if(b(c).remove(),this.p.records--,this.p.reccount--,this.updatepager(!0,!1),e=!0,this.p.multiselect&&(d=b.inArray(a,this.p.selarrrow),-1!==d&&this.p.selarrrow.splice(d,1)),this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null,"local"===this.p.datatype){var f=this.p._index[b.jgrid.stripPref(this.p.idPrefix,a)];void 0!==f&&(this.p.data.splice(f,1),this.refreshIndex())}if(!0===this.p.altRows&&e){var g=this.p.altclass;b(this.rows).each(function(a){a%2===1?b(this).addClass(g):b(this).removeClass(g)})}}),e},setRowData:function(a,c,d){var e,f,g=!0;return this.each(function(){if(!this.grid)return!1;var h,i,j=this,k=typeof d,l={};if(i=j.rows.namedItem(a),!i)return!1;if(c)try{if(b(this.p.colModel).each(function(d){e=this.name;var g=b.jgrid.getAccessor(c,e);void 0!==g&&(l[e]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?b.unformat.date.call(j,g,this):g,h=j.formatter(a,g,d,c,"edit"),f=this.title?{title:b.jgrid.stripHtml(h)}:{},!0===j.p.treeGrid&&e===j.p.ExpandColumn?b("td[role='gridcell']:eq("+d+") > span:first",i).html(h).attr(f):b("td[role='gridcell']:eq("+d+")",i).html(h).attr(f))}),"local"===j.p.datatype){var m,n=b.jgrid.stripPref(j.p.idPrefix,a),o=j.p._index[n];if(j.p.treeGrid)for(m in j.p.treeReader)j.p.treeReader.hasOwnProperty(m)&&delete l[j.p.treeReader[m]];void 0!==o&&(j.p.data[o]=b.extend(!0,j.p.data[o],l)),l=null}}catch(p){g=!1}g&&("string"===k?b(i).addClass(d):"object"===k&&b(i).css(d),b(j).triggerHandler("jqGridAfterGridComplete"))}),g},addRowData:function(a,c,d,e){d||(d="last");var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=!1,u="";return c&&(b.isArray(c)?(n=!0,d="last",o=a):(c=[c],n=!1),this.each(function(){var v=c.length;j=this.p.rownumbers===!0?1:0,h=this.p.multiselect===!0?1:0,i=this.p.subGrid===!0?1:0,n||(void 0!==a?a=""+a:(a=b.jgrid.randId(),this.p.keyIndex!==!1&&(o=this.p.colModel[this.p.keyIndex+h+i+j].name,void 0!==c[0][o]&&(a=c[0][o])))),p=this.p.altclass;for(var w=0,x="",y={},z=b.isFunction(this.p.afterInsertRow)?!0:!1;v>w;){if(q=c[w],g=[],n){try{a=q[o],void 0===a&&(a=b.jgrid.randId())}catch(A){a=b.jgrid.randId()}x=this.p.altRows===!0&&(this.rows.length-1)%2===0?p:""}for(s=a,a=this.p.idPrefix+a,j&&(u=this.formatCol(0,1,"",null,a,!0),g[g.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+u+">0</td>"),h&&(m='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+a+'" class="cbox"/>',u=this.formatCol(j,1,"",null,a,!0),g[g.length]='<td role="gridcell" '+u+">"+m+"</td>"),i&&(g[g.length]=b(this).jqGrid("addSubGridCell",h+j,1)),l=h+i+j;l<this.p.colModel.length;l++)r=this.p.colModel[l],f=r.name,y[f]=q[f],m=this.formatter(a,b.jgrid.getAccessor(q,f),l,q),u=this.formatCol(l,1,m,q,a,y),g[g.length]='<td role="gridcell" '+u+">"+m+"</td>";if(g.unshift(this.constructTr(a,!1,x,y,q,!1)),g[g.length]="</tr>",0===this.rows.length)b("table:first",this.grid.bDiv).append(g.join(""));else switch(d){case"last":b(this.rows[this.rows.length-1]).after(g.join("")),k=this.rows.length-1;break;case"first":b(this.rows[0]).after(g.join("")),k=1;break;case"after":(k=this.rows.namedItem(e))&&(b(this.rows[k.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[k.rowIndex+1]).after(g):b(k).after(g.join(""))),k++;break;case"before":(k=this.rows.namedItem(e))&&(b(k).before(g.join("")),k=k.rowIndex),k--}this.p.subGrid===!0&&b(this).jqGrid("addSubGrid",h+j,k),this.p.records++,this.p.reccount++,b(this).triggerHandler("jqGridAfterInsertRow",[a,q,q]),z&&this.p.afterInsertRow.call(this,a,q,q),w++,"local"===this.p.datatype&&(y[this.p.localReader.id]=s,this.p._index[s]=this.p.data.length,this.p.data.push(y),y={})}this.p.altRows===!0&&!n&&("last"===d?(this.rows.length-1)%2===1&&b(this.rows[this.rows.length-1]).addClass(p):b(this.rows).each(function(a){a%2===1?b(this).addClass(p):b(this).removeClass(p)})),this.updatepager(!0,!0),t=!0})),t},footerData:function(a,c,d){function e(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var f,g,h=!1,i={};return void 0===a&&(a="get"),"boolean"!=typeof d&&(d=!0),a=a.toLowerCase(),this.each(function(){var j,k=this;return!k.grid||!k.p.footerrow||"set"===a&&e(c)?!1:(h=!0,void b(this.p.colModel).each(function(e){f=this.name,"set"===a?void 0!==c[f]&&(j=d?k.formatter("",c[f],e,c,"edit"):c[f],g=this.title?{title:b.jgrid.stripHtml(j)}:{},b("tr.footrow td:eq("+e+")",k.grid.sDiv).html(j).attr(g),h=!0):"get"===a&&(i[f]=b("tr.footrow td:eq("+e+")",k.grid.sDiv).html())}))}),"get"===a?i:h},showHideCol:function(a,c){return this.each(function(){var d,e=this,f=!1,g=b.jgrid.cell_width?0:e.p.cellLayout;if(e.grid){"string"==typeof a&&(a=[a]),c="none"!==c?"":"none";var h=""===c?!0:!1,i=e.p.groupHeader&&("object"==typeof e.p.groupHeader||b.isFunction(e.p.groupHeader));i&&b(e).jqGrid("destroyGroupHeader",!1),b(this.p.colModel).each(function(i){if(-1!==b.inArray(this.name,a)&&this.hidden===h){if(!0===e.p.frozenColumns&&!0===this.frozen)return!0;b("tr",e.grid.hDiv).each(function(){b(this.cells[i]).css("display",c)}),b(e.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[i]).css("display",c)}),e.p.footerrow&&b("tr.footrow td:eq("+i+")",e.grid.sDiv).css("display",c),d=parseInt(this.width,10),e.p.tblwidth="none"===c?e.p.tblwidth-(d+g):e.p.tblwidth+(d+g),this.hidden=!h,f=!0,b(e).triggerHandler("jqGridShowHideCol",[h,this.name,i])}}),!0===f&&(!0===e.p.shrinkToFit&&!isNaN(e.p.height)&&(e.p.tblwidth+=parseInt(e.p.scrollOffset,10)),b(e).jqGrid("setGridWidth",!0===e.p.shrinkToFit?e.p.tblwidth:e.p.width)),i&&b(e).jqGrid("setGroupHeaders",e.p.groupHeader)}})},hideCol:function(a){return this.each(function(){b(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){b(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,c,d){function e(c){var d;d=c.length?b.makeArray(c):b.extend({},c),b.each(a,function(a){c[a]=d[this]})}function f(c,d){b(">tr"+(d||""),c).each(function(){var c=this,d=b.makeArray(c.cells);b.each(a,function(){var a=d[this];a&&c.appendChild(a)})})}var g=this.get(0);e(g.p.colModel),e(g.p.colNames),e(g.grid.headers),f(b("thead:first",g.grid.hDiv),d&&":not(.ui-jqgrid-labels)"),c&&f(b("#"+b.jgrid.jqID(g.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),g.p.footerrow&&f(b("tbody:first",g.grid.sDiv)),g.p.remapColumns&&(g.p.remapColumns.length?e(g.p.remapColumns):g.p.remapColumns=b.makeArray(a)),g.p.lastsort=b.inArray(g.p.lastsort,a),g.p.treeGrid&&(g.p.expColInd=b.inArray(g.p.expColInd,a)),b(g).triggerHandler("jqGridRemapColumns",[a,c,d])},setGridWidth:function(a,c){return this.each(function(){if(this.grid){var d,e,f,g,h=this,i=0,j=b.jgrid.cell_width?0:h.p.cellLayout,k=0,l=!1,m=h.p.scrollOffset,n=0;if("boolean"!=typeof c&&(c=h.p.shrinkToFit),!isNaN(a)){if(a=parseInt(a,10),h.grid.width=h.p.width=a,b("#gbox_"+b.jgrid.jqID(h.p.id)).css("width",a+"px"),b("#gview_"+b.jgrid.jqID(h.p.id)).css("width",a+"px"),b(h.grid.bDiv).css("width",a+"px"),b(h.grid.hDiv).css("width",a+"px"),h.p.pager&&b(h.p.pager).css("width",a+"px"),h.p.toppager&&b(h.p.toppager).css("width",a+"px"),!0===h.p.toolbar[0]&&(b(h.grid.uDiv).css("width",a+"px"),"both"===h.p.toolbar[1]&&b(h.grid.ubDiv).css("width",a+"px")),h.p.footerrow&&b(h.grid.sDiv).css("width",a+"px"),!1===c&&!0===h.p.forceFit&&(h.p.forceFit=!1),!0===c){if(b.each(h.p.colModel,function(){this.hidden===!1&&(d=this.widthOrg,i+=d+j,this.fixed?n+=d+j:k++)}),0===k)return;h.p.tblwidth=i,f=a-j*k-n,!isNaN(h.p.height)&&(b(h.grid.bDiv)[0].clientHeight<b(h.grid.bDiv)[0].scrollHeight||1===h.rows.length)&&(l=!0,f-=m);var i=0,o=0<h.grid.cols.length;if(b.each(h.p.colModel,function(a){this.hidden!==!1||this.fixed||(d=this.widthOrg,d=Math.round(f*d/(h.p.tblwidth-j*k-n)),0>d||(this.width=d,i+=d,h.grid.headers[a].width=d,h.grid.headers[a].el.style.width=d+"px",h.p.footerrow&&(h.grid.footers[a].style.width=d+"px"),o&&(h.grid.cols[a].style.width=d+"px"),e=a))}),!e)return;g=0,l?a-n-(i+j*k)!==m&&(g=a-n-(i+j*k)-m):1!==Math.abs(a-n-(i+j*k))&&(g=a-n-(i+j*k)),h.p.colModel[e].width+=g,h.p.tblwidth=i+g+j*k+n,h.p.tblwidth>a?(l=h.p.tblwidth-parseInt(a,10),h.p.tblwidth=a,d=h.p.colModel[e].width-=l):d=h.p.colModel[e].width,h.grid.headers[e].width=d,h.grid.headers[e].el.style.width=d+"px",o&&(h.grid.cols[e].style.width=d+"px"),h.p.footerrow&&(h.grid.footers[e].style.width=d+"px")}h.p.tblwidth&&(b("table:first",h.grid.bDiv).css("width",h.p.tblwidth+"px"),b("table:first",h.grid.hDiv).css("width",h.p.tblwidth+"px"),h.grid.hDiv.scrollLeft=h.grid.bDiv.scrollLeft,h.p.footerrow&&b("table:first",h.grid.sDiv).css("width",h.p.tblwidth+"px"))}}})},setGridHeight:function(a){return this.each(function(){if(this.grid){var c=b(this.grid.bDiv);c.css({height:a+(isNaN(a)?"":"px")}),!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(c.height()-16),this.p.height=a,this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(a){return this.each(function(){this.p.caption=a,b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(a),b(this.grid.cDiv).show()})},setLabel:function(a,c,d,e){return this.each(function(){var f=-1;if(this.grid&&void 0!==a&&(b(this.p.colModel).each(function(b){return this.name===a?(f=b,!1):void 0}),f>=0)){var g=b("tr.ui-jqgrid-labels th:eq("+f+")",this.grid.hDiv);if(c){var h=b(".s-ico",g);b("[id^=jqgh_]",g).empty().html(c).append(h),this.p.colNames[f]=c}d&&("string"==typeof d?b(g).addClass(d):b(g).css(d)),"object"==typeof e&&b(g).attr(e)}})},setCell:function(a,c,d,e,f,g){return this.each(function(){var h,i,j=-1;if(this.grid&&(isNaN(c)?b(this.p.colModel).each(function(a){return this.name===c?(j=a,!1):void 0}):j=parseInt(c,10),j>=0&&(h=this.rows.namedItem(a)))){var k=b("td:eq("+j+")",h);(""!==d||!0===g)&&(h=this.formatter(a,d,j,h,"edit"),i=this.p.colModel[j].title?{title:b.jgrid.stripHtml(h)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(k)).length?b("span",b(k)).html(h).attr(i):b(k).html(h).attr(i),"local"===this.p.datatype&&(h=this.p.colModel[j],d=h.formatter&&"string"==typeof h.formatter&&"date"===h.formatter?b.unformat.date.call(this,d,h):d,i=this.p._index[b.jgrid.stripPref(this.p.idPrefix,a)],void 0!==i&&(this.p.data[i][h.name]=d))),"string"==typeof e?b(k).addClass(e):e&&b(k).css(e),"object"==typeof f&&b(k).attr(f)}})},getCell:function(a,c){var d=!1;return this.each(function(){var e=-1;if(this.grid&&(isNaN(c)?b(this.p.colModel).each(function(a){return this.name===c?(e=a,!1):void 0}):e=parseInt(c,10),e>=0)){var f=this.rows.namedItem(a);if(f)try{d=b.unformat.call(this,b("td:eq("+e+")",f),{rowId:f.id,colModel:this.p.colModel[e]},e)}catch(g){d=b.jgrid.htmlDecode(b("td:eq("+e+")",f).html())}}}),d},getCol:function(a,c,d){var e,f,g,h,i=[],j=0,c="boolean"!=typeof c?!1:c;return void 0===d&&(d=!1),this.each(function(){var k=-1;if(this.grid&&(isNaN(a)?b(this.p.colModel).each(function(b){return this.name===a?(k=b,!1):void 0}):k=parseInt(a,10),k>=0)){var l=this.rows.length,m=0;if(l&&l>0){for(;l>m;){if(b(this.rows[m]).hasClass("jqgrow")){try{e=b.unformat.call(this,b(this.rows[m].cells[k]),{rowId:this.rows[m].id,colModel:this.p.colModel[k]},k)}catch(n){e=b.jgrid.htmlDecode(this.rows[m].cells[k].innerHTML)}d?(h=parseFloat(e),j+=h,void 0===g&&(g=f=h),f=Math.min(f,h),g=Math.max(g,h)):i.push(c?{id:this.rows[m].id,value:e}:e)}m++}if(d)switch(d.toLowerCase()){case"sum":i=j;break;case"avg":i=j/l;break;case"count":i=l;break;case"min":i=f;break;case"max":i=g}}}}),i},clearGridData:function(a){return this.each(function(){if(this.grid){if("boolean"!=typeof a&&(a=!1),this.p.deepempty)b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var c=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(c)}this.p.footerrow&&a&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;"),this.p.selrow=null,this.p.selarrrow=[],this.p.savedRow=[],this.p.records=0,this.p.page=1,this.p.lastpage=0,this.p.reccount=0,this.p.data=[],this.p._index={},this.updatepager(!0,!1)}})},getInd:function(a,b){var c,d=!1;return this.each(function(){(c=this.rows.namedItem(a))&&(d=!0===b?c:c.rowIndex)}),d},bindKeys:function(a){var c=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;b("body").is("[role]")||b("body").attr("role","application"),a.p.scrollrows=c.scrollingRows,b(a).keydown(function(d){var e,f,g,h=b(a).find("tr[tabindex=0]")[0],i=a.p.treeReader.expanded_field;if(h)if(g=a.p._index[b.jgrid.stripPref(a.p.idPrefix,h.id)],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){if(f=h.previousSibling,e="",f)if(b(f).is(":hidden")){for(;f;)if(f=f.previousSibling,!b(f).is(":hidden")&&b(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;b(a).jqGrid("setSelection",e,!0,d),d.preventDefault()}if(40===d.keyCode){if(f=h.nextSibling,e="",f)if(b(f).is(":hidden")){for(;f;)if(f=f.nextSibling,!b(f).is(":hidden")&&b(f).hasClass("jqgrow")){e=f.id;break}}else e=f.id;b(a).jqGrid("setSelection",e,!0,d),d.preventDefault()}37===d.keyCode&&(a.p.treeGrid&&a.p.data[g][i]&&b(h).find("div.treeclick").trigger("click"),b(a).triggerHandler("jqGridKeyLeft",[a.p.selrow]),b.isFunction(c.onLeftKey)&&c.onLeftKey.call(a,a.p.selrow)),39===d.keyCode&&(a.p.treeGrid&&!a.p.data[g][i]&&b(h).find("div.treeclick").trigger("click"),b(a).triggerHandler("jqGridKeyRight",[a.p.selrow]),b.isFunction(c.onRightKey)&&c.onRightKey.call(a,a.p.selrow))}else 13===d.keyCode?(b(a).triggerHandler("jqGridKeyEnter",[a.p.selrow]),b.isFunction(c.onEnter)&&c.onEnter.call(a,a.p.selrow)):32===d.keyCode&&(b(a).triggerHandler("jqGridKeySpace",[a.p.selrow]),b.isFunction(c.onSpace)&&c.onSpace.call(a,a.p.selrow))})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(a){var c,d=!1;return this.each(function(){void 0!==a&&(c=this.p._index[b.jgrid.stripPref(this.p.idPrefix,a)],c>=0&&(d=this.p.data[c]))}),d}})}(jQuery),function(a){a.fmatter={},a.extend(a.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){return!this.isString(b)&&this.isValue(b)?!1:this.isValue(b)?(b=a.trim(b).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===b):!0}}),a.fn.fmatter=function(b,c,d,e,f){var g=c,d=a.extend({},a.jgrid.formatter,d);try{g=a.fn.fmatter[b].call(this,c,d,e,f)}catch(h){}return g},a.fmatter.util={NumberFormat:function(b,c){if(a.fmatter.isNumber(b)||(b*=1),a.fmatter.isNumber(b)){var d,e=0>b,f=""+b,g=c.decimalSeparator||".";if(a.fmatter.isNumber(c.decimalPlaces)){var h=c.decimalPlaces,f=Math.pow(10,h),f=""+Math.round(b*f)/f;if(d=f.lastIndexOf("."),h>0)for(0>d?(f+=g,d=f.length-1):"."!==g&&(f=f.replace(".",g));f.length-1-d<h;)f+="0"}if(c.thousandsSeparator){h=c.thousandsSeparator,d=f.lastIndexOf(g),d=d>-1?d:f.length;var i,g=f.substring(d),j=-1;for(i=d;i>0;i--)j++,0===j%3&&i!==d&&(!e||i>1)&&(g=h+g),g=f.charAt(i-1)+g;f=g}return f=c.prefix?c.prefix+f:f,f=c.suffix?f+c.suffix:f}return b}},a.fn.fmatter.defaultFormat=function(b,c){return a.fmatter.isValue(b)&&""!==b?b:c.defaultValue||"&#160;"},a.fn.fmatter.email=function(b,c){return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):'<a href="mailto:'+b+'">'+b+"</a>"},a.fn.fmatter.checkbox=function(b,c){var d,e=a.extend({},c.checkbox);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(e=a.extend({},e,c.colModel.formatoptions)),d=!0===e.disabled?'disabled="disabled"':"",(a.fmatter.isEmpty(b)||void 0===b)&&(b=a.fn.fmatter.defaultFormat(b,e)),b=(""+b).toLowerCase(),'<input type="checkbox" '+(0>b.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+b+'" offval="no" '+d+"/>"},a.fn.fmatter.link=function(b,c){var d={target:c.target},e="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.target&&(e="target="+d.target),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):"<a "+e+' href="'+b+'">'+b+"</a>"},a.fn.fmatter.showlink=function(b,c){var d={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},e="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.target&&(e="target="+d.target),d=d.baseLinkUrl+d.showAction+"?"+d.idName+"="+c.rowId+d.addParam,a.fmatter.isString(b)||a.fmatter.isNumber(b)?"<a "+e+' href="'+d+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,c)},a.fn.fmatter.integer=function(b,c){var d=a.extend({},c.integer);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.number=function(b,c){var d=a.extend({},c.number);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.currency=function(b,c){var d=a.extend({},c.currency);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?d.defaultValue:a.fmatter.util.NumberFormat(b,d)},a.fn.fmatter.date=function(b,c,d,e){return d=a.extend({},c.date),void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.reformatAfterEdit||"edit"!==e?a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.jgrid.parseDate(d.srcformat,b,d.newformat,d):a.fn.fmatter.defaultFormat(b,c)},a.fn.fmatter.select=function(b,c){var d,e,b=""+b,f=!1,g=[];if(void 0!==c.colModel.formatoptions?(f=c.colModel.formatoptions.value,d=void 0===c.colModel.formatoptions.separator?":":c.colModel.formatoptions.separator,e=void 0===c.colModel.formatoptions.delimiter?";":c.colModel.formatoptions.delimiter):void 0!==c.colModel.editoptions&&(f=c.colModel.editoptions.value,d=void 0===c.colModel.editoptions.separator?":":c.colModel.editoptions.separator,e=void 0===c.colModel.editoptions.delimiter?";":c.colModel.editoptions.delimiter),f){var h=!0===c.colModel.editoptions.multiple?!0:!1,i=[];if(h&&(i=b.split(","),i=a.map(i,function(b){return a.trim(b)})),a.fmatter.isString(f)){var j,k=f.split(e),l=0;for(j=0;j<k.length;j++)if(e=k[j].split(d),2<e.length&&(e[1]=a.map(e,function(a,b){return b>0?a:void 0}).join(d)),h)-1<a.inArray(e[0],i)&&(g[l]=e[1],l++);else if(a.trim(e[0])===a.trim(b)){g[0]=e[1];break}}else a.fmatter.isObject(f)&&(h?g=a.map(i,function(a){return f[a]}):g[0]=f[b]||"")}return b=g.join(", "),""===b?a.fn.fmatter.defaultFormat(b,c):b},a.fn.fmatter.rowactions=function(b){var c=a(this).closest("tr.jqgrow"),d=c.attr("id"),e=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),e=a("#"+e),f=e[0],g=f.p,h=g.colModel[a.jgrid.getCellIndex(this)],i=h.frozen?a("tr#"+d+" td:eq("+a.jgrid.getCellIndex(this)+") > div",e):a(this).parent(),j={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},k=function(b){a.isFunction(j.afterRestore)&&j.afterRestore.call(f,b),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide()};switch(void 0!==h.formatoptions&&(j=a.extend(j,h.formatoptions)),void 0!==g.editOptions&&(j.editOptions=g.editOptions),void 0!==g.delOptions&&(j.delOptions=g.delOptions),c.hasClass("jqgrid-new-row")&&(j.extraparam[g.prmNames.oper]=g.prmNames.addoper),c={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:function(b,c){a.isFunction(j.afterSave)&&j.afterSave.call(f,b,c),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:j.onError,afterrestorefunc:k,restoreAfterError:j.restoreAfterError,mtype:j.mtype},b){case"edit":e.jqGrid("editRow",d,c),i.find("div.ui-inline-edit,div.ui-inline-del").hide(),i.find("div.ui-inline-save,div.ui-inline-cancel").show(),e.triggerHandler("jqGridAfterGridComplete");break;case"save":e.jqGrid("saveRow",d,c)&&(i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide(),e.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":e.jqGrid("restoreRow",d,k),i.find("div.ui-inline-edit,div.ui-inline-del").show(),i.find("div.ui-inline-save,div.ui-inline-cancel").hide(),e.triggerHandler("jqGridAfterGridComplete");break;case"del":e.jqGrid("delGridRow",d,j.delOptions);break;case"formedit":e.jqGrid("setSelection",d),e.jqGrid("editGridRow",d,j.editOptions)}},a.fn.fmatter.actions=function(b,c){var d={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},e=c.rowId,f="";return void 0!==c.colModel.formatoptions&&(d=a.extend(d,c.colModel.formatoptions)),void 0===e||a.fmatter.isEmpty(e)?"":(d.editformbutton?f+="<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+e+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":d.editbutton&&(f+="<div title='"+a.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+e+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+"><span class='ui-icon ui-icon-pencil'></span></div>"),d.delbutton&&(f+="<div title='"+a.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+e+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-trash'></span></div>"),f+="<div title='"+a.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+e+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>",f+="<div title='"+a.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+e+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+f+"</div>")},a.unformat=function(b,c,d,e){var f,g=c.colModel.formatter,h=c.colModel.formatoptions||{},i=/([\.\*\_\'\(\)\{\}\+\?\\])/g,j=c.colModel.unformat||a.fn.fmatter[g]&&a.fn.fmatter[g].unformat;if(void 0!==j&&a.isFunction(j))f=j.call(this,a(b).text(),c,b);else if(void 0!==g&&a.fmatter.isString(g))switch(f=a.jgrid.formatter||{},g){case"integer":h=a.extend({},f.integer,h),c=h.thousandsSeparator.replace(i,"\\$1"),f=a(b).text().replace(RegExp(c,"g"),"");break;case"number":h=a.extend({},f.number,h),c=h.thousandsSeparator.replace(i,"\\$1"),f=a(b).text().replace(RegExp(c,"g"),"").replace(h.decimalSeparator,".");break;case"currency":h=a.extend({},f.currency,h),c=h.thousandsSeparator.replace(i,"\\$1"),c=RegExp(c,"g"),f=a(b).text(),h.prefix&&h.prefix.length&&(f=f.substr(h.prefix.length)),h.suffix&&h.suffix.length&&(f=f.substr(0,f.length-h.suffix.length)),f=f.replace(c,"").replace(h.decimalSeparator,".");break;case"checkbox":h=c.colModel.editoptions?c.colModel.editoptions.value.split(":"):["Yes","No"],f=a("input",b).is(":checked")?h[0]:h[1];break;case"select":f=a.unformat.select(b,c,d,e);break;case"actions":return"";default:f=a(b).text()}return void 0!==f?f:!0===e?a(b).text():a.jgrid.htmlDecode(a(b).html())},a.unformat.select=function(b,c,d,e){if(d=[],b=a(b).text(),!0===e)return b;var e=a.extend({},void 0!==c.colModel.formatoptions?c.colModel.formatoptions:c.colModel.editoptions),c=void 0===e.separator?":":e.separator,f=void 0===e.delimiter?";":e.delimiter;if(e.value){var g=e.value,e=!0===e.multiple?!0:!1,h=[];if(e&&(h=b.split(","),h=a.map(h,function(b){return a.trim(b)})),a.fmatter.isString(g)){var i,j=g.split(f),k=0;for(i=0;i<j.length;i++)if(f=j[i].split(c),2<f.length&&(f[1]=a.map(f,function(a,b){return b>0?a:void 0}).join(c)),e)-1<a.inArray(f[1],h)&&(d[k]=f[0],k++);else if(a.trim(f[1])===a.trim(b)){d[0]=f[0];break}}else(a.fmatter.isObject(g)||a.isArray(g))&&(e||(h[0]=b),d=a.map(h,function(b){var c;return a.each(g,function(a,d){return d===b?(c=a,!1):void 0}),void 0!==c?c:void 0}));return d.join(", ")}return b||""},a.unformat.date=function(b,c){var d=a.jgrid.formatter.date||{};return void 0!==c.formatoptions&&(d=a.extend({},d,c.formatoptions)),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.jgrid.parseDate(d.newformat,b,d.srcformat,d)}}(jQuery),function(a){a.jgrid.extend({getColProp:function(a){var b={},c=this[0];if(!c.grid)return!1;var d,c=c.p.colModel;for(d=0;d<c.length;d++)if(c[d].name===a){b=c[d];break}return b},setColProp:function(b,c){return this.each(function(){if(this.grid&&c){var d,e=this.p.colModel;for(d=0;d<e.length;d++)if(e[d].name===b){a.extend(!0,this.p.colModel[d],c);break}}})},sortGrid:function(a,b,c){return this.each(function(){var d,e=-1;if(this.grid){for(a||(a=this.p.sortname),d=0;d<this.p.colModel.length;d++)if(this.p.colModel[d].index===a||this.p.colModel[d].name===a){e=d;break}-1!==e&&(d=this.p.colModel[e].sortable,"boolean"!=typeof d&&(d=!0),"boolean"!=typeof b&&(b=!1),d&&this.sortData("jqgh_"+this.p.id+"_"+a,e,b,c))}})},clearBeforeUnload:function(){return this.each(function(){var b=this.grid;b.emptyRows.call(this,!0,!0),a(b.hDiv).unbind("mousemove"),a(this).unbind(),b.dragEnd=null,b.dragMove=null,b.dragStart=null,b.emptyRows=null,b.populate=null,b.populateVisible=null,b.scrollGrid=null,b.selectionPreserver=null,b.bDiv=null,b.cDiv=null,b.hDiv=null,b.cols=null;var c,d=b.headers.length;for(c=0;d>c;c++)b.headers[c].el=null;this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();try{a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+a.jgrid.jqID(this.id)).remove()}catch(b){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var b=a(this).attr("id"),c=a(this).attr("class");this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var d=document.createElement("table");a(d).attr({id:b}),d.className=c,b=a.jgrid.jqID(this.id),a(d).removeClass("ui-jqgrid-btable"),1===a(this.p.pager).parents("#gbox_"+b).length?(a(d).insertBefore("#gbox_"+b).show(),a(this.p.pager).insertBefore("#gbox_"+b)):a(d).insertBefore("#gbox_"+b).show(),a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+b).remove()}})},setGridState:function(b){return this.each(function(){this.grid&&("hidden"===b?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===b&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(b){return b=a.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,operandTitle:"Click to select search operation.",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},a.jgrid.search,b||{}),this.each(function(){var c=this;if(!this.ftoolbar){var d,e=function(){var d,e,f,g={},h=0,i={};a.each(c.p.colModel,function(){var j=a("#gs_"+a.jgrid.jqID(this.name),!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv);if(e=this.index||this.name,f=b.searchOperators?j.parent().prev().children("a").attr("soper")||b.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":b.defaultSearch,(d="custom"===this.stype&&a.isFunction(this.searchoptions.custom_value)&&0<j.length&&"SPAN"===j[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(c,j.children(".customelement:first"),"get"):j.val())||"nu"===f||"nn"===f)g[e]=d,i[e]=f,h++;else try{delete c.p.postData[e]}catch(k){}});var j=h>0?!0:!1;if(!0===b.stringResult||"local"===c.p.datatype){var k='{"groupOp":"'+b.groupOp+'","rules":[',l=0;
a.each(g,function(a,b){l>0&&(k+=","),k+='{"field":"'+a+'",',k+='"op":"'+i[a]+'",',k+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),k+="]}",a.extend(c.p.postData,{filters:k}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,g);var m;c.p.searchurl&&(m=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var n="stop"===a(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!n&&a.isFunction(b.beforeSearch)&&(n=b.beforeSearch.call(c)),n||a(c).jqGrid("setGridParam",{search:j}).trigger("reloadGrid",[{page:1}]),m&&a(c).jqGrid("setGridParam",{url:m}),a(c).triggerHandler("jqGridToolbarAfterSearch"),a.isFunction(b.afterSearch)&&b.afterSearch.call(c)},f=function(d,f,g){a("#sopt_menu").remove();var h,i,f=parseInt(f,10),g=parseInt(g,10)+18,f='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+(a(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+f+"px;top:"+g+'px;">',g=a(d).attr("soper"),j=[],k=0,l=a(d).attr("colname");for(h=c.p.colModel.length;h>k&&c.p.colModel[k].name!==l;)k++;for(k=c.p.colModel[k],l=a.extend({},k.searchoptions),l.sopt||(l.sopt=[],l.sopt[0]="select"===k.stype?"eq":b.defaultSearch),a.each(b.odata,function(){j.push(this.oper)}),k=0;k<l.sopt.length;k++)i=a.inArray(l.sopt[k],j),-1!==i&&(h=g===b.odata[i].oper?"ui-state-highlight":"",f+='<li class="ui-menu-item '+h+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+b.odata[i].oper+'" oper="'+b.operands[b.odata[i].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+b.operands[b.odata[i].oper]+"</td><td>"+b.odata[i].text+"</td></tr></table></a></li>");a("body").append(f+"</ul>"),a("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),a("#sopt_menu > li > a").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).click(function(){var f=a(this).attr("value"),g=a(this).attr("oper");a(c).triggerHandler("jqGridToolbarSelectOper",[f,g,d]),a("#sopt_menu").hide(),a(d).text(g).attr("soper",f),b.autosearch===!0&&(g=a(d).parent().next().children()[0],(a(g).val()||"nu"===f||"nn"===f)&&e())})},g=a("<tr class='ui-search-toolbar' role='rowheader'></tr>");a.each(c.p.colModel,function(){var f,h,i=this;h="";var j,k="=",l=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+c.p.direction+"'></th>"),m=a("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),n=a("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td></tr></table>");if(!0===this.hidden&&a(l).css("display","none"),this.search=!1===this.search?!1:!0,void 0===this.stype&&(this.stype="text"),f=a.extend({},this.searchoptions||{}),this.search){if(b.searchOperators){for(h=f.sopt?f.sopt[0]:"select"===i.stype?"eq":b.defaultSearch,j=0;j<b.odata.length;j++)if(b.odata[j].oper===h){k=b.operands[h]||"";break}h="<a title='"+(null!=f.searchtitle?f.searchtitle:b.operandTitle)+"' style='padding-right: 0.5em;' soper='"+h+"' class='soptclass' colname='"+this.name+"'>"+k+"</a>"}switch(a("td:eq(0)",n).append(h),this.stype){case"select":if(h=this.surl||f.dataUrl)a.ajax(a.extend({url:h,dataType:"html",success:function(d){void 0!==f.buildSelect?(d=f.buildSelect(d))&&(a("td:eq(1)",n).append(d),a(m).append(n)):(a("td:eq(1)",n).append(d),a(m).append(n)),void 0!==f.defaultValue&&a("select",m).val(f.defaultValue),a("select",m).attr({name:i.index||i.name,id:"gs_"+i.name}),f.attr&&a("select",m).attr(f.attr),a("select",m).css({width:"100%"}),a.jgrid.bindEv.call(c,a("select",m)[0],f),b.autosearch===!0&&a("select",m).change(function(){return e(),!1}),d=null}},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));else{var o,p,q;if(i.searchoptions?(o=void 0===i.searchoptions.value?"":i.searchoptions.value,p=void 0===i.searchoptions.separator?":":i.searchoptions.separator,q=void 0===i.searchoptions.delimiter?";":i.searchoptions.delimiter):i.editoptions&&(o=void 0===i.editoptions.value?"":i.editoptions.value,p=void 0===i.editoptions.separator?":":i.editoptions.separator,q=void 0===i.editoptions.delimiter?";":i.editoptions.delimiter),o){k=document.createElement("select"),k.style.width="100%",a(k).attr({name:i.index||i.name,id:"gs_"+i.name});var r;if("string"==typeof o)for(h=o.split(q),r=0;r<h.length;r++)o=h[r].split(p),q=document.createElement("option"),q.value=o[0],q.innerHTML=o[1],k.appendChild(q);else if("object"==typeof o)for(r in o)o.hasOwnProperty(r)&&(q=document.createElement("option"),q.value=r,q.innerHTML=o[r],k.appendChild(q));void 0!==f.defaultValue&&a(k).val(f.defaultValue),f.attr&&a(k).attr(f.attr),a.jgrid.bindEv.call(c,k,f),a("td:eq(1)",n).append(k),a(m).append(n),!0===b.autosearch&&a(k).change(function(){return e(),!1})}}break;case"text":p=void 0!==f.defaultValue?f.defaultValue:"",a("td:eq(1)",n).append("<input type='text' style='width:100%;padding:0px;' name='"+(i.index||i.name)+"' id='gs_"+i.name+"' value='"+p+"'/>"),a(m).append(n),f.attr&&a("input",m).attr(f.attr),a.jgrid.bindEv.call(c,a("input",m)[0],f),!0===b.autosearch&&(b.searchOnEnter?a("input",m).keypress(function(a){return 13===(a.charCode||a.keyCode||0)?(e(),!1):this}):a("input",m).keydown(function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:d&&clearTimeout(d),d=setTimeout(function(){e()},500)}}));break;case"custom":a("td:eq(1)",n).append("<span style='width:95%;padding:0px;' name='"+(i.index||i.name)+"' id='gs_"+i.name+"'/>"),a(m).append(n);try{if(!a.isFunction(f.custom_element))throw"e1";var s=f.custom_element.call(c,void 0!==f.defaultValue?f.defaultValue:"",f);if(!s)throw"e2";s=a(s).addClass("customelement"),a(m).find(">span").append(s)}catch(t){"e1"===t&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===t?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"==typeof t?t:t.message,a.jgrid.edit.bClose)}}}a(l).append(m),a(g).append(l),b.searchOperators||a("td:eq(0)",n).hide()}),a("table thead",c.grid.hDiv).append(g),b.searchOperators&&(a(".soptclass").click(function(b){var c=a(this).offset();f(this,c.left,c.top),b.stopPropagation()}),a("body").on("click",function(b){"soptclass"!==b.target.className&&a("#sopt_menu").hide()})),this.ftoolbar=!0,this.triggerToolbar=e,this.clearToolbar=function(d){var e,f={},g=0,d="boolean"!=typeof d?!0:d;a.each(c.p.colModel,function(){var b,d=a("#gs_"+a.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(b=this.searchoptions.defaultValue),e=this.index||this.name,this.stype){case"select":if(d.find("option").each(function(c){return 0===c&&(this.selected=!0),a(this).val()===b?(this.selected=!0,!1):void 0}),void 0!==b)f[e]=b,g++;else try{delete c.p.postData[e]}catch(h){}break;case"text":if(d.val(b),void 0!==b)f[e]=b,g++;else try{delete c.p.postData[e]}catch(i){}break;case"custom":a.isFunction(this.searchoptions.custom_value)&&d.length>0&&"SPAN"===d[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(c,d.children(".customelement:first"),"set",b)}});var h=g>0?!0:!1;if(b.stringResult===!0||"local"===c.p.datatype){var i='{"groupOp":"'+b.groupOp+'","rules":[',j=0;a.each(f,function(a,b){j>0&&(i+=","),i+='{"field":"'+a+'",',i+='"op":"eq",',i+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',j++}),i+="]}",a.extend(c.p.postData,{filters:i}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,f);var k;c.p.searchurl&&(k=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var l="stop"===a(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!l&&a.isFunction(b.beforeClear)&&(l=b.beforeClear.call(c)),l||d&&a(c).jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[{page:1}]),k&&a(c).jqGrid("setGridParam",{url:k}),a(c).triggerHandler("jqGridToolbarAfterClear"),a.isFunction(b.afterClear)&&b.afterClear()},this.toggleToolbar=function(){var b=a("tr.ui-search-toolbar",c.grid.hDiv),d=c.p.frozenColumns===!0?a("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"===b.css("display")?(b.show(),d&&d.show()):(b.hide(),d&&d.hide())}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(b){return void 0===b&&(b=!0),this.each(function(){var c,d,e,f,g,h;d=this.grid;var i=a("table.ui-jqgrid-htable thead",d.hDiv),j=this.p.colModel;if(d){for(a(this).unbind(".setGroupHeaders"),c=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),f=d.headers,d=0,e=f.length;e>d;d++){g=j[d].hidden?"none":"",g=a(f[d].el).width(f[d].width).css("display",g);try{g.removeAttr("rowSpan")}catch(k){g.attr("rowSpan",1)}c.append(g),h=g.children("span.ui-jqgrid-resize"),0<h.length&&(h[0].style.height=""),g.children("div")[0].style.top=""}a(i).children("tr.ui-jqgrid-labels").remove(),a(i).prepend(c),!0===b&&a(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(b){return b=a.extend({useColSpanStyle:!1,groupHeaders:[]},b||{}),this.each(function(){this.p.groupHeader=b;var c,d,e,f,g,h,i,j=0,k=this.p.colModel,l=k.length,m=this.grid.headers,n=a("table.ui-jqgrid-htable",this.grid.hDiv),o=n.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");e=n.children("thead");var p=n.find(".jqg-first-row-header");void 0===p[0]?p=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):p.empty();var q,r=function(a,b){var c,d=b.length;for(c=0;d>c;c++)if(b[c].startColumnName===a)return c;return-1};for(a(this).prepend(e),e=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),c=0;l>c;c++)if(g=m[c].el,h=a(g),d=k[c],f={height:"0px",width:m[c].width+"px",display:d.hidden?"none":""},a("<th>",{role:"gridcell"}).css(f).addClass("ui-first-th-"+this.p.direction).appendTo(p),g.style.width="",f=r(d.name,b.groupHeaders),f>=0){for(f=b.groupHeaders[f],j=f.numberOfColumns,i=f.titleText,f=d=0;j>f&&l>c+f;f++)k[c+f].hidden||d++;f=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0px none"}).html(i),d>0&&f.attr("colspan",""+d),this.p.headertitles&&f.attr("title",f.text()),0===d&&f.hide(),h.before(f),e.append(g),j-=1}else 0===j?b.useColSpanStyle?h.attr("rowspan","2"):(a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:d.hidden?"none":"","border-top":"0px none"}).insertBefore(h),e.append(g)):(e.append(g),j--);k=a(this).children("thead"),k.prepend(p),e.insertAfter(o),n.append(k),b.useColSpanStyle&&(n.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),n.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(c.height()-b.outerHeight())/2+"px")})),q=k.find("tr.jqg-first-row-header"),a(this).bind("jqGridResizeStop.setGroupHeaders",function(a,b,c){q.find("th").eq(c).width(b)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var b=this,c=b.p.colModel,d=0,e=c.length,f=-1,g=!1;if(!(!0===b.p.subGrid||!0===b.p.treeGrid||!0===b.p.cellEdit||b.p.sortable||b.p.scroll||b.p.grouping)){for(b.p.rownumbers&&d++,b.p.multiselect&&d++;e>d&&!0===c[d].frozen;)g=!0,f=d,d++;if(f>=0&&g){if(c=b.p.caption?a(b.grid.cDiv).outerHeight():0,d=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).height(),b.p.toppager&&(c+=a(b.grid.topDiv).outerHeight()),!0===b.p.toolbar[0]&&"bottom"!==b.p.toolbar[1]&&(c+=a(b.grid.uDiv).outerHeight()),b.grid.fhDiv=a('<div style="position:absolute;left:0px;top:'+c+"px;height:"+d+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),b.grid.fbDiv=a('<div style="position:absolute;left:0px;top:'+(parseInt(c,10)+parseInt(d,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fhDiv),c=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0),b.p.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",c).each(function(){a("th:gt("+f+")",this).remove()});var h,i,j=-1,k=-1;a("tr.jqg-second-row-header th",c).each(function(){return h=parseInt(a(this).attr("colspan"),10),(i=parseInt(a(this).attr("rowspan"),10))&&(j++,k++),h&&(j+=h,k++),j===f?!1:void 0}),j!==f&&(k=f),a("tr.jqg-second-row-header",c).each(function(){a("th:gt("+k+")",this).remove()})}else a("tr",c).each(function(){a("th:gt("+f+")",this).remove()});a(c).width(1),a(b.grid.fhDiv).append(c).mousemove(function(a){return b.grid.resizing?(b.grid.dragMove(a),!1):void 0}),a(b).bind("jqGridResizeStop.setFrozenColumns",function(c,d,e){c=a(".ui-jqgrid-htable",b.grid.fhDiv),a("th:eq("+e+")",c).width(d),c=a(".ui-jqgrid-btable",b.grid.fbDiv),a("tr:first td:eq("+e+")",c).width(d)}),a(b).bind("jqGridOnSortCol.setFrozenColumns",function(c,d,e){c=a("tr.ui-jqgrid-labels:last th:eq("+b.p.lastsort+")",b.grid.fhDiv),d=a("tr.ui-jqgrid-labels:last th:eq("+e+")",b.grid.fhDiv),a("span.ui-grid-ico-sort",c).addClass("ui-state-disabled"),a(c).attr("aria-selected","false"),a("span.ui-icon-"+b.p.sortorder,d).removeClass("ui-state-disabled"),a(d).attr("aria-selected","true"),!b.p.viewsortcols[0]&&b.p.lastsort!==e&&(a("span.s-ico",c).hide(),a("span.s-ico",d).show())}),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fbDiv),a(b.grid.bDiv).scroll(function(){a(b.grid.fbDiv).scrollTop(a(this).scrollTop())}),!0===b.p.hoverrows&&a("#"+a.jgrid.jqID(b.p.id)).unbind("mouseover").unbind("mouseout"),a(b).bind("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(b.p.id)+"_frozen").remove(),a(b.grid.fbDiv).height(a(b.grid.bDiv).height()-16);var c=a("#"+a.jgrid.jqID(b.p.id)).clone(!0);a("tr",c).each(function(){a("td:gt("+f+")",this).remove()}),a(c).width(1).attr("id",b.p.id+"_frozen"),a(b.grid.fbDiv).append(c),!0===b.p.hoverrows&&(a("tr.jqgrow",c).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).removeClass("ui-state-hover")}),a("tr.jqgrow","#"+a.jgrid.jqID(b.p.id)).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").removeClass("ui-state-hover")})),c=null}),b.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){if(a(this.grid.fhDiv).remove(),a(this.grid.fbDiv).remove(),this.grid.fhDiv=null,this.grid.fbDiv=null,a(this).unbind(".setFrozenColumns"),!0===this.p.hoverrows){var b;a("#"+a.jgrid.jqID(this.p.id)).bind("mouseover",function(c){b=a(c.target).closest("tr.jqgrow"),"ui-subgrid"!==a(b).attr("class")&&a(b).addClass("ui-state-hover")}).bind("mouseout",function(c){b=a(c.target).closest("tr.jqgrow"),a(b).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function(a){a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(b,c){if(c=a.extend({jqm:!0,gb:""},c||{}),c.onClose){var d=c.gb&&"string"==typeof c.gb&&"#gbox_"===c.gb.substr(0,6)?c.onClose.call(a("#"+c.gb.substr(6))[0],b):c.onClose(b);if("boolean"==typeof d&&!d)return}if(a.fn.jqm&&!0===c.jqm)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==c.gb)try{a(".jqgrid-overlay:first",c.gb).hide()}catch(e){}a(b).hide().attr("aria-hidden","true")}},findPos:function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},createModal:function(b,c,d,e,f,g,h){var i,d=a.extend(!0,{},a.jgrid.jqModal||{},d),j=document.createElement("div"),k=this,h=a.extend({},h||{});i="rtl"===a(d.gbox).attr("dir")?!0:!1,j.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",j.id=b.themodal;var l=document.createElement("div");l.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",l.id=b.modalhead,a(l).append("<span class='ui-jqdialog-title'>"+d.caption+"</span>");var m=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){m.addClass("ui-state-hover")},function(){m.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(l).append(m),i?(j.dir="rtl",a(".ui-jqdialog-title",l).css("float","right"),a(".ui-jqdialog-titlebar-close",l).css("left","0.3em")):(j.dir="ltr",a(".ui-jqdialog-title",l).css("float","left"),a(".ui-jqdialog-titlebar-close",l).css("right","0.3em"));var n=document.createElement("div");if(a(n).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent),a(n).append(c),j.appendChild(n),a(j).prepend(l),!0===g?a("body").append(j):"string"==typeof g?a(g).append(j):a(j).insertBefore(e),a(j).css(h),void 0===d.jqModal&&(d.jqModal=!0),c={},a.fn.jqm&&!0===d.jqModal?(0===d.left&&0===d.top&&d.overlay&&(h=[],h=a.jgrid.findPos(f),d.left=h[0]+4,d.top=h[1]+4),c.top=d.top+"px",c.left=d.left):(0!==d.left||0!==d.top)&&(c.left=d.left,c.top=d.top+"px"),a("a.ui-jqdialog-titlebar-close",l).click(function(){var c=a("#"+a.jgrid.jqID(b.themodal)).data("onClose")||d.onClose,e=a("#"+a.jgrid.jqID(b.themodal)).data("gbox")||d.gbox;return k.hideModal("#"+a.jgrid.jqID(b.themodal),{gb:e,jqm:d.jqModal,onClose:c}),!1}),0!==d.width&&d.width||(d.width=300),0!==d.height&&d.height||(d.height=200),d.zIndex||(e=a(e).parents("*[role=dialog]").filter(":first").css("z-index"),d.zIndex=e?parseInt(e,10)+2:950),e=0,i&&c.left&&!g&&(e=a(d.gbox).width()-(isNaN(d.width)?0:parseInt(d.width,10))-8,c.left=parseInt(c.left,10)+parseInt(e,10)),c.left&&(c.left+="px"),a(j).css(a.extend({width:isNaN(d.width)?"auto":d.width+"px",height:isNaN(d.height)?"auto":d.height+"px",zIndex:d.zIndex,overflow:"hidden"},c)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"}),void 0===d.drag&&(d.drag=!0),void 0===d.resize&&(d.resize=!0),d.drag)if(a(l).css("cursor","move"),a.fn.jqDrag)a(j).jqDrag(l);else try{a(j).draggable({handle:a("#"+a.jgrid.jqID(l.id))})}catch(o){}if(d.resize)if(a.fn.jqResize)a(j).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),a("#"+a.jgrid.jqID(b.themodal)).jqResize(".jqResize",b.scrollelm?"#"+a.jgrid.jqID(b.scrollelm):!1);else try{a(j).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+a.jgrid.jqID(b.scrollelm):!1})}catch(p){}!0===d.closeOnEscape&&a(j).keydown(function(c){27==c.which&&(c=a("#"+a.jgrid.jqID(b.themodal)).data("onClose")||d.onClose,k.hideModal("#"+a.jgrid.jqID(b.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:c}))})},viewModal:function(b,c){if(c=a.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},c||{}),a.fn.jqm&&!0===c.jqm)c.jqM?a(b).attr("aria-hidden","false").jqm(c).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{""!==c.gbox&&(a(".jqgrid-overlay:first",c.gbox).show(),a(b).data("gbox",c.gbox)),a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(d){}}},info_dialog:function(b,c,d,e){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(!0,f,a.jgrid.jqModal||{},{caption:"<b>"+b+"</b>"},e||{});var g=f.jqModal,h=this;if(a.fn.jqm&&!g&&(g=!1),b="",0<f.buttons.length)for(e=0;e<f.buttons.length;e++)void 0===f.buttons[e].id&&(f.buttons[e].id="info_button_"+e),b+="<a href='javascript:void(0)' id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[e].text+"</a>";e=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",c="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+e+";"+("text-align:"+f.align+";")+"'>"+c+"</div>"),c+=d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+d+"</a>"+b+"</div>":""!==b?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"",c+="</div>";try{"false"===a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(i){}a.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},c,f,"","",!0),b&&a.each(f.buttons,function(b){a("#"+a.jgrid.jqID(this.id),"#info_id").bind("click",function(){return f.buttons[b].onClick.call(a("#info_dialog")),!1})}),a("#closedialog","#info_id").click(function(){return h.hideModal("#info_dialog",{jqm:g,onClose:a("#info_dialog").data("onClose")||f.onClose,gb:a("#info_dialog").data("gbox")||f.gbox}),!1}),a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a.isFunction(f.beforeOpen)&&f.beforeOpen(),a.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:f.modal,jqm:g}),a.isFunction(f.afterOpen)&&f.afterOpen();try{a("#info_dialog").focus()}catch(j){}},bindEv:function(b,c){a.isFunction(c.dataInit)&&c.dataInit.call(this,b),c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)})},createEl:function(b,c,d,e,f){function g(b,c,d){var e="dataInit,dataEvents,dataUrl,buildSelect,sopt,searchhidden,defaultValue,attr,custom_element,custom_value".split(",");void 0!==d&&a.isArray(d)&&a.merge(e,d),a.each(c,function(c,d){-1===a.inArray(c,e)&&a(b).attr(c,d)}),c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="",i=this;switch(b){case"textarea":h=document.createElement("textarea"),e?c.cols||a(h).css({width:"98%"}):c.cols||(c.cols=20),c.rows||(c.rows=2),("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))&&(d=""),h.value=d,g(h,c),a(h).attr({role:"textbox",multiline:"true"});break;case"checkbox":h=document.createElement("input"),h.type="checkbox",c.value?(b=c.value.split(":"),d===b[0]&&(h.checked=!0,h.defaultChecked=!0),h.value=b[0],a(h).attr("offval",b[1])):(b=d.toLowerCase(),0>b.search(/(false|f|0|no|n|off|undefined)/i)&&""!==b?(h.checked=!0,h.defaultChecked=!0,h.value=d):h.value="on",a(h).attr("offval","off")),g(h,c,["value"]),a(h).attr("role","checkbox");break;case"select":if(h=document.createElement("select"),h.setAttribute("role","select"),e=[],!0===c.multiple?(b=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):b=!1,void 0!==c.dataUrl)b=c.name?(""+c.id).substring(0,(""+c.id).length-(""+c.name).length-1):""+c.id,e=c.postData||f.postData,i.p&&i.p.idPrefix?b=a.jgrid.stripPref(i.p.idPrefix,b):e=void 0,a.ajax(a.extend({url:c.dataUrl,type:"GET",dataType:"html",data:a.isFunction(e)?e.call(i,b,d,""+c.name):e,context:{elem:h,options:c,vl:d},success:function(b){var c=[],d=this.elem,e=this.vl,f=a.extend({},this.options),h=f.multiple===!0,b=a.isFunction(f.buildSelect)?f.buildSelect.call(i,b):b;"string"==typeof b&&(b=a(a.trim(b)).html()),b&&(a(d).append(b),g(d,f),void 0===f.size&&(f.size=h?3:1),h?(c=e.split(","),c=a.map(c,function(b){return a.trim(b)})):c[0]=a.trim(e),setTimeout(function(){a("option",d).each(function(b){0===b&&d.multiple&&(this.selected=!1),a(this).attr("role","option"),(a.inArray(a.trim(a(this).text()),c)>-1||a.inArray(a.trim(a(this).val()),c)>-1)&&(this.selected="selected")})},0))}},f||{}));else if(c.value){var j;void 0===c.size&&(c.size=b?3:1),b&&(e=d.split(","),e=a.map(e,function(b){return a.trim(b)})),"function"==typeof c.value&&(c.value=c.value());var k,l,m=void 0===c.separator?":":c.separator,f=void 0===c.delimiter?";":c.delimiter;if("string"==typeof c.value)for(k=c.value.split(f),j=0;j<k.length;j++)l=k[j].split(m),2<l.length&&(l[1]=a.map(l,function(a,b){return b>0?a:void 0}).join(m)),f=document.createElement("option"),f.setAttribute("role","option"),f.value=l[0],f.innerHTML=l[1],h.appendChild(f),b||a.trim(l[0])!==a.trim(d)&&a.trim(l[1])!==a.trim(d)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(l[1]),e)||-1<a.inArray(a.trim(l[0]),e))&&(f.selected="selected");else if("object"==typeof c.value)for(j in m=c.value)m.hasOwnProperty(j)&&(f=document.createElement("option"),f.setAttribute("role","option"),f.value=j,f.innerHTML=m[j],h.appendChild(f),b||a.trim(j)!==a.trim(d)&&a.trim(m[j])!==a.trim(d)||(f.selected="selected"),b&&(-1<a.inArray(a.trim(m[j]),e)||-1<a.inArray(a.trim(j),e))&&(f.selected="selected"));g(h,c,["value"])}break;case"text":case"password":case"button":j="button"===b?"button":"textbox",h=document.createElement("input"),h.type=b,h.value=d,g(h,c),"button"!==b&&(e?c.size||a(h).css({width:"98%"}):c.size||(c.size=20)),a(h).attr("role",j);break;case"image":case"file":h=document.createElement("input"),h.type=b,g(h,c);break;case"custom":h=document.createElement("span");try{if(!a.isFunction(c.custom_element))throw"e1";if(!(m=c.custom_element.call(i,d,c)))throw"e2";m=a(m).addClass("customelement").attr({id:c.id,name:c.name}),a(h).empty().append(m)}catch(n){"e1"===n&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===n?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"==typeof n?n:n.message,a.jgrid.edit.bClose)}}return h},checkDate:function(a,b){var c,d={},a=a.toLowerCase();if(c=-1!==a.indexOf("/")?"/":-1!==a.indexOf("-")?"-":-1!==a.indexOf(".")?".":"/",a=a.split(c),b=b.split(c),3!==b.length)return!1;c=-1;var e,f,g=-1,h=-1;for(f=0;f<a.length;f++)e=isNaN(b[f])?0:parseInt(b[f],10),d[a[f]]=e,e=a[f],-1!==e.indexOf("y")&&(c=f),-1!==e.indexOf("m")&&(h=f),-1!==e.indexOf("d")&&(g=f);e="y"===a[c]||"yyyy"===a[c]?4:"yy"===a[c]?2:-1,f=[0,31,29,31,30,31,30,31,31,30,31,30,31];var i;return-1===c?!1:(i=d[a[c]].toString(),2===e&&1===i.length&&(e=1),i.length!==e||0===d[a[c]]&&"00"!==b[c]||-1===h?!1:(i=d[a[h]].toString(),1>i.length||1>d[a[h]]||12<d[a[h]]||-1===g?!1:(i=d[a[g]].toString(),1>i.length||1>d[a[g]]||31<d[a[g]]||2===d[a[h]]&&d[a[g]]>(0!==d[a[c]]%4||0===d[a[c]]%100&&0!==d[a[c]]%400?28:29)||d[a[g]]>f[d[a[h]]]?!1:!0)))},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(b){var c=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!a.jgrid.isEmpty(b)){if(!(b=b.match(c)))return!1;if(b[3]){if(1>b[1]||12<b[1])return!1}else if(23<b[1])return!1;if(59<b[2])return!1}return!0},checkValues:function(b,c,d,e){var f,g,h;if(h=this.p.colModel,void 0===d)if("string"==typeof c){for(d=0,e=h.length;e>d;d++)if(h[d].name===c){f=h[d].editrules,c=d,null!=h[d].formoptions&&(g=h[d].formoptions.label);break}}else c>=0&&(f=h[c].editrules);else f=d,g=void 0===e?"_":e;if(f){if(g||(g=null!=this.p.colNames?this.p.colNames[c]:h[c].label),!0===f.required&&a.jgrid.isEmpty(b))return[!1,g+": "+a.jgrid.edit.msg.required,""];if(d=!1===f.required?!1:!0,!0===f.number&&(!1!==d||!a.jgrid.isEmpty(b))&&isNaN(b))return[!1,g+": "+a.jgrid.edit.msg.number,""];if(void 0!==f.minValue&&!isNaN(f.minValue)&&parseFloat(b)<parseFloat(f.minValue))return[!1,g+": "+a.jgrid.edit.msg.minValue+" "+f.minValue,""];if(void 0!==f.maxValue&&!isNaN(f.maxValue)&&parseFloat(b)>parseFloat(f.maxValue))return[!1,g+": "+a.jgrid.edit.msg.maxValue+" "+f.maxValue,""];if(!(!0!==f.email||!1===d&&a.jgrid.isEmpty(b)||(e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,e.test(b))))return[!1,g+": "+a.jgrid.edit.msg.email,""];if(!(!0!==f.integer||!1===d&&a.jgrid.isEmpty(b)||!isNaN(b)&&0===b%1&&-1===b.indexOf(".")))return[!1,g+": "+a.jgrid.edit.msg.integer,""];if(!(!0!==f.date||!1===d&&a.jgrid.isEmpty(b)||(h[c].formatoptions&&h[c].formatoptions.newformat?(h=h[c].formatoptions.newformat,a.jgrid.formatter.date.masks.hasOwnProperty(h)&&(h=a.jgrid.formatter.date.masks[h])):h=h[c].datefmt||"Y-m-d",a.jgrid.checkDate(h,b))))return[!1,g+": "+a.jgrid.edit.msg.date+" - "+h,""];if(!(!0!==f.time||!1===d&&a.jgrid.isEmpty(b)||a.jgrid.checkTime(b)))return[!1,g+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!(!0!==f.url||!1===d&&a.jgrid.isEmpty(b)||(e=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,e.test(b))))return[!1,g+": "+a.jgrid.edit.msg.url,""];if(!0===f.custom&&(!1!==d||!a.jgrid.isEmpty(b)))return a.isFunction(f.custom_func)?(b=f.custom_func.call(this,b,g,c),a.isArray(b)?b:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})}(jQuery),function(a){var b={};a.jgrid.extend({searchGrid:function(b){return b=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},a.jgrid.search,b||{}),this.each(function(){function c(c){f=a(d).triggerHandler("jqGridFilterBeforeShow",[c]),void 0===f&&(f=!0),f&&a.isFunction(b.beforeShowSearch)&&(f=b.beforeShowSearch.call(d,c)),f&&(a.jgrid.viewModal("#"+a.jgrid.jqID(g.themodal),{gbox:"#gbox_"+a.jgrid.jqID(e),jqm:b.jqModal,modal:b.modal,overlay:b.overlay,toTop:b.toTop}),a(d).triggerHandler("jqGridFilterAfterShow",[c]),a.isFunction(b.afterShowSearch)&&b.afterShowSearch.call(d,c))}var d=this;if(d.grid){var e="fbox_"+d.p.id,f=!0,g={themodal:"searchmod"+e,modalhead:"searchhd"+e,modalcontent:"searchcnt"+e,scrollelm:e},h=d.p.postData[b.sFilter];if("string"==typeof h&&(h=a.jgrid.parse(h)),!0===b.recreateFilter&&a("#"+a.jgrid.jqID(g.themodal)).remove(),void 0!==a("#"+a.jgrid.jqID(g.themodal))[0])c(a("#fbox_"+a.jgrid.jqID(+d.p.id)));
else{var i=a("<div><div id='"+e+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+a.jgrid.jqID(d.p.id)),j="left",k="";"rtl"===d.p.direction&&(j="right",k=" style='text-align:left'",i.attr("dir","rtl"));var l,m=a.extend([],d.p.colModel),n="<a href='javascript:void(0)' id='"+e+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+b.Find+"</a>",o="<a href='javascript:void(0)' id='"+e+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+b.Reset+"</a>",p="",q="",r=!1,s=-1;if(b.showQuery&&(p="<a href='javascript:void(0)' id='"+e+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),b.columns.length?(m=b.columns,s=0,l=m[0].index||m[0].name):a.each(m,function(a,b){if(b.label||(b.label=d.p.colNames[a]),!r){var c=void 0===b.search?!0:b.search,e=b.hidden===!0;(b.searchoptions&&b.searchoptions.searchhidden===!0&&c||c&&!e)&&(r=!0,l=b.index||b.name,s=a)}}),!h&&l||!1===b.multipleSearch){var t="eq";s>=0&&m[s].searchoptions&&m[s].searchoptions.sopt?t=m[s].searchoptions.sopt[0]:b.sopt&&b.sopt.length&&(t=b.sopt[0]),h={groupOp:"AND",rules:[{field:l,op:t,data:""}]}}r=!1,b.tmplNames&&b.tmplNames.length&&(r=!0,q=b.tmplLabel,q+="<select class='ui-template'>",q+="<option value='default'>Default</option>",a.each(b.tmplNames,function(a,b){q+="<option value='"+a+"'>"+b+"</option>"}),q+="</select>"),j="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+j+"'>"+o+q+"</td><td class='EditButton' "+k+">"+p+n+"</td></tr></tbody></table>",e=a.jgrid.jqID(e),a("#"+e).jqFilter({columns:m,filter:b.loadDefaults?h:null,showQuery:b.showQuery,errorcheck:b.errorcheck,sopt:b.sopt,groupButton:b.multipleGroup,ruleButtons:b.multipleSearch,afterRedraw:b.afterRedraw,ops:b.odata,operands:b.operands,ajaxSelectOptions:d.p.ajaxSelectOptions,groupOps:b.groupOps,onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString()),a.isFunction(b.afterChange)&&b.afterChange.call(d,a("#"+e),b)},direction:d.p.direction,id:d.p.id}),i.append(j),r&&b.tmplFilters&&b.tmplFilters.length&&a(".ui-template",i).bind("change",function(){var c=a(this).val();return"default"===c?a("#"+e).jqFilter("addFilter",h):a("#"+e).jqFilter("addFilter",b.tmplFilters[parseInt(c,10)]),!1}),!0===b.multipleGroup&&(b.multipleSearch=!0),a(d).triggerHandler("jqGridFilterInitialize",[a("#"+e)]),a.isFunction(b.onInitializeSearch)&&b.onInitializeSearch.call(d,a("#"+e)),b.gbox="#gbox_"+e,b.layer?a.jgrid.createModal(g,i,b,"#gview_"+a.jgrid.jqID(d.p.id),a("#gbox_"+a.jgrid.jqID(d.p.id))[0],"#"+a.jgrid.jqID(b.layer),{position:"relative"}):a.jgrid.createModal(g,i,b,"#gview_"+a.jgrid.jqID(d.p.id),a("#gbox_"+a.jgrid.jqID(d.p.id))[0]),(b.searchOnEnter||b.closeOnEscape)&&a("#"+a.jgrid.jqID(g.themodal)).keydown(function(c){var d=a(c.target);return!b.searchOnEnter||13!==c.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")?b.closeOnEscape&&27===c.which?(a("#"+a.jgrid.jqID(g.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0:(a("#"+e+"_search").focus().click(),!1)}),p&&a("#"+e+"_query").bind("click",function(){return a(".queryresult",i).toggle(),!1}),void 0===b.stringResult&&(b.stringResult=b.multipleSearch),a("#"+e+"_search").bind("click",function(){var c,f=a("#"+e),h={},i=f.jqFilter("filterData");if(b.errorcheck&&(f[0].hideError(),b.showQuery||f.jqFilter("toSQLString"),f[0].p.error))return f[0].showError(),!1;if(b.stringResult){try{c=xmlJsonClass.toJson(i,"","",!1)}catch(j){try{c=JSON.stringify(i)}catch(k){}}"string"==typeof c&&(h[b.sFilter]=c,a.each([b.sField,b.sValue,b.sOper],function(){h[this]=""}))}else b.multipleSearch?(h[b.sFilter]=i,a.each([b.sField,b.sValue,b.sOper],function(){h[this]=""})):(h[b.sField]=i.rules[0].field,h[b.sValue]=i.rules[0].data,h[b.sOper]=i.rules[0].op,h[b.sFilter]="");return d.p.search=!0,a.extend(d.p.postData,h),a(d).triggerHandler("jqGridFilterSearch"),a.isFunction(b.onSearch)&&b.onSearch.call(d),a(d).trigger("reloadGrid",[{page:1}]),b.closeAfterSearch&&a.jgrid.hideModal("#"+a.jgrid.jqID(g.themodal),{gb:"#gbox_"+a.jgrid.jqID(d.p.id),jqm:b.jqModal,onClose:b.onClose}),!1}),a("#"+e+"_reset").bind("click",function(){var c={},f=a("#"+e);return d.p.search=!1,b.multipleSearch===!1?c[b.sField]=c[b.sValue]=c[b.sOper]="":c[b.sFilter]="",f[0].resetFilter(),r&&a(".ui-template",i).val("default"),a.extend(d.p.postData,c),a(d).triggerHandler("jqGridFilterReset"),a.isFunction(b.onReset)&&b.onReset.call(d),a(d).trigger("reloadGrid",[{page:1}]),!1}),c(a("#"+e)),a(".fm-button:not(.ui-state-disabled)",i).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},editGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},a.jgrid.edit,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){return a(v+" > tbody > tr > td > .FormElement").each(function(){var b=a(".customelement",this);if(b.length){var c=a(b[0]).attr("name");a.each(o.p.colModel,function(){if(this.name===c&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(p[c]=this.editoptions.custom_value.call(o,a("#"+a.jgrid.jqID(c),v),"get"),void 0===p[c])throw"e1"}catch(b){"e1"===b?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,b.message,a.jgrid.edit.bClose)}return!0}})}else{switch(a(this).get(0).type){case"checkbox":a(this).is(":checked")?p[this.name]=a(this).val():(b=a(this).attr("offval"),p[this.name]=b);break;case"select-one":p[this.name]=a("option:selected",this).val();break;case"select-multiple":p[this.name]=a(this).val(),p[this.name]=p[this.name]?p[this.name].join(","):"",a("option:selected",this).each(function(b,c){a(c).text()});break;case"password":case"text":case"textarea":case"button":p[this.name]=a(this).val()}o.p.autoencode&&(p[this.name]=a.jgrid.htmlEncode(p[this.name]))}}),!0}function f(c,d,e,f){var g,h,i,j,k,l,m,n=0,p=[],q=!1,r="";for(m=1;f>=m;m++)r+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";return"_empty"!==c&&(q=a(d).jqGrid("getInd",c)),a(d.p.colModel).each(function(m){if(g=this.name,k=(h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"","cb"!==g&&"subgrid"!==g&&!0===this.editable&&"rn"!==g){if(!1===q)j="";else if(g===d.p.ExpandColumn&&!0===d.p.treeGrid)j=a("td[role='gridcell']:eq("+m+")",d.rows[q]).text();else{try{j=a.unformat.call(d,a("td[role='gridcell']:eq("+m+")",d.rows[q]),{rowId:c,colModel:this},m)}catch(s){j=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']:eq("+m+")",d.rows[q]).text():a("td[role='gridcell']:eq("+m+")",d.rows[q]).html()}(!j||"&nbsp;"===j||"&#160;"===j||1===j.length&&160===j.charCodeAt(0))&&(j="")}var u=a.extend({},this.editoptions||{},{id:g,name:g}),v=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),w=parseInt(v.rowpos,10)||n+1,x=parseInt(2*(parseInt(v.colpos,10)||1),10);if("_empty"===c&&u.defaultValue&&(j=a.isFunction(u.defaultValue)?u.defaultValue.call(o):u.defaultValue),this.edittype||(this.edittype="text"),o.p.autoencode&&(j=a.jgrid.htmlDecode(j)),l=a.jgrid.createEl.call(o,this.edittype,u,j,!1,a.extend({},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{})),(b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(b[o.p.id]._savedData[g]=j),a(l).addClass("FormElement"),-1<a.inArray(this.edittype,["text","textarea","password","select"])&&a(l).addClass("ui-widget-content ui-corner-all"),i=a(e).find("tr[rowpos="+w+"]"),v.rowabove){var y=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+v.rowcontent+"</td></tr>");a(e).append(y),y[0].rp=w}0===i.length&&(i=a("<tr "+k+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+g),a(i).append(r),a(e).append(i),i[0].rp=w),a("td:eq("+(x-2)+")",i[0]).html(void 0===v.label?d.p.colNames[m]:v.label),a("td:eq("+(x-1)+")",i[0]).append(v.elmprefix).append(l).append(v.elmsuffix),a.isFunction(u.custom_value)&&"_empty"!==c&&u.custom_value.call(o,a("#"+g,"#"+t),"set",j),a.jgrid.bindEv.call(o,l,u),p[n]=m,n++}}),n>0&&(m=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+d.p.id+"_id' value='"+c+"'/></td></tr>"),m[0].rp=n+999,a(e).append(m),b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(b[o.p.id]._savedData[d.p.id+"_id"]=c),p}function g(c,d,e){var f,g,h,i,j,k,l=0;(b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(b[o.p.id]._savedData={},b[o.p.id]._savedData[d.p.id+"_id"]=c);var m=d.p.colModel;if("_empty"===c)a(m).each(function(){f=this.name,i=a.extend({},this.editoptions||{}),(h=a("#"+a.jgrid.jqID(f),"#"+e))&&h.length&&null!==h[0]&&(j="",i.defaultValue?(j=a.isFunction(i.defaultValue)?i.defaultValue.call(o):i.defaultValue,"checkbox"===h[0].type?(k=j.toLowerCase(),0>k.search(/(false|f|0|no|n|off|undefined)/i)&&""!==k?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=j):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(j)):"checkbox"===h[0].type?(h[0].checked=!1,h[0].defaultChecked=!1,j=a(h).attr("offval")):h[0].type&&"select"===h[0].type.substr(0,6)?h[0].selectedIndex=0:h.val(j),(!0===b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(b[o.p.id]._savedData[f]=j))}),a("#id_g","#"+e).val(c);else{var n=a(d).jqGrid("getInd",c,!0);n&&(a('td[role="gridcell"]',n).each(function(h){if(f=m[h].name,"cb"!==f&&"subgrid"!==f&&"rn"!==f&&!0===m[h].editable){if(f===d.p.ExpandColumn&&!0===d.p.treeGrid)g=a(this).text();else try{g=a.unformat.call(d,a(this),{rowId:c,colModel:m[h]},h)}catch(i){g="textarea"===m[h].edittype?a(this).text():a(this).html()}switch(o.p.autoencode&&(g=a.jgrid.htmlDecode(g)),(!0===b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(b[o.p.id]._savedData[f]=g),f=a.jgrid.jqID(f),m[h].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===g||"&#160;"===g||1===g.length&&160===g.charCodeAt(0))&&(g=""),a("#"+f,"#"+e).val(g);break;case"select":var j=g.split(","),j=a.map(j,function(b){return a.trim(b)});a("#"+f+" option","#"+e).each(function(){this.selected=m[h].editoptions.multiple||a.trim(g)!==a.trim(a(this).text())&&j[0]!==a.trim(a(this).text())&&j[0]!==a.trim(a(this).val())?m[h].editoptions.multiple&&(-1<a.inArray(a.trim(a(this).text()),j)||-1<a.inArray(a.trim(a(this).val()),j))?!0:!1:!0});break;case"checkbox":g=""+g,m[h].editoptions&&m[h].editoptions.value?a("#"+f,"#"+e)[o.p.useProp?"prop":"attr"](m[h].editoptions.value.split(":")[0]===g?{checked:!0,defaultChecked:!0}:{checked:!1,defaultChecked:!1}):(g=g.toLowerCase(),0>g.search(/(false|f|0|no|n|off|undefined)/i)&&""!==g?(a("#"+f,"#"+e)[o.p.useProp?"prop":"attr"]("checked",!0),a("#"+f,"#"+e)[o.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+f,"#"+e)[o.p.useProp?"prop":"attr"]("checked",!1),a("#"+f,"#"+e)[o.p.useProp?"prop":"attr"]("defaultChecked",!1)));break;case"custom":try{if(!m[h].editoptions||!a.isFunction(m[h].editoptions.custom_value))throw"e1";m[h].editoptions.custom_value.call(o,a("#"+f,"#"+e),"set",g)}catch(k){"e1"===k?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,k.message,a.jgrid.edit.bClose)}}l++}}),l>0&&a("#id_g",v).val(c))}}function h(){a.each(o.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&p.hasOwnProperty(b.name)&&""===p[b.name]&&(p[b.name]="null")})}function i(){var c,e,f,i,j,k,l=[!0,"",""],m={},n=o.p.prmNames,q=a(o).triggerHandler("jqGridAddEditBeforeCheckValues",[a("#"+t),r]);q&&"object"==typeof q&&(p=q),a.isFunction(b[o.p.id].beforeCheckValues)&&(q=b[o.p.id].beforeCheckValues.call(o,p,a("#"+t),r))&&"object"==typeof q&&(p=q);for(i in p)if(p.hasOwnProperty(i)&&(l=a.jgrid.checkValues.call(o,p[i],i),!1===l[0]))break;if(h(),l[0]&&(m=a(o).triggerHandler("jqGridAddEditClickSubmit",[b[o.p.id],p,r]),void 0===m&&a.isFunction(b[o.p.id].onclickSubmit)&&(m=b[o.p.id].onclickSubmit.call(o,b[o.p.id],p,r)||{}),l=a(o).triggerHandler("jqGridAddEditBeforeSubmit",[p,a("#"+t),r]),void 0===l&&(l=[!0,"",""]),l[0]&&a.isFunction(b[o.p.id].beforeSubmit)&&(l=b[o.p.id].beforeSubmit.call(o,p,a("#"+t),r))),l[0]&&!b[o.p.id].processing){if(b[o.p.id].processing=!0,a("#sData",v+"_2").addClass("ui-state-active"),f=n.oper,e=n.id,p[f]="_empty"===a.trim(p[o.p.id+"_id"])?n.addoper:n.editoper,p[f]!==n.addoper?p[e]=p[o.p.id+"_id"]:void 0===p[e]&&(p[e]=p[o.p.id+"_id"]),delete p[o.p.id+"_id"],p=a.extend(p,b[o.p.id].editData,m),!0===o.p.treeGrid)for(k in p[f]===n.addoper&&(j=a(o).jqGrid("getGridParam","selrow"),p["adjacency"===o.p.treeGridModel?o.p.treeReader.parent_id_field:"parent_id"]=j),o.p.treeReader)o.p.treeReader.hasOwnProperty(k)&&(m=o.p.treeReader[k],p.hasOwnProperty(m)&&!(p[f]===n.addoper&&"parent_id_field"===k)&&delete p[m]);p[e]=a.jgrid.stripPref(o.p.idPrefix,p[e]),k=a.extend({url:b[o.p.id].url||a(o).jqGrid("getGridParam","editurl"),type:b[o.p.id].mtype,data:a.isFunction(b[o.p.id].serializeEditData)?b[o.p.id].serializeEditData.call(o,p):p,complete:function(h,i){var k;if(p[e]=o.p.idPrefix+p[e],h.status>=300&&304!==h.status?(l[0]=!1,l[1]=a(o).triggerHandler("jqGridAddEditErrorTextFormat",[h,r]),l[1]=a.isFunction(b[o.p.id].errorTextFormat)?b[o.p.id].errorTextFormat.call(o,h,r):i+" Status: '"+h.statusText+"'. Error code: "+h.status):(l=a(o).triggerHandler("jqGridAddEditAfterSubmit",[h,p,r]),void 0===l&&(l=[!0,"",""]),l[0]&&a.isFunction(b[o.p.id].afterSubmit)&&(l=b[o.p.id].afterSubmit.call(o,h,p,r))),l[0]===!1)a("#FormError>td",v).html(l[1]),a("#FormError",v).show();else if(o.p.autoencode&&a.each(p,function(b,c){p[b]=a.jgrid.htmlDecode(c)}),p[f]===n.addoper?(l[2]||(l[2]=a.jgrid.randId()),p[e]=l[2],b[o.p.id].reloadAfterSubmit?a(o).trigger("reloadGrid"):o.p.treeGrid===!0?a(o).jqGrid("addChildNode",l[2],j,p):a(o).jqGrid("addRowData",l[2],p,d.addedrow),b[o.p.id].closeAfterAdd?(o.p.treeGrid!==!0&&a(o).jqGrid("setSelection",l[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose})):b[o.p.id].clearAfterAdd&&g("_empty",o,t)):(b[o.p.id].reloadAfterSubmit?(a(o).trigger("reloadGrid"),b[o.p.id].closeAfterEdit||setTimeout(function(){a(o).jqGrid("setSelection",p[e])},1e3)):o.p.treeGrid===!0?a(o).jqGrid("setTreeRow",p[e],p):a(o).jqGrid("setRowData",p[e],p),b[o.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose})),a.isFunction(b[o.p.id].afterComplete)&&(c=h,setTimeout(function(){a(o).triggerHandler("jqGridAddEditAfterComplete",[c,p,a("#"+t),r]),b[o.p.id].afterComplete.call(o,c,p,a("#"+t),r),c=null},500)),(b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(a("#"+t).data("disabled",!1),"_empty"!==b[o.p.id]._savedData[o.p.id+"_id"]))for(k in b[o.p.id]._savedData)b[o.p.id]._savedData.hasOwnProperty(k)&&p[k]&&(b[o.p.id]._savedData[k]=p[k]);b[o.p.id].processing=!1,a("#sData",v+"_2").removeClass("ui-state-active");try{a(":input:visible","#"+t)[0].focus()}catch(m){}}},a.jgrid.ajaxOptions,b[o.p.id].ajaxEditOptions),!k.url&&!b[o.p.id].useDataProxy&&(a.isFunction(o.p.dataProxy)?b[o.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+a.jgrid.errors.nourl)),l[0]&&(b[o.p.id].useDataProxy?(m=o.p.dataProxy.call(o,k,"set_"+o.p.id),void 0===m&&(m=[!0,""]),!1===m[0]?(l[0]=!1,l[1]=m[1]||"Error deleting the selected row!"):(k.data.oper===n.addoper&&b[o.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),k.data.oper===n.editoper&&b[o.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}))):a.ajax(k))}!1===l[0]&&(a("#FormError>td",v).html(l[1]),a("#FormError",v).show())}function j(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)&&a[c]!=b[c]){d=!0;break}return d}function k(){var c=!0;return a("#FormError",v).hide(),b[o.p.id].checkOnUpdate&&(p={},e(),q=j(p,b[o.p.id]._savedData))&&(a("#"+t).data("disabled",!0),a(".confirm","#"+w.themodal).show(),c=!1),c}function l(){var b;if("_empty"!==c&&void 0!==o.p.savedRow&&0<o.p.savedRow.length&&a.isFunction(a.fn.jqGrid.restoreRow))for(b=0;b<o.p.savedRow.length;b++)if(o.p.savedRow[b].id==c){a(o).jqGrid("restoreRow",c);break}}function m(b,c){var d=c[1].length-1;0===b?a("#pData",v+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",v+"_2").addClass("ui-state-disabled"):a("#pData",v+"_2").removeClass("ui-state-disabled"),b===d?a("#nData",v+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",v+"_2").addClass("ui-state-disabled"):a("#nData",v+"_2").removeClass("ui-state-disabled")}function n(){var b=a(o).jqGrid("getDataIDs"),c=a("#id_g",v).val();return[a.inArray(c,b),b]}var o=this;if(o.grid&&c){var p,q,r,s=o.p.id,t="FrmGrid_"+s,u="TblGrid_"+s,v="#"+a.jgrid.jqID(u),w={themodal:"editmod"+s,modalhead:"edithd"+s,modalcontent:"editcnt"+s,scrollelm:t},x=a.isFunction(b[o.p.id].beforeShowForm)?b[o.p.id].beforeShowForm:!1,y=a.isFunction(b[o.p.id].afterShowForm)?b[o.p.id].afterShowForm:!1,z=a.isFunction(b[o.p.id].beforeInitData)?b[o.p.id].beforeInitData:!1,A=a.isFunction(b[o.p.id].onInitializeForm)?b[o.p.id].onInitializeForm:!1,B=!0,C=1,D=0,t=a.jgrid.jqID(t);"new"===c?(c="_empty",r="add",d.caption=b[o.p.id].addCaption):(d.caption=b[o.p.id].editCaption,r="edit"),!0===d.recreateForm&&void 0!==a("#"+a.jgrid.jqID(w.themodal))[0]&&a("#"+a.jgrid.jqID(w.themodal)).remove();var E=!0;if(d.checkOnUpdate&&d.jqModal&&!d.modal&&(E=!1),void 0!==a("#"+a.jgrid.jqID(w.themodal))[0]){if(B=a(o).triggerHandler("jqGridAddEditBeforeInitData",[a("#"+a.jgrid.jqID(t)),r]),void 0===B&&(B=!0),B&&z&&(B=z.call(o,a("#"+t),r)),!1===B)return;l(),a(".ui-jqdialog-title","#"+a.jgrid.jqID(w.modalhead)).html(d.caption),a("#FormError",v).hide(),b[o.p.id].topinfo?(a(".topinfo",v).html(b[o.p.id].topinfo),a(".tinfo",v).show()):a(".tinfo",v).hide(),b[o.p.id].bottominfo?(a(".bottominfo",v+"_2").html(b[o.p.id].bottominfo),a(".binfo",v+"_2").show()):a(".binfo",v+"_2").hide(),g(c,o,t),"_empty"!==c&&b[o.p.id].viewPagerButtons?a("#pData, #nData",v+"_2").show():a("#pData, #nData",v+"_2").hide(),!0===b[o.p.id].processing&&(b[o.p.id].processing=!1,a("#sData",v+"_2").removeClass("ui-state-active")),!0===a("#"+t).data("disabled")&&(a(".confirm","#"+a.jgrid.jqID(w.themodal)).hide(),a("#"+t).data("disabled",!1)),a(o).triggerHandler("jqGridAddEditBeforeShowForm",[a("#"+t),r]),x&&x.call(o,a("#"+t),r),a("#"+a.jgrid.jqID(w.themodal)).data("onClose",b[o.p.id].onClose),a.jgrid.viewModal("#"+a.jgrid.jqID(w.themodal),{gbox:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,jqM:!1,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass}),E||a("."+a.jgrid.jqID(d.overlayClass)).click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1):!1}),a(o).triggerHandler("jqGridAddEditAfterShowForm",[a("#"+t),r]),y&&y.call(o,a("#"+t),r)}else{var F=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px",B=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",F=a("<form name='FormPost' id='"+t+"' class='FormGrid' onSubmit='return false;' style='width:"+B+";overflow:auto;position:relative;height:"+F+";'></form>").data("disabled",!1),G=a("<table id='"+u+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),B=a(o).triggerHandler("jqGridAddEditBeforeInitData",[a("#"+t),r]);if(void 0===B&&(B=!0),B&&z&&(B=z.call(o,a("#"+t,r))),!1===B)return;l(),a(o.p.colModel).each(function(){var a=this.formoptions;C=Math.max(C,a?a.colpos||0:0),D=Math.max(D,a?a.rowpos||0:0)}),a(F).append(G),z=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*C+"'></td></tr>"),z[0].rp=0,a(G).append(z),z=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*C+"'>"+b[o.p.id].topinfo+"</td></tr>"),z[0].rp=0,a(G).append(z);var B=(z="rtl"===o.p.direction?!0:!1)?"nData":"pData",H=z?"pData":"nData";f(c,o,G,C);var B="<a href='javascript:void(0)' id='"+B+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",H="<a href='javascript:void(0)' id='"+H+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",I="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",J="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>",u="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+u+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(z?H+B:B+H)+"</td><td class='EditButton'>"+I+J+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+b[o.p.id].bottominfo+"</td></tr>"),u=u+"</tbody></table>";if(D>0){var K=[];a.each(a(G)[0].rows,function(a,b){K[a]=b}),K.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(K,function(b,c){a("tbody",G).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(s);var L=!1;!0===d.closeOnEscape&&(d.closeOnEscape=!1,L=!0),u=a("<div></div>").append(F).append(u),a.jgrid.createModal(w,u,d,"#gview_"+a.jgrid.jqID(o.p.id),a("#gbox_"+a.jgrid.jqID(o.p.id))[0]),z&&(a("#pData, #nData",v+"_2").css("float","right"),a(".EditButton",v+"_2").css("text-align","left")),b[o.p.id].topinfo&&a(".tinfo",v).show(),b[o.p.id].bottominfo&&a(".binfo",v+"_2").show(),u=u=null,a("#"+a.jgrid.jqID(w.themodal)).keydown(function(c){var e=c.target;if(a("#"+t).data("disabled")===!0)return!1;if(b[o.p.id].savekey[0]===!0&&c.which===b[o.p.id].savekey[1]&&"TEXTAREA"!==e.tagName)return a("#sData",v+"_2").trigger("click"),!1;if(27===c.which)return k()?(L&&a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1):!1;if(b[o.p.id].navkeys[0]===!0){if("_empty"===a("#id_g",v).val())return!0;if(c.which===b[o.p.id].navkeys[1])return a("#pData",v+"_2").trigger("click"),!1;if(c.which===b[o.p.id].navkeys[2])return a("#nData",v+"_2").trigger("click"),!1}}),d.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(w.themodal)).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(w.themodal)).unbind("click").click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1):!1})),d.saveicon=a.extend([!0,"left","ui-icon-disk"],d.saveicon),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),!0===d.saveicon[0]&&a("#sData",v+"_2").addClass("right"===d.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.saveicon[2]+"'></span>"),!0===d.closeicon[0]&&a("#cData",v+"_2").addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),(b[o.p.id].checkOnSubmit||b[o.p.id].checkOnUpdate)&&(I="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bYes+"</a>",H="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bNo+"</a>",J="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bExit+"</a>",u=d.zIndex||999,u++,a("<div class='"+d.overlayClass+" jqgrid-overlay confirm' style='z-index:"+u+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(u+1)+"'>"+d.saveData+"<br/><br/>"+I+H+J+"</div>").insertAfter("#"+t),a("#sNew","#"+a.jgrid.jqID(w.themodal)).click(function(){return i(),a("#"+t).data("disabled",!1),a(".confirm","#"+a.jgrid.jqID(w.themodal)).hide(),!1}),a("#nNew","#"+a.jgrid.jqID(w.themodal)).click(function(){return a(".confirm","#"+a.jgrid.jqID(w.themodal)).hide(),a("#"+t).data("disabled",!1),setTimeout(function(){a(":input:visible","#"+t)[0].focus()},0),!1}),a("#cNew","#"+a.jgrid.jqID(w.themodal)).click(function(){return a(".confirm","#"+a.jgrid.jqID(w.themodal)).hide(),a("#"+t).data("disabled",!1),a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1})),a(o).triggerHandler("jqGridAddEditInitializeForm",[a("#"+t),r]),A&&A.call(o,a("#"+t),r),"_empty"!==c&&b[o.p.id].viewPagerButtons?a("#pData,#nData",v+"_2").show():a("#pData,#nData",v+"_2").hide(),a(o).triggerHandler("jqGridAddEditBeforeShowForm",[a("#"+t),r]),x&&x.call(o,a("#"+t),r),a("#"+a.jgrid.jqID(w.themodal)).data("onClose",b[o.p.id].onClose),a.jgrid.viewModal("#"+a.jgrid.jqID(w.themodal),{gbox:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass}),E||a("."+a.jgrid.jqID(d.overlayClass)).click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1):!1}),a(o).triggerHandler("jqGridAddEditAfterShowForm",[a("#"+t),r]),y&&y.call(o,a("#"+t),r),a(".fm-button","#"+a.jgrid.jqID(w.themodal)).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a("#sData",v+"_2").click(function(){return p={},a("#FormError",v).hide(),e(),"_empty"===p[o.p.id+"_id"]?i():d.checkOnSubmit===!0&&(q=j(p,b[o.p.id]._savedData))?(a("#"+t).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(w.themodal)).show()):i(),!1}),a("#cData",v+"_2").click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(w.themodal),{gb:"#gbox_"+a.jgrid.jqID(s),jqm:d.jqModal,onClose:b[o.p.id].onClose}),!1):!1}),a("#nData",v+"_2").click(function(){if(!k())return!1;a("#FormError",v).hide();var b=n();if(b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]){a(o).triggerHandler("jqGridAddEditClickPgButtons",["next",a("#"+t),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(o,"next",a("#"+t),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+a.jgrid.jqID(b[1][b[0]+1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]+1],o,t),a(o).jqGrid("setSelection",b[1][b[0]+1]),a(o).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a("#"+t),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(o,"next",a("#"+t),b[1][b[0]+1]),m(b[0]+1,b)}return!1}),a("#pData",v+"_2").click(function(){if(!k())return!1;a("#FormError",v).hide();var b=n();if(-1!==b[0]&&b[1][b[0]-1]){a(o).triggerHandler("jqGridAddEditClickPgButtons",["prev",a("#"+t),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(o,"prev",a("#"+t),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+a.jgrid.jqID(b[1][b[0]-1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]-1],o,t),a(o).jqGrid("setSelection",b[1][b[0]-1]),a(o).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a("#"+t),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(o,"prev",a("#"+t),b[1][b[0]-1]),m(b[0]-1,b)}return!1})}x=n(),m(x[0],x)}})},viewGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},a.jgrid.view,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){(!0===b[j.p.id].closeOnEscape||!0===b[j.p.id].navkeys[0])&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(p.modalhead)).focus()},0)}function f(b,c,e,f){var g,h,i,j,k,l,m,n,o,p=0,q=[],r=!1,s="<td class='CaptionTD form-view-label ui-widget-content' width='"+d.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",t="",u=["integer","number","currency"],v=0,w=0;for(l=1;f>=l;l++)t+=1===l?s:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";return a(c.p.colModel).each(function(){h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1,!h&&"right"===this.align&&(this.formatter&&-1!==a.inArray(this.formatter,u)?v=Math.max(v,parseInt(this.width,10)):w=Math.max(w,parseInt(this.width,10)))}),m=0!==v?v:0!==w?w:0,r=a(c).jqGrid("getInd",b),a(c.p.colModel).each(function(b){if(g=this.name,n=!1,k=(h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"",o="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==g&&"subgrid"!==g&&"rn"!==g&&o){j=!1===r?"":g===c.p.ExpandColumn&&!0===c.p.treeGrid?a("td:eq("+b+")",c.rows[r]).text():a("td:eq("+b+")",c.rows[r]).html(),n="right"===this.align&&0!==m?!0:!1;var d=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),l=parseInt(d.rowpos,10)||p+1,s=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var u=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+d.rowcontent+"</td></tr>");a(e).append(u),u[0].rp=l}i=a(e).find("tr[rowpos="+l+"]"),0===i.length&&(i=a("<tr "+k+" rowpos='"+l+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(i).append(t),a(e).append(i),i[0].rp=l),a("td:eq("+(s-2)+")",i[0]).html("<b>"+(void 0===d.label?c.p.colNames[b]:d.label)+"</b>"),a("td:eq("+(s-1)+")",i[0]).append("<span>"+j+"</span>").attr("id","v_"+g),n&&a("td:eq("+(s-1)+") span",i[0]).css({"text-align":"right",width:m+"px"}),q[p]=b,p++}}),p>0&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),b[0].rp=p+99,a(e).append(b)),q}function g(b,c){var d,e,f,g,h=0;(g=a(c).jqGrid("getInd",b,!0))&&(a("td",g).each(function(b){d=c.p.colModel[b].name,e=c.p.colModel[b].editrules&&!0===c.p.colModel[b].editrules.edithidden?!1:!0===c.p.colModel[b].hidden?!0:!1,"cb"!==d&&"subgrid"!==d&&"rn"!==d&&(f=d===c.p.ExpandColumn&&!0===c.p.treeGrid?a(this).text():a(this).html(),d=a.jgrid.jqID("v_"+d),a("#"+d+" span","#"+m).html(f),e&&a("#"+d,"#"+m).parents("tr:first").hide(),h++)}),h>0&&a("#id_g","#"+m).val(b))}function h(b,c){var d=c[1].length-1;0===b?a("#pData","#"+m+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",m+"_2").addClass("ui-state-disabled"):a("#pData","#"+m+"_2").removeClass("ui-state-disabled"),b===d?a("#nData","#"+m+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",m+"_2").addClass("ui-state-disabled"):a("#nData","#"+m+"_2").removeClass("ui-state-disabled")}function i(){var b=a(j).jqGrid("getDataIDs"),c=a("#id_g","#"+m).val();return[a.inArray(c,b),b]}var j=this;if(j.grid&&c){var k=j.p.id,l="ViewGrid_"+a.jgrid.jqID(k),m="ViewTbl_"+a.jgrid.jqID(k),n="ViewGrid_"+k,o="ViewTbl_"+k,p={themodal:"viewmod"+k,modalhead:"viewhd"+k,modalcontent:"viewcnt"+k,scrollelm:l},q=a.isFunction(b[j.p.id].beforeInitData)?b[j.p.id].beforeInitData:!1,r=!0,s=1,t=0;
if(!0===d.recreateForm&&void 0!==a("#"+a.jgrid.jqID(p.themodal))[0]&&a("#"+a.jgrid.jqID(p.themodal)).remove(),void 0!==a("#"+a.jgrid.jqID(p.themodal))[0]){if(q&&(r=q.call(j,a("#"+l)),void 0===r&&(r=!0)),!1===r)return;a(".ui-jqdialog-title","#"+a.jgrid.jqID(p.modalhead)).html(d.caption),a("#FormError","#"+m).hide(),g(c,j),a.isFunction(b[j.p.id].beforeShowForm)&&b[j.p.id].beforeShowForm.call(j,a("#"+l)),a.jgrid.viewModal("#"+a.jgrid.jqID(p.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:d.jqModal,jqM:!1,overlay:d.overlay,modal:d.modal}),e()}else{var u=isNaN(d.dataheight)?d.dataheight:d.dataheight+"px",v=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",n=a("<form name='FormPost' id='"+n+"' class='FormGrid' style='width:"+v+";overflow:auto;position:relative;height:"+u+";'></form>"),w=a("<table id='"+o+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(q&&(r=q.call(j,a("#"+l)),void 0===r&&(r=!0)),!1===r)return;if(a(j.p.colModel).each(function(){var a=this.formoptions;s=Math.max(s,a?a.colpos||0:0),t=Math.max(t,a?a.rowpos||0:0)}),a(n).append(w),f(c,j,w,s),o="rtl"===j.p.direction?!0:!1,q="<a href='javascript:void(0)' id='"+(o?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",r="<a href='javascript:void(0)' id='"+(o?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",u="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bClose+"</a>",t>0){var x=[];a.each(a(w)[0].rows,function(a,b){x[a]=b}),x.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(x,function(b,c){a("tbody",w).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(k),n=a("<div></div>").append(n).append("<table border='0' class='EditTable' id='"+m+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+d.labelswidth+"'>"+(o?r+q:q+r)+"</td><td class='EditButton'>"+u+"</td></tr></tbody></table>"),a.jgrid.createModal(p,n,d,"#gview_"+a.jgrid.jqID(j.p.id),a("#gview_"+a.jgrid.jqID(j.p.id))[0]),o&&(a("#pData, #nData","#"+m+"_2").css("float","right"),a(".EditButton","#"+m+"_2").css("text-align","left")),d.viewPagerButtons||a("#pData, #nData","#"+m+"_2").hide(),n=null,a("#"+p.themodal).keydown(function(c){if(27===c.which)return b[j.p.id].closeOnEscape&&a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:d.onClose}),!1;if(d.navkeys[0]===!0){if(c.which===d.navkeys[1])return a("#pData","#"+m+"_2").trigger("click"),!1;if(c.which===d.navkeys[2])return a("#nData","#"+m+"_2").trigger("click"),!1}}),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),!0===d.closeicon[0]&&a("#cData","#"+m+"_2").addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),a.isFunction(d.beforeShowForm)&&d.beforeShowForm.call(j,a("#"+l)),a.jgrid.viewModal("#"+a.jgrid.jqID(p.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:d.jqModal,overlay:d.overlay,modal:d.modal}),a(".fm-button:not(.ui-state-disabled)","#"+m+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),e(),a("#cData","#"+m+"_2").click(function(){return a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:d.jqModal,onClose:d.onClose}),!1}),a("#nData","#"+m+"_2").click(function(){a("#FormError","#"+m).hide();var b=i();return b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"next",a("#"+l),b[1][b[0]]),g(b[1][b[0]+1],j),a(j).jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"next",a("#"+l),b[1][b[0]+1]),h(b[0]+1,b)),e(),!1}),a("#pData","#"+m+"_2").click(function(){a("#FormError","#"+m).hide();var b=i();return-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"prev",a("#"+l),b[1][b[0]]),g(b[1][b[0]-1],j),a(j).jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"prev",a("#"+l),b[1][b[0]-1]),h(b[0]-1,b)),e(),!1})}n=i(),h(n[0],n)}})},delGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},a.jgrid.del,d||{}),b[a(this)[0].p.id]=d,this.each(function(){var e=this;if(e.grid&&c){var f,g,h,i,j=a.isFunction(b[e.p.id].beforeShowForm),k=a.isFunction(b[e.p.id].afterShowForm),l=a.isFunction(b[e.p.id].beforeInitData)?b[e.p.id].beforeInitData:!1,m=e.p.id,n={},o=!0,p="DelTbl_"+a.jgrid.jqID(m),q="DelTbl_"+m,r={themodal:"delmod"+m,modalhead:"delhd"+m,modalcontent:"delcnt"+m,scrollelm:p};if(a.isArray(c)&&(c=c.join()),void 0!==a("#"+a.jgrid.jqID(r.themodal))[0]){if(l&&(o=l.call(e,a("#"+p)),void 0===o&&(o=!0)),!1===o)return;a("#DelData>td","#"+p).text(c),a("#DelError","#"+p).hide(),!0===b[e.p.id].processing&&(b[e.p.id].processing=!1,a("#dData","#"+p).removeClass("ui-state-active")),j&&b[e.p.id].beforeShowForm.call(e,a("#"+p)),a.jgrid.viewModal("#"+a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,jqM:!1,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal})}else{var s=isNaN(b[e.p.id].dataheight)?b[e.p.id].dataheight:b[e.p.id].dataheight+"px",t=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",q="<div id='"+q+"' class='formdata' style='width:"+t+";overflow:auto;position:relative;height:"+s+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>"+("<tr id='DelData' style='display:none'><td >"+c+"</td></tr>"),q=q+('<tr><td class="delmsg" style="white-space:pre;">'+b[e.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),q=q+"</tbody></table></div>"+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+p+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>")+"</td></tr></tbody></table>");if(d.gbox="#gbox_"+a.jgrid.jqID(m),a.jgrid.createModal(r,q,d,"#gview_"+a.jgrid.jqID(e.p.id),a("#gview_"+a.jgrid.jqID(e.p.id))[0]),l&&(o=l.call(e,a("#"+p)),void 0===o&&(o=!0)),!1===o)return;a(".fm-button","#"+p+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),d.delicon=a.extend([!0,"left","ui-icon-scissors"],b[e.p.id].delicon),d.cancelicon=a.extend([!0,"left","ui-icon-cancel"],b[e.p.id].cancelicon),!0===d.delicon[0]&&a("#dData","#"+p+"_2").addClass("right"===d.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.delicon[2]+"'></span>"),!0===d.cancelicon[0]&&a("#eData","#"+p+"_2").addClass("right"===d.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.cancelicon[2]+"'></span>"),a("#dData","#"+p+"_2").click(function(){var c,j=[!0,""],k=a("#DelData>td","#"+p).text();if(n={},a.isFunction(b[e.p.id].onclickSubmit)&&(n=b[e.p.id].onclickSubmit.call(e,b[e.p.id],k)||{}),a.isFunction(b[e.p.id].beforeSubmit)&&(j=b[e.p.id].beforeSubmit.call(e,k)),j[0]&&!b[e.p.id].processing){if(b[e.p.id].processing=!0,h=e.p.prmNames,f=a.extend({},b[e.p.id].delData,n),i=h.oper,f[i]=h.deloper,g=h.id,k=(""+k).split(","),!k.length)return!1;for(c in k)k.hasOwnProperty(c)&&(k[c]=a.jgrid.stripPref(e.p.idPrefix,k[c]));f[g]=k.join(),a(this).addClass("ui-state-active"),c=a.extend({url:b[e.p.id].url||a(e).jqGrid("getGridParam","editurl"),type:b[e.p.id].mtype,data:a.isFunction(b[e.p.id].serializeDelData)?b[e.p.id].serializeDelData.call(e,f):f,complete:function(c,g){var h;if(c.status>=300&&304!==c.status?(j[0]=!1,j[1]=a.isFunction(b[e.p.id].errorTextFormat)?b[e.p.id].errorTextFormat.call(e,c):g+" Status: '"+c.statusText+"'. Error code: "+c.status):a.isFunction(b[e.p.id].afterSubmit)&&(j=b[e.p.id].afterSubmit.call(e,c,f)),j[0]===!1)a("#DelError>td","#"+p).html(j[1]),a("#DelError","#"+p).show();else{if(b[e.p.id].reloadAfterSubmit&&"local"!==e.p.datatype)a(e).trigger("reloadGrid");else{if(e.p.treeGrid===!0)try{a(e).jqGrid("delTreeNode",e.p.idPrefix+k[0])}catch(i){}else for(h=0;h<k.length;h++)a(e).jqGrid("delRowData",e.p.idPrefix+k[h]);e.p.selrow=null,e.p.selarrrow=[]}a.isFunction(b[e.p.id].afterComplete)&&setTimeout(function(){b[e.p.id].afterComplete.call(e,c,k)},500)}b[e.p.id].processing=!1,a("#dData","#"+p+"_2").removeClass("ui-state-active"),j[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:d.jqModal,onClose:b[e.p.id].onClose})}},a.jgrid.ajaxOptions,b[e.p.id].ajaxDelOptions),c.url||b[e.p.id].useDataProxy||(a.isFunction(e.p.dataProxy)?b[e.p.id].useDataProxy=!0:(j[0]=!1,j[1]=j[1]+(" "+a.jgrid.errors.nourl))),j[0]&&(b[e.p.id].useDataProxy?(c=e.p.dataProxy.call(e,c,"del_"+e.p.id),void 0===c&&(c=[!0,""]),c[0]===!1?(j[0]=!1,j[1]=c[1]||"Error deleting the selected row!"):a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:d.jqModal,onClose:b[e.p.id].onClose})):a.ajax(c))}return j[0]===!1&&(a("#DelError>td","#"+p).html(j[1]),a("#DelError","#"+p).show()),!1}),a("#eData","#"+p+"_2").click(function(){return a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,onClose:b[e.p.id].onClose}),!1}),j&&b[e.p.id].beforeShowForm.call(e,a("#"+p)),a.jgrid.viewModal("#"+a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal})}k&&b[e.p.id].afterShowForm.call(e,a("#"+p)),!0===b[e.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(r.modalhead)).focus()},0)}})},navGrid:function(b,c,d,e,f,g,h){return c=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},a.jgrid.nav,c||{}),this.each(function(){if(!this.nav){var i,j={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},k=this;if(k.grid&&"string"==typeof b){void 0===a("#"+j.themodal)[0]&&(!c.alerttop&&!c.alertleft&&(void 0!==window.innerWidth?(c.alertleft=window.innerWidth,c.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(c.alertleft=document.documentElement.clientWidth,c.alerttop=document.documentElement.clientHeight):(c.alertleft=1024,c.alerttop=768),c.alertleft=c.alertleft/2-parseInt(c.alertwidth,10)/2,c.alerttop=c.alerttop/2-25),a.jgrid.createModal(j,"<div>"+c.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+a.jgrid.jqID(k.p.id),jqModal:!0,drag:!0,resize:!0,caption:c.alertcap,top:c.alerttop,left:c.alertleft,width:c.alertwidth,height:c.alertheight,closeOnEscape:c.closeOnEscape,zIndex:c.alertzIndex},"#gview_"+a.jgrid.jqID(k.p.id),a("#gbox_"+a.jgrid.jqID(k.p.id))[0],!0));var l,m=1,n=function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},o=function(){a(this).removeClass("ui-state-hover")};for(c.cloneToTop&&k.p.toppager&&(m=2),l=0;m>l;l++){var p,q,r=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>");0===l?(p=b,q=k.p.id,p===k.p.toppager&&(q+="_top",m=1)):(p=k.p.toppager,q=k.p.id+"_top"),"rtl"===k.p.direction&&a(r).attr("dir","rtl").css("float","right"),c.add&&(e=e||{},i=a("<td class='ui-pg-button ui-corner-all'></td>"),a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.addicon+"'></span>"+c.addtext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.addtitle||"",id:e.id||"add_"+q}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(c.addfunc)?c.addfunc.call(k):a(k).jqGrid("editGridRow","new",e)),!1}).hover(n,o),i=null),c.edit&&(i=a("<td class='ui-pg-button ui-corner-all'></td>"),d=d||{},a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.editicon+"'></span>"+c.edittext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.edittitle||"",id:d.id||"edit_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=k.p.selrow;b?a.isFunction(c.editfunc)?c.editfunc.call(k,b):a(k).jqGrid("editGridRow",b,d):(a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+a.jgrid.jqID(k.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(n,o),i=null),c.view&&(i=a("<td class='ui-pg-button ui-corner-all'></td>"),h=h||{},a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.viewicon+"'></span>"+c.viewtext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.viewtitle||"",id:h.id||"view_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=k.p.selrow;b?a.isFunction(c.viewfunc)?c.viewfunc.call(k,b):a(k).jqGrid("viewGridRow",b,h):(a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+a.jgrid.jqID(k.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(n,o),i=null),c.del&&(i=a("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.delicon+"'></span>"+c.deltext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.deltitle||"",id:f.id||"del_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b;k.p.multiselect?(b=k.p.selarrrow,0===b.length&&(b=null)):b=k.p.selrow,b?a.isFunction(c.delfunc)?c.delfunc.call(k,b):a(k).jqGrid("delGridRow",b,f):(a.jgrid.viewModal("#"+j.themodal,{gbox:"#gbox_"+a.jgrid.jqID(k.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(n,o),i=null),(c.add||c.edit||c.del||c.view)&&a("tr",r).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"),c.search&&(i=a("<td class='ui-pg-button ui-corner-all'></td>"),g=g||{},a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.searchicon+"'></span>"+c.searchtext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.searchtitle||"",id:g.id||"search_"+q}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(c.searchfunc)?c.searchfunc.call(k,g):a(k).jqGrid("searchGrid",g)),!1}).hover(n,o),g.showOnLoad&&!0===g.showOnLoad&&a(i,r).click(),i=null),c.refresh&&(i=a("<td class='ui-pg-button ui-corner-all'></td>"),a(i).append("<div class='ui-pg-div'><span class='ui-icon "+c.refreshicon+"'></span>"+c.refreshtext+"</div>"),a("tr",r).append(i),a(i,r).attr({title:c.refreshtitle||"",id:"refresh_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(k),k.p.search=!1;try{var b=k.p.id;k.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(d){}a.isFunction(k.clearToolbar)&&k.clearToolbar.call(k,!1)}catch(e){}switch(c.refreshstate){case"firstpage":a(k).trigger("reloadGrid",[{page:1}]);break;case"current":a(k).trigger("reloadGrid",[{current:!0}])}a.isFunction(c.afterRefresh)&&c.afterRefresh.call(k)}return!1}).hover(n,o),i=null),i=a(".ui-jqgrid").css("font-size")||"11px",a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+i+";visibility:hidden;' ></div>"),i=a(r).clone().appendTo("#testpg2").width(),a("#testpg2").remove(),a(p+"_"+c.position,p).append(r),k.p._nvtd&&(i>k.p._nvtd[0]&&(a(p+"_"+c.position,p).width(i),k.p._nvtd[0]=i),k.p._nvtd[1]=i),r=i=i=null,this.nav=!0}}}})},navButtonAdd:function(b,c){return c=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},c||{}),this.each(function(){if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var d=a(".navtable",b)[0],e=this;if(d&&(!c.id||void 0===a("#"+a.jgrid.jqID(c.id),d)[0])){var f=a("<td></td>");a(f).addClass("ui-pg-button ui-corner-all").append("NONE"===c.buttonicon.toString().toUpperCase()?"<div class='ui-pg-div'>"+c.caption+"</div>":"<div class='ui-pg-div'><span class='ui-icon "+c.buttonicon+"'></span>"+c.caption+"</div>"),c.id&&a(f).attr("id",c.id),"first"===c.position?0===d.rows[0].cells.length?a("tr",d).append(f):a("tr td:eq(0)",d).before(f):a("tr",d).append(f),a(f,d).attr("title",c.title||"").click(function(b){return a(this).hasClass("ui-state-disabled")||a.isFunction(c.onClickButton)&&c.onClickButton.call(e,b),!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(b,c){return c=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},c||{}),this.each(function(){if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var d=a(".navtable",b)[0];if(d){var e="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+c.sepclass+"'></span>"+c.sepcontent+"</td>";"first"===c.position?0===d.rows[0].cells.length?a("tr",d).append(e):a("tr td:eq(0)",d).before(e):a("tr",d).append(e)}}})},GridToForm:function(b,c){return this.each(function(){var d,e=this;if(e.grid){var f=a(e).jqGrid("getRowData",b);if(f)for(d in f)f.hasOwnProperty(d)&&(a("[name="+a.jgrid.jqID(d)+"]",c).is("input:radio")||a("[name="+a.jgrid.jqID(d)+"]",c).is("input:checkbox")?a("[name="+a.jgrid.jqID(d)+"]",c).each(function(){a(this).val()==f[d]?a(this)[e.p.useProp?"prop":"attr"]("checked",!0):a(this)[e.p.useProp?"prop":"attr"]("checked",!1)}):a("[name="+a.jgrid.jqID(d)+"]",c).val(f[d]))}})},FormToGrid:function(b,c,d,e){return this.each(function(){if(this.grid){d||(d="set"),e||(e="first");var f=a(c).serializeArray(),g={};a.each(f,function(a,b){g[b.name]=b.value}),"add"===d?a(this).jqGrid("addRowData",b,g,e):"set"===d&&a(this).jqGrid("setRowData",b,g)}})}})}(jQuery),function(a){a.fn.jqFilter=function(b){if("string"==typeof b){var c=a.fn.jqFilter[b];if(!c)throw"jqFilter - No such method: "+b;var d=a.makeArray(arguments).slice(1);return c.apply(this,d)}var e=a.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq,ne,lt,le,gt,ge,nu,nn,in,ni".split(","),stropts:"eq,ne,bw,bn,ew,en,cn,nc,nu,nn,in,ni".split(","),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},a.jgrid.filter,b||{});return this.each(function(){if(!this.filter){this.p=e,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var b,c,d=this.p.columns.length,f=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=a.extend(!0,{},this.p.filter),d){for(b=0;d>b;b++)c=this.p.columns[b],c.stype?c.inputtype=c.stype:c.inputtype||(c.inputtype="text"),c.sorttype?c.searchtype=c.sorttype:c.searchtype||(c.searchtype="string"),void 0===c.hidden&&(c.hidden=!1),c.label||(c.label=c.name),c.index&&(c.name=c.index),c.hasOwnProperty("searchoptions")||(c.searchoptions={}),c.hasOwnProperty("searchrules")||(c.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var g=function(){return a("#"+a.jgrid.jqID(e.id))[0]||null},h=function(b,c){var d=[!0,""],f=g();if(a.isFunction(c.searchrules))d=c.searchrules.call(f,b,c);else if(a.jgrid&&a.jgrid.checkValues)try{d=a.jgrid.checkValues.call(f,b,-1,c.searchrules,c.label)}catch(h){}d&&d.length&&!1===d[0]&&(e.error=!d[0],e.errmsg=d[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(e.filter,null);a(this).append(b),a.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(b,c){var d,f=this,g=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),h="left";"rtl"===this.p.direction&&(h="right",g.attr("dir","rtl")),null===c&&g.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+h+"'></th></tr>");var i=a("<tr></tr>");if(g.append(i),h=a("<th colspan='5' align='"+h+"'></th>"),i.append(h),!0===this.p.ruleButtons){var j=a("<select class='opsel'></select>");h.append(j);var k,i="";for(d=0;d<e.groupOps.length;d++)k=b.groupOp===f.p.groupOps[d].op?" selected='selected'":"",i+="<option value='"+f.p.groupOps[d].op+"'"+k+">"+f.p.groupOps[d].text+"</option>";j.append(i).bind("change",function(){b.groupOp=a(j).val(),f.onchange()})}if(i="<span></span>",this.p.groupButton&&(i=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),i.bind("click",function(){return void 0===b.groups&&(b.groups=[]),b.groups.push({groupOp:e.groupOps[0].op,rules:[],groups:[]}),f.reDraw(),f.onchange(),!1})),h.append(i),!0===this.p.ruleButtons){var l,i=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");i.bind("click",function(){for(void 0===b.rules&&(b.rules=[]),d=0;d<f.p.columns.length;d++){var c=void 0===f.p.columns[d].search?!0:f.p.columns[d].search,e=f.p.columns[d].hidden===!0;if(f.p.columns[d].searchoptions.searchhidden===!0&&c||c&&!e){l=f.p.columns[d];break}}return c=l.searchoptions.sopt?l.searchoptions.sopt:f.p.sopt?f.p.sopt:-1!==a.inArray(l.searchtype,f.p.strarr)?f.p.stropts:f.p.numopts,b.rules.push({field:l.name,op:c[0],data:""}),f.reDraw(),!1}),h.append(i)}if(null!==c&&(i=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),h.append(i),i.bind("click",function(){for(d=0;d<c.groups.length;d++)if(c.groups[d]===b){c.groups.splice(d,1);break}return f.reDraw(),f.onchange(),!1})),void 0!==b.groups)for(d=0;d<b.groups.length;d++)h=a("<tr></tr>"),g.append(h),i=a("<td class='first'></td>"),h.append(i),i=a("<td colspan='4'></td>"),i.append(this.createTableForGroup(b.groups[d],b)),h.append(i);if(void 0===b.groupOp&&(b.groupOp=f.p.groupOps[0].op),void 0!==b.rules)for(d=0;d<b.rules.length;d++)g.append(this.createTableRowForRule(b.rules[d],b));return g},this.createTableRowForRule=function(b,c){var d,h,i,j,k,l=this,m=g(),n=a("<tr></tr>"),o="";n.append("<td class='first'></td>");var p=a("<td class='columns'></td>");n.append(p);var q,r=a("<select></select>"),s=[];for(p.append(r),r.bind("change",function(){for(b.field=a(r).val(),i=a(this).parents("tr:first"),d=0;d<l.p.columns.length;d++)if(l.p.columns[d].name===b.field){j=l.p.columns[d];break}if(j){j.searchoptions.id=a.jgrid.randId(),f&&"text"===j.inputtype&&!j.searchoptions.size&&(j.searchoptions.size=10);var c=a.jgrid.createEl.call(m,j.inputtype,j.searchoptions,"",!0,l.p.ajaxSelectOptions,!0);a(c).addClass("input-elm"),h=j.searchoptions.sopt?j.searchoptions.sopt:l.p.sopt?l.p.sopt:-1!==a.inArray(j.searchtype,l.p.strarr)?l.p.stropts:l.p.numopts;var e="",g=0;for(s=[],a.each(l.p.ops,function(){s.push(this.oper)}),d=0;d<h.length;d++)q=a.inArray(h[d],s),-1!==q&&(0===g&&(b.op=l.p.ops[q].oper),e+="<option value='"+l.p.ops[q].oper+"'>"+l.p.ops[q].text+"</option>",g++);a(".selectopts",i).empty().append(e),a(".selectopts",i)[0].selectedIndex=0,a.jgrid.msie&&9>a.jgrid.msiever()&&(e=parseInt(a("select.selectopts",i)[0].offsetWidth,10)+1,a(".selectopts",i).width(e),a(".selectopts",i).css("width","auto")),a(".data",i).empty().append(c),a.jgrid.bindEv.call(m,c,j.searchoptions),a(".input-elm",i).bind("change",function(c){var d=a(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var d=c.target;b.data="SPAN"===d.nodeName.toUpperCase()&&j.searchoptions&&a.isFunction(j.searchoptions.custom_value)?j.searchoptions.custom_value.call(m,a(d).children(".customelement:first"),"get"):d.value,l.onchange()},d)}),setTimeout(function(){b.data=a(c).val(),l.onchange()},0)}}),d=p=0;d<l.p.columns.length;d++){k=void 0===l.p.columns[d].search?!0:l.p.columns[d].search;var t=!0===l.p.columns[d].hidden;(!0===l.p.columns[d].searchoptions.searchhidden&&k||k&&!t)&&(k="",b.field===l.p.columns[d].name&&(k=" selected='selected'",p=d),o+="<option value='"+l.p.columns[d].name+"'"+k+">"+l.p.columns[d].label+"</option>")}r.append(o),o=a("<td class='operators'></td>"),n.append(o),j=e.columns[p],j.searchoptions.id=a.jgrid.randId(),f&&"text"===j.inputtype&&!j.searchoptions.size&&(j.searchoptions.size=10),p=a.jgrid.createEl.call(m,j.inputtype,j.searchoptions,b.data,!0,l.p.ajaxSelectOptions,!0),("nu"===b.op||"nn"===b.op)&&(a(p).attr("readonly","true"),a(p).attr("disabled","true"));var u=a("<select class='selectopts'></select>");for(o.append(u),u.bind("change",function(){b.op=a(u).val(),i=a(this).parents("tr:first");var c=a(".input-elm",i)[0];"nu"===b.op||"nn"===b.op?(b.data="",c.value="",c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):(c.removeAttribute("readonly"),c.removeAttribute("disabled")),l.onchange()}),h=j.searchoptions.sopt?j.searchoptions.sopt:l.p.sopt?l.p.sopt:-1!==a.inArray(j.searchtype,l.p.strarr)?l.p.stropts:l.p.numopts,o="",a.each(l.p.ops,function(){s.push(this.oper)}),d=0;d<h.length;d++)q=a.inArray(h[d],s),-1!==q&&(k=b.op===l.p.ops[q].oper?" selected='selected'":"",o+="<option value='"+l.p.ops[q].oper+"'"+k+">"+l.p.ops[q].text+"</option>");return u.append(o),o=a("<td class='data'></td>"),n.append(o),o.append(p),a.jgrid.bindEv.call(m,p,j.searchoptions),a(p).addClass("input-elm").bind("change",function(){b.data="custom"===j.inputtype?j.searchoptions.custom_value.call(m,a(this).children(".customelement:first"),"get"):a(this).val(),l.onchange()}),o=a("<td></td>"),n.append(o),!0===this.p.ruleButtons&&(p=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),o.append(p),p.bind("click",function(){for(d=0;d<c.rules.length;d++)if(c.rules[d]===b){c.rules.splice(d,1);break}return l.reDraw(),l.onchange(),!1})),n},this.getStringForGroup=function(a){var b,c="(";if(void 0!==a.groups)for(b=0;b<a.groups.length;b++){1<c.length&&(c+=" "+a.groupOp+" ");try{c+=this.getStringForGroup(a.groups[b])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(b=0;b<a.rules.length;b++)1<c.length&&(c+=" "+a.groupOp+" "),c+=this.getStringForRule(a.rules[b])}catch(e){alert(e)}return c+=")","()"===c?"":c},this.getStringForRule=function(b){var c,d,f="",g="";for(c=0;c<this.p.ops.length;c++)if(this.p.ops[c].oper===b.op){f=this.p.operands.hasOwnProperty(b.op)?this.p.operands[b.op]:"",g=this.p.ops[c].oper;break}for(c=0;c<this.p.columns.length;c++)if(this.p.columns[c].name===b.field){d=this.p.columns[c];break}return void 0===d?"":(c=b.data,("bw"===g||"bn"===g)&&(c+="%"),("ew"===g||"en"===g)&&(c="%"+c),("cn"===g||"nc"===g)&&(c="%"+c+"%"),("in"===g||"ni"===g)&&(c=" ("+c+")"),e.errorcheck&&h(b.data,d),-1!==a.inArray(d.searchtype,["int","integer","float","number","currency"])||"nn"===g||"nu"===g?b.field+" "+f+" "+c:b.field+" "+f+' "'+c+'"')},this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){a("th.ui-state-error",this).html(""),a("tr.error",this).hide()},this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg),a("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(e.filter)},this.toString=function(){function a(c){var d,e="(";if(void 0!==c.groups)for(d=0;d<c.groups.length;d++)1<e.length&&(e="OR"===c.groupOp?e+" || ":e+" && "),e+=a(c.groups[d]);if(void 0!==c.rules)for(d=0;d<c.rules.length;d++){1<e.length&&(e="OR"===c.groupOp?e+" || ":e+" && ");var f=c.rules[d];if(b.p.errorcheck){for(var g=void 0,i=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){i=b.p.columns[g];break}i&&h(f.data,i)}e+=f.op+"(item."+f.field+",'"+f.data+"')"}return e+=")","()"===e?"":e}var b=this;return a(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";return this.each(function(){a=this.toUserFriendlyString()}),a},filterData:function(){var a;return this.each(function(){a=this.p.filter}),a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(b){"string"==typeof b&&(b=a.jgrid.parse(b)),this.each(function(){this.p.filter=b,this.reDraw(),this.onchange()})}})}(jQuery),function(a){a.jgrid.inlineEdit=a.jgrid.inlineEdit||{},a.jgrid.extend({editRow:function(b,c,d,e,f,g,h,i,j){var k={},l=a.makeArray(arguments).slice(1);return"object"===a.type(l[0])?k=l[0]:(void 0!==c&&(k.keys=c),a.isFunction(d)&&(k.oneditfunc=d),a.isFunction(e)&&(k.successfunc=e),void 0!==f&&(k.url=f),void 0!==g&&(k.extraparam=g),a.isFunction(h)&&(k.aftersavefunc=h),a.isFunction(i)&&(k.errorfunc=i),a.isFunction(j)&&(k.afterrestorefunc=j)),k=a.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},a.jgrid.inlineEdit,k),this.each(function(){var c,d,e,f,g=this,h=0,i=null,j={};g.grid&&(e=a(g).jqGrid("getInd",b,!0),!1!==e&&"0"===(a(e).attr("editable")||"0")&&!a(e).hasClass("not-editable-row"))&&(f=g.p.colModel,a('td[role="gridcell"]',e).each(function(e){c=f[e].name;var k=!0===g.p.treeGrid&&c===g.p.ExpandColumn;if(k)d=a("span:first",this).html();else try{d=a.unformat.call(g,this,{rowId:b,colModel:f[e]},e)}catch(l){d=f[e].edittype&&"textarea"===f[e].edittype?a(this).text():a(this).html()}if("cb"!==c&&"subgrid"!==c&&"rn"!==c&&(g.p.autoencode&&(d=a.jgrid.htmlDecode(d)),j[c]=d,!0===f[e].editable)){null===i&&(i=e),k?a("span:first",this).html(""):a(this).html("");var m=a.extend({},f[e].editoptions||{},{id:b+"_"+c,name:c});f[e].edittype||(f[e].edittype="text"),("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))&&(d="");var n=a.jgrid.createEl.call(g,f[e].edittype,m,d,!0,a.extend({},a.jgrid.ajaxOptions,g.p.ajaxSelectOptions||{}));a(n).addClass("editable"),k?a("span:first",this).append(n):a(this).append(n),a.jgrid.bindEv.call(g,n,m),"select"===f[e].edittype&&void 0!==f[e].editoptions&&!0===f[e].editoptions.multiple&&void 0===f[e].editoptions.dataUrl&&a.jgrid.msie&&a(n).width(a(n).width()),h++}}),h>0&&(j.id=b,g.p.savedRow.push(j),a(e).attr("editable","1"),a("td:eq("+i+") input",e).focus(),!0===k.keys&&a(e).bind("keydown",function(c){if(27===c.keyCode){if(a(g).jqGrid("restoreRow",b,k.afterrestorefunc),g.p._inlinenav)try{a(g).jqGrid("showAddEditButtons")}catch(d){}return!1}if(13===c.keyCode){if("TEXTAREA"===c.target.tagName)return!0;if(a(g).jqGrid("saveRow",b,k)&&g.p._inlinenav)try{a(g).jqGrid("showAddEditButtons")}catch(e){}return!1}}),a(g).triggerHandler("jqGridInlineEditRow",[b,k]),a.isFunction(k.oneditfunc)&&k.oneditfunc.call(g,b)))})},saveRow:function(b,c,d,e,f,g,h){var i=a.makeArray(arguments).slice(1),j={};"object"===a.type(i[0])?j=i[0]:(a.isFunction(c)&&(j.successfunc=c),void 0!==d&&(j.url=d),void 0!==e&&(j.extraparam=e),a.isFunction(f)&&(j.aftersavefunc=f),a.isFunction(g)&&(j.errorfunc=g),a.isFunction(h)&&(j.afterrestorefunc=h));var k,l,m,n,j=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},a.jgrid.inlineEdit,j),o=!1,p=this[0],q={},r={},s={};if(!p.grid)return o;if(n=a(p).jqGrid("getInd",b,!0),!1===n)return o;if(i=a(n).attr("editable"),j.url=j.url||p.p.editurl,"1"===i){var t;
if(a('td[role="gridcell"]',n).each(function(b){if(t=p.p.colModel[b],k=t.name,"cb"!==k&&"subgrid"!==k&&!0===t.editable&&"rn"!==k&&!a(this).hasClass("not-editable-cell")){switch(t.edittype){case"checkbox":var c=["Yes","No"];t.editoptions&&(c=t.editoptions.value.split(":")),q[k]=a("input",this).is(":checked")?c[0]:c[1];break;case"text":case"password":case"textarea":case"button":q[k]=a("input, textarea",this).val();break;case"select":if(t.editoptions.multiple){var c=a("select",this),d=[];q[k]=a(c).val(),q[k]=q[k]?q[k].join(","):"",a("select option:selected",this).each(function(b,c){d[b]=a(c).text()}),r[k]=d.join(",")}else q[k]=a("select option:selected",this).val(),r[k]=a("select option:selected",this).text();t.formatter&&"select"===t.formatter&&(r={});break;case"custom":try{if(!t.editoptions||!a.isFunction(t.editoptions.custom_value))throw"e1";if(q[k]=t.editoptions.custom_value.call(p,a(".customelement",this),"get"),void 0===q[k])throw"e2"}catch(e){"e1"===e&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===e?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,e.message,a.jgrid.edit.bClose)}}if(m=a.jgrid.checkValues.call(p,q[k],b),!1===m[0])return m[1]=q[k]+" "+m[1],!1;p.p.autoencode&&(q[k]=a.jgrid.htmlEncode(q[k])),"clientArray"!==j.url&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===q[k]&&(s[k]="null")}}),!1===m[0]){try{var u=p.rows.namedItem(b),v=a.jgrid.findPos(u);a.jgrid.info_dialog(a.jgrid.errors.errcap,m[1],a.jgrid.edit.bClose,{left:v[0],top:v[1]+a(u).outerHeight()})}catch(w){alert(m[1])}return o}if(i=p.p.prmNames,u=b,v=!1===p.p.keyIndex?i.id:p.p.colModel[p.p.keyIndex+(!0===p.p.rownumbers?1:0)+(!0===p.p.multiselect?1:0)+(!0===p.p.subGrid?1:0)].name,q&&(q[i.oper]=i.editoper,void 0===q[v]||""===q[v]?q[v]=b:n.id!==p.p.idPrefix+q[v]&&(i=a.jgrid.stripPref(p.p.idPrefix,b),void 0!==p.p._index[i]&&(p.p._index[q[v]]=p.p._index[i],delete p.p._index[i]),b=p.p.idPrefix+q[v],a(n).attr("id",b),p.p.selrow===u&&(p.p.selrow=b),a.isArray(p.p.selarrrow)&&(i=a.inArray(u,p.p.selarrrow),i>=0&&(p.p.selarrrow[i]=b)),p.p.multiselect)&&(i="jqg_"+p.p.id+"_"+b,a("input.cbox",n).attr("id",i).attr("name",i)),void 0===p.p.inlineData&&(p.p.inlineData={}),q=a.extend({},q,p.p.inlineData,j.extraparam)),"clientArray"===j.url){for(q=a.extend({},q,r),p.p.autoencode&&a.each(q,function(b,c){q[b]=a.jgrid.htmlDecode(c)}),i=a(p).jqGrid("setRowData",b,q),a(n).attr("editable","0"),v=0;v<p.p.savedRow.length;v++)if(""+p.p.savedRow[v].id==""+u){l=v;break}l>=0&&p.p.savedRow.splice(l,1),a(p).triggerHandler("jqGridInlineAfterSaveRow",[b,i,q,j]),a.isFunction(j.aftersavefunc)&&j.aftersavefunc.call(p,b,i,j),o=!0,a(n).removeClass("jqgrid-new-row").unbind("keydown")}else a("#lui_"+a.jgrid.jqID(p.p.id)).show(),s=a.extend({},q,s),s[v]=a.jgrid.stripPref(p.p.idPrefix,s[v]),a.ajax(a.extend({url:j.url,data:a.isFunction(p.p.serializeRowData)?p.p.serializeRowData.call(p,s):s,type:j.mtype,async:!1,complete:function(c,d){if(a("#lui_"+a.jgrid.jqID(p.p.id)).hide(),"success"===d){var e,f=!0;if(e=a(p).triggerHandler("jqGridInlineSuccessSaveRow",[c,b,j]),a.isArray(e)||(e=[!0,q]),e[0]&&a.isFunction(j.successfunc)&&(e=j.successfunc.call(p,c)),a.isArray(e)?(f=e[0],q=e[1]||q):f=e,!0===f){for(p.p.autoencode&&a.each(q,function(b,c){q[b]=a.jgrid.htmlDecode(c)}),q=a.extend({},q,r),a(p).jqGrid("setRowData",b,q),a(n).attr("editable","0"),f=0;f<p.p.savedRow.length;f++)if(""+p.p.savedRow[f].id==""+b){l=f;break}l>=0&&p.p.savedRow.splice(l,1),a(p).triggerHandler("jqGridInlineAfterSaveRow",[b,c,q,j]),a.isFunction(j.aftersavefunc)&&j.aftersavefunc.call(p,b,c),o=!0,a(n).removeClass("jqgrid-new-row").unbind("keydown")}else a(p).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,null,j]),a.isFunction(j.errorfunc)&&j.errorfunc.call(p,b,c,d,null),!0===j.restoreAfterError&&a(p).jqGrid("restoreRow",b,j.afterrestorefunc)}},error:function(c,d,e){if(a("#lui_"+a.jgrid.jqID(p.p.id)).hide(),a(p).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,e,j]),a.isFunction(j.errorfunc))j.errorfunc.call(p,b,c,d,e);else{c=c.responseText||c.statusText;try{a.jgrid.info_dialog(a.jgrid.errors.errcap,'<div class="ui-state-error">'+c+"</div>",a.jgrid.edit.bClose,{buttonalign:"right"})}catch(f){alert(c)}}!0===j.restoreAfterError&&a(p).jqGrid("restoreRow",b,j.afterrestorefunc)}},a.jgrid.ajaxOptions,p.p.ajaxRowOptions||{}))}return o},restoreRow:function(b,c){var d=a.makeArray(arguments).slice(1),e={};return"object"===a.type(d[0])?e=d[0]:a.isFunction(c)&&(e.afterrestorefunc=c),e=a.extend(!0,{},a.jgrid.inlineEdit,e),this.each(function(){var c,d,f,g=this,h={};if(g.grid&&(d=a(g).jqGrid("getInd",b,!0),d!==!1)){for(f=0;f<g.p.savedRow.length;f++)if(""+g.p.savedRow[f].id==""+b){c=f;break}if(c>=0){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+a.jgrid.jqID(d.id)).datepicker("hide")}catch(i){}a.each(g.p.colModel,function(){this.editable===!0&&g.p.savedRow[c].hasOwnProperty(this.name)&&(h[this.name]=g.p.savedRow[c][this.name])}),a(g).jqGrid("setRowData",b,h),a(d).attr("editable","0").unbind("keydown"),g.p.savedRow.splice(c,1),a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(g.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){a(g).jqGrid("delRowData",b),a(g).jqGrid("showAddEditButtons")},0)}a(g).triggerHandler("jqGridInlineAfterRestoreRow",[b]),a.isFunction(e.afterrestorefunc)&&e.afterrestorefunc.call(g,b)}})},addRow:function(b){return b=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},b||{}),this.each(function(){if(this.grid){var c=this;if(b.rowID=a.isFunction(b.rowID)?b.rowID.call(c,b):null!=b.rowID?b.rowID:a.jgrid.randId(),!0===b.useDefValues&&a(c.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var d=this.editoptions.defaultValue,d=a.isFunction(d)?d.call(c):d;b.initdata[this.name]=d}}),a(c).jqGrid("addRowData",b.rowID,b.initdata,b.position),b.rowID=c.p.idPrefix+b.rowID,a("#"+a.jgrid.jqID(b.rowID),"#"+a.jgrid.jqID(c.p.id)).addClass("jqgrid-new-row"),b.useFormatter)a("#"+a.jgrid.jqID(b.rowID)+" .ui-inline-edit","#"+a.jgrid.jqID(c.p.id)).click();else{var d=c.p.prmNames;b.addRowParams.extraparam[d.oper]=d.addoper,a(c).jqGrid("editRow",b.rowID,b.addRowParams),a(c).jqGrid("setSelection",b.rowID)}}})},inlineNav:function(b,c){return c=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},a.jgrid.nav,c||{}),this.each(function(){if(this.grid){var d,e=this,f=a.jgrid.jqID(e.p.id);if(e.p._inlinenav=!0,!0===c.addParams.useFormatter){var g,h=e.p.colModel;for(g=0;g<h.length;g++)if(h[g].formatter&&"actions"===h[g].formatter){h[g].formatoptions&&(h=a.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},h[g].formatoptions),c.addParams.addRowParams={keys:h.keys,oneditfunc:h.onEdit,successfunc:h.onSuccess,url:h.url,extraparam:h.extraparam,aftersavefunc:h.afterSave,errorfunc:h.onError,afterrestorefunc:h.afterRestore});break}}c.add&&a(e).jqGrid("navButtonAdd",b,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:e.p.id+"_iladd",onClickButton:function(){a(e).jqGrid("addRow",c.addParams),c.addParams.useFormatter||(a("#"+f+"_ilsave").removeClass("ui-state-disabled"),a("#"+f+"_ilcancel").removeClass("ui-state-disabled"),a("#"+f+"_iladd").addClass("ui-state-disabled"),a("#"+f+"_iledit").addClass("ui-state-disabled"))}}),c.edit&&a(e).jqGrid("navButtonAdd",b,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:e.p.id+"_iledit",onClickButton:function(){var b=a(e).jqGrid("getGridParam","selrow");b?(a(e).jqGrid("editRow",b,c.editParams),a("#"+f+"_ilsave").removeClass("ui-state-disabled"),a("#"+f+"_ilcancel").removeClass("ui-state-disabled"),a("#"+f+"_iladd").addClass("ui-state-disabled"),a("#"+f+"_iledit").addClass("ui-state-disabled")):(a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus())}}),c.save&&(a(e).jqGrid("navButtonAdd",b,{caption:c.savetext||"",title:c.savetitle||"Save row",buttonicon:c.saveicon,id:e.p.id+"_ilsave",onClickButton:function(){var b=e.p.savedRow[0].id;if(b){var d=e.p.prmNames,g=d.oper,h={};a("#"+a.jgrid.jqID(b),"#"+f).hasClass("jqgrid-new-row")?(c.addParams.addRowParams.extraparam[g]=d.addoper,h=c.addParams.addRowParams):(c.editParams.extraparam||(c.editParams.extraparam={}),c.editParams.extraparam[g]=d.editoper,h=c.editParams),a(e).jqGrid("saveRow",b,h)&&a(e).jqGrid("showAddEditButtons")}else a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus()}}),a("#"+f+"_ilsave").addClass("ui-state-disabled")),c.cancel&&(a(e).jqGrid("navButtonAdd",b,{caption:c.canceltext||"",title:c.canceltitle||"Cancel row editing",buttonicon:c.cancelicon,id:e.p.id+"_ilcancel",onClickButton:function(){var b=e.p.savedRow[0].id,d={};b?(d=a("#"+a.jgrid.jqID(b),"#"+f).hasClass("jqgrid-new-row")?c.addParams.addRowParams:c.editParams,a(e).jqGrid("restoreRow",b,d),a(e).jqGrid("showAddEditButtons")):(a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus())}}),a("#"+f+"_ilcancel").addClass("ui-state-disabled")),!0===c.restoreAfterSelect&&(d=a.isFunction(e.p.beforeSelectRow)?e.p.beforeSelectRow:!1,e.p.beforeSelectRow=function(b,f){var g=!0;return e.p.savedRow.length>0&&e.p._inlinenav===!0&&b!==e.p.selrow&&null!==e.p.selrow&&(e.p.selrow===c.addParams.rowID?a(e).jqGrid("delRowData",e.p.selrow):a(e).jqGrid("restoreRow",e.p.selrow,c.editParams),a(e).jqGrid("showAddEditButtons")),d&&(g=d.call(e,b,f)),g})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var b=a.jgrid.jqID(this.p.id);a("#"+b+"_ilsave").addClass("ui-state-disabled"),a("#"+b+"_ilcancel").addClass("ui-state-disabled"),a("#"+b+"_iladd").removeClass("ui-state-disabled"),a("#"+b+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(a){a.jgrid.extend({editCell:function(b,c,d){return this.each(function(){var e,f,g,h,i=this;if(i.grid&&!0===i.p.cellEdit){if(c=parseInt(c,10),i.p.selrow=i.rows[b].id,i.p.knv||a(i).jqGrid("GridNav"),0<i.p.savedRow.length){if(!0===d&&b==i.p.iRow&&c==i.p.iCol)return;a(i).jqGrid("saveCell",i.p.savedRow[0].id,i.p.savedRow[0].ic)}else window.setTimeout(function(){a("#"+a.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0);if(h=i.p.colModel[c],e=h.name,"subgrid"!==e&&"cb"!==e&&"rn"!==e){if(g=a("td:eq("+c+")",i.rows[b]),!0!==h.editable||!0!==d||g.hasClass("not-editable-cell"))0<=parseInt(i.p.iCol,10)&&0<=parseInt(i.p.iRow,10)&&(a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),g.addClass("edit-cell ui-state-highlight"),a(i.rows[b]).addClass("selected-row ui-state-hover"),f=g.html().replace(/\&#160\;/gi,""),a(i).triggerHandler("jqGridSelectCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.onSelectCell)&&i.p.onSelectCell.call(i,i.rows[b].id,e,f,b,c);else{0<=parseInt(i.p.iCol,10)&&0<=parseInt(i.p.iRow,10)&&(a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),a(g).addClass("edit-cell ui-state-highlight"),a(i.rows[b]).addClass("selected-row ui-state-hover");try{f=a.unformat.call(i,g,{rowId:i.rows[b].id,colModel:h},c)}catch(j){f=h.edittype&&"textarea"===h.edittype?a(g).text():a(g).html()}if(i.p.autoencode&&(f=a.jgrid.htmlDecode(f)),h.edittype||(h.edittype="text"),i.p.savedRow.push({id:b,ic:c,name:e,v:f}),("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))&&(f=""),a.isFunction(i.p.formatCell)){var k=i.p.formatCell.call(i,i.rows[b].id,e,f,b,c);void 0!==k&&(f=k)}var k=a.extend({},h.editoptions||{},{id:b+"_"+e,name:e}),l=a.jgrid.createEl.call(i,h.edittype,k,f,!0,a.extend({},a.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));a(i).triggerHandler("jqGridBeforeEditCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.beforeEditCell)&&i.p.beforeEditCell.call(i,i.rows[b].id,e,f,b,c),a(g).html("").append(l).attr("tabindex","0"),a.jgrid.bindEv.call(i,l,k),window.setTimeout(function(){a(l).focus()},0),a("input, select, textarea",g).bind("keydown",function(d){if(27===d.keyCode&&(a("input.hasDatepicker",g).length>0?a(".ui-datepicker").is(":hidden")?a(i).jqGrid("restoreCell",b,c):a("input.hasDatepicker",g).datepicker("hide"):a(i).jqGrid("restoreCell",b,c)),13===d.keyCode)return a(i).jqGrid("saveCell",b,c),!1;if(9===d.keyCode){if(i.grid.hDiv.loading)return!1;d.shiftKey?a(i).jqGrid("prevCell",b,c):a(i).jqGrid("nextCell",b,c)}d.stopPropagation()}),a(i).triggerHandler("jqGridAfterEditCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.afterEditCell)&&i.p.afterEditCell.call(i,i.rows[b].id,e,f,b,c)}i.p.iCol=c,i.p.iRow=b}}})},saveCell:function(b,c){return this.each(function(){var d,e=this;if(e.grid&&!0===e.p.cellEdit){if(d=1<=e.p.savedRow.length?0:null,null!==d){var f,g,h=a("td:eq("+c+")",e.rows[b]),i=e.p.colModel[c],j=i.name,k=a.jgrid.jqID(j);switch(i.edittype){case"select":if(i.editoptions.multiple){var k=a("#"+b+"_"+k,e.rows[b]),l=[];(f=a(k).val())?f.join(","):f="",a("option:selected",k).each(function(b,c){l[b]=a(c).text()}),g=l.join(",")}else f=a("#"+b+"_"+k+" option:selected",e.rows[b]).val(),g=a("#"+b+"_"+k+" option:selected",e.rows[b]).text();i.formatter&&(g=f);break;case"checkbox":var m=["Yes","No"];i.editoptions&&(m=i.editoptions.value.split(":")),g=f=a("#"+b+"_"+k,e.rows[b]).is(":checked")?m[0]:m[1];break;case"password":case"text":case"textarea":case"button":g=f=a("#"+b+"_"+k,e.rows[b]).val();break;case"custom":try{if(!i.editoptions||!a.isFunction(i.editoptions.custom_value))throw"e1";if(f=i.editoptions.custom_value.call(e,a(".customelement",h),"get"),void 0===f)throw"e2";g=f}catch(n){"e1"===n&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===n?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,n.message,a.jgrid.edit.bClose)}}if(g!==e.p.savedRow[d].v){(d=a(e).triggerHandler("jqGridBeforeSaveCell",[e.rows[b].id,j,f,b,c]))&&(g=f=d),a.isFunction(e.p.beforeSaveCell)&&(d=e.p.beforeSaveCell.call(e,e.rows[b].id,j,f,b,c))&&(g=f=d);var o=a.jgrid.checkValues.call(e,f,c);if(!0===o[0]){if(d=a(e).triggerHandler("jqGridBeforeSubmitCell",[e.rows[b].id,j,f,b,c])||{},a.isFunction(e.p.beforeSubmitCell)&&((d=e.p.beforeSubmitCell.call(e,e.rows[b].id,j,f,b,c))||(d={})),0<a("input.hasDatepicker",h).length&&a("input.hasDatepicker",h).datepicker("hide"),"remote"===e.p.cellsubmit)if(e.p.cellurl){var p={};e.p.autoencode&&(f=a.jgrid.htmlEncode(f)),p[j]=f,m=e.p.prmNames,i=m.id,k=m.oper,p[i]=a.jgrid.stripPref(e.p.idPrefix,e.rows[b].id),p[k]=m.editoper,p=a.extend(d,p),a("#lui_"+a.jgrid.jqID(e.p.id)).show(),e.grid.hDiv.loading=!0,a.ajax(a.extend({url:e.p.cellurl,data:a.isFunction(e.p.serializeCellData)?e.p.serializeCellData.call(e,p):p,type:"POST",complete:function(d,i){if(a("#lui_"+e.p.id).hide(),e.grid.hDiv.loading=!1,"success"===i){var k=a(e).triggerHandler("jqGridAfterSubmitCell",[e,d,p.id,j,f,b,c])||[!0,""];k[0]===!0&&a.isFunction(e.p.afterSubmitCell)&&(k=e.p.afterSubmitCell.call(e,d,p.id,j,f,b,c)),k[0]===!0?(a(h).empty(),a(e).jqGrid("setCell",e.rows[b].id,c,g,!1,!1,!0),a(h).addClass("dirty-cell"),a(e.rows[b]).addClass("edited"),a(e).triggerHandler("jqGridAfterSaveCell",[e.rows[b].id,j,f,b,c]),a.isFunction(e.p.afterSaveCell)&&e.p.afterSaveCell.call(e,e.rows[b].id,j,f,b,c),e.p.savedRow.splice(0,1)):(a.jgrid.info_dialog(a.jgrid.errors.errcap,k[1],a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c))}},error:function(d,f,g){a("#lui_"+a.jgrid.jqID(e.p.id)).hide(),e.grid.hDiv.loading=!1,a(e).triggerHandler("jqGridErrorCell",[d,f,g]),a.isFunction(e.p.errorCell)?e.p.errorCell.call(e,d,f,g):a.jgrid.info_dialog(a.jgrid.errors.errcap,d.status+" : "+d.statusText+"<br/>"+f,a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c)}},a.jgrid.ajaxOptions,e.p.ajaxCellOptions||{}))}else try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c)}catch(q){}"clientArray"===e.p.cellsubmit&&(a(h).empty(),a(e).jqGrid("setCell",e.rows[b].id,c,g,!1,!1,!0),a(h).addClass("dirty-cell"),a(e.rows[b]).addClass("edited"),a(e).triggerHandler("jqGridAfterSaveCell",[e.rows[b].id,j,f,b,c]),a.isFunction(e.p.afterSaveCell)&&e.p.afterSaveCell.call(e,e.rows[b].id,j,f,b,c),e.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,f+" "+o[1],a.jgrid.edit.bClose)},100),a(e).jqGrid("restoreCell",b,c)}catch(r){}}else a(e).jqGrid("restoreCell",b,c)}window.setTimeout(function(){a("#"+a.jgrid.jqID(e.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(b,c){return this.each(function(){var d,e=this;if(e.grid&&!0===e.p.cellEdit){if(d=1<=e.p.savedRow.length?0:null,null!==d){var f=a("td:eq("+c+")",e.rows[b]);if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",f).datepicker("hide")}catch(g){}a(f).empty().attr("tabindex","-1"),a(e).jqGrid("setCell",e.rows[b].id,c,e.p.savedRow[d].v,!1,!1,!0),a(e).triggerHandler("jqGridAfterRestoreCell",[e.rows[b].id,e.p.savedRow[d].v,b,c]),a.isFunction(e.p.afterRestoreCell)&&e.p.afterRestoreCell.call(e,e.rows[b].id,e.p.savedRow[d].v,b,c),e.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+e.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(b,c){return this.each(function(){var d,e=!1;if(this.grid&&!0===this.p.cellEdit){for(d=c+1;d<this.p.colModel.length;d++)if(!0===this.p.colModel[d].editable){e=d;break}!1!==e?a(this).jqGrid("editCell",b,e,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",b,c)}})},prevCell:function(b,c){return this.each(function(){var d,e=!1;if(this.grid&&!0===this.p.cellEdit){for(d=c-1;d>=0;d--)if(!0===this.p.colModel[d].editable){e=d;break}!1!==e?a(this).jqGrid("editCell",b,e,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",b,c)}})},GridNav:function(){return this.each(function(){function b(b,c,e){if("v"===e.substr(0,1)){var f=a(d.grid.bDiv)[0].clientHeight,g=a(d.grid.bDiv)[0].scrollTop,h=d.rows[b].offsetTop+d.rows[b].clientHeight,i=d.rows[b].offsetTop;"vd"===e&&h>=f&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop+d.rows[b].clientHeight),"vu"===e&&g>i&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop-d.rows[b].clientHeight)}"h"===e&&(e=a(d.grid.bDiv)[0].clientWidth,f=a(d.grid.bDiv)[0].scrollLeft,g=d.rows[b].cells[c].offsetLeft,d.rows[b].cells[c].offsetLeft+d.rows[b].cells[c].clientWidth>=e+parseInt(f,10)?a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft+d.rows[b].cells[c].clientWidth:f>g&&(a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft-d.rows[b].cells[c].clientWidth))}function c(a,b){var c,e;if("lft"===b)for(c=a+1,e=a;e>=0;e--)if(!0!==d.p.colModel[e].hidden){c=e;break}if("rgt"===b)for(c=a-1,e=a;e<d.p.colModel.length;e++)if(!0!==d.p.colModel[e].hidden){c=e;break}return c}var d=this;if(d.grid&&!0===d.p.cellEdit){d.p.knv=d.p.id+"_kn";var e,f,g=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+d.p.knv+"'></div></div>");a(g).insertBefore(d.grid.cDiv),a("#"+d.p.knv).focus().keydown(function(g){switch(f=g.keyCode,"rtl"===d.p.direction&&(37===f?f=39:39===f&&(f=37)),f){case 38:0<d.p.iRow-1&&(b(d.p.iRow-1,d.p.iCol,"vu"),a(d).jqGrid("editCell",d.p.iRow-1,d.p.iCol,!1));break;case 40:d.p.iRow+1<=d.rows.length-1&&(b(d.p.iRow+1,d.p.iCol,"vd"),a(d).jqGrid("editCell",d.p.iRow+1,d.p.iCol,!1));break;case 37:0<=d.p.iCol-1&&(e=c(d.p.iCol-1,"lft"),b(d.p.iRow,e,"h"),a(d).jqGrid("editCell",d.p.iRow,e,!1));break;case 39:d.p.iCol+1<=d.p.colModel.length-1&&(e=c(d.p.iCol+1,"rgt"),b(d.p.iRow,e,"h"),a(d).jqGrid("editCell",d.p.iRow,e,!1));break;case 13:0<=parseInt(d.p.iCol,10)&&0<=parseInt(d.p.iRow,10)&&a(d).jqGrid("editCell",d.p.iRow,d.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(b){var c=[];return b||(b="all"),this.each(function(){var d,e=this;e.grid&&!0===e.p.cellEdit&&a(e.rows).each(function(f){var g={};a(this).hasClass("edited")&&(a("td",this).each(function(c){if(d=e.p.colModel[c].name,"cb"!==d&&"subgrid"!==d)if("dirty"===b){if(a(this).hasClass("dirty-cell"))try{g[d]=a.unformat.call(e,this,{rowId:e.rows[f].id,colModel:e.p.colModel[c]},c)}catch(h){g[d]=a.jgrid.htmlDecode(a(this).html())}}else try{g[d]=a.unformat.call(e,this,{rowId:e.rows[f].id,colModel:e.p.colModel[c]},c)}catch(i){g[d]=a.jgrid.htmlDecode(a(this).html())}}),g.id=this.id,c.push(g))})}),c}})}(jQuery),function(a){a.fn.jqm=function(d){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:e,ajaxText:"",target:e,modal:e,toTop:e,onShow:e,onHide:e,onLoad:e};return this.each(function(){return this._jqm?c[this._jqm].c=a.extend({},c[this._jqm].c,d):(b++,this._jqm=b,c[b]={c:a.extend(f,a.jqm.params,d),a:e,w:a(this).addClass("jqmID"+b),s:b},void(f.trigger&&a(this).jqmAddTrigger(f.trigger)))})},a.fn.jqmAddClose=function(a){return i(this,a,"jqmHide")},a.fn.jqmAddTrigger=function(a){return i(this,a,"jqmShow")},a.fn.jqmShow=function(b){return this.each(function(){a.jqm.open(this._jqm,b)})},a.fn.jqmHide=function(b){return this.each(function(){a.jqm.close(this._jqm,b)})},a.jqm={hash:{},open:function(b,h){var i=c[b],j=i.c,k="."+j.closeClass,l=parseInt(i.w.css("z-index")),l=l>0?l:3e3,m=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:j.overlay/100});return i.a?e:(i.t=h,i.a=!0,i.w.css("z-index",l),j.modal?(d[0]||setTimeout(function(){g("bind")},1),d.push(b)):0<j.overlay?j.closeoverlay&&i.w.jqmAddClose(m):m=e,i.o=m?m.addClass(j.overlayClass).prependTo("body"):e,j.ajax?(l=j.target||i.w,m=j.ajax,l="string"==typeof l?a(l,i.w):a(l),m="@"==m.substr(0,1)?a(h).attr(m.substring(1)):m,l.html(j.ajaxText).load(m,function(){j.onLoad&&j.onLoad.call(this,i),k&&i.w.jqmAddClose(a(k,i.w)),f(i)})):k&&i.w.jqmAddClose(a(k,i.w)),j.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),j.onShow?j.onShow(i):i.w.show(),f(i),e)},close:function(b){return b=c[b],b.a?(b.a=e,d[0]&&(d.pop(),d[0]||g("unbind")),b.c.toTop&&b.o&&a("#jqmP"+b.w[0]._jqm).after(b.w).remove(),b.c.onHide?b.c.onHide(b):(b.w.hide(),b.o&&b.o.remove()),e):e},params:{}};var b=0,c=a.jqm.hash,d=[],e=!1,f=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},g=function(b){a(document)[b]("keypress",h)[b]("keydown",h)[b]("mousedown",h)},h=function(b){var e=c[d[d.length-1]],g=!a(b.target).parents(".jqmID"+e.s)[0];return g&&(a(".jqmID"+e.s).each(function(){var c=a(this),d=c.offset();return d.top<=b.pageY&&b.pageY<=d.top+c.height()&&d.left<=b.pageX&&b.pageX<=d.left+c.width()?g=!1:void 0}),f(e)),!g},i=function(b,d,f){return b.each(function(){var b=this._jqm;a(d).each(function(){this[f]||(this[f]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])c[this[a][b]]&&c[this[a][b]].w[a](this);return e})),this[f].push(b)})})}}(jQuery),function(a){a.fn.jqDrag=function(a){return g(this,a,"d")},a.fn.jqResize=function(a,b){return g(this,a,"r",b)},a.jqDnR={dnr:{},e:0,drag:function(a){return"d"==e.k?f.css({left:e.X+a.pageX-e.pX,top:e.Y+a.pageY-e.pY}):(f.css({width:Math.max(a.pageX-e.pX+e.W,0),height:Math.max(a.pageY-e.pY+e.H,0)}),c&&b.css({width:Math.max(a.pageX-c.pX+c.W,0),height:Math.max(a.pageY-c.pY+c.H,0)})),!1},stop:function(){a(document).unbind("mousemove",d.drag).unbind("mouseup",d.stop)}};var b,c,d=a.jqDnR,e=d.dnr,f=d.e,g=function(d,g,j,k){return d.each(function(){g=g?a(g,d):d,g.bind("mousedown",{e:d,k:j},function(d){var g=d.data,j={};if(f=g.e,b=k?a(k):!1,"relative"!=f.css("position"))try{f.position(j)}catch(l){}if(e={X:j.left||h("left")||0,Y:j.top||h("top")||0,W:h("width")||f[0].scrollWidth||0,H:h("height")||f[0].scrollHeight||0,pX:d.pageX,pY:d.pageY,k:g.k},c=b&&"d"!=g.k?{X:j.left||i("left")||0,Y:j.top||i("top")||0,W:b[0].offsetWidth||i("width")||0,H:b[0].offsetHeight||i("height")||0,pX:d.pageX,pY:d.pageY,k:g.k}:!1,a("input.hasDatepicker",f[0])[0])try{a("input.hasDatepicker",f[0]).datepicker("hide")}catch(m){}return a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop),!1})})},h=function(a){return parseInt(f.css(a),10)||!1},i=function(a){return parseInt(b.css(a),10)||!1}}(jQuery),function(a){a.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,c;if(this.p.subGridOptions=a.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{}),this.p.colNames.unshift(""),this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),b=this.p.subGridModel,b[0])for(b[0].align=a.extend([],b[0].align||[]),c=0;c<b[0].name.length;c++)b[0].align[c]=b[0].align[c]||"left"})},addSubGridCell:function(a,b){var c,d,e="";return this.each(function(){e=this.formatCol(a,b),d=this.p.id,c=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+d+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e+"><a href='javascript:void(0);'><span class='ui-icon "+c+"'></span></a></td>"},addSubGrid:function(b,c){return this.each(function(){var d=this;if(d.grid){var e,f,g,h,i,j=function(b,c,e){c=a("<td align='"+d.p.subGridModel[0].align[e]+"'></td>").html(c),a(b).append(c)},k=function(b,c){var e,f,g,h=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),i=a("<tr></tr>");for(f=0;f<d.p.subGridModel[0].name.length;f++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(e).html(d.p.subGridModel[0].name[f]),a(e).width(d.p.subGridModel[0].width[f]),a(i).append(e);return a(h).append(i),b&&(g=d.p.xmlReader.subgrid,a(g.root+" "+g.row,b).each(function(){if(i=a("<tr class='ui-widget-content ui-subtblcell'></tr>"),!0===g.repeatitems)a(g.cell,this).each(function(b){j(i,a(this).text()||"&#160;",b)});else{var b=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(b)for(f=0;f<b.length;f++)j(i,a(b[f],this).text()||"&#160;",f)}a(h).append(i)})),e=a("table:first",d.grid.bDiv).attr("id")+"_",a("#"+a.jgrid.jqID(e+c)).append(h),d.grid.hDiv.loading=!1,a("#load_"+a.jgrid.jqID(d.p.id)).hide(),!1},l=function(b,c){var e,f,g,h,i,k=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=a("<tr></tr>");for(f=0;f<d.p.subGridModel[0].name.length;f++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(e).html(d.p.subGridModel[0].name[f]),a(e).width(d.p.subGridModel[0].width[f]),a(l).append(e);if(a(k).append(l),b&&(h=d.p.jsonReader.subgrid,e=a.jgrid.getAccessor(b,h.root),void 0!==e))for(f=0;f<e.length;f++){if(g=e[f],l=a("<tr class='ui-widget-content ui-subtblcell'></tr>"),!0===h.repeatitems)for(h.cell&&(g=g[h.cell]),i=0;i<g.length;i++)j(l,g[i]||"&#160;",i);else{var m=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(m.length)for(i=0;i<m.length;i++)j(l,g[m[i]]||"&#160;",i)}a(k).append(l)}return f=a("table:first",d.grid.bDiv).attr("id")+"_",a("#"+a.jgrid.jqID(f+c)).append(k),d.grid.hDiv.loading=!1,a("#load_"+a.jgrid.jqID(d.p.id)).hide(),!1},m=function(b){var c,e,f,g;if(c=a(b).attr("id"),e={nd_:(new Date).getTime()},e[d.p.prmNames.subgridid]=c,!d.p.subGridModel[0])return!1;if(d.p.subGridModel[0].params)for(g=0;g<d.p.subGridModel[0].params.length;g++)for(f=0;f<d.p.colModel.length;f++)d.p.colModel[f].name===d.p.subGridModel[0].params[g]&&(e[d.p.colModel[f].name]=a("td:eq("+f+")",b).text().replace(/\&#160\;/gi,""));if(!d.grid.hDiv.loading)switch(d.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(d.p.id)).show(),d.p.subgridtype||(d.p.subgridtype=d.p.datatype),a.isFunction(d.p.subgridtype)?d.p.subgridtype.call(d,e):d.p.subgridtype=d.p.subgridtype.toLowerCase(),d.p.subgridtype){case"xml":case"json":a.ajax(a.extend({type:d.p.mtype,url:d.p.subGridUrl,dataType:d.p.subgridtype,data:a.isFunction(d.p.serializeSubGridData)?d.p.serializeSubGridData.call(d,e):e,complete:function(b){"xml"===d.p.subgridtype?k(b.responseXML,c):l(a.jgrid.parse(b.responseText),c)}},a.jgrid.ajaxOptions,d.p.ajaxSubgridOptions||{}))}return!1},n=0;a.each(d.p.colModel,function(){(!0===this.hidden||"rn"===this.name||"cb"===this.name)&&n++});var o=d.rows.length,p=1;for(void 0!==c&&c>0&&(p=c,o=c+1);o>p;)a(d.rows[p]).hasClass("jqgrow")&&a(d.rows[p].cells[b]).bind("click",function(){var c=a(this).parent("tr")[0];if(i=c.nextSibling,a(this).hasClass("sgcollapsed")){if(f=d.p.id,e=c.id,d.p.subGridOptions.reloadOnExpand===!0||d.p.subGridOptions.reloadOnExpand===!1&&!a(i).hasClass("ui-subgrid")){if(g=b>=1?"<td colspan='"+b+"'>&#160;</td>":"",h=a(d).triggerHandler("jqGridSubGridBeforeExpand",[f+"_"+e,e]),(h=h===!1||"stop"===h?!1:!0)&&a.isFunction(d.p.subGridBeforeExpand)&&(h=d.p.subGridBeforeExpand.call(d,f+"_"+e,e)),h===!1)return!1;a(c).after("<tr role='row' class='ui-subgrid'>"+g+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+d.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(d.p.colNames.length-1-n,10)+"' class='ui-widget-content subgrid-data'><div id="+f+"_"+e+" class='tablediv'></div></td></tr>"),a(d).triggerHandler("jqGridSubGridRowExpanded",[f+"_"+e,e]),a.isFunction(d.p.subGridRowExpanded)?d.p.subGridRowExpanded.call(d,f+"_"+e,e):m(c)}else a(i).show();a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+d.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),d.p.subGridOptions.selectOnExpand&&a(d).jqGrid("setSelection",e)}else if(a(this).hasClass("sgexpanded")){if(h=a(d).triggerHandler("jqGridSubGridRowColapsed",[f+"_"+e,e]),(h=h===!1||"stop"===h?!1:!0)&&a.isFunction(d.p.subGridRowColapsed)&&(e=c.id,h=d.p.subGridRowColapsed.call(d,f+"_"+e,e)),h===!1)return!1;d.p.subGridOptions.reloadOnExpand===!0?a(i).remove(".ui-subgrid"):a(i).hasClass("ui-subgrid")&&a(i).hide(),a(this).html("<a href='javascript:void(0);'><span class='ui-icon "+d.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),p++;!0===d.p.subGridOptions.expandOnLoad&&a(d.rows).filter(".jqgrow").each(function(b,c){a(c.cells[0]).click()}),d.subGridXml=function(a,b){k(a,b)},d.subGridJson=function(a,b){l(a,b)}}})},expandSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",b,!0);c&&(c=a("td.sgcollapsed",c)[0])&&a(c).trigger("click")}})},collapseSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",b,!0);c&&(c=a("td.sgexpanded",c)[0])&&a(c).trigger("click")}})},toggleSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",b,!0);if(c){var d=a("td.sgcollapsed",c)[0];d?a(d).trigger("click"):(d=a("td.sgexpanded",c)[0])&&a(d).trigger("click")}}})}})}(jQuery),function(a){a.extend(a.jgrid,{template:function(b){var c,d=a.makeArray(arguments).slice(1),e=d.length;return null==b&&(b=""),b.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(b,f){if(!isNaN(parseInt(f,10)))return d[parseInt(f,10)];for(c=0;e>c;c++)if(a.isArray(d[c]))for(var g=d[c],h=g.length;h--;)if(f===g[h].nm)return g[h].v})}}),a.jgrid.extend({groupingSetup:function(){return this.each(function(){var b,c,d=this.p.colModel,e=this.p.groupingView;if(null===e||"object"!=typeof e&&!a.isFunction(e))this.p.grouping=!1;else if(e.groupField.length){for(void 0===e.visibiltyOnNextGrouping&&(e.visibiltyOnNextGrouping=[]),e.lastvalues=[],e.groups=[],e.counters=[],b=0;b<e.groupField.length;b++)e.groupOrder[b]||(e.groupOrder[b]="asc"),e.groupText[b]||(e.groupText[b]="{0}"),"boolean"!=typeof e.groupColumnShow[b]&&(e.groupColumnShow[b]=!0),"boolean"!=typeof e.groupSummary[b]&&(e.groupSummary[b]=!1),!0===e.groupColumnShow[b]?(e.visibiltyOnNextGrouping[b]=!0,a(this).jqGrid("showCol",e.groupField[b])):(e.visibiltyOnNextGrouping[b]=a("#"+a.jgrid.jqID(this.p.id+"_"+e.groupField[b])).is(":visible"),a(this).jqGrid("hideCol",e.groupField[b]));
for(e.summary=[],b=0,c=d.length;c>b;b++)d[b].summaryType&&e.summary.push({nm:d[b].name,st:d[b].summaryType,v:"",sr:d[b].summaryRound,srt:d[b].summaryRoundType||"round"})}else this.p.grouping=!1})},groupingPrepare:function(b,c,d,e){return this.each(function(){var f,g,h,i,j=this.p.groupingView,k=this,l=j.groupField.length,m=0;for(f=0;l>f;f++)g=j.groupField[f],i=j.displayField[f],h=d[g],i=null==i?null:d[i],null==i&&(i=h),void 0!==h&&(0===e?(j.groups.push({idx:f,dataIndex:g,value:h,displayValue:i,startRow:e,cnt:1,summary:[]}),j.lastvalues[f]=h,j.counters[f]={cnt:1,pos:j.groups.length-1,summary:a.extend(!0,[],j.summary)}):"object"==typeof h||(a.isArray(j.isInTheSameGroup)&&a.isFunction(j.isInTheSameGroup[f])?j.isInTheSameGroup[f].call(k,j.lastvalues[f],h,f,j):j.lastvalues[f]===h)?1===m?(j.groups.push({idx:f,dataIndex:g,value:h,displayValue:i,startRow:e,cnt:1,summary:[]}),j.lastvalues[f]=h,j.counters[f]={cnt:1,pos:j.groups.length-1,summary:a.extend(!0,[],j.summary)}):(j.counters[f].cnt+=1,j.groups[j.counters[f].pos].cnt=j.counters[f].cnt):(j.groups.push({idx:f,dataIndex:g,value:h,displayValue:i,startRow:e,cnt:1,summary:[]}),j.lastvalues[f]=h,m=1,j.counters[f]={cnt:1,pos:j.groups.length-1,summary:a.extend(!0,[],j.summary)}),a.each(j.counters[f].summary,function(){this.v=a.isFunction(this.st)?this.st.call(k,this.v,this.nm,d):a(k).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,d)}),j.groups[j.counters[f].pos].summary=j.counters[f].summary);c.push(b)}),c},groupingToggle:function(b){return this.each(function(){var c=this.p.groupingView,d=b.split("_"),e=parseInt(d[d.length-2],10);d.splice(d.length-2,2);var d=d.join("_"),f=c.minusicon,g=c.plusicon,h=a("#"+a.jgrid.jqID(b)),h=h.length?h[0].nextSibling:null,i=a("#"+a.jgrid.jqID(b)+" span.tree-wrap-"+this.p.direction),j=!1;if(i.hasClass(f)){if(c.showSummaryOnHide){if(h)for(;h&&!(a(h).hasClass("jqfoot")&&parseInt(a(h).attr("jqfootlevel"),10)<=e);)a(h).hide(),h=h.nextSibling}else if(h)for(;h&&(c=h.className.indexOf(d),!(-1!==c&&parseInt(h.className.substring(c+d.length+1),10)<=e));)a(h).hide(),h=h.nextSibling;i.removeClass(f).addClass(g),j=!0}else{if(h)for(;h&&(c=h.className.indexOf(d),!(-1!==c&&parseInt(h.className.substring(c+d.length+1),10)<=e));)a(h).show(),(c=a(h).find("span.tree-wrap-"+this.p.direction))&&a(c).hasClass(g)&&a(c).removeClass(g).addClass(f),h=h.nextSibling;i.removeClass(g).addClass(f)}a(this).triggerHandler("jqGridGroupingClickGroup",[b,j]),a.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,b,j)}),!1},groupingRender:function(b,c){return this.each(function(){function d(a,b,c){var d=!1;if(0===b)d=c[a];else{var e=c[a].idx;if(0===e)d=c[a];else for(;a>=0;a--)if(c[a].idx===e-b){d=c[a];break}}return d}var e,f,g,h=this,i=h.p.groupingView,j="",k="",l=i.groupCollapse?i.plusicon:i.minusicon,m=[],n=i.groupField.length,l=l+(" tree-wrap-"+h.p.direction);a.each(h.p.colModel,function(a,b){var c;for(c=0;n>c;c++)if(i.groupField[c]===b.name){m[c]=a;break}});var o=0,p=a.makeArray(i.groupSummary);p.reverse(),a.each(i.groups,function(q,r){o++,f=h.p.id+"ghead_"+r.idx,e=f+"_"+q,k="<span style='cursor:pointer;' class='ui-icon "+l+"' onclick=\"jQuery('#"+a.jgrid.jqID(h.p.id)+"').jqGrid('groupingToggle','"+e+"');return false;\"></span>";try{a.isArray(i.formatDisplayField)&&a.isFunction(i.formatDisplayField[r.idx])&&(r.displayValue=i.formatDisplayField[r.idx].call(h,r.displayValue,r.value,h.p.colModel[m[r.idx]],r.idx,i)),g=h.formatter(e,r.displayValue,m[r.idx],r.value)}catch(s){g=r.displayValue}if(j+='<tr id="'+e+'" role="row" class= "ui-widget-content jqgroup ui-row-'+h.p.direction+" "+f+'"><td style="padding-left:'+12*r.idx+'px;" colspan="'+c+'">'+k+a.jgrid.template(i.groupText[r.idx],g,r.cnt,r.summary)+"</td></tr>",n-1===r.idx){var t,u,v=i.groups[q+1],w=void 0!==v?i.groups[q+1].startRow:b.length;for(u=r.startRow;w>u;u++)j+=b[u].join("");var x;if(void 0!==v){for(x=0;x<i.groupField.length&&v.dataIndex!==i.groupField[x];x++);o=i.groupField.length-x}for(v=0;o>v;v++)if(p[v]){u="",i.groupCollapse&&!i.showSummaryOnHide&&(u=' style="display:none;"'),j+="<tr"+u+' jqfootlevel="'+(r.idx-v)+'" role="row" class="ui-widget-content jqfoot ui-row-'+h.p.direction+'">',u=d(q,v,i.groups);var y,z=h.p.colModel,A=u.cnt;for(t=0;c>t;t++){var B="<td "+h.formatCol(t,1,"")+">&#160;</td>",C="{0}";a.each(u.summary,function(){if(this.nm===z[t].name){z[t].summaryTpl&&(C=z[t].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&A>0&&(this.v/=A);try{y=h.formatter("",this.v,t,this)}catch(b){y=this.v}return B="<td "+h.formatCol(t,1,"")+">"+a.jgrid.format(C,y)+"</td>",!1}}),j+=B}j+="</tr>"}o=x}}),a("#"+a.jgrid.jqID(h.p.id)+" tbody:first").append(j),j=null})},groupingGroupBy:function(b,c){return this.each(function(){"string"==typeof b&&(b=[b]);var d=this.p.groupingView;this.p.grouping=!0,void 0===d.visibiltyOnNextGrouping&&(d.visibiltyOnNextGrouping=[]);var e;for(e=0;e<d.groupField.length;e++)!d.groupColumnShow[e]&&d.visibiltyOnNextGrouping[e]&&a(this).jqGrid("showCol",d.groupField[e]);for(e=0;e<b.length;e++)d.visibiltyOnNextGrouping[e]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(b[e])).is(":visible");this.p.groupingView=a.extend(this.p.groupingView,c||{}),d.groupField=b,a(this).trigger("reloadGrid")})},groupingRemove:function(b){return this.each(function(){if(void 0===b&&(b=!0),this.p.grouping=!1,!0===b){var c,d=this.p.groupingView;for(c=0;c<d.groupField.length;c++)!d.groupColumnShow[c]&&d.visibiltyOnNextGrouping[c]&&a(this).jqGrid("showCol",d.groupField);a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(this.p.id)+" tbody:first").remove(),a("tr.jqgrow:hidden","#"+a.jgrid.jqID(this.p.id)+" tbody:first").show()}else a(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,b,c,d,e,f){var g={sum:function(){return parseFloat(b||0)+parseFloat(f[c]||0)},min:function(){return""===b?parseFloat(f[c]||0):Math.min(parseFloat(b),parseFloat(f[c]||0))},max:function(){return""===b?parseFloat(f[c]||0):Math.max(parseFloat(b),parseFloat(f[c]||0))},count:function(){return""===b&&(b=0),f.hasOwnProperty(c)?b+1:0},avg:function(){return g.sum()}};if(!g[a])throw"jqGrid Grouping No such method: "+a;return a=g[a](),null!=d&&("fixed"===e?a=a.toFixed(d):(d=Math.pow(10,d),a=Math.round(a*d)/d)),a}}})}(jQuery),function(a){a.jgrid.extend({setTreeNode:function(b,c){return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)for(var e,f,g,h,i=d.p.expColInd,j=d.p.treeReader.expanded_field,k=d.p.treeReader.leaf_field,l=d.p.treeReader.level_field,m=d.p.treeReader.icon_field,n=d.p.treeReader.loaded;c>b;)h=a.jgrid.stripPref(d.p.idPrefix,d.rows[b].id),h=d.p.data[d.p._index[h]],"nested"===d.p.treeGridModel&&!h[k]&&(e=parseInt(h[d.p.treeReader.left_field],10),f=parseInt(h[d.p.treeReader.right_field],10),h[k]=f===e+1?"true":"false",d.rows[b].cells[d.p._treeleafpos].innerHTML=h[k]),e=parseInt(h[l],10),0===d.p.tree_root_level?(g=e+1,f=e):(g=e,f=e-1),g="<div class='tree-wrap tree-wrap-"+d.p.direction+"' style='width:"+18*g+"px;'>",g+="<div style='"+("rtl"===d.p.direction?"right:":"left:")+18*f+"px;' class='ui-icon ",void 0!==h[n]&&(h[n]="true"===h[n]||!0===h[n]?!0:!1),"true"===h[k]||!0===h[k]?(g+=(void 0!==h[m]&&""!==h[m]?h[m]:d.p.treeIcons.leaf)+" tree-leaf treeclick",h[k]=!0,f="leaf"):(h[k]=!1,f=""),h[j]=("true"===h[j]||!0===h[j]?!0:!1)&&(h[n]||void 0===h[n]),g=!1===h[j]?g+(!0===h[k]?"'":d.p.treeIcons.plus+" tree-plus treeclick'"):g+(!0===h[k]?"'":d.p.treeIcons.minus+" tree-minus treeclick'"),g+="></div></div>",a(d.rows[b].cells[i]).wrapInner("<span class='cell-wrapper"+f+"'></span>").prepend(g),e!==parseInt(d.p.tree_root_level,10)&&((h=(h=a(d).jqGrid("getNodeParent",h))&&h.hasOwnProperty(j)?h[j]:!0)||a(d.rows[b]).css("display","none")),a(d.rows[b].cells[i]).find("div.treeclick").bind("click",function(b){return b=a.jgrid.stripPref(d.p.idPrefix,a(b.target||b.srcElement,d.rows).closest("tr.jqgrow")[0].id),b=d.p._index[b],d.p.data[b][k]||(d.p.data[b][j]?(a(d).jqGrid("collapseRow",d.p.data[b]),a(d).jqGrid("collapseNode",d.p.data[b])):(a(d).jqGrid("expandRow",d.p.data[b]),a(d).jqGrid("expandNode",d.p.data[b]))),!1}),!0===d.p.ExpandColClick&&a(d.rows[b].cells[i]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(b){var b=a.jgrid.stripPref(d.p.idPrefix,a(b.target||b.srcElement,d.rows).closest("tr.jqgrow")[0].id),c=d.p._index[b];return d.p.data[c][k]||(d.p.data[c][j]?(a(d).jqGrid("collapseRow",d.p.data[c]),a(d).jqGrid("collapseNode",d.p.data[c])):(a(d).jqGrid("expandRow",d.p.data[c]),a(d).jqGrid("expandNode",d.p.data[c]))),a(d).jqGrid("setSelection",b),!1}),b++})},setTreeGrid:function(){return this.each(function(){var b,c,d,e=this,f=0,g=!1,h=[];if(e.p.treeGrid){e.p.treedatatype||a.extend(e.p,{treedatatype:e.p.datatype}),e.p.subGrid=!1,e.p.altRows=!1,e.p.pgbuttons=!1,e.p.pginput=!1,e.p.gridview=!0,null===e.p.rowTotal&&(e.p.rowNum=1e4),e.p.multiselect=!1,e.p.rowList=[],e.p.expColInd=0,e.p.treeIcons=a.extend({plus:"ui-icon-triangle-1-"+("rtl"===e.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},e.p.treeIcons||{}),"nested"===e.p.treeGridModel?e.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.p.treeReader):"adjacency"===e.p.treeGridModel&&(e.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},e.p.treeReader));for(c in e.p.colModel)if(e.p.colModel.hasOwnProperty(c))for(d in b=e.p.colModel[c].name,b===e.p.ExpandColumn&&!g&&(g=!0,e.p.expColInd=f),f++,e.p.treeReader)e.p.treeReader.hasOwnProperty(d)&&e.p.treeReader[d]===b&&h.push(b);a.each(e.p.treeReader,function(b,c){c&&-1===a.inArray(c,h)&&("leaf_field"===b&&(e.p._treeleafpos=f),f++,e.p.colNames.push(c),e.p.colModel.push({name:c,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(b){this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var d=a(c).jqGrid("getNodeChildren",b),e=c.p.treeReader.expanded_field,f=c.rows;a(d).each(function(){var b=c.p.idPrefix+a.jgrid.getAccessor(this,c.p.localReader.id);a(f.namedItem(b)).css("display",""),this[e]&&a(c).jqGrid("expandRow",this)})}})},collapseRow:function(b){this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var d=a(c).jqGrid("getNodeChildren",b),e=c.p.treeReader.expanded_field,f=c.rows;a(d).each(function(){var b=c.p.idPrefix+a.jgrid.getAccessor(this,c.p.localReader.id);a(f.namedItem(b)).css("display","none"),this[e]&&a(c).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var b=[];return this.each(function(){var c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case"nested":var d=c.p.treeReader.level_field;a(c.p.data).each(function(){parseInt(this[d],10)===parseInt(c.p.tree_root_level,10)&&b.push(this)});break;case"adjacency":var e=c.p.treeReader.parent_id_field;a(c.p.data).each(function(){(null===this[e]||"null"===(""+this[e]).toLowerCase())&&b.push(this)})}}),b},getNodeDepth:function(b){var c=null;return this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":c=parseInt(b[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":c=a(this).jqGrid("getNodeAncestors",b).length}}),c},getNodeParent:function(b){var c=null;return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case"nested":var e=d.p.treeReader.left_field,f=d.p.treeReader.right_field,g=d.p.treeReader.level_field,h=parseInt(b[e],10),i=parseInt(b[f],10),j=parseInt(b[g],10);a(this.p.data).each(function(){return parseInt(this[g],10)===j-1&&parseInt(this[e],10)<h&&parseInt(this[f],10)>i?(c=this,!1):void 0});break;case"adjacency":var k=d.p.treeReader.parent_id_field,l=d.p.localReader.id;a(this.p.data).each(function(){return this[l]===a.jgrid.stripPref(d.p.idPrefix,b[k])?(c=this,!1):void 0})}}),c},getNodeChildren:function(b){var c=[];return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case"nested":var e=d.p.treeReader.left_field,f=d.p.treeReader.right_field,g=d.p.treeReader.level_field,h=parseInt(b[e],10),i=parseInt(b[f],10),j=parseInt(b[g],10);a(this.p.data).each(function(){parseInt(this[g],10)===j+1&&parseInt(this[e],10)>h&&parseInt(this[f],10)<i&&c.push(this)});break;case"adjacency":var k=d.p.treeReader.parent_id_field,l=d.p.localReader.id;a(this.p.data).each(function(){this[k]==a.jgrid.stripPref(d.p.idPrefix,b[l])&&c.push(this)})}}),c},getFullTreeNode:function(b){var c=[];return this.each(function(){var d,e=this;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case"nested":var f=e.p.treeReader.left_field,g=e.p.treeReader.right_field,h=e.p.treeReader.level_field,i=parseInt(b[f],10),j=parseInt(b[g],10),k=parseInt(b[h],10);a(this.p.data).each(function(){parseInt(this[h],10)>=k&&parseInt(this[f],10)>=i&&parseInt(this[f],10)<=j&&c.push(this)});break;case"adjacency":if(b){c.push(b);var l=e.p.treeReader.parent_id_field,m=e.p.localReader.id;a(this.p.data).each(function(b){for(d=c.length,b=0;d>b;b++)if(a.jgrid.stripPref(e.p.idPrefix,c[b][m])===this[l]){c.push(this);break}})}}}),c},getNodeAncestors:function(b){var c=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var d=a(this).jqGrid("getNodeParent",b);d;)c.push(d),d=a(this).jqGrid("getNodeParent",d)}),c},isVisibleNode:function(b){var c=!0;return this.each(function(){if(this.grid&&this.p.treeGrid){var d=a(this).jqGrid("getNodeAncestors",b),e=this.p.treeReader.expanded_field;a(d).each(function(){return c=c&&this[e],c?void 0:!1})}}),c},isNodeLoaded:function(b){var c;return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this.p.treeReader.leaf_field;c=void 0!==b?void 0!==b.loaded?b.loaded:b[d]||0<a(this).jqGrid("getNodeChildren",b).length?!0:!1:!1}}),c},expandNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.expanded_field,d=this.p.treeReader.parent_id_field,e=this.p.treeReader.loaded,f=this.p.treeReader.level_field,g=this.p.treeReader.left_field,h=this.p.treeReader.right_field;if(!b[c]){var i=a.jgrid.getAccessor(b,this.p.localReader.id),j=a("#"+this.p.idPrefix+a.jgrid.jqID(i),this.grid.bDiv)[0],k=this.p._index[i];a(this).jqGrid("isNodeLoaded",this.p.data[k])?(b[c]=!0,a("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(b[c]=!0,a("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=j.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:b[g],n_right:b[h],n_level:b[f]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:b[d],n_level:b[f]}}),a(this).trigger("reloadGrid"),b[e]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.expanded_field;b[c]&&(b[c]=!1,c=a.jgrid.getAccessor(b,this.p.localReader.id),c=a("#"+this.p.idPrefix+a.jgrid.jqID(c),this.grid.bDiv)[0],a("div.treeclick",c).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(b,c,d,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var f,g,h,i,j=[],k=this;for(f=a(this).jqGrid("getRootNodes"),f=a.jgrid.from(f),f.orderBy(b,c,d,e),i=f.select(),f=0,g=i.length;g>f;f++)h=i[f],j.push(h),a(this).jqGrid("collectChildrenSortTree",j,h,b,c,d,e);a.each(j,function(b){var c=a.jgrid.getAccessor(this,k.p.localReader.id);a("#"+a.jgrid.jqID(k.p.id)+" tbody tr:eq("+b+")").after(a("tr#"+a.jgrid.jqID(c),k.grid.bDiv))}),j=i=f=null}})},collectChildrenSortTree:function(b,c,d,e,f,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var h,i,j,k;for(h=a(this).jqGrid("getNodeChildren",c),h=a.jgrid.from(h),h.orderBy(d,e,f,g),k=h.select(),h=0,i=k.length;i>h;h++)j=k[h],b.push(j),a(this).jqGrid("collectChildrenSortTree",b,j,d,e,f,g)}})},setTreeRow:function(b,c){var d=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(d=a(this).jqGrid("setRowData",b,c))}),d},delTreeNode:function(b){return this.each(function(){var c,d,e,f,g=this.p.localReader.id,h=this.p.treeReader.left_field,i=this.p.treeReader.right_field;if(this.grid&&this.p.treeGrid&&(c=this.p._index[b],void 0!==c)){d=parseInt(this.p.data[c][i],10),e=d-parseInt(this.p.data[c][h],10)+1;var j=a(this).jqGrid("getFullTreeNode",this.p.data[c]);if(0<j.length)for(c=0;c<j.length;c++)a(this).jqGrid("delRowData",j[c][g]);if("nested"===this.p.treeGridModel){if(g=a.jgrid.from(this.p.data).greater(h,d,{stype:"integer"}).select(),g.length)for(f in g)g.hasOwnProperty(f)&&(g[f][h]=parseInt(g[f][h],10)-e);if(g=a.jgrid.from(this.p.data).greater(i,d,{stype:"integer"}).select(),g.length)for(f in g)g.hasOwnProperty(f)&&(g[f][i]=parseInt(g[f][i],10)-e)}}})},addChildNode:function(b,c,d,e){var f=this[0];if(d){var g,h,i,j,k,l=f.p.treeReader.expanded_field,m=f.p.treeReader.leaf_field,n=f.p.treeReader.level_field,o=f.p.treeReader.parent_id_field,p=f.p.treeReader.left_field,q=f.p.treeReader.right_field,r=f.p.treeReader.loaded;g=0;var s,t=c;if(void 0===e&&(e=!1),void 0===b||null===b){if(k=f.p.data.length-1,k>=0)for(;k>=0;)g=Math.max(g,parseInt(f.p.data[k][f.p.localReader.id],10)),k--;b=g+1}var u=a(f).jqGrid("getInd",c);if(s=!1,void 0===c||null===c||""===c?(t=c=null,g="last",j=f.p.tree_root_level,k=f.p.data.length+1):(g="after",h=f.p._index[c],i=f.p.data[h],c=i[f.p.localReader.id],j=parseInt(i[n],10)+1,k=a(f).jqGrid("getFullTreeNode",i),k.length?(t=k=k[k.length-1][f.p.localReader.id],k=a(f).jqGrid("getInd",t)+1):k=a(f).jqGrid("getInd",c)+1,i[m]&&(s=!0,i[l]=!0,a(f.rows[u]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[h][m]=!1,i[r]=!0)),h=k+1,void 0===d[l]&&(d[l]=!1),void 0===d[r]&&(d[r]=!1),d[n]=j,void 0===d[m]&&(d[m]=!0),"adjacency"===f.p.treeGridModel&&(d[o]=c),"nested"===f.p.treeGridModel){var v;if(null!==c){if(m=parseInt(i[q],10),n=a.jgrid.from(f.p.data),n=n.greaterOrEquals(q,m,{stype:"integer"}),n=n.select(),n.length)for(v in n)n.hasOwnProperty(v)&&(n[v][p]=n[v][p]>m?parseInt(n[v][p],10)+2:n[v][p],n[v][q]=n[v][q]>=m?parseInt(n[v][q],10)+2:n[v][q]);d[p]=m,d[q]=m+1}else{if(m=parseInt(a(f).jqGrid("getCol",q,!1,"max"),10),n=a.jgrid.from(f.p.data).greater(p,m,{stype:"integer"}).select(),n.length)for(v in n)n.hasOwnProperty(v)&&(n[v][p]=parseInt(n[v][p],10)+2);if(n=a.jgrid.from(f.p.data).greater(q,m,{stype:"integer"}).select(),n.length)for(v in n)n.hasOwnProperty(v)&&(n[v][q]=parseInt(n[v][q],10)+2);d[p]=m+1,d[q]=m+2}}(null===c||a(f).jqGrid("isNodeLoaded",i)||s)&&(a(f).jqGrid("addRowData",b,d,g,t),a(f).jqGrid("setTreeNode",k,h)),i&&!i[l]&&e&&a(f.rows[u]).find("div.treeclick").click()}}})}(jQuery),function(a){a.jgrid.extend({jqGridImport:function(b){return b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{}),this.each(function(){var c=this,d=function(b,d){var e,f,g=a(d.xmlGrid.config,b)[0],h=a(d.xmlGrid.data,b)[0];if(xmlJsonClass.xml2json&&a.jgrid.parse){g=xmlJsonClass.xml2json(g," "),g=a.jgrid.parse(g);for(f in g)g.hasOwnProperty(f)&&(e=g[f]);h?(h=g.grid.datatype,g.grid.datatype="xmlstring",g.grid.datastr=b,a(c).jqGrid(e).jqGrid("setGridParam",{datatype:h})):a(c).jqGrid(e)}else alert("xml2json or parse are not present")},e=function(b,d){if(b&&"string"==typeof b){var e=!1;a.jgrid.useJSON&&(a.jgrid.useJSON=!1,e=!0);var f=a.jgrid.parse(b);if(e&&(a.jgrid.useJSON=!0),e=f[d.jsonGrid.config],f=f[d.jsonGrid.data]){var g=e.datatype;e.datatype="jsonstring",e.datastr=f,a(c).jqGrid(e).jqGrid("setGridParam",{datatype:g})}else a(c).jqGrid(e)}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(e,f){"success"===f&&(d(e.responseXML,b),a(c).triggerHandler("jqGridImportComplete",[e,b]),a.isFunction(b.importComplete)&&b.importComplete(e))}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&"string"==typeof b.impstring){var f=a.parseXML(b.impstring);f&&(d(f,b),a(c).triggerHandler("jqGridImportComplete",[f,b]),a.isFunction(b.importComplete)&&b.importComplete(f),b.impstring=null),f=null}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(d){try{e(d.responseText,b),a(c).triggerHandler("jqGridImportComplete",[d,b]),a.isFunction(b.importComplete)&&b.importComplete(d)}catch(f){}}},b.ajaxOptions));break;case"jsonstring":b.impstring&&"string"==typeof b.impstring&&(e(b.impstring,b),a(c).triggerHandler("jqGridImportComplete",[b.impstring,b]),a.isFunction(b.importComplete)&&b.importComplete(b.impstring),b.impstring=null)}})},jqGridExport:function(b){var b=a.extend({exptype:"xmlstring",root:"grid",ident:"	"},b||{}),c=null;return this.each(function(){if(this.grid){var d,e=a.extend(!0,{},a(this).jqGrid("getGridParam"));if(e.rownumbers&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.multiselect&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.subGrid&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.knv=null,e.treeGrid)for(d in e.treeReader)e.treeReader.hasOwnProperty(d)&&(e.colNames.splice(e.colNames.length-1),e.colModel.splice(e.colModel.length-1));switch(b.exptype){case"xmlstring":c="<"+b.root+">"+xmlJsonClass.json2xml(e,b.ident)+"</"+b.root+">";break;case"jsonstring":c="{"+xmlJsonClass.toJson(e,b.root,b.ident,!1)+"}",void 0!==e.postData.filters&&(c=c.replace(/filters":"/,'filters":'),c=c.replace(/}]}"/,"}]}"))}}}),c},excelExport:function(b){return b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{}),this.each(function(){if(this.grid){var c;"remote"===b.exptype&&(c=a.extend({},this.p.postData),c[b.oper]=b.tag,c=jQuery.param(c),c=-1!==b.url.indexOf("?")?b.url+"&"+c:b.url+"?"+c,window.location=c)}})}})}(jQuery);var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var c=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"	");return"{\n"+b+(b?c.replace(/\t/g,b):c.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c,d=function(a,b,c){var e,f,g="";if(a instanceof Array)if(0===a.length)g+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(e=0,f=a.length;f>e;e+=1)var h=c+d(a[e],b,c+"	")+"\n",g=g+h;else if("object"==typeof a){e=!1,g+=c+"<"+b;for(f in a)a.hasOwnProperty(f)&&("@"===f.charAt(0)?g+=" "+f.substr(1)+'="'+a[f].toString()+'"':e=!0);if(g+=e?">":"/>",e){for(f in a)a.hasOwnProperty(f)&&("#text"===f?g+=a[f]:"#cdata"===f?g+="<![CDATA["+a[f]+"]]>":"@"!==f.charAt(0)&&(g+=d(a[f],f,c+"	")));g+=("\n"===g.charAt(g.length-1)?c:"")+"</"+b+">"}}else"function"==typeof a?g+=c+"<"+b+"><![CDATA["+a+"]]></"+b+">":(void 0===a&&(a=""),g='""'===a.toString()||0===a.toString().length?g+(c+"<"+b+">__EMPTY_STRING_</"+b+">"):g+(c+"<"+b+">"+a.toString()+"</"+b+">"));return g},e="";for(c in a)a.hasOwnProperty(c)&&(e+=d(a[c],c,""));return b?e.replace(/\t/g,b):e.replace(/\t|\n/g,"")},toObj:function(a){var b={},c=/function/i;if(1===a.nodeType){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)b["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var e,f=d=0,g=!1;for(e=a.firstChild;e;e=e.nextSibling)1===e.nodeType?g=!0:3===e.nodeType&&e.nodeValue.match(/[^ \f\n\r\t\v]/)?d+=1:4===e.nodeType&&(f+=1);if(g)if(2>d&&2>f)for(this.removeWhite(a),e=a.firstChild;e;e=e.nextSibling)3===e.nodeType?b["#text"]=this.escape(e.nodeValue):4===e.nodeType?c.test(e.nodeValue)?b[e.nodeName]=[b[e.nodeName],e.nodeValue]:b["#cdata"]=this.escape(e.nodeValue):b[e.nodeName]?b[e.nodeName]instanceof Array?b[e.nodeName][b[e.nodeName].length]=this.toObj(e):b[e.nodeName]=[b[e.nodeName],this.toObj(e)]:b[e.nodeName]=this.toObj(e);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(d)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(f)if(f>1)b=this.escape(this.innerXml(a));else for(e=a.firstChild;e;e=e.nextSibling){if(c.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}b["#cdata"]=this.escape(e.nodeValue)}}!a.attributes.length&&!a.firstChild&&(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,c,d){void 0===d&&(d=!0);var e=b?'"'+b+'"':"",f="	",g="\n";if(d||(g=f=""),"[]"===a)e+=b?":[]":"[]";else if(a instanceof Array){var h,i,j=[];for(i=0,h=a.length;h>i;i+=1)j[i]=this.toJson(a[i],"",c+f,d);e+=(b?":[":"[")+(1<j.length?g+c+f+j.join(","+g+c+f)+g+c:j.join(""))+"]"}else if(null===a)e+=(b&&":")+"null";else if("object"==typeof a){h=[];for(i in a)a.hasOwnProperty(i)&&(h[h.length]=this.toJson(a[i],i,c+f,d));e+=(b?":{":"{")+(1<h.length?g+c+f+h.join(","+g+c+f)+g+c:h.join(""))+"}"}else e="string"==typeof a?e+((b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):e+((b&&":")+a.toString());return e},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else for(var c=function(a){var b,d="";if(1===a.nodeType){for(d+="<"+a.nodeName,b=0;b<a.attributes.length;b+=1)d+=" "+a.attributes[b].nodeName+'="'+(a.attributes[b].nodeValue||"").toString()+'"';if(a.firstChild){for(d+=">",b=a.firstChild;b;b=b.nextSibling)d+=c(b);d+="</"+a.nodeName+">"}else d+="/>"}else 3===a.nodeType?d+=a.nodeValue:4===a.nodeType&&(d+="<![CDATA["+a.nodeValue+"]]>");return d},a=a.firstChild;a;a=a.nextSibling)b+=c(a);return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var c=b.nextSibling;a.removeChild(b),b=c}else 1===b.nodeType&&this.removeWhite(b),b=b.nextSibling;return a}};!function(b){if(b.jgrid.msie&&8===b.jgrid.msiever()&&(b.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display}),b.jgrid._multiselect=!1,b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var o=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,c){var d=o.call(this,a,c);if(c&&this.selectedList){var e=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(e)})}return d}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===b.Widget?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)}),b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function c(){d.p.disableClick=!0}var d=this,e=b.jgrid.jqID(d.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(a,c){var e=b(c.item).parent(),e=b(">th",e),f={},g=d.p.id+"_";b.each(d.p.colModel,function(a){f[this.name]=a});var h=[];e.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&h.push(f[a])}),b(d).jqGrid("remapColumns",h,!0,!0),b.isFunction(d.p.sortable.update)&&d.p.sortable.update(h),setTimeout(function(){d.p.disableClick=!1},50)}};if(d.p.sortable.options?b.extend(e,d.p.sortable.options):b.isFunction(d.p.sortable)&&(d.p.sortable={update:d.p.sortable}),e.start){var f=e.start;e.start=function(a,b){c(),f.call(this,a,b)}}else e.start=c;d.p.sortable.exclude&&(e.items=e.items+(":not("+d.p.sortable.exclude+")")),a.sortable(e).data("sortable").floating=!0})},columnChooser:function(a){function c(a,c){a&&("string"==typeof a?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var d=this;if(!b("#colchooser_"+b.jgrid.jqID(d[0].p.id)).length){var e=b('<div id="colchooser_'+d[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),f=b("select",e),a=b.extend({width:420,height:240,classname:null,done:function(a){a&&d.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};return c[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},c[a.bCancel]=function(){a.cleanup(!0)},b.extend(!0,{buttons:c,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",f).each(function(){this.selected?d.jqGrid("showCol",g[this.value].name):d.jqGrid("hideCol",g[this.value].name)});var c=[];b("option:selected",f).each(function(){c.push(parseInt(this.value,10))}),b.each(c,function(){delete i[g[parseInt(this,10)].name]}),b.each(i,function(){var a=parseInt(this,10),b=c,d=a;if(d>=0){var e=b.slice(),f=e.splice(d,Math.max(b.length-d,d));d>b.length&&(d=b.length),e[d]=a,c=e.concat(f)}else c=void 0}),a.done&&a.done.call(d,c)},cleanup:function(b){c(a.dlog,e,"destroy"),c(a.msel,f,"destroy"),e.remove(),b&&a.done&&a.done.call(d)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&"multiselect"===a.msel){if(!b.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption),a.classname&&(e.addClass(a.classname),f.addClass(a.classname)),a.width&&(b(">div",e).css({width:a.width,margin:"0 auto"}),f.css("width",a.width)),a.height&&(b(">div",e).css("height",a.height),f.css("height",a.height-10));var g=d.jqGrid("getGridParam","colModel"),h=d.jqGrid("getGridParam","colNames"),i={},j=[];f.empty(),b.each(g,function(a){i[this.name]=a,this.hidedlg?this.hidden||j.push(a):f.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+b.jgrid.stripHtml(h[a])+"</option>")});var k=b.isFunction(a.dlog_opts)?a.dlog_opts.call(d,a):a.dlog_opts;c(a.dlog,e,k),k=b.isFunction(a.msel_opts)?a.msel_opts.call(d,a):a.msel_opts,c(a.msel,f,k)}},sortableRows:function(a){return this.each(function(){var c=this;c.grid&&!c.p.treeGrid&&b.fn.sortable&&(a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{}),a.start&&b.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&b.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(d,e){if(b(e.item).css("border-width","0px"),b("td",e.item).each(function(a){this.style.width=c.grid.cols[a].style.width}),c.p.subGrid){var f=b(e.item).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(g){}}a._start_&&a._start_.apply(this,[d,e])},a.update=function(d,e){b(e.item).css("border-width",""),c.p.rownumbers===!0&&b("td.jqgrid-rownum",c.rows).each(function(a){b(this).html(a+1+(parseInt(c.p.page,10)-1)*parseInt(c.p.rowNum,10))}),a._update_&&a._update_.apply(this,[d,e])},b("tbody:first",c).sortable(a),b("tbody:first",c).disableSelection())})},gridDnD:function(a){return this.each(function(){function c(){var a=b.data(f,"dnd");b("tr.jqgrow:not(.ui-draggable)",f).draggable(b.isFunction(a.drag)?a.drag.call(b(f),a):a.drag)
}var d,e,f=this;if(f.grid&&!f.p.treeGrid&&b.fn.draggable&&b.fn.droppable)if(void 0===b("#jqgrid_dnd")[0]&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof a&&"updateDnD"===a&&f.p.jqgdnd===!0)c();else if(a=b.extend({drag:function(a){return b.extend({start:function(c,d){var e;if(f.p.subGrid){e=b(d.helper).attr("id");try{b(f).jqGrid("collapseSubGridRow",e)}catch(g){}}for(e=0;e<b.data(f,"dnd").connectWith.length;e++)0===b(b.data(f,"dnd").connectWith[e]).jqGrid("getGridParam","reccount")&&b(b.data(f,"dnd").connectWith[e]).jqGrid("addRowData","jqg_empty_row",{});d.helper.addClass("ui-state-highlight"),b("td",d.helper).each(function(a){this.style.width=f.grid.headers[a].width+"px"}),a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(f),c,d)},stop:function(c,d){var e;for(d.helper.dropped&&!a.dragcopy&&(e=b(d.helper).attr("id"),void 0===e&&(e=b(this).attr("id")),b(f).jqGrid("delRowData",e)),e=0;e<b.data(f,"dnd").connectWith.length;e++)b(b.data(f,"dnd").connectWith[e]).jqGrid("delRowData","jqg_empty_row");a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(f),c,d)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){return b(a).hasClass("jqgrow")?(a=b(a).closest("table.ui-jqgrid-btable"),a.length>0&&void 0!==b.data(a[0],"dnd")?(a=b.data(a[0],"dnd").connectWith,-1!==b.inArray("#"+b.jgrid.jqID(this.id),a)?!0:!1):!1):a},drop:function(c,d){if(b(d.draggable).hasClass("jqgrow")){var e=b(d.draggable).attr("id"),e=d.draggable.parent().parent().jqGrid("getRowData",e);if(!a.dropbyname){var g,h,i=0,j={},k=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(h in e)e.hasOwnProperty(h)&&(g=k[i].name,"cb"===g||"rn"===g||"subgrid"===g||e.hasOwnProperty(h)&&k[i]&&(j[g]=e[h]),i++);e=j}catch(l){}}if(d.helper.dropped=!0,a.beforedrop&&b.isFunction(a.beforedrop)&&(g=a.beforedrop.call(this,c,d,e,b("#"+b.jgrid.jqID(f.p.id)),b(this)),void 0!==g&&null!==g&&"object"==typeof g&&(e=g)),d.helper.dropped){var m;a.autoid&&(b.isFunction(a.autoid)?m=a.autoid.call(this,e):(m=Math.ceil(1e3*Math.random()),m=a.autoidprefix+m)),b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",m,e,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,c,d,e)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith)for(a.connectWith=a.connectWith.split(","),a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)}),b.data(f,"dnd",a),0!==f.p.reccount&&!f.p.jqgdnd&&c(),f.p.jqgdnd=!0,d=0;d<a.connectWith.length;d++)e=a.connectWith[d],b(e).droppable(b.isFunction(a.drop)?a.drop.call(b(f),a):a.drop)})},gridResize:function(a){return this.each(function(){var d=this,c=b.jgrid.jqID(d.p.id);d.grid&&b.fn.resizable&&(a=b.extend({},a||{}),a.alsoResize?(a._alsoResize_=a.alsoResize,delete a.alsoResize):a._alsoResize_=!1,a.stop&&b.isFunction(a.stop)?(a._stop_=a.stop,delete a.stop):a._stop_=!1,a.stop=function(e,f){b(d).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()}),b(d).jqGrid("setGridWidth",f.size.width,a.shrinkToFit),a._stop_&&a._stop_.call(d,e,f)},a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c),delete a._alsoResize_,b("#gbox_"+c).resizable(a))})}})}(jQuery),eval(function(a,b,c,d,e,f){if(e=function(a){return(b>a?"":e(parseInt(a/b)))+((a%=b)>35?String.fromCharCode(a+29):a.toString(36))},!"".replace(/^/,String)){for(;c--;)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}],e=function(){return"\\w+"},c=1}for(;c--;)d[c]&&(a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]));return a}("(C($){8($.1r.1v){G}$.1r.6p=$.1r.1v=C(u,w){8(1k.S==0){18(I,'6q 54 7P 1j \"'+1k.4l+'\".');G 1k}8(1k.S>1){G 1k.1W(C(){$(1k).1v(u,w)})}E y=1k,$13=1k[0],55=K;8(y.1m('56')){55=y.1Q('3o','4m');y.R('3o',['4n',I])}y.57=C(o,a,b){o=3R($13,o);o.D=6r($13,o.D);o.1M=6s($13,o.1M);o.M=6t($13,o.M);o.V=59($13,o.V);o.Y=59($13,o.Y);o.1a=6u($13,o.1a);o.1q=6v($13,o.1q);o.1h=6w($13,o.1h);8(a){31=$.1N(I,{},$.1r.1v.5a,o)}7=$.1N(I,{},$.1r.1v.5a,o);7.d=6x(7);z.2b=(7.2b=='4o'||7.2b=='1n')?'Y':'V';E c=y.14(),2w=5b($1s,7,'N');8(3p(7.25)){7.25='7Q'+F.3S}7.4p=5c(7,2w);7.D=6y(7.D,7,c,b);7[7.d['N']]=6z(7[7.d['N']],7,c);7[7.d['1d']]=6A(7[7.d['1d']],7,c);8(7.2m){8(!3T(7[7.d['N']])){7[7.d['N']]='2J%'}}8(3T(7[7.d['N']])){z.6B=I;z.4q=7[7.d['N']];7[7.d['N']]=4r(2w,z.4q);8(!7.D.L){7.D.T.1c=I}}8(7.2m){7.1R=K;7.1i=[0,0,0,0];7.1A=K;7.D.T.1c=K}O{8(!7.D.L){7=6C(7,2w)}8(!7[7.d['N']]){8(!7.D.T.1c&&Z(7.D[7.d['N']])&&7.D.1t=='*'){7[7.d['N']]=7.D.L*7.D[7.d['N']];7.1A=K}O{7[7.d['N']]='1c'}}8(1G(7.1A)){7.1A=(Z(7[7.d['N']]))?'5d':K}8(7.D.T.1c){7.D.L=32(c,7,0)}}8(7.D.1t!='*'&&!7.D.T.1c){7.D.T.4s=7.D.L;7.D.L=3U(c,7,0)}7.D.L=2x(7.D.L,7,7.D.T.2c,$13);7.D.T.1Z=7.D.L;8(7.2m){8(!7.D.T.34){7.D.T.34=7.D.L}8(!7.D.T.1X){7.D.T.1X=7.D.L}7=5e(7,c,2w)}O{7.1i=6D(7.1i);8(7.1A=='3q'){7.1A='1n'}O 8(7.1A=='5f'){7.1A='35'}1B(7.1A){Q'5d':Q'1n':Q'35':8(7[7.d['N']]!='1c'){7=5g(7,c);7.1R=I}16;2y:7.1A=K;7.1R=(7.1i[0]==0&&7.1i[1]==0&&7.1i[2]==0&&7.1i[3]==0)?K:I;16}}8(!Z(7.1M.1C)){7.1M.1C=6E}8(1G(7.1M.D)){7.1M.D=(7.2m||7.D.T.1c||7.D.1t!='*')?'L':7.D.L}7.M=$.1N(I,{},7.1M,7.M);7.V=$.1N(I,{},7.1M,7.V);7.Y=$.1N(I,{},7.1M,7.Y);7.1a=$.1N(I,{},7.1M,7.1a);7.M=6F($13,7.M);7.V=5h($13,7.V);7.Y=5h($13,7.Y);7.1a=6G($13,7.1a);7.1q=6H($13,7.1q);7.1h=6I($13,7.1h);8(7.2n){7.2n=5i(7.2n)}8(7.M.5j){7.M.4t=7.M.5j;2K('M.5j','M.4t')}8(7.M.5k){7.M.4u=7.M.5k;2K('M.5k','M.4u')}8(7.M.5l){7.M.4v=7.M.5l;2K('M.5l','M.4v')}8(7.M.5m){7.M.2L=7.M.5m;2K('M.5m','M.2L')}};y.6J=C(){y.1m('56',I);E a=y.14(),3V=5n(y,['6K','6L','3W','3q','35','5f','1n','3X','N','1d','6M','1S','5o','6N']),5p='7R';1B(3V.3W){Q'6O':Q'7S':5p=3V.3W;16}$1s.X(3V).X({'7T':'3r','3W':5p});y.1m('5q',3V).X({'6K':'1n','6L':'3Y','3W':'6O','3q':0,'35':'M','5f':'M','1n':0,'6M':0,'1S':0,'5o':0,'6N':0});4w(a,7);5r(a,7);8(7.2m){5s(7,a)}};y.6P=C(){y.5t();y.12(H('5u',F),C(e,a){e.1f();8(!z.2d){8(7.M.W){7.M.W.36(2z('4x',F))}}z.2d=I;8(7.M.1H){7.M.1H=K;y.R(H('3a',F),a)}G I});y.12(H('5v',F),C(e){e.1f();8(z.20){3Z(U)}G I});y.12(H('3a',F),C(e,a,b){e.1f();1u=3s(1u);8(a&&z.20){U.2d=I;E c=2o()-U.2M;U.1C-=c;8(U.3t){U.3t.1C-=c}8(U.3u){U.3u.1C-=c}3Z(U,K)}8(!z.26&&!z.20){8(b){1u.3v+=2o()-1u.2M}}8(!z.26){8(7.M.W){7.M.W.36(2z('6Q',F))}}z.26=I;8(7.M.4u){E d=7.M.2L-1u.3v,3b=2J-1I.2A(d*2J/7.M.2L);7.M.4u.1g($13,3b,d)}G I});y.12(H('1H',F),C(e,b,c,d){e.1f();1u=3s(1u);E v=[b,c,d],t=['2N','27','3c'],a=3d(v,t);b=a[0];c=a[1];d=a[2];8(b!='V'&&b!='Y'){b=z.2b}8(!Z(c)){c=0}8(!1l(d)){d=K}8(d){z.2d=K;7.M.1H=I}8(!7.M.1H){e.2e();G 18(F,'3w 4x: 2p 3e.')}8(z.26){8(7.M.W){7.M.W.2O(2z('4x',F));7.M.W.2O(2z('6Q',F))}}z.26=K;1u.2M=2o();E f=7.M.2L+c;41=f-1u.3v;3b=2J-1I.2A(41*2J/f);8(7.M.1e){1u.1e=7U(C(){E a=2o()-1u.2M+1u.3v,3b=1I.2A(a*2J/f);7.M.1e.4y.1g(7.M.1e.2q[0],3b)},7.M.1e.5w)}1u.M=7V(C(){8(7.M.1e){7.M.1e.4y.1g(7.M.1e.2q[0],2J)}8(7.M.4v){7.M.4v.1g($13,3b,41)}8(z.20){y.R(H('1H',F),b)}O{y.R(H(b,F),7.M)}},41);8(7.M.4t){7.M.4t.1g($13,3b,41)}G I});y.12(H('3f',F),C(e){e.1f();8(U.2d){U.2d=K;z.26=K;z.20=I;U.2M=2o();2P(U)}O{y.R(H('1H',F))}G I});y.12(H('V',F)+' '+H('Y',F),C(e,b,f,g,h){e.1f();8(z.2d||y.2f(':3r')){e.2e();G 18(F,'3w 4x 7W 3r: 2p 3e.')}E i=(Z(7.D.4z))?7.D.4z:7.D.L+1;8(i>J.P){e.2e();G 18(F,'2p 6R D ('+J.P+' P, '+i+' 6S): 2p 3e.')}E v=[b,f,g,h],t=['2g','27/2N','C','3c'],a=3d(v,t);b=a[0];f=a[1];g=a[2];h=a[3];E k=e.5x.17(F.3x.42.S);8(!1D(b)){b={}}8(1o(g)){b.3g=g}8(1l(h)){b.3y=h}b=$.1N(I,{},7[k],b);8(b.5y&&!b.5y.1g($13,k)){e.2e();G 18(F,'7X \"5y\" 7Y K.')}8(!Z(f)){8(7.D.1t!='*'){f='L'}O{E m=[f,b.D,7[k].D];1j(E a=0,l=m.S;a<l;a++){8(Z(m[a])||m[a]=='6T'||m[a]=='L'){f=m[a];16}}}1B(f){Q'6T':e.2e();G y.1Q(H(k+'7Z',F),[b,g]);16;Q'L':8(!7.D.T.1c&&7.D.1t=='*'){f=7.D.L}16}}8(U.2d){y.R(H('3f',F));y.R(H('3y',F),[k,[b,f,g]]);e.2e();G 18(F,'3w 80 3e.')}8(b.1C>0){8(z.20){8(b.3y){y.R(H('3y',F),[k,[b,f,g]])}e.2e();G 18(F,'3w 81 3e.')}}1u.3v=0;y.R(H('6U'+k,F),[b,f]);8(7.2n){E s=7.2n,c=[b,f];1j(E j=0,l=s.S;j<l;j++){E d=k;8(!s[j][2]){d=(d=='V')?'Y':'V'}8(!s[j][1]){c[0]=s[j][0].1Q('3o',['4A',d])}c[1]=f+s[j][3];s[j][0].R('3o',['6U'+d,c])}}G I});y.12(H('82',F),C(e,b,c){e.1f();E d=y.14();8(!7.1T){8(J.11==0){8(7.3z){y.R(H('Y',F),J.P-1)}G e.2e()}}1U(d,7);8(!Z(c)){8(7.D.T.1c){c=4B(d,7,J.P-1)}O 8(7.D.1t!='*'){E f=(Z(b.D))?b.D:5z(y,7);c=6V(d,7,J.P-1,f)}O{c=7.D.L}c=4C(c,7,b.D,$13)}8(!7.1T){8(J.P-c<J.11){c=J.P-J.11}}7.D.T.1Z=7.D.L;8(7.D.T.1c){E g=2x(32(d,7,J.P-c),7,7.D.T.2c,$13);8(7.D.L+c<=g&&c<J.P){c++;g=2x(32(d,7,J.P-c),7,7.D.T.2c,$13)}7.D.L=g}O 8(7.D.1t!='*'){E g=3U(d,7,J.P-c);7.D.L=2x(g,7,7.D.T.2c,$13)}1U(d,7,I);8(c==0){e.2e();G 18(F,'0 D 4D 1M: 2p 3e.')}18(F,'6W '+c+' D 5A.');J.11+=c;2h(J.11>=J.P){J.11-=J.P}8(!7.1T){8(J.11==0&&b.4E){b.4E.1g($13,'V')}8(!7.3z){3A(7,J.11,F)}}y.14().17(J.P-c,J.P).83(y);8(J.P<7.D.L+c){y.14().17(0,(7.D.L+c)-J.P).4F(I).43(y)}E d=y.14(),3h=6X(d,7,c),2i=6Y(d,7),1Y=d.1O(c-1),21=3h.3i(),2r=2i.3i();1U(d,7);E h=0,2B=0;8(7.1A){E p=4G(2i,7);h=p[0];2B=p[1]}E i=(h<0)?7.1i[7.d[3]]:0;E j=K,2Q=$();8(7.D.L<c){2Q=d.17(7.D.T.1Z,c);8(b.1V=='6Z'){E k=7.D[7.d['N']];j=2Q;1Y=2r;5B(j);7.D[7.d['N']]='1c'}}E l=K,3B=2R(d.17(0,c),7,'N'),2j=4H(4I(2i,7,I),7,!7.1R),3C=0,28={},4J={},2s={},2S={},4K={},2T={},5C={},2U=5D(b,7,c,3B);1B(b.1V){Q'1J':Q'1J-1w':3C=2R(d.17(0,7.D.L),7,'N');16}8(j){7.D[7.d['N']]=k}1U(d,7,I);8(2B>=0){1U(21,7,7.1i[7.d[1]])}8(h>=0){1U(1Y,7,7.1i[7.d[3]])}8(7.1A){7.1i[7.d[1]]=2B;7.1i[7.d[3]]=h}2T[7.d['1n']]=-(3B-i);5C[7.d['1n']]=-(3C-i);4J[7.d['1n']]=2j[7.d['N']];E m=C(){},1P=C(){},1E=C(){},3D=C(){},2C=C(){},5E=C(){},1F=C(){},3E=C(){},1x=C(){},1y=C(){},1K=C(){};1B(b.1V){Q'3j':Q'1J':Q'1J-1w':Q'22':Q'22-1w':l=y.4F(I).43($1s);16}1B(b.1V){Q'3j':Q'22':Q'22-1w':l.14().17(0,c).2t();l.14().17(7.D.T.1Z).2t();16;Q'1J':Q'1J-1w':l.14().17(7.D.L).2t();l.X(5C);16}y.X(2T);U=44(2U,b.2k);28[7.d['1n']]=(7.1R)?7.1i[7.d[3]]:0;8(7[7.d['N']]=='1c'||7[7.d['1d']]=='1c'){m=C(){$1s.X(2j)};1P=C(){U.19.1b([$1s,2j])}}8(7.1R){8(2r.5F(1Y).S){2s[7.d['1S']]=1Y.1m('29');8(h<0){1Y.X(2s)}O{1F=C(){1Y.X(2s)};3E=C(){U.19.1b([1Y,2s])}}}1B(b.1V){Q'1J':Q'1J-1w':l.14().1O(c-1).X(2s);16}8(2r.5F(21).S){2S[7.d['1S']]=21.1m('29');1E=C(){21.X(2S)};3D=C(){U.19.1b([21,2S])}}8(2B>=0){4K[7.d['1S']]=2r.1m('29')+7.1i[7.d[1]];2C=C(){2r.X(4K)};5E=C(){U.19.1b([2r,4K])}}}1K=C(){y.X(28)};E n=7.D.L+c-J.P;1y=C(){8(n>0){y.14().17(J.P).2t();3h=$(y.14().17(J.P-(7.D.L-n)).3F().70(y.14().17(0,n).3F()))}5G(j);8(7.1R){E a=y.14().1O(7.D.L+c-1);a.X(7.d['1S'],a.1m('29'))}};E o=5H(3h,2Q,2i,c,'V',2U,2j);1x=C(){5I(y,l,b);z.20=K;2a.3g=45($13,b,'3g',o,2a);2D=5J(y,2D,F);8(!z.26){y.R(H('1H',F))}};z.20=I;1u=3s(1u);2a.3G=45($13,b,'3G',o,2a);1B(b.1V){Q'3Y':y.X(28);m();1E();2C();1F();1K();1y();1x();16;Q'1w':U.19.1b([y,{'1L':0},C(){m();1E();2C();1F();1K();1y();U=44(2U,b.2k);U.19.1b([y,{'1L':1},1x]);2P(U)}]);16;Q'3j':y.X({'1L':0});U.19.1b([l,{'1L':0}]);U.19.1b([y,{'1L':1},1x]);1P();1E();2C();1F();1K();1y();16;Q'1J':U.19.1b([l,28,C(){1E();2C();1F();1K();1y();1x()}]);1P();16;Q'1J-1w':U.19.1b([y,{'1L':0}]);U.19.1b([l,28,C(){y.X({'1L':1});1E();2C();1F();1K();1y();1x()}]);1P();16;Q'22':U.19.1b([l,4J,1x]);1P();1E();2C();1F();1K();1y();16;Q'22-1w':y.X({'1L':0});U.19.1b([y,{'1L':1}]);U.19.1b([l,4J,1x]);1P();1E();2C();1F();1K();1y();16;2y:U.19.1b([y,28,C(){1y();1x()}]);1P();3D();5E();3E();16}2P(U);5K(7.25,y,F);y.R(H('3H',F),[K,2j]);G I});y.12(H('84',F),C(e,c,d){e.1f();E f=y.14();8(!7.1T){8(J.11==7.D.L){8(7.3z){y.R(H('V',F),J.P-1)}G e.2e()}}1U(f,7);8(!Z(d)){8(7.D.1t!='*'){E g=(Z(c.D))?c.D:5z(y,7);d=71(f,7,0,g)}O{d=7.D.L}d=4C(d,7,c.D,$13)}E h=(J.11==0)?J.P:J.11;8(!7.1T){8(7.D.T.1c){E i=32(f,7,d),g=4B(f,7,h-1)}O{E i=7.D.L,g=7.D.L}8(d+i>h){d=h-g}}7.D.T.1Z=7.D.L;8(7.D.T.1c){E i=2x(5L(f,7,d,h),7,7.D.T.2c,$13);2h(7.D.L-d>=i&&d<J.P){d++;i=2x(5L(f,7,d,h),7,7.D.T.2c,$13)}7.D.L=i}O 8(7.D.1t!='*'){E i=3U(f,7,d);7.D.L=2x(i,7,7.D.T.2c,$13)}1U(f,7,I);8(d==0){e.2e();G 18(F,'0 D 4D 1M: 2p 3e.')}18(F,'6W '+d+' D 72.');J.11-=d;2h(J.11<0){J.11+=J.P}8(!7.1T){8(J.11==7.D.L&&c.4E){c.4E.1g($13,'Y')}8(!7.3z){3A(7,J.11,F)}}8(J.P<7.D.L+d){y.14().17(0,(7.D.L+d)-J.P).4F(I).43(y)}E f=y.14(),3h=73(f,7),2i=74(f,7,d),1Y=f.1O(d-1),21=3h.3i(),2r=2i.3i();1U(f,7);E j=0,2B=0;8(7.1A){E p=4G(2i,7);j=p[0];2B=p[1]}E k=K,2Q=$();8(7.D.T.1Z<d){2Q=f.17(7.D.T.1Z,d);8(c.1V=='6Z'){E l=7.D[7.d['N']];k=2Q;1Y=21;5B(k);7.D[7.d['N']]='1c'}}E m=K,3B=2R(f.17(0,d),7,'N'),2j=4H(4I(2i,7,I),7,!7.1R),3C=0,28={},4L={},2s={},2S={},2T={},2U=5D(c,7,d,3B);1B(c.1V){Q'22':Q'22-1w':3C=2R(f.17(0,7.D.T.1Z),7,'N');16}8(k){7.D[7.d['N']]=l}8(7.1A){8(7.1i[7.d[1]]<0){7.1i[7.d[1]]=0}}1U(f,7,I);1U(21,7,7.1i[7.d[1]]);8(7.1A){7.1i[7.d[1]]=2B;7.1i[7.d[3]]=j}2T[7.d['1n']]=(7.1R)?7.1i[7.d[3]]:0;E n=C(){},1P=C(){},1E=C(){},3D=C(){},1F=C(){},3E=C(){},1x=C(){},1y=C(){},1K=C(){};1B(c.1V){Q'3j':Q'1J':Q'1J-1w':Q'22':Q'22-1w':m=y.4F(I).43($1s);m.14().17(7.D.T.1Z).2t();16}1B(c.1V){Q'3j':Q'1J':Q'1J-1w':y.X('3X',1);m.X('3X',0);16}U=44(2U,c.2k);28[7.d['1n']]=-3B;4L[7.d['1n']]=-3C;8(j<0){28[7.d['1n']]+=j}8(7[7.d['N']]=='1c'||7[7.d['1d']]=='1c'){n=C(){$1s.X(2j)};1P=C(){U.19.1b([$1s,2j])}}8(7.1R){E o=2r.1m('29');8(2B>=0){o+=7.1i[7.d[1]]}2r.X(7.d['1S'],o);8(1Y.5F(21).S){2S[7.d['1S']]=21.1m('29')}1E=C(){21.X(2S)};3D=C(){U.19.1b([21,2S])};E q=1Y.1m('29');8(j>0){q+=7.1i[7.d[3]]}2s[7.d['1S']]=q;1F=C(){1Y.X(2s)};3E=C(){U.19.1b([1Y,2s])}}1K=C(){y.X(2T)};E r=7.D.L+d-J.P;1y=C(){8(r>0){y.14().17(J.P).2t()}E a=y.14().17(0,d).43(y).3i();8(r>0){2i=3I(f,7)}5G(k);8(7.1R){8(J.P<7.D.L+d){E b=y.14().1O(7.D.L-1);b.X(7.d['1S'],b.1m('29')+7.1i[7.d[3]])}a.X(7.d['1S'],a.1m('29'))}};E s=5H(3h,2Q,2i,d,'Y',2U,2j);1x=C(){y.X('3X',y.1m('5q').3X);5I(y,m,c);z.20=K;2a.3g=45($13,c,'3g',s,2a);2D=5J(y,2D,F);8(!z.26){y.R(H('1H',F))}};z.20=I;1u=3s(1u);2a.3G=45($13,c,'3G',s,2a);1B(c.1V){Q'3Y':y.X(28);n();1E();1F();1K();1y();1x();16;Q'1w':U.19.1b([y,{'1L':0},C(){n();1E();1F();1K();1y();U=44(2U,c.2k);U.19.1b([y,{'1L':1},1x]);2P(U)}]);16;Q'3j':y.X({'1L':0});U.19.1b([m,{'1L':0}]);U.19.1b([y,{'1L':1},1x]);1P();1E();1F();1K();1y();16;Q'1J':y.X(7.d['1n'],$1s[7.d['N']]());U.19.1b([y,2T,1x]);1P();1E();1F();1y();16;Q'1J-1w':y.X(7.d['1n'],$1s[7.d['N']]());U.19.1b([m,{'1L':0}]);U.19.1b([y,2T,1x]);1P();1E();1F();1y();16;Q'22':U.19.1b([m,4L,1x]);1P();1E();1F();1K();1y();16;Q'22-1w':y.X({'1L':0});U.19.1b([y,{'1L':1}]);U.19.1b([m,4L,1x]);1P();1E();1F();1K();1y();16;2y:U.19.1b([y,28,C(){1K();1y();1x()}]);1P();3D();3E();16}2P(U);5K(7.25,y,F);y.R(H('3H',F),[K,2j]);G I});y.12(H('3k',F),C(e,b,c,d,f,g,h){e.1f();E v=[b,c,d,f,g,h],t=['2N/27/2g','27','3c','2g','2N','C'],a=3d(v,t);f=a[3];g=a[4];h=a[5];b=3J(a[0],a[1],a[2],J,y);8(b==0){G K}8(!1D(f)){f=K}8(z.20){8(!1D(f)||f.1C>0){G K}}8(g!='V'&&g!='Y'){8(7.1T){g=(b<=J.P/2)?'Y':'V'}O{g=(J.11==0||J.11>b)?'Y':'V'}}8(g=='V'){b=J.P-b}y.R(H(g,F),[f,b,h]);G I});y.12(H('85',F),C(e,a,b){e.1f();E c=y.1Q(H('46',F));G y.1Q(H('5M',F),[c-1,a,'V',b])});y.12(H('86',F),C(e,a,b){e.1f();E c=y.1Q(H('46',F));G y.1Q(H('5M',F),[c+1,a,'Y',b])});y.12(H('5M',F),C(e,a,b,c,d){e.1f();8(!Z(a)){a=y.1Q(H('46',F))}E f=7.1a.D||7.D.L,1X=1I.2A(J.P/f)-1;8(a<0){a=1X}8(a>1X){a=0}G y.1Q(H('3k',F),[a*f,0,I,b,c,d])});y.12(H('75',F),C(e,s){e.1f();8(s){s=3J(s,0,I,J,y)}O{s=0}s+=J.11;8(s!=0){8(D.P>0){2h(s>J.P){s-=J.P}}y.87(y.14().17(s,J.P))}G I});y.12(H('2n',F),C(e,s){e.1f();8(s){s=5i(s)}O 8(7.2n){s=7.2n}O{G 18(F,'6q 88 4D 2n.')}E n=y.1Q(H('4m',F)),x=I;1j(E j=0,l=s.S;j<l;j++){8(!s[j][0].1Q(H('3k',F),[n,s[j][3],I])){x=K}}G x});y.12(H('3y',F),C(e,a,b){e.1f();8(1o(a)){a.1g($13,2D)}O 8(2V(a)){2D=a}O 8(!1G(a)){2D.1b([a,b])}G 2D});y.12(H('89',F),C(e,b,c,d,f){e.1f();E v=[b,c,d,f],t=['2N/2g','2N/27/2g','3c','27'],a=3d(v,t);b=a[0];c=a[1];d=a[2];f=a[3];8(1D(b)&&!2u(b)){b=$(b)}O 8(1p(b)){b=$(b)}8(!2u(b)||b.S==0){G 18(F,'2p a 5N 2g.')}8(1G(c)){c='4M'}4w(b,7);5r(b,7);E g=c,47='47';8(c=='4M'){8(d){8(J.11==0){c=J.P-1;47='76'}O{c=J.11;J.11+=b.S}8(c<0){c=0}}O{c=J.P-1;47='76'}}O{c=3J(c,f,d,J,y)}8(g!='4M'&&!d){8(c<J.11){J.11+=b.S}}8(J.11>=J.P){J.11-=J.P}E h=y.14().1O(c);8(h.S){h[47](b)}O{y.77(b)}J.P=y.14().S;y.R(H('4N',F));y.R(H('5O',F));G I});y.12(H('78',F),C(e,c,d,f){e.1f();E v=[c,d,f],t=['2N/27/2g','3c','27'],a=3d(v,t);c=a[0];d=a[1];f=a[2];E g=K;8(c 2W $&&c.S>1){h=$();c.1W(C(i,a){E b=y.R(H('78',F),[$(1k),d,f]);8(b)h=h.8a(b)});G h}8(1G(c)||c=='4M'){h=y.14().3i()}O{c=3J(c,f,d,J,y);E h=y.14().1O(c);8(h.S){8(c<J.11)J.11-=h.S}}8(h&&h.S){h.8b();J.P=y.14().S;y.R(H('4N',F))}G h});y.12(H('3G',F)+' '+H('3g',F),C(e,a){e.1f();E b=e.5x.17(F.3x.42.S);8(2V(a)){2a[b]=a}8(1o(a)){2a[b].1b(a)}G 2a[b]});y.12(H('4m',F),C(e,a){e.1f();8(J.11==0){E b=0}O{E b=J.P-J.11}8(1o(a)){a.1g($13,b)}G b});y.12(H('46',F),C(e,a){e.1f();E b=7.1a.D||7.D.L,1X=1I.2A(J.P/b-1),2l;8(J.11==0){2l=0}O 8(J.11<J.P%b){2l=0}O 8(J.11==b&&!7.1T){2l=1X}O{2l=1I.79((J.P-J.11)/b)}8(2l<0){2l=0}8(2l>1X){2l=1X}8(1o(a)){a.1g($13,2l)}G 2l});y.12(H('8c',F),C(e,a){e.1f();E b=3I(y.14(),7);8(1o(a)){a.1g($13,b)}G b});y.12(H('17',F),C(e,f,l,b){e.1f();8(J.P==0){G K}E v=[f,l,b],t=['27','27','C'],a=3d(v,t);f=(Z(a[0]))?a[0]:0;l=(Z(a[1]))?a[1]:J.P;b=a[2];f+=J.11;l+=J.11;8(D.P>0){2h(f>J.P){f-=J.P}2h(l>J.P){l-=J.P}2h(f<0){f+=J.P}2h(l<0){l+=J.P}}E c=y.14(),$i;8(l>f){$i=c.17(f,l)}O{$i=$(c.17(f,J.P).3F().70(c.17(0,l).3F()))}8(1o(b)){b.1g($13,$i)}G $i});y.12(H('26',F)+' '+H('2d',F)+' '+H('20',F),C(e,a){e.1f();E b=e.5x.17(F.3x.42.S),5P=z[b];8(1o(a)){a.1g($13,5P)}G 5P});y.12(H('4A',F),C(e,a,b,c){e.1f();E d=K;8(1o(a)){a.1g($13,7)}O 8(1D(a)){31=$.1N(I,{},31,a);8(b!==K)d=I;O 7=$.1N(I,{},7,a)}O 8(!1G(a)){8(1o(b)){E f=4O('7.'+a);8(1G(f)){f=''}b.1g($13,f)}O 8(!1G(b)){8(2X c!=='3c')c=I;4O('31.'+a+' = b');8(c!==K)d=I;O 4O('7.'+a+' = b')}O{G 4O('7.'+a)}}8(d){1U(y.14(),7);y.57(31);y.5Q();E g=4P(y,7);y.R(H('3H',F),[I,g])}G 7});y.12(H('5O',F),C(e,a,b){e.1f();8(1G(a)){a=$('8d')}O 8(1p(a)){a=$(a)}8(!2u(a)||a.S==0){G 18(F,'2p a 5N 2g.')}8(!1p(b)){b='a.6p'}a.8e(b).1W(C(){E h=1k.7a||'';8(h.S>0&&y.14().7b($(h))!=-1){$(1k).23('5R').5R(C(e){e.2E();y.R(H('3k',F),h)})}});G I});y.12(H('3H',F),C(e,b,c){e.1f();8(!7.1a.1z){G}E d=7.1a.D||7.D.L,4Q=1I.2A(J.P/d);8(b){8(7.1a.3K){7.1a.1z.14().2t();7.1a.1z.1W(C(){1j(E a=0;a<4Q;a++){E i=y.14().1O(3J(a*d,0,I,J,y));$(1k).77(7.1a.3K.1g(i[0],a+1))}})}7.1a.1z.1W(C(){$(1k).14().23(7.1a.3L).1W(C(a){$(1k).12(7.1a.3L,C(e){e.2E();y.R(H('3k',F),[a*d,-7.1a.4R,I,7.1a])})})})}E f=y.1Q(H('46',F))+7.1a.4R;8(f>=4Q){f=0}8(f<0){f=4Q-1}7.1a.1z.1W(C(){$(1k).14().2O(2z('7c',F)).1O(f).36(2z('7c',F))});G I});y.12(H('4N',F),C(e){E a=7.D.L,2F=y.14(),2w=5b($1s,7,'N');J.P=2F.S;7.4p=5c(7,2w);8(z.4q){7[7.d['N']]=4r(2w,z.4q)}8(7.2m){7.D.N=7.D.3M.N;7.D.1d=7.D.3M.1d;7=5e(7,2F,2w);a=7.D.L;5s(7,2F)}O 8(7.D.T.1c){a=32(2F,7,0)}O 8(7.D.1t!='*'){a=3U(2F,7,0)}8(!7.1T&&J.11!=0&&a>J.11){8(7.D.T.1c){E b=4B(2F,7,J.11)-J.11}O 8(7.D.1t!='*'){E b=7d(2F,7,J.11)-J.11}O{E b=7.D.L-J.11}18(F,'8f 8g-1T: 8h '+b+' D 5A.');y.R(H('V',F),b)}7.D.L=2x(a,7,7.D.T.2c,$13);7.D.T.1Z=7.D.L;7=5g(7,2F);E c=4P(y,7);y.R(H('3H',F),[I,c]);4S(7,J.P,F);3A(7,J.11,F);G c});y.12(H('4n',F),C(e,a){e.1f();1u=3s(1u);y.1m('56',K);y.R(H('5v',F));8(a){y.R(H('75',F))}1U(y.14(),7);8(7.2m){y.14().1W(C(){$(1k).X($(1k).1m('7e'))})}y.X(y.1m('5q'));y.5t();y.5S();$1s.8i(y);G I});y.12(H('18',F),C(e){18(F,'3w N: '+7.N);18(F,'3w 1d: '+7.1d);18(F,'7f 8j: '+7.D.N);18(F,'7f 8k: '+7.D.1d);18(F,'48 4a D L: '+7.D.L);8(7.M.1H){18(F,'48 4a D 5T 8l: '+7.M.D)}8(7.V.W){18(F,'48 4a D 5T 5A: '+7.V.D)}8(7.Y.W){18(F,'48 4a D 5T 72: '+7.Y.D)}G F.18});y.12('3o',C(e,n,o){e.1f();G y.1Q(H(n,F),o)})};y.5t=C(){y.23(H('',F));y.23(H('',F,K));y.23('3o')};y.5Q=C(){y.5S();4S(7,J.P,F);3A(7,J.11,F);8(7.M.2G){E b=3N(7.M.2G);$1s.12(H('4T',F,K),C(){y.R(H('3a',F),b)}).12(H('4U',F,K),C(){y.R(H('3f',F))})}8(7.M.W){7.M.W.12(H(7.M.3L,F,K),C(e){e.2E();E a=K,b=2H;8(z.26){a='1H'}O 8(7.M.4V){a='3a';b=3N(7.M.4V)}8(a){y.R(H(a,F),b)}})}8(7.V.W){7.V.W.12(H(7.V.3L,F,K),C(e){e.2E();y.R(H('V',F))});8(7.V.2G){E b=3N(7.V.2G);7.V.W.12(H('4T',F,K),C(){y.R(H('3a',F),b)}).12(H('4U',F,K),C(){y.R(H('3f',F))})}}8(7.Y.W){7.Y.W.12(H(7.Y.3L,F,K),C(e){e.2E();y.R(H('Y',F))});8(7.Y.2G){E b=3N(7.Y.2G);7.Y.W.12(H('4T',F,K),C(){y.R(H('3a',F),b)}).12(H('4U',F,K),C(){y.R(H('3f',F))})}}8(7.1a.1z){8(7.1a.2G){E b=3N(7.1a.2G);7.1a.1z.12(H('4T',F,K),C(){y.R(H('3a',F),b)}).12(H('4U',F,K),C(){y.R(H('3f',F))})}}8(7.V.2Y||7.Y.2Y){$(4b).12(H('7g',F,K,I,I),C(e){E k=e.7h;8(k==7.Y.2Y){e.2E();y.R(H('Y',F))}8(k==7.V.2Y){e.2E();y.R(H('V',F))}})}8(7.1a.4W){$(4b).12(H('7g',F,K,I,I),C(e){E k=e.7h;8(k>=49&&k<58){k=(k-49)*7.D.L;8(k<=J.P){e.2E();y.R(H('3k',F),[k,0,I,7.1a])}}})}8(7.V.4X||7.Y.4X){2K('4c 4d-7i','4c 8m-7i');8($.1r.4d){E c=(7.V.4X)?C(){y.R(H('V',F))}:2H,4e=(7.Y.4X)?C(){y.R(H('Y',F))}:2H;8(4e||4e){8(!z.4d){z.4d=I;E d={'8n':30,'8o':30,'8p':I};1B(7.2b){Q'4o':Q'5U':d.8q=c;d.8r=4e;16;2y:d.8s=4e;d.8t=c}$1s.4d(d)}}}}8($.1r.1q){E f='8u'8v 3l;8((f&&7.1q.4f)||(!f&&7.1q.5V)){E g=$.1N(I,{},7.V,7.1q),7j=$.1N(I,{},7.Y,7.1q),5W=C(){y.R(H('V',F),[g])},5X=C(){y.R(H('Y',F),[7j])};1B(7.2b){Q'4o':Q'5U':7.1q.2I.8w=5X;7.1q.2I.8x=5W;16;2y:7.1q.2I.8y=5X;7.1q.2I.8z=5W}8(z.1q){y.1q('4n')}$1s.1q(7.1q.2I);$1s.X('7k','8A');z.1q=I}}8($.1r.1h){8(7.V.1h){2K('7l V.1h 7m','4c 1h 4A 2g');7.V.1h=2H;7.1h={D:5Y(7.V.1h)}}8(7.Y.1h){2K('7l Y.1h 7m','4c 1h 4A 2g');7.Y.1h=2H;7.1h={D:5Y(7.Y.1h)}}8(7.1h){E h=$.1N(I,{},7.V,7.1h),7n=$.1N(I,{},7.Y,7.1h);8(z.1h){$1s.23(H('1h',F,K))}$1s.12(H('1h',F,K),C(e,a){e.2E();8(a>0){y.R(H('V',F),[h])}O{y.R(H('Y',F),[7n])}});z.1h=I}}8(7.M.1H){y.R(H('1H',F),7.M.5Z)}8(z.6B){E i=$(3l),61=0,62=0;i.12(H('8B',F,K,I,I),C(e){E a=i.N(),63=i.1d();8(a!=61||63!=62){y.R(H('5v',F));8(7.M.64&&!z.26){y.R(H('1H',F))}1U(y.14(),7);y.R(H('4N',F));61=a;62=63}})}};y.5S=C(){E a=H('',F),3O=H('',F,K);65=H('',F,K,I,I);$(4b).23(65);$(3l).23(65);$1s.23(3O);8(7.M.W){7.M.W.23(3O)}8(7.V.W){7.V.W.23(3O)}8(7.Y.W){7.Y.W.23(3O)}8(7.1a.1z){7.1a.1z.23(3O);8(7.1a.3K){7.1a.1z.14().2t()}}8(z.1q){y.1q('4n');$1s.X('7k','2y');z.1q=K}8(z.1h){z.1h=K}4S(7,'4g',F);3A(7,'2O',F)};8(1l(w)){w={'18':w}}E z={'2b':'Y','26':I,'20':K,'2d':K,'1h':K,'1q':K},J={'P':y.14().S,'11':0},1u={'M':2H,'1e':2H,'2M':2o(),'3v':0},U={'2d':K,'1C':0,'2M':0,'2k':'','19':[]},2a={'3G':[],'3g':[]},2D=[],F=$.1N(I,{},$.1r.1v.7o,w),7={},31=$.1N(I,{},u),$1s=y.8C('<'+F.66.54+' 8D=\"'+F.66.7p+'\" />').68();F.4l=y.4l;F.3S=$.1r.1v.3S++;y.57(31,I,55);y.6J();y.6P();y.5Q();8(2V(7.D.3m)){E A=7.D.3m}O{E A=[];8(7.D.3m!=0){A.1b(7.D.3m)}}8(7.25){A.8E(4h(7q(7.25),10))}8(A.S>0){1j(E a=0,l=A.S;a<l;a++){E s=A[a];8(s==0){69}8(s===I){s=3l.8F.7a;8(s.S<1){69}}O 8(s==='7r'){s=1I.4i(1I.7r()*J.P)}8(y.1Q(H('3k',F),[s,0,I,{1V:'3Y'}])){16}}}E B=4P(y,7),7s=3I(y.14(),7);8(7.7t){7.7t.1g($13,{'N':B.N,'1d':B.1d,'D':7s})}y.R(H('3H',F),[I,B]);y.R(H('5O',F));8(F.18){y.R(H('18',F))}G y};$.1r.1v.3S=1;$.1r.1v.5a={'2n':K,'3z':I,'1T':I,'2m':K,'2b':'1n','D':{'3m':0},'1M':{'2k':'8G','1C':6E,'2G':K,'3L':'5R','3y':K}};$.1r.1v.7o={'18':K,'3x':{'42':'','7u':'8H'},'66':{'54':'8I','7p':'8J'},'6a':{}};$.1r.1v.7v=C(a){G'<a 8K=\"#\"><7w>'+a+'</7w></a>'};$.1r.1v.7x=C(a){$(1k).X('N',a+'%')};$.1r.1v.25={3F:C(n){n+='=';E b=4b.25.3P(';');1j(E a=0,l=b.S;a<l;a++){E c=b[a];2h(c.8L(0)==' '){c=c.17(1)}8(c.3Q(n)==0){G c.17(n.S)}}G 0},6b:C(n,v,d){E e=\"\";8(d){E a=6c 7y();a.8M(a.2o()+(d*24*60*60*8N));e=\"; 8O=\"+a.8P()}4b.25=n+'='+v+e+'; 8Q=/'},2t:C(n){$.1r.1v.25.6b(n,\"\",-1)}};C 44(d,e){G{19:[],1C:d,8R:d,2k:e,2M:2o()}}C 2P(s){8(1D(s.3t)){2P(s.3t)}1j(E a=0,l=s.19.S;a<l;a++){E b=s.19[a];8(!b){69}8(b[3]){b[0].5u()}b[0].8S(b[1],{8T:b[2],1C:s.1C,2k:s.2k})}8(1D(s.3u)){2P(s.3u)}}C 3Z(s,c){8(!1l(c)){c=I}8(1D(s.3t)){3Z(s.3t,c)}1j(E a=0,l=s.19.S;a<l;a++){E b=s.19[a];b[0].5u(I);8(c){b[0].X(b[1]);8(1o(b[2])){b[2]()}}}8(1D(s.3u)){3Z(s.3u,c)}}C 5I(a,b,o){8(b){b.2t()}1B(o.1V){Q'1w':Q'3j':Q'1J-1w':Q'22-1w':a.X('1t','');16}}C 45(d,o,b,a,c){8(o[b]){o[b].1g(d,a)}8(c[b].S){1j(E i=0,l=c[b].S;i<l;i++){c[b][i].1g(d,a)}}G[]}C 5J(a,q,c){8(q.S){a.R(H(q[0][0],c),q[0][1]);q.8U()}G q}C 5B(b){b.1W(C(){E a=$(1k);a.1m('7z',a.2f(':3r')).4g()})}C 5G(b){8(b){b.1W(C(){E a=$(1k);8(!a.1m('7z')){a.4j()}})}}C 3s(t){8(t.M){8V(t.M)}8(t.1e){8W(t.1e)}G t}C 5H(a,b,c,d,e,f,g){G{'N':g.N,'1d':g.1d,'D':{'1Z':a,'8X':b,'6c':c,'L':c},'1M':{'D':d,'2b':e,'1C':f}}}C 5D(a,o,b,c){E d=a.1C;8(a.1V=='3Y'){G 0}8(d=='M'){d=o.1M.1C/o.1M.D*b}O 8(d<10){d=c/d}8(d<1){G 0}8(a.1V=='1w'){d=d/2}G 1I.79(d)}C 4S(o,t,c){E a=(Z(o.D.4z))?o.D.4z:o.D.L+1;8(t=='4j'||t=='4g'){E f=t}O 8(a>t){18(c,'2p 6R D ('+t+' P, '+a+' 6S): 8Y 8Z.');E f='4g'}O{E f='4j'}E s=(f=='4j')?'2O':'36',h=2z('3r',c);8(o.M.W){o.M.W[f]()[s](h)}8(o.V.W){o.V.W[f]()[s](h)}8(o.Y.W){o.Y.W[f]()[s](h)}8(o.1a.1z){o.1a.1z[f]()[s](h)}}C 3A(o,f,c){8(o.1T||o.3z)G;E a=(f=='2O'||f=='36')?f:K,4Y=2z('90',c);8(o.M.W&&a){o.M.W[a](4Y)}8(o.V.W){E b=a||(f==0)?'36':'2O';o.V.W[b](4Y)}8(o.Y.W){E b=a||(f==o.D.L)?'36':'2O';o.Y.W[b](4Y)}}C 3R(a,b){8(1o(b)){b=b.1g(a)}O 8(1G(b)){b={}}G b}C 6r(a,b){b=3R(a,b);8(Z(b)){b={'L':b}}O 8(b=='1c'){b={'L':b,'N':b,'1d':b}}O 8(!1D(b)){b={}}G b}C 6s(a,b){b=3R(a,b);8(Z(b)){8(b<=50){b={'D':b}}O{b={'1C':b}}}O 8(1p(b)){b={'2k':b}}O 8(!1D(b)){b={}}G b}C 4Z(a,b){b=3R(a,b);8(1p(b)){E c=6d(b);8(c==-1){b=$(b)}O{b=c}}G b}C 6t(a,b){b=4Z(a,b);8(2u(b)){b={'W':b}}O 8(1l(b)){b={'1H':b}}O 8(Z(b)){b={'2L':b}}8(b.1e){8(1p(b.1e)||2u(b.1e)){b.1e={'2q':b.1e}}}G b}C 6F(a,b){8(1o(b.W)){b.W=b.W.1g(a)}8(1p(b.W)){b.W=$(b.W)}8(!1l(b.1H)){b.1H=I}8(!Z(b.5Z)){b.5Z=0}8(1G(b.4V)){b.4V=I}8(!1l(b.64)){b.64=I}8(!Z(b.2L)){b.2L=(b.1C<10)?91:b.1C*5}8(b.1e){8(1o(b.1e.2q)){b.1e.2q=b.1e.2q.1g(a)}8(1p(b.1e.2q)){b.1e.2q=$(b.1e.2q)}8(b.1e.2q){8(!1o(b.1e.4y)){b.1e.4y=$.1r.1v.7x}8(!Z(b.1e.5w)){b.1e.5w=50}}O{b.1e=K}}G b}C 59(a,b){b=4Z(a,b);8(2u(b)){b={'W':b}}O 8(Z(b)){b={'2Y':b}}G b}C 5h(a,b){8(1o(b.W)){b.W=b.W.1g(a)}8(1p(b.W)){b.W=$(b.W)}8(1p(b.2Y)){b.2Y=6d(b.2Y)}G b}C 6u(a,b){b=4Z(a,b);8(2u(b)){b={'1z':b}}O 8(1l(b)){b={'4W':b}}G b}C 6G(a,b){8(1o(b.1z)){b.1z=b.1z.1g(a)}8(1p(b.1z)){b.1z=$(b.1z)}8(!Z(b.D)){b.D=K}8(!1l(b.4W)){b.4W=K}8(!1o(b.3K)&&!51(b.3K)){b.3K=$.1r.1v.7v}8(!Z(b.4R)){b.4R=0}G b}C 6v(a,b){8(1o(b)){b=b.1g(a)}8(1G(b)){b={'4f':K}}8(3p(b)){b={'4f':b}}O 8(Z(b)){b={'D':b}}G b}C 6H(a,b){8(!1l(b.4f)){b.4f=I}8(!1l(b.5V)){b.5V=K}8(!1D(b.2I)){b.2I={}}8(!1l(b.2I.7A)){b.2I.7A=K}G b}C 6w(a,b){8(1o(b)){b=b.1g(a)}8(3p(b)){b={}}O 8(Z(b)){b={'D':b}}O 8(1G(b)){b=K}G b}C 6I(a,b){G b}C 3J(a,b,c,d,e){8(1p(a)){a=$(a,e)}8(1D(a)){a=$(a,e)}8(2u(a)){a=e.14().7b(a);8(!1l(c)){c=K}}O{8(!1l(c)){c=I}}8(!Z(a)){a=0}8(!Z(b)){b=0}8(c){a+=d.11}a+=b;8(d.P>0){2h(a>=d.P){a-=d.P}2h(a<0){a+=d.P}}G a}C 4B(i,o,s){E t=0,x=0;1j(E a=s;a>=0;a--){E j=i.1O(a);t+=(j.2f(':L'))?j[o.d['2v']](I):0;8(t>o.4p){G x}8(a==0){a=i.S}x++}}C 7d(i,o,s){G 6e(i,o.D.1t,o.D.T.4s,s)}C 6V(i,o,s,m){G 6e(i,o.D.1t,m,s)}C 6e(i,f,m,s){E t=0,x=0;1j(E a=s,l=i.S;a>=0;a--){x++;8(x==l){G x}E j=i.1O(a);8(j.2f(f)){t++;8(t==m){G x}}8(a==0){a=l}}}C 5z(a,o){G o.D.T.4s||a.14().17(0,o.D.L).1t(o.D.1t).S}C 32(i,o,s){E t=0,x=0;1j(E a=s,l=i.S-1;a<=l;a++){E j=i.1O(a);t+=(j.2f(':L'))?j[o.d['2v']](I):0;8(t>o.4p){G x}x++;8(x==l+1){G x}8(a==l){a=-1}}}C 5L(i,o,s,l){E v=32(i,o,s);8(!o.1T){8(s+v>l){v=l-s}}G v}C 3U(i,o,s){G 6f(i,o.D.1t,o.D.T.4s,s,o.1T)}C 71(i,o,s,m){G 6f(i,o.D.1t,m+1,s,o.1T)-1}C 6f(i,f,m,s,c){E t=0,x=0;1j(E a=s,l=i.S-1;a<=l;a++){x++;8(x>=l){G x}E j=i.1O(a);8(j.2f(f)){t++;8(t==m){G x}}8(a==l){a=-1}}}C 3I(i,o){G i.17(0,o.D.L)}C 6X(i,o,n){G i.17(n,o.D.T.1Z+n)}C 6Y(i,o){G i.17(0,o.D.L)}C 73(i,o){G i.17(0,o.D.T.1Z)}C 74(i,o,n){G i.17(n,o.D.L+n)}C 4w(i,o,d){8(o.1R){8(!1p(d)){d='29'}i.1W(C(){E j=$(1k),m=4h(j.X(o.d['1S']),10);8(!Z(m)){m=0}j.1m(d,m)})}}C 1U(i,o,m){8(o.1R){E x=(1l(m))?m:K;8(!Z(m)){m=0}4w(i,o,'7B');i.1W(C(){E j=$(1k);j.X(o.d['1S'],((x)?j.1m('7B'):m+j.1m('29')))})}}C 5r(i,o){8(o.2m){i.1W(C(){E j=$(1k),s=5n(j,['N','1d']);j.1m('7e',s)})}}C 5s(o,b){E c=o.D.L,7C=o.D[o.d['N']],6g=o[o.d['1d']],7D=3T(6g);b.1W(C(){E a=$(1k),6h=7C-7E(a,o,'92');a[o.d['N']](6h);8(7D){a[o.d['1d']](4r(6h,6g))}})}C 4P(a,o){E b=a.68(),$i=a.14(),$v=3I($i,o),52=4H(4I($v,o,I),o,K);b.X(52);8(o.1R){E p=o.1i,r=p[o.d[1]];8(o.1A&&r<0){r=0}E c=$v.3i();c.X(o.d['1S'],c.1m('29')+r);a.X(o.d['3q'],p[o.d[0]]);a.X(o.d['1n'],p[o.d[3]])}a.X(o.d['N'],52[o.d['N']]+(2R($i,o,'N')*2));a.X(o.d['1d'],6i($i,o,'1d'));G 52}C 4I(i,o,a){G[2R(i,o,'N',a),6i(i,o,'1d',a)]}C 6i(i,o,a,b){8(!1l(b)){b=K}8(Z(o[o.d[a]])&&b){G o[o.d[a]]}8(Z(o.D[o.d[a]])){G o.D[o.d[a]]}a=(a.6j().3Q('N')>-1)?'2v':'3n';G 4k(i,o,a)}C 4k(i,o,b){E s=0;1j(E a=0,l=i.S;a<l;a++){E j=i.1O(a);E m=(j.2f(':L'))?j[o.d[b]](I):0;8(s<m){s=m}}G s}C 2R(i,o,b,c){8(!1l(c)){c=K}8(Z(o[o.d[b]])&&c){G o[o.d[b]]}8(Z(o.D[o.d[b]])){G o.D[o.d[b]]*i.S}E d=(b.6j().3Q('N')>-1)?'2v':'3n',s=0;1j(E a=0,l=i.S;a<l;a++){E j=i.1O(a);s+=(j.2f(':L'))?j[o.d[d]](I):0}G s}C 5b(a,o,d){E b=a.2f(':L');8(b){a.4g()}E s=a.68()[o.d[d]]();8(b){a.4j()}G s}C 5c(o,a){G(Z(o[o.d['N']]))?o[o.d['N']]:a}C 6k(i,o,b){E s=K,v=K;1j(E a=0,l=i.S;a<l;a++){E j=i.1O(a);E c=(j.2f(':L'))?j[o.d[b]](I):0;8(s===K){s=c}O 8(s!=c){v=I}8(s==0){v=I}}G v}C 7E(i,o,d){G i[o.d['93'+d]](I)-i[o.d[d.6j()]]()}C 4r(s,o){8(3T(o)){o=4h(o.17(0,-1),10);8(!Z(o)){G s}s*=o/2J}G s}C H(n,c,a,b,d){8(!1l(a)){a=I}8(!1l(b)){b=I}8(!1l(d)){d=K}8(a){n=c.3x.42+n}8(b){n=n+'.'+c.3x.7u}8(b&&d){n+=c.3S}G n}C 2z(n,c){G(1p(c.6a[n]))?c.6a[n]:n}C 4H(a,o,p){8(!1l(p)){p=I}E b=(o.1R&&p)?o.1i:[0,0,0,0];E c={};c[o.d['N']]=a[0]+b[1]+b[3];c[o.d['1d']]=a[1]+b[0]+b[2];G c}C 3d(c,d){E e=[];1j(E a=0,7F=c.S;a<7F;a++){1j(E b=0,7G=d.S;b<7G;b++){8(d[b].3Q(2X c[a])>-1&&1G(e[b])){e[b]=c[a];16}}}G e}C 6D(p){8(1G(p)){G[0,0,0,0]}8(Z(p)){G[p,p,p,p]}8(1p(p)){p=p.3P('94').7H('').3P('95').7H('').3P(' ')}8(!2V(p)){G[0,0,0,0]}1j(E i=0;i<4;i++){p[i]=4h(p[i],10)}1B(p.S){Q 0:G[0,0,0,0];Q 1:G[p[0],p[0],p[0],p[0]];Q 2:G[p[0],p[1],p[0],p[1]];Q 3:G[p[0],p[1],p[2],p[1]];2y:G[p[0],p[1],p[2],p[3]]}}C 4G(a,o){E x=(Z(o[o.d['N']]))?1I.2A(o[o.d['N']]-2R(a,o,'N')):0;1B(o.1A){Q'1n':G[0,x];Q'35':G[x,0];Q'5d':2y:G[1I.2A(x/2),1I.4i(x/2)]}}C 6x(o){E a=[['N','7I','2v','1d','7J','3n','1n','3q','1S',0,1,2,3],['1d','7J','3n','N','7I','2v','3q','1n','5o',3,2,1,0]];E b=a[0].S,7K=(o.2b=='35'||o.2b=='1n')?0:1;E c={};1j(E d=0;d<b;d++){c[a[0][d]]=a[7K][d]}G c}C 4C(x,o,a,b){E v=x;8(1o(a)){v=a.1g(b,v)}O 8(1p(a)){E p=a.3P('+'),m=a.3P('-');8(m.S>p.S){E c=I,6l=m[0],2Z=m[1]}O{E c=K,6l=p[0],2Z=p[1]}1B(6l){Q'96':v=(x%2==1)?x-1:x;16;Q'97':v=(x%2==0)?x-1:x;16;2y:v=x;16}2Z=4h(2Z,10);8(Z(2Z)){8(c){2Z=-2Z}v+=2Z}}8(!Z(v)||v<1){v=1}G v}C 2x(x,o,a,b){G 6m(4C(x,o,a,b),o.D.T)}C 6m(v,i){8(Z(i.34)&&v<i.34){v=i.34}8(Z(i.1X)&&v>i.1X){v=i.1X}8(v<1){v=1}G v}C 5i(s){8(!2V(s)){s=[[s]]}8(!2V(s[0])){s=[s]}1j(E j=0,l=s.S;j<l;j++){8(1p(s[j][0])){s[j][0]=$(s[j][0])}8(!1l(s[j][1])){s[j][1]=I}8(!1l(s[j][2])){s[j][2]=I}8(!Z(s[j][3])){s[j][3]=0}}G s}C 6d(k){8(k=='35'){G 39}8(k=='1n'){G 37}8(k=='4o'){G 38}8(k=='5U'){G 40}G-1}C 5K(n,a,c){8(n){E v=a.1Q(H('4m',c));$.1r.1v.25.6b(n,v)}}C 7q(n){E c=$.1r.1v.25.3F(n);G(c=='')?0:c}C 5n(a,b){E c={},53;1j(E p=0,l=b.S;p<l;p++){53=b[p];c[53]=a.X(53)}G c}C 6y(a,b,c,d){8(!1D(a.T)){a.T={}}8(!1D(a.3M)){a.3M={}}8(a.3m==0&&Z(d)){a.3m=d}8(1D(a.L)){a.T.34=a.L.34;a.T.1X=a.L.1X;a.L=K}O 8(1p(a.L)){8(a.L=='1c'){a.T.1c=I}O{a.T.2c=a.L}a.L=K}O 8(1o(a.L)){a.T.2c=a.L;a.L=K}8(!1p(a.1t)){a.1t=(c.1t(':3r').S>0)?':L':'*'}8(!a[b.d['N']]){8(b.2m){18(I,'7L a '+b.d['N']+' 1j 4c D!');a[b.d['N']]=4k(c,b,'2v')}O{a[b.d['N']]=(6k(c,b,'2v'))?'1c':c[b.d['2v']](I)}}8(!a[b.d['1d']]){a[b.d['1d']]=(6k(c,b,'3n'))?'1c':c[b.d['3n']](I)}a.3M.N=a.N;a.3M.1d=a.1d;G a}C 6C(a,b){8(a.D[a.d['N']]=='1c'){a.D.T.1c=I}8(!a.D.T.1c){8(Z(a[a.d['N']])){a.D.L=1I.4i(a[a.d['N']]/a.D[a.d['N']])}O{a.D.L=1I.4i(b/a.D[a.d['N']]);a[a.d['N']]=a.D.L*a.D[a.d['N']];8(!a.D.T.2c){a.1A=K}}8(a.D.L=='98'||a.D.L<1){18(I,'2p a 5N 27 4a L D: 7L 4D \"1c\".');a.D.T.1c=I}}G a}C 6z(a,b,c){8(a=='M'){a=4k(c,b,'2v')}G a}C 6A(a,b,c){8(a=='M'){a=4k(c,b,'3n')}8(!a){a=b.D[b.d['1d']]}G a}C 5g(o,a){E p=4G(3I(a,o),o);o.1i[o.d[1]]=p[1];o.1i[o.d[3]]=p[0];G o}C 5e(o,a,b){E c=6m(1I.2A(o[o.d['N']]/o.D[o.d['N']]),o.D.T);8(c>a.S){c=a.S}E d=1I.4i(o[o.d['N']]/c);o.D.L=c;o.D[o.d['N']]=d;o[o.d['N']]=c*d;G o}C 3N(p){8(1p(p)){E i=(p.3Q('99')>-1)?I:K,r=(p.3Q('3f')>-1)?I:K}O{E i=r=K}G[i,r]}C 5Y(a){G(Z(a))?a:2H}C 6n(a){G(a===2H)}C 1G(a){G(6n(a)||2X a=='7M'||a===''||a==='7M')}C 2V(a){G(a 2W 9a)}C 2u(a){G(a 2W 7N)}C 1D(a){G((a 2W 9b||2X a=='2g')&&!6n(a)&&!2u(a)&&!2V(a))}C Z(a){G((a 2W 48||2X a=='27')&&!9c(a))}C 1p(a){G((a 2W 9d||2X a=='2N')&&!1G(a)&&!3p(a)&&!51(a))}C 1o(a){G(a 2W 9e||2X a=='C')}C 1l(a){G(a 2W 9f||2X a=='3c'||3p(a)||51(a))}C 3p(a){G(a===I||a==='I')}C 51(a){G(a===K||a==='K')}C 3T(x){G(1p(x)&&x.17(-1)=='%')}C 2o(){G 6c 7y().2o()}C 2K(o,n){18(I,o+' 2f 9g, 9h 1j 9i 9j 9k 9l. 9m '+n+' 9n.')}C 18(d,m){8(1D(d)){E s=' ('+d.4l+')';d=d.18}O{E s=''}8(!d){G K}8(1p(m)){m='1v'+s+': '+m}O{m=['1v'+s+':',m]}8(3l.6o&&3l.6o.7O){3l.6o.7O(m)}G K}$.1N($.2k,{'9o':C(t){E a=t*t;G t*(-a*t+4*a-6*t+4)},'9p':C(t){G t*(4*t*t-9*t+6)},'9q':C(t){E a=t*t;G t*(33*a*a-9r*a*t+9s*a-67*t+15)}})})(7N);",62,587,"|||||||opts|if||||||||||||||||||||||||||||||function|items|var|conf|return|cf_e|true|itms|false|visible|auto|width|else|total|case|trigger|length|visibleConf|scrl|prev|button|css|next|is_number||first|bind|tt0|children||break|slice|debug|anims|pagination|push|variable|height|progress|stopPropagation|call|mousewheel|padding|for|this|is_boolean|data|left|is_function|is_string|swipe|fn|wrp|filter|tmrs|carouFredSel|fade|_onafter|_moveitems|container|align|switch|duration|is_object|_s_paddingold|_s_paddingcur|is_undefined|play|Math|cover|_position|opacity|scroll|extend|eq|_a_wrapper|triggerHandler|usePadding|marginRight|circular|sz_resetMargin|fx|each|max|i_cur_l|old|isScrolling|i_old_l|uncover|unbind||cookie|isPaused|number|a_cfs|_cfs_origCssMargin|clbk|direction|adjust|isStopped|stopImmediatePropagation|is|object|while|i_new|w_siz|easing|nr|responsive|synchronise|getTime|Not|bar|i_new_l|a_cur|remove|is_jquery|outerWidth|avail_primary|cf_getItemsAdjust|default|cf_c|ceil|pR|_s_paddingnew|queu|preventDefault|a_itm|pauseOnHover|null|options|100|deprecated|timeoutDuration|startTime|string|removeClass|sc_startScroll|i_skp|ms_getTotalSize|a_old|a_lef|a_dur|is_array|instanceof|typeof|key|adj||opts_orig|gn_getVisibleItemsNext||min|right|addClass||||pause|perc|boolean|cf_sortParams|scrolling|resume|onAfter|i_old|last|crossfade|slideTo|window|start|outerHeight|_cfs_triggerEvent|is_true|top|hidden|sc_clearTimers|pre|post|timePassed|Carousel|events|queue|infinite|nv_enableNavi|i_siz|i_siz_vis|_a_paddingold|_a_paddingcur|get|onBefore|updatePageStatus|gi_getCurrentItems|gn_getItemIndex|anchorBuilder|event|sizesConf|bt_pauseOnHoverConfig|ns2|split|indexOf|go_getObject|serialNumber|is_percentage|gn_getVisibleItemsNextFilter|orgCSS|position|zIndex|none|sc_stopScroll||dur2|prefix|appendTo|sc_setScroll|sc_fireCallbacks|currentPage|before|Number||of|document|the|touchwipe|wN|onTouch|hide|parseInt|floor|show|ms_getTrueLargestSize|selector|currentPosition|destroy|up|maxDimension|primarySizePercentage|ms_getPercentage|org|onTimeoutStart|onTimeoutPause|onTimeoutEnd|sz_storeMargin|stopped|updater|minimum|configuration|gn_getVisibleItemsPrev|cf_getAdjust|to|onEnd|clone|cf_getAlignPadding|cf_mapWrapperSizes|ms_getSizes|a_wsz|a_new|a_cfs_vis|end|updateSizes|eval|sz_setSizes|pgs|deviation|nv_showNavi|mouseenter|mouseleave|pauseOnEvent|keys|wipe|di|go_getNaviObject||is_false|sz|prop|element|starting_position|_cfs_isCarousel|_cfs_init||go_getPrevNextObject|defaults|ms_getParentSize|ms_getMaxDimension|center|in_getResponsiveValues|bottom|in_getAlignPadding|go_complementPrevNextObject|cf_getSynchArr|onPauseStart|onPausePause|onPauseEnd|pauseDuration|in_mapCss|marginBottom|newPosition|_cfs_origCss|sz_storeSizes|sz_setResponsiveSizes|_cfs_unbind_events|stop|finish|interval|type|conditions|gn_getVisibleOrg|backward|sc_hideHiddenItems|a_lef_vis|sc_getDuration|_a_paddingnew|not|sc_showHiddenItems|sc_mapCallbackArguments|sc_afterScroll|sc_fireQueue|cf_setCookie|gn_getVisibleItemsNextTestCircular|slideToPage|valid|linkAnchors|value|_cfs_bind_buttons|click|_cfs_unbind_buttons|scrolled|down|onMouse|swP|swN|bt_mousesheelNumber|delay||_windowWidth|_windowHeight|nh|pauseOnResize|ns3|wrapper||parent|continue|classnames|set|new|cf_getKeyCode|gn_getItemsPrevFilter|gn_getItemsNextFilter|seco|nw|ms_getLargestSize|toLowerCase|ms_hasVariableSizes|sta|cf_getItemAdjustMinMax|is_null|console|caroufredsel|No|go_getItemsObject|go_getScrollObject|go_getAutoObject|go_getPaginationObject|go_getSwipeObject|go_getMousewheelObject|cf_getDimensions|in_complementItems|in_complementPrimarySize|in_complementSecondarySize|upDateOnWindowResize|in_complementVisibleItems|cf_getPadding|500|go_complementAutoObject|go_complementPaginationObject|go_complementSwipeObject|go_complementMousewheelObject|_cfs_build|textAlign|float|marginTop|marginLeft|absolute|_cfs_bind_events|paused|enough|needed|page|slide_|gn_getScrollItemsPrevFilter|Scrolling|gi_getOldItemsPrev|gi_getNewItemsPrev|directscroll|concat|gn_getScrollItemsNextFilter|forward|gi_getOldItemsNext|gi_getNewItemsNext|jumpToStart|after|append|removeItem|round|hash|index|selected|gn_getVisibleItemsPrevFilter|_cfs_origCssSizes|Item|keyup|keyCode|plugin|scN|cursor|The|option|mcN|configs|classname|cf_getCookie|random|itm|onCreate|namespace|pageAnchorBuilder|span|progressbarUpdater|Date|_cfs_isHidden|triggerOnTouchEnd|_cfs_tempCssMargin|newS|secp|ms_getPaddingBorderMargin|l1|l2|join|innerWidth|innerHeight|dx|Set|undefined|jQuery|log|found|caroufredsel_cookie_|relative|fixed|overflow|setInterval|setTimeout|or|Callback|returned|Page|resumed|currently|slide_prev|prependTo|slide_next|prevPage|nextPage|prepend|carousel|insertItem|add|detach|currentVisible|body|find|Preventing|non|sliding|replaceWith|widths|heights|automatically|touchSwipe|min_move_x|min_move_y|preventDefaultEvents|wipeUp|wipeDown|wipeLeft|wipeRight|ontouchstart|in|swipeUp|swipeDown|swipeLeft|swipeRight|move|resize|wrap|class|unshift|location|swing|cfs|div|caroufredsel_wrapper|href|charAt|setTime|1000|expires|toGMTString|path|orgDuration|animate|complete|shift|clearTimeout|clearInterval|skipped|Hiding|navigation|disabled|2500|Width|outer|px|em|even|odd|Infinity|immediate|Array|Object|isNaN|String|Function|Boolean|DEPRECATED|support|it|will|be|removed|Use|instead|quadratic|cubic|elastic|106|126".split("|"),0,{})),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,b={timestamp:"E8PD",version:"4.4.5 (Standard)",revision:"25cdcad",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var b=window.CKEDITOR_BASEPATH||"";
if(!b)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var e=c[d].src.match(a);if(e){b=e[1];break}}if(-1==b.indexOf(":/")&&"//"!=b.slice(0,2)&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b),!b)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return b}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var a;a=c.shift();)a()}var c=[];return function(b){function d(){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(d,1)}a()}if(c.push(b),"complete"===document.readyState&&setTimeout(a,1),1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),b=!1;try{b=!window.frameElement}catch(e){}document.documentElement.doScroll&&b&&d()}}}()},c=window.CKEDITOR_GETURL;if(c){var d=b.getUrl;b.getUrl=function(a){return c.call(b,a)||d.call(b,a)}}return b}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var b,c=CKEDITOR.event.prototype;for(b in c)null==a[b]&&(a[b]=c[b])},CKEDITOR.event.prototype=function(){function a(a){var d=b(this);return d[a]||(d[a]=new c(a))}var b=function(a){return a=a.getPrivate&&a.getPrivate()||a._||(a._={}),a.events||(a.events={})},c=function(a){this.name=a,this.listeners=[]};return c.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{define:function(b,c){var d=a.call(this,b);CKEDITOR.tools.extend(d,c,!0)},on:function(b,c,d,e,f){function g(a,f,g,i){return a={name:b,sender:this,editor:a,data:f,listenerData:e,stop:g,cancel:i,removeListener:h},c.call(d,a)===!1?!1:a.data}function h(){j.removeListener(b,c)}var i=a.call(this,b);if(i.getListenerIndex(c)<0){i=i.listeners,d||(d=this),isNaN(f)&&(f=10);var j=this;g.fn=c,g.priority=f;for(var k=i.length-1;k>=0;k--)if(i[k].priority<=f)return i.splice(k+1,0,g),{removeListener:h};i.unshift(g)}return{removeListener:h}},once:function(){var a=Array.prototype.slice.call(arguments),b=a[1];return a[1]=function(a){return a.removeListener(),b.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,c=function(){a=1},d=0,e=function(){d=1};return function(f,g,h){var i=b(this)[f],f=a,j=d;if(a=d=0,i){var k=i.listeners;if(k.length)for(var l,k=k.slice(0),m=0;m<k.length;m++){if(i.errorProof)try{l=k[m].call(this,h,g,c,e)}catch(n){}else l=k[m].call(this,h,g,c,e);if(l===!1?d=1:"undefined"!=typeof l&&(g=l),a||d)break}}return g=d?!1:"undefined"==typeof g?!0:g,a=f,d=j,g}}(),fireOnce:function(a,c,d){return c=this.fire(a,c,d),delete b(this)[a],c},removeListener:function(a,c){var d=b(this)[a];if(d){var e=d.getListenerIndex(c);e>=0&&d.listeners.splice(e,1)}},removeAllListeners:function(){var a,c=b(this);for(a in c)delete c[a]},hasListeners:function(a){return(a=b(this)[a])&&a.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,b){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fire.call(this,a,b,this)},CKEDITOR.editor.prototype.fireOnce=function(a,b){return a in{instanceReady:1,loaded:1}&&(this[a]=!0),CKEDITOR.event.prototype.fireOnce.call(this,a,b,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),b={ie:a.indexOf("trident/")>-1,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:a.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"},secure:"https:"==location.protocol};b.gecko="Gecko"==navigator.product&&!b.webkit&&!b.ie,b.webkit&&(a.indexOf("chrome")>-1?b.chrome=!0:b.safari=!0);var c=0;if(b.ie&&(c=b.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,b.ie9Compat=9==c,b.ie8Compat=8==c,b.ie7Compat=7==c,b.ie6Compat=7>c||b.quirks),b.gecko){var d=a.match(/rv:([\d\.]+)/);d&&(d=d[1].split("."),c=1e4*d[0]+100*(d[1]||0)+1*(d[2]||0))}return b.air&&(c=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),b.webkit&&(c=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),b.version=c,b.isCompatible=b.iOS&&c>=534||!b.mobile&&(b.ie&&c>6||b.gecko&&c>=2e4||b.air&&c>=1||b.webkit&&c>=522||!1),b.hidpi=window.devicePixelRatio>=2,b.needsBrFiller=b.gecko||b.webkit||b.ie&&c>10,b.needsNbspFiller=b.ie&&11>c,b.cssClass="cke_browser_"+(b.ie?"ie":b.gecko?"gecko":b.webkit?"webkit":"unknown"),b.quirks&&(b.cssClass=b.cssClass+" cke_browser_quirks"),b.ie&&(b.cssClass=b.cssClass+(" cke_browser_ie"+(b.quirks?"6 cke_browser_iequirks":b.version))),b.air&&(b.cssClass=b.cssClass+" cke_browser_air"),b.iOS&&(b.cssClass=b.cssClass+" cke_browser_ios"),b.hidpi&&(b.cssClass=b.cssClass+" cke_hidpi"),b}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript",a.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(a)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)},function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,b=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():b&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*b))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var a=[],b=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",c=/&/g,d=/>/g,e=/</g,f=/"/g,g=/&amp;/g,h=/&gt;/g,i=/&lt;/g,j=/&quot;/g;CKEDITOR.on("reset",function(){a=[]}),CKEDITOR.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=CKEDITOR.tools.clone(a[c]);return b}if(null===a||"object"!=typeof a||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp||a.nodeType||a.window===a)return a;b=new a.constructor;for(c in a)b[c]=CKEDITOR.tools.clone(a[c]);return b},capitalize:function(a,b){return a.charAt(0).toUpperCase()+(b?a.slice(1):a.slice(1).toLowerCase())},extend:function(a){var b,c,d=arguments.length;"boolean"==typeof(b=arguments[d-1])?d--:"boolean"==typeof(b=arguments[d-2])&&(c=arguments[d-1],d-=2);for(var e=1;d>e;e++){var f,g=arguments[e];for(f in g)(b===!0||null==a[f])&&(!c||f in c)&&(a[f]=g[f])}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},copy:function(a){var b,c={};for(b in a)c[b]=a[b];return c},isArray:function(a){return"[object Array]"==Object.prototype.toString.call(a)},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssVendorPrefix:function(a,c,d){return d?b+a+":"+c+";"+a+":"+c:(d={},d[a]=c,d[b+a]=c,d)},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b="undefined"!=typeof a.cssFloat?"cssFloat":"undefined"!=typeof a.styleFloat?"styleFloat":"float";return function(a){return"float"==a?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){for(var b,a=[].concat(a),c=[],d=0;d<a.length;d++)(b=a[d])&&c.push(/@import|[{}]/.test(b)?"<style>"+b+"</style>":'<link type="text/css" rel=stylesheet href="'+b+'">');return c.join("")},htmlEncode:function(a){return(""+a).replace(c,"&amp;").replace(d,"&gt;").replace(e,"&lt;")},htmlDecode:function(a){return a.replace(g,"&").replace(h,">").replace(i,"<")},htmlEncodeAttr:function(a){return a.replace(f,"&quot;").replace(e,"&lt;").replace(d,"&gt;")},htmlDecodeAttr:function(a){return a.replace(j,'"').replace(i,"<").replace(h,">")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(a,b){var c=b(a);return c.prototype=a.prototype,c},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:function(a,b){if("function"==typeof b){for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return c}else{if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c}return-1},search:function(a,b){var c=CKEDITOR.tools.indexOf(a,b);return c>=0?a[c]:null},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(a){var b=a.$,c=a.base,d=a.privates||a._,e=a.proto,a=a.statics;if(!b&&(b=function(){c&&this.base.apply(this,arguments)}),d)var f=b,b=function(){var a,b=this._||(this._={});for(a in d){var c=d[a];b[a]="function"==typeof c?CKEDITOR.tools.bind(c,this):c}f.apply(this,arguments)};return c&&(b.prototype=this.prototypedCopy(c.prototype),b.prototype.constructor=b,b.base=c,b.baseProto=c.prototype,b.prototype.base=function(){this.base=c.prototype.base,c.apply(this,arguments),this.base=arguments.callee}),e&&this.extend(b.prototype,e,!0),a&&this.extend(b,a,!0),b},addFunction:function(b,c){return a.push(function(){return b.apply(c||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var c=a[b];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a,b=/^-?\d+\.?\d*px$/;return function(c){return a=CKEDITOR.tools.trim(c+"")+"px",b.test(a)?a:c||""}}(),convertToPx:function(){var a;return function(b){return a||(a=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(a)),/%$/.test(b)?b:(a.setStyle("width",b),a.$.clientWidth)}}(),repeat:function(a,b){return Array(b+1).join(a)},tryThese:function(){for(var a,b=0,c=arguments.length;c>b;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(a){return function(){var b=arguments,c=this;window.setTimeout(function(){a.apply(c,b)},0)}},normalizeCssText:function(a,b){var c,d=[],e=CKEDITOR.tools.parseCssText(a,!0,b);for(c in e)d.push(c+":"+e[c]);return d.sort(),d.length?d.join(";")+";":""},convertRgbToHex:function(a){return a.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,d){for(a=[b,c,d],b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);return"#"+a.join("")})},parseCssText:function(a,b,c){var d={};return c&&(c=new CKEDITOR.dom.element("span"),c.setAttribute("style",a),a=CKEDITOR.tools.convertRgbToHex(c.getAttribute("style")||"")),a&&";"!=a?(a.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,e){b&&(c=c.toLowerCase(),"font-family"==c&&(e=e.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),e=CKEDITOR.tools.trim(e)),d[c]=e}),d):d},writeCssText:function(a,b){var c,d=[];for(c in a)d.push(c+":"+a[c]);return b&&d.sort(),d.join("; ")},objectCompare:function(a,b,c){var d;if(!a&&!b)return!0;if(!a||!b)return!1;for(d in a)if(a[d]!=b[d])return!1;if(!c)for(d in b)if(a[d]!=b[d])return!1;return!0},objectKeys:function(a){var b,c=[];for(b in a)c.push(b);return c},convertArrayToObject:function(a,b){var c={};1==arguments.length&&(b=!0);for(var d=0,e=a.length;e>d;++d)c[a[d]]=b;return c},fixDomain:function(){for(var a;;)try{a=window.parent.document.domain;break}catch(b){if(a=a?a.replace(/.+?(?:\.|$)/,""):document.domain,!a)break;document.domain=a}return!!a},eventsBuffer:function(a,b){function c(){e=(new Date).getTime(),d=!1,b()}var d,e=0;return{input:function(){if(!d){var b=(new Date).getTime()-e;a>b?d=setTimeout(c,a-b):c()}},reset:function(){d&&clearTimeout(d),d=e=0}}},enableHtml5Elements:function(a,b){for(var c,d=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],e=d.length;e--;)c=a.createElement(d[e]),b&&a.appendChild(c)},checkIfAnyArrayItemMatches:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c].match(b))return!0;return!1},checkIfAnyObjectPropertyMatches:function(a,b){for(var c in a)if(c.match(b))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}}(),CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,b=function(a,b){for(var c=CKEDITOR.tools.clone(a),d=1;d<arguments.length;d++){var e,b=arguments[d];for(e in b)delete c[e]}return c},c={},d={},e={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},f={command:1,link:1,meta:1,noscript:1,script:1,style:1},g={},h={"#":1},i={center:1,dir:1,noframes:1};return a(c,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},h,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),a(d,e,c,i),b={a:b(c,{a:1,button:1}),abbr:c,address:d,area:g,article:a({style:1},d),aside:a({style:1},d),audio:a({source:1,track:1},d),b:c,base:g,bdi:c,bdo:c,blockquote:d,body:d,br:g,button:b(c,{a:1,button:1}),canvas:c,caption:d,cite:c,code:c,col:g,colgroup:{col:1},command:g,datalist:a({option:1},c),dd:d,del:c,details:a({summary:1},d),dfn:c,div:a({style:1},d),dl:{dt:1,dd:1},dt:d,em:c,embed:g,fieldset:a({legend:1},d),figcaption:d,figure:a({figcaption:1},d),footer:d,form:d,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:a({title:1,base:1},f),header:d,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:g,html:a({head:1,body:1},d,f),i:c,iframe:h,img:g,input:g,ins:c,kbd:c,keygen:g,label:c,legend:c,li:d,link:g,map:d,mark:c,menu:a({li:1},d),meta:g,meter:b(c,{meter:1}),nav:d,noscript:a({link:1,meta:1,style:1},c),object:a({param:1},c),ol:{li:1},optgroup:{option:1},option:h,output:c,p:c,param:g,pre:c,progress:b(c,{progress:1}),q:c,rp:c,rt:c,ruby:a({rp:1,rt:1},c),s:c,samp:c,script:h,section:a({style:1},d),select:{optgroup:1,option:1},small:c,source:g,span:c,strong:c,style:h,sub:c,summary:c,sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:d,textarea:h,tfoot:{tr:1},th:d,thead:{tr:1},time:b(c,{time:1}),title:h,tr:{th:1,td:1},track:g,u:c,ul:{li:1},"var":c,video:a({source:1,track:1},d),wbr:g,acronym:c,applet:a({param:1},d),basefont:g,big:c,center:d,dialog:g,dir:{li:1},font:c,isindex:g,noframes:d,strike:c,tt:c},a(b,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},e,i),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},b.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),b}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(a+=CKEDITOR.CTRL),this.$.shiftKey&&(a+=CKEDITOR.SHIFT),this.$.altKey&&(a+=CKEDITOR.ALT),a},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(a,b){return function(c){"undefined"!=typeof CKEDITOR&&a.fire(b,new CKEDITOR.dom.event(c))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(b){var c=this.getCustomData("_cke_nativeListeners");return c||(c={},this.setCustomData("_cke_nativeListeners",c)),c[b]||(c=c[b]=a(this,b),this.$.addEventListener?this.$.addEventListener(b,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+b,c)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(a)){var b=this.getCustomData("_cke_nativeListeners"),c=b&&b[a];c&&(this.$.removeEventListener?this.$.removeEventListener(a,c,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,c),delete b[a])}},removeAllListeners:function(){var a,b=this.getCustomData("_cke_nativeListeners");for(a in b){var c=b[a];this.$.detachEvent?this.$.detachEvent("on"+a,c):this.$.removeEventListener&&this.$.removeEventListener(a,c,!1),delete b[a]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var b={};CKEDITOR.on("reset",function(){b={}}),a.equals=function(a){try{return a&&a.$===this.$}catch(b){return!1}},a.setCustomData=function(a,c){var d=this.getUniqueId();return(b[d]||(b[d]={}))[a]=c,this},a.getCustomData=function(a){var c=this.$["data-cke-expando"];return(c=c&&b[c])&&a in c?c[a]:null},a.removeCustomData=function(a){var c,d,e=this.$["data-cke-expando"],e=e&&b[e];return e&&(c=e[a],d=a in e,delete e[a]),d?c:null},a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete b[a]},a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){var c=this.$.cloneNode(a),d=function(c){if(c["data-cke-expando"]&&(c["data-cke-expando"]=!1),c.nodeType==CKEDITOR.NODE_ELEMENT&&(b||c.removeAttribute("id",!1),a))for(var c=c.childNodes,e=0;e<c.length;e++)d(c[e])};return d(c),new CKEDITOR.dom.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){for(var b=[],c=this.getDocument().$.documentElement,d=this.$;d&&d!=c;){var e=d.parentNode;e&&b.unshift(this.getIndex.call({$:d},a)),d=e}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){var b,c=this.$,d=-1;if(!this.$.parentNode)return d;do(!a||c==this.$||c.nodeType!=CKEDITOR.NODE_TEXT||!b&&c.nodeValue)&&(d++,b=c.nodeType==CKEDITOR.NODE_TEXT);while(c=c.previousSibling);return d},getNextSourceNode:function(a,b,c){if(c&&!c.call)var d=c,c=function(a){return!a.equals(d)};var e,a=!a&&this.getFirst&&this.getFirst();if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,!0)===!1)return null;a=this.getNext()}for(;!a&&(e=(e||this).getParent());){if(c&&c(e,!0)===!1)return null;a=e.getNext()}return!a||c&&c(a)===!1?null:b&&b!=a.type?a.getNextSourceNode(!1,b,c):a},getPreviousSourceNode:function(a,b,c){if(c&&!c.call)var d=c,c=function(a){return!a.equals(d)};var e,a=!a&&this.getLast&&this.getLast();if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,!0)===!1)return null;a=this.getPrevious()}for(;!a&&(e=(e||this).getParent());){if(c&&c(e,!0)===!1)return null;a=e.getPrevious()}return!a||c&&c(a)===!1?null:b&&a.type!=b?a.getPreviousSourceNode(!1,b,c):a},getPrevious:function(a){var b,c=this.$;do b=(c=c.previousSibling)&&10!=c.nodeType&&new CKEDITOR.dom.node(c);while(b&&a&&!a(b));return b},getNext:function(a){var b,c=this.$;do b=(c=c.nextSibling)&&new CKEDITOR.dom.node(c);while(b&&a&&!a(b));return b},getParent:function(a){var b=this.$.parentNode;return b&&(b.nodeType==CKEDITOR.NODE_ELEMENT||a&&b.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(b):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var b=this.contains?this:this.getParent();do if(b.contains(a))return b;while(b=b.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(b.contains){if(b.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(b))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:b.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var b=this.getAddress(),a=a.getAddress(),c=Math.min(b.length,a.length),d=0;c-1>=d;d++)if(b[d]!=a[d]){if(c>d)return b[d]<a[d]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return b.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,b){var c,d,e=this.$;b||(e=e.parentNode),"function"==typeof a?(d=!0,c=a):(d=!1,c=function(b){return b="string"==typeof b.nodeName?b.nodeName.toLowerCase():"","string"==typeof a?b==a:b in a});for(;e;){if(c(d?new CKEDITOR.dom.node(e):e))return new CKEDITOR.dom.node(e);try{e=e.parentNode}catch(f){e=null}}return null},hasAscendant:function(a,b){var c=this.$;for(b||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(;a=b.firstChild;)c.insertBefore(b.removeChild(a),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(!b){a.remove();continue}b.length<c&&(a.split(c-b.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.rtrim(a.getText()),c=a.getLength();if(!b){a.remove();continue}b.length<c&&(a.split(b.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(){var a=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(a=this.getParent()),a&&"undefined"!=typeof a.$.isContentEditable)return!(a.$.isContentEditable||a.data("cke-editable"));for(;a&&!a.data("cke-editable");){if("false"==a.getAttribute("contentEditable"))return!0;if("true"==a.getAttribute("contentEditable"))break;a=a.getParent()}return!a}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;return"pageXOffset"in a?{x:a.pageXOffset||0,y:a.pageYOffset||0}:(a=a.document,{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0})},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new CKEDITOR.dom.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},appendStyleText:function(a){if(this.$.createStyleSheet){var b=this.$.createStyleSheet("");b.cssText=a}else{var c=new CKEDITOR.dom.element("style",this);c.append(new CKEDITOR.dom.text(a,this)),this.getHead().append(c)}return b||c.$.sheet},createElement:function(a,b){var c=new CKEDITOR.dom.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.styles&&c.setStyles(b.styles)),c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(b){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,b){for(var c=this.$.documentElement,d=0;c&&d<a.length;d++){var e=a[d];if(b)for(var f=-1,g=0;g<c.childNodes.length;g++){var h=c.childNodes[g];if((b!==!0||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)&&(f++,f==e)){c=h;break}}else c=c.childNodes[e]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,b){return!(CKEDITOR.env.ie&&document.documentMode<=8)&&b&&(a=b+":"+a),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(a),this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");return a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a)),a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}},CKEDITOR.dom.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,b){var c=new CKEDITOR.dom.element("div",b);return c.setHtml(a),c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,b,c,d){var e=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),f=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[e]=b,f[c]=1,b.setCustomData(c,d)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var b in a)CKEDITOR.dom.element.clearMarkers(a,a[b],1)},CKEDITOR.dom.element.clearMarkers=function(a,b,c){var d,e=b.getCustomData("list_marker_names"),f=b.getCustomData("list_marker_id");for(d in e)b.removeCustomData(d);b.removeCustomData("list_marker_names"),c&&(b.removeCustomData("list_marker_id"),delete a[f])},function(){function a(a){var b=!0;return a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),b=!1),function(){b||a.removeAttribute("id")}}function b(a,b){return"#"+a.$.id+" "+b.split(/,\s*/).join(", #"+a.$.id+" ")}function c(a){for(var b=0,c=0,e=d[a].length;e>c;c++)b+=parseInt(this.getComputedStyle(d[a][c])||0,10)||0;return b}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var b=this.$.className;return b&&(RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a)),this.$.className=b||a,this
},removeClass:function(a){var b=this.getAttribute("class");return b&&(a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i"),a.test(b)&&((b=b.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class"))),this},hasClass:function(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(a,b){return"string"==typeof a&&(a=this.getDocument().createElement(a)),b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$),a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a),b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text?this.$.text=this.$.text+a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this),b.setEndAfter(a),a=b.extractContents(),b.insertNode(this.remove()),a.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(16&this.$.compareDocumentPosition(a.$))},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");return a.appendChild(this.$.cloneNode(!0)),a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!a.width&&(a.width=a.right-a.left),!a.height&&(a.height=a.bottom-a.top),a},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(a){try{var b=this.$;if(this.getParent())return b.innerHTML=a;var c=this.getDocument()._getHtml5ShivFrag();return c.appendChild(b),b.innerHTML=a,c.removeChild(b),a}catch(d){for(this.$.innerHTML="",b=new CKEDITOR.dom.element("body",this.getDocument()),b.$.innerHTML=a,b=b.getChildren();b.count();)this.append(b.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");return a.innerHTML="x",a=a.textContent,function(b){this.$[a?"textContent":"innerText"]=b}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case"checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){var b=this.getWindow().$.getComputedStyle(this.$,null);return b?b.getPropertyValue(a):""},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;return 0===a&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(a=-1),a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;return void 0===a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&document.documentMode<=8){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return this.getName=function(){return a},this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getNext(a)),b},getLast:function(a){var b=this.$.lastChild;return(b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b)&&(b=b.getPrevious(a)),b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(a){var b=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[b]||CKEDITOR.dtd.$empty[b]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:a!==!1?(a=CKEDITOR.dtd[b]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var b=this.clone(0,1),a=a.clone(0,1);if(b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.$.isEqualNode)return b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.isEqualNode(a.$);if(b=b.getOuterHtml(),a=a.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(b),b=c.getHtml(),c.setHtml(a),a=c.getHtml())}return b==a},isVisible:function(){var a,b,c=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return c&&CKEDITOR.env.webkit&&(a=this.getWindow(),!a.equals(CKEDITOR.document.getWindow())&&(b=a.$.frameElement)&&(c=new CKEDITOR.dom.element(b).isVisible())),!!c},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),b=0,c=a.count();c>b;b++){var d=a.getItem(b);if((d.type!=CKEDITOR.NODE_ELEMENT||!d.data("cke-bookmark"))&&(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||2==b&&!c[a[1].nodeName])},hasAttribute:function(){function a(a){var b=this.$.attributes.getNamedItem(a);if("input"==this.getName())switch(a){case"class":return this.$.className.length>0;case"checked":return!!this.$.checked;case"value":return a=this.getAttribute("type"),"checkbox"==a||"radio"==a?"on"!=this.$.value:!!this.$.value}return b?b.specified:!1}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(b){return"name"==b?!!this.$.name:a.call(this,b)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$,a=a.$;if(c!=a){var d;if(b)for(;d=c.lastChild;)a.insertBefore(c.removeChild(d),a.firstChild);else for(;d=c.firstChild;)a.appendChild(c.removeChild(d))}},mergeSiblings:function(){function a(a,b,c){if(b&&b.type==CKEDITOR.NODE_ELEMENT){for(var d=[];b.data("cke-bookmark")||b.isEmptyInlineRemoveable();)if(d.push(b),b=c?b.getNext():b.getPrevious(),!b||b.type!=CKEDITOR.NODE_ELEMENT)return;if(a.isIdentical(b)){for(var e=c?a.getLast():a.getFirst();d.length;)d.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),e&&e.type==CKEDITOR.NODE_ELEMENT&&e.mergeSiblings()}}}return function(b){(b===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(a(this,this.getNext(),!0),a(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(b,c){return"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:"contenteditable"==b?a.call(this,"contentEditable",c):a.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(b,c){if("src"==b&&c.match(/^http:\/\//))try{a.apply(this,arguments)}catch(d){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable"),this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){var b=this.$.style;if(b.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)b.removeProperty?b.removeProperty(a):b.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var c,d=["top","left","right","bottom"];"border"==a&&(c=["color","style","width"]);for(var b=[],e=0;e<d.length;e++)if(c)for(var f=0;f<c.length;f++)b.push([a,d[e],c[f]].join("-"));else b.push([a,d[e]].join("-"));for(a=0;a<b.length;a++)this.removeStyle(b[a])}},setStyle:function(a,b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(a=Math.round(100*a),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,b=this.getElementsByTag("*"),c=0,d=b.count();d>c;c++)a=b.getItem(c),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var b=0,c=0,d=this.getDocument(),e=d.getBody(),f="BackCompat"==d.$.compatMode;if(document.documentElement.getBoundingClientRect){var g=this.$.getBoundingClientRect(),h=d.$.documentElement,i=h.clientTop||e.$.clientTop||0,j=h.clientLeft||e.$.clientLeft||0,k=!0;CKEDITOR.env.ie&&(k=d.getDocumentElement().contains(this),d=d.getBody().contains(this),k=f&&d||!f&&k),k&&(b=g.left+(!f&&h.scrollLeft||e.$.scrollLeft),b-=j,c=g.top+(!f&&h.scrollTop||e.$.scrollTop),c-=i)}else for(e=this,d=null;e&&"body"!=e.getName()&&"html"!=e.getName();){for(b+=e.$.offsetLeft-e.$.scrollLeft,c+=e.$.offsetTop-e.$.scrollTop,e.equals(this)||(b+=e.$.clientLeft||0,c+=e.$.clientTop||0);d&&!d.equals(e);)b-=d.$.scrollLeft,c-=d.$.scrollTop,d=d.getParent();d=e,e=(g=e.$.offsetParent)?new CKEDITOR.dom.element(g):null}return a&&(e=this.getWindow(),d=a.getWindow(),!e.equals(d)&&e.$.frameElement&&(a=new CKEDITOR.dom.element(e.$.frameElement).getDocumentPosition(a),b+=a.x,c+=a.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||f||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:b,y:c}},scrollIntoView:function(a){var b=this.getParent();if(b)do if((b.$.clientWidth&&b.$.clientWidth<b.$.scrollWidth||b.$.clientHeight&&b.$.clientHeight<b.$.scrollHeight)&&!b.is("body")&&this.scrollIntoParent(b,a,1),b.is("html")){var c=b.getWindow();try{var d=c.$.frameElement;d&&(b=new CKEDITOR.dom.element(d))}catch(e){}}while(b=b.getParent())},scrollIntoParent:function(a,b,c){function d(b,c){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(b,c):(a.$.scrollLeft=a.$.scrollLeft+b,a.$.scrollTop=a.$.scrollTop+c)}function e(a,b){var c={x:0,y:0};if(!a.is(k?"body":"html")){var d=a.$.getBoundingClientRect();c.x=d.left,c.y=d.top}return d=a.getWindow(),d.equals(b)||(d=e(CKEDITOR.dom.element.get(d.$.frameElement),b),c.x=c.x+d.x,c.y=c.y+d.y),c}function f(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}var g,h,i,j;!a&&(a=this.getWindow()),i=a.getDocument();var k="BackCompat"==i.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=k?i.getBody():i.getDocumentElement()),i=a.getWindow(),h=e(this,i);var l=e(a,i),m=this.$.offsetHeight;g=this.$.offsetWidth;var n=a.$.clientHeight,o=a.$.clientWidth;i=h.x-f(this,"left")-l.x||0,j=h.y-f(this,"top")-l.y||0,g=h.x+g+f(this,"right")-(l.x+o)||0,h=h.y+m+f(this,"bottom")-(l.y+n)||0,(0>j||h>0)&&d(0,b===!0?j:b===!1?h:0>j?j:h),c&&(0>i||g>0)&&d(0>i?i:g,0)},setState:function(a,b,c){switch(b=b||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(b+"_on"),this.removeClass(b+"_off"),this.removeClass(b+"_disabled"),c&&this.setAttribute("aria-pressed",!0),c&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(b+"_disabled"),this.removeClass(b+"_off"),this.removeClass(b+"_on"),c&&this.setAttribute("aria-disabled",!0),c&&this.removeAttribute("aria-pressed");break;default:this.addClass(b+"_off"),this.removeClass(b+"_on"),this.removeClass(b+"_disabled"),c&&this.removeAttribute("aria-pressed"),c&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){for(var c=this.$.attributes,b=b||{},d=0;d<c.length;d++){var e,f=c[d],g=f.nodeName.toLowerCase();g in b||("checked"==g&&(e=this.getAttribute(g))?a.setAttribute(g,e):(!CKEDITOR.env.ie||this.hasAttribute(g))&&(e=this.getAttribute(g),null===e&&(e=f.nodeValue),a.setAttribute(g,e)))}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument(),a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a),this.moveChildren(a),this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(a,b){var c=a.childNodes;return b>=0&&b<c.length?c[b]:void 0}return function(b){var c=this.$;if(b.slice)for(;b.length>0&&c;)c=a(c,b.shift());else c=a(c,b);return c?new CKEDITOR.dom.node(c):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,void 0===b?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)},getEditor:function(){var a,b,c=CKEDITOR.instances;for(a in c)if(b=c[a],b.element.equals(this)&&b.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return b;return null},find:function(c){var d=a(this),c=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b(this,c)));return d(),c},findOne:function(c){var d=a(this),c=this.$.querySelector(b(this,c));return d(),c?new CKEDITOR.dom.element(c):null},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(d!==!1)for(var c=this.getChildren(),e=0;e<c.count();e++)d=c.getItem(e),d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):(!b||d.type==b)&&a(d)}});var d={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,b,d){"number"==typeof b&&(!d||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(b-=c.call(this,a)),this.setStyle(a,b+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,b){var d=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;return b&&(d-=c.call(this,a)),d}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document,this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){var c=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,e=c.startContainer;d=c.endContainer;var f,g=c.startOffset,h=c.endOffset,i=this.guard,j=this.type,k=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var l=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),m=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(h):d.getNext();this._.guardLTR=function(a,b){return!(b&&l.equals(a)||m&&a.equals(m)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}if(a&&!this._.guardRTL){var n=e.type==CKEDITOR.NODE_ELEMENT?e:e.getParent(),o=e.type==CKEDITOR.NODE_ELEMENT?g?e.getChild(g-1):null:e.getPrevious();this._.guardRTL=function(a,b){return!(b&&n.equals(a)||o&&a.equals(o)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}var p=a?this._.guardRTL:this._.guardLTR;for(f=i?function(a,b){return p(a,b)===!1?!1:i(a,b)}:p,this.current?d=this.current[k](!1,j,f):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=h>0?d.getChild(h-1):f(d,!0)===!1?null:d.getPreviousSourceNode(!0,j,f)):(d=e,d.type!=CKEDITOR.NODE_ELEMENT||(d=d.getChild(g))||(d=f(e,!0)===!1?null:e.getNextSourceNode(!0,j,f))),d&&f(d)===!1&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&this.evaluator(d)===!1){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[k](!1,j,f)}return this.end(),this.current=null}function b(b){for(var c,d=null;c=a.call(this,b);)d=c;return d}function c(a){if(j(a))return!1;if(a.type==CKEDITOR.NODE_TEXT)return!0;if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is(CKEDITOR.dtd.$inline)||a.is("hr")||"false"==a.getAttribute("contenteditable"))return!0;var b;if((b=!CKEDITOR.env.needsBrFiller)&&(b=a.is(k)))a:{b=0;for(var c=a.getChildCount();c>b;++b)if(!j(a.getChild(b))){b=!1;break a}b=!0}if(b)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==!1},checkBackward:function(){return a.call(this,1,1)!==!1},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current,this._={}}}});var d={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},e={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in e||!d[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var e,f;return e=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(f=d.getParent())&&c(f),e=a?e:e||c(d),!!(b^e)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;return b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&"​"==b.getText()),!!(a^c)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.env.webkit?1:0;return function(d){return b(d)?d=1:(d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent()),d=d.$.offsetWidth<=c),!!(a^d)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!g(a)&&!h(a)}return function(c){var d=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&f.test(c.getText());return d&&(d=c.getParent(),c=c.getNext(b),d=d.isBlockBoundary()&&(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary())),!!(a^d)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var f=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark(),i=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=g(b)||h(b)||i(b),!!(a^b)}};var j=CKEDITOR.dom.walker.ignored(),k=function(a){var b,c={};for(b in a)CKEDITOR.dtd[b]["#"]&&(c[b]=1);return c}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(a){return function(b){return!!(a^c(b))}},CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(h(a)||g(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&f.test(a.getText()))?a:!1}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var b=a instanceof CKEDITOR.dom.document;this.document=b?a:a.getDocument(),this.root=b?a.getBody():a},function(){function a(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(e){return c(e)||b(e)?!0:d(e)&&!a?a=!0:e.type==CKEDITOR.NODE_TEXT&&(e.hasAscendant("pre")||CKEDITOR.tools.trim(e.getText()).length)||e.type==CKEDITOR.NODE_ELEMENT&&!e.is(f)?!1:!0}}function b(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&g(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function c(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){return!b&&j(a)&&(b=a),i(a)&&!(g(a)&&a.equals(b))})}}var d=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},e=function(a,b,c,d){a.optimizeBookmark();var e,f,g=a.startContainer,h=a.endContainer,i=a.startOffset,j=a.endOffset;h.type==CKEDITOR.NODE_TEXT?h=h.split(j):h.getChildCount()>0&&(j>=h.getChildCount()?(h=h.append(a.document.createText("")),f=!0):h=h.getChild(j)),g.type==CKEDITOR.NODE_TEXT?(g.split(i),g.equals(h)&&(h=g.getNext())):i?i>=g.getChildCount()?(g=g.append(a.document.createText("")),e=!0):g=g.getChild(i).getPrevious():(g=g.append(a.document.createText(""),1),e=!0);var k,l,m,i=g.getParents(),j=h.getParents();for(k=0;k<i.length&&(l=i[k],m=j[k],l.equals(m));k++);for(var n,o,p,q=c,r=k;r<i.length;r++){for(n=i[r],q&&!n.equals(g)&&(o=q.append(n.clone())),n=n.getNext();n&&(!n.equals(j[r])&&!n.equals(h));)p=n.getNext(),2==b?q.append(n.clone(!0)):(n.remove(),1==b&&q.append(n)),n=p;q&&(q=o)}for(q=c,c=k;c<j.length;c++){if(n=j[c],b>0&&!n.equals(h)&&(o=q.append(n.clone())),!i[c]||n.$.parentNode!=i[c].$.parentNode)for(n=n.getPrevious();n&&(!n.equals(i[c])&&!n.equals(g));)p=n.getPrevious(),2==b?q.$.insertBefore(n.$.cloneNode(!0),q.$.firstChild):(n.remove(),1==b&&q.$.insertBefore(n.$,q.$.firstChild)),n=p;q&&(q=o)}2==b?(l=a.startContainer,l.type==CKEDITOR.NODE_TEXT&&(l.$.data=l.$.data+l.$.nextSibling.data,l.$.parentNode.removeChild(l.$.nextSibling)),a=a.endContainer,a.type==CKEDITOR.NODE_TEXT&&a.$.nextSibling&&(a.$.data=a.$.data+a.$.nextSibling.data,a.$.parentNode.removeChild(a.$.nextSibling))):(l&&m&&(g.$.parentNode!=l.$.parentNode||h.$.parentNode!=m.$.parentNode)&&(b=m.getIndex(),e&&m.$.parentNode==g.$.parentNode&&b--,d&&l.type==CKEDITOR.NODE_ELEMENT?(d=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document),d.insertAfter(l),l.mergeSiblings(!1),a.moveToBookmark({startNode:d})):a.setStart(m.getParent(),b)),a.collapse(!0)),e&&g.remove(),f&&h.$.parentNode&&h.remove()},f={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},g=CKEDITOR.dom.walker.bogus(),h=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,i=CKEDITOR.dom.walker.editable(),j=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a.startContainer=this.startContainer,a.startOffset=this.startOffset,a.endContainer=this.endContainer,a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(){var a=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,2,a),a},deleteContents:function(a){this.collapsed||e(this,0,null,a)},extractContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||e(this,1,b,a),b},createBookmark:function(a){var b,c,d,e,f=this.collapsed;return b=this.document.createElement("span"),b.data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(f?"C":"S"))),f||(c=b.clone(),c.setHtml("&nbsp;"),a&&c.setAttribute("id",d+"E"),e=this.clone(),e.collapse(),e.insertNode(c)),e=this.clone(),e.collapse(!0),e.insertNode(b),c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),{startNode:a?d+(f?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:f}},createBookmark2:function(){function a(a){var b,c=a.container,d=a.offset;b=c;var e=d;if(b=b.type!=CKEDITOR.NODE_ELEMENT||0===e||e==b.getChildCount()?0:b.getChild(e-1).type==CKEDITOR.NODE_TEXT&&b.getChild(e).type==CKEDITOR.NODE_TEXT,b&&(c=c.getChild(d-1),d=c.getLength()),c.type==CKEDITOR.NODE_ELEMENT&&d>1&&(d=c.getChild(d-1).getIndex(!0)+1),c.type==CKEDITOR.NODE_TEXT){for(b=c,e=0;(b=b.getPrevious())&&b.type==CKEDITOR.NODE_TEXT;)e+=b.getLength();d+=e}a.container=c,a.offset=d}return function(b){var c=this.collapsed,d={container:this.startContainer,offset:this.startOffset},e={container:this.endContainer,offset:this.endOffset};return b&&(a(d),c||a(e)),{start:d.container.getAddress(b),end:c?null:e.container.getAddress(b),startOffset:d.offset,endOffset:e.offset,normalized:b,collapsed:c,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized),a=a.endOffset;this.setStart(b,c),d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var a,b=this.startContainer,c=this.endContainer,d=this.startOffset,e=this.endOffset;if(b.type==CKEDITOR.NODE_ELEMENT)if(a=b.getChildCount(),a>d)b=b.getChild(d);else if(1>a)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b),b=b.getNextSourceNode()||b}if(c.type==CKEDITOR.NODE_ELEMENT)if(a=c.getChildCount(),a>e)c=c.getChild(e).getPreviousSourceNode(!0);else if(1>a)c=c.getPreviousSourceNode();else{for(c=c.$;c.lastChild;)c=c.lastChild;c=new CKEDITOR.dom.node(c)}return b.getPosition(c)&CKEDITOR.POSITION_FOLLOWING&&(b=c),{startNode:b,endNode:c}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,e=this.collapsed;if((!a||e)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();else{var f=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(f,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else d=c.getIndex(),c=c.getParent();if(this.setStart(c,d),e)return void this.collapse(!0)}c=this.endContainer,d=this.endOffset,b||e||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var e=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var f,g,h,i,j,k,l,m=this.getCommonAncestor(),n=this.root,o=!1;k=this.startContainer;var p=this.startOffset;for(k.type==CKEDITOR.NODE_TEXT?(p&&(k=!CKEDITOR.tools.trim(k.substring(0,p)).length&&k,o=!!k),k&&!(i=k.getPrevious())&&(h=k.getParent())):(p&&(i=k.getChild(p-1)||k.getLast()),i||(h=k)),h=c(h);h||i;){if(h&&!i){if(!j&&h.equals(m)&&(j=!0),e?h.isBlockBoundary():!n.contains(h))break;o&&"inline"==h.getComputedStyle("display")||(o=!1,j?f=h:this.setStartBefore(h)),i=h.getPrevious()}for(;i;)if(k=!1,i.type==CKEDITOR.NODE_COMMENT)i=i.getPrevious();else{if(i.type==CKEDITOR.NODE_TEXT)l=i.getText(),d.test(l)&&(i=null),k=/[\s\ufeff]$/.test(l);else if((i.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&i.is("br"))&&!i.data("cke-bookmark"))if(o&&CKEDITOR.dtd.$removeEmpty[i.getName()]){if(l=i.getText(),d.test(l))i=null;else for(var q,p=i.$.getElementsByTagName("*"),r=0;q=p[r++];)if(!CKEDITOR.dtd.$removeEmpty[q.nodeName.toLowerCase()]){i=null;break}i&&(k=!!l.length)}else i=null;if(k&&(o?j?f=h:h&&this.setStartBefore(h):o=!0),i){if(k=i.getPrevious(),!h&&!k){h=i,i=null;break}i=k}else h=null}h&&(h=c(h.getParent()))}k=this.endContainer,p=this.endOffset,h=i=null,j=o=!1;var s=function(a,b){var c=new CKEDITOR.dom.range(n);c.setStart(a,b),c.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);var e,c=new CKEDITOR.dom.walker(c);for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};e=c.next();){if(e.type!=CKEDITOR.NODE_TEXT)return!1;if(l=e!=a?e.getText():e.substring(b),d.test(l))return!1}return!0};for(k.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(k.substring(p)).length?o=!0:(o=!k.getLength(),p==k.getLength()?(i=k.getNext())||(h=k.getParent()):s(k,p)&&(h=k.getParent())):(i=k.getChild(p))||(h=k);h||i;){if(h&&!i){if(!j&&h.equals(m)&&(j=!0),e?h.isBlockBoundary():!n.contains(h))break;
o&&"inline"==h.getComputedStyle("display")||(o=!1,j?g=h:h&&this.setEndAfter(h)),i=h.getNext()}for(;i;){if(k=!1,i.type==CKEDITOR.NODE_TEXT)l=i.getText(),s(i,0)||(i=null),k=/^[\s\ufeff]/.test(l);else if(i.type==CKEDITOR.NODE_ELEMENT){if((i.$.offsetWidth>0||b&&i.is("br"))&&!i.data("cke-bookmark"))if(o&&CKEDITOR.dtd.$removeEmpty[i.getName()]){if(l=i.getText(),d.test(l))i=null;else for(p=i.$.getElementsByTagName("*"),r=0;q=p[r++];)if(!CKEDITOR.dtd.$removeEmpty[q.nodeName.toLowerCase()]){i=null;break}i&&(k=!!l.length)}else i=null}else k=1;if(k&&o&&(j?g=h:this.setEndAfter(h)),i){if(k=i.getNext(),!h&&!k){h=i,i=null;break}i=k}else h=null}h&&(h=c(h.getParent()))}f&&g&&(m=f.contains(g)?g:f,this.setStartBefore(m),this.setEndAfter(m));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:h=new CKEDITOR.dom.range(this.root),n=this.root,h.setStartAt(n,CKEDITOR.POSITION_AFTER_START),h.setEnd(this.startContainer,this.startOffset),h=new CKEDITOR.dom.walker(h);var t,u,v=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),w=null,x=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(w){if(w.equals(a))return void(w=null)}else w=a;else if(w)return;var b=v(a);return b||(t=a),b},e=function(a){var b=x(a);return!b&&a.is&&a.is("br")&&(u=a),b};if(h.guard=x,h=h.lastBackward(),t=t||n,this.setStartAt(t,!t.is("br")&&(!h&&this.checkStartOfBlock()||h&&t.contains(h))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){h=this.clone(),h=new CKEDITOR.dom.walker(h);var y=CKEDITOR.dom.walker.whitespaces(),z=CKEDITOR.dom.walker.bookmark();if(h.evaluator=function(a){return!y(a)&&!z(a)},(h=h.previous())&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("br"))break}h=this.clone(),h.collapse(),h.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),h=new CKEDITOR.dom.walker(h),h.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?e:x,t=w=u=null,h=h.lastForward(),t=t||n,this.setEndAt(t,!h&&this.checkEndOfBlock()||h&&t.contains(h)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),u&&this.setEndAfter(u)}},shrink:function(a,b,c){if(!this.collapsed){var a=a||CKEDITOR.SHRINK_TEXT,d=this.clone(),e=this.startContainer,f=this.endContainer,g=this.startOffset,h=this.endOffset,i=1,j=1;e&&e.type==CKEDITOR.NODE_TEXT&&(g?g>=e.getLength()?d.setStartAfter(e):(d.setStartBefore(e),i=0):d.setStartBefore(e)),f&&f.type==CKEDITOR.NODE_TEXT&&(h?h>=f.getLength()?d.setEndAfter(f):(d.setEndAfter(f),j=0):d.setEndBefore(f));var d=new CKEDITOR.dom.walker(d),k=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var l;return d.guard=function(b,d){return k(b)?!0:a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(l)||c===!1&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable")?!1:(!d&&b.type==CKEDITOR.NODE_ELEMENT&&(l=b),!0)},i&&(e=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(e,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),j&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!i&&!j)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(b=a.getIndex(),a=a.getParent()),this.startContainer=a,this.startOffset=b,this.endContainer||(this.endContainer=a,this.endOffset=b),d(this)},setEnd:function(a,b){a.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[a.getName()]&&(b=a.getIndex()+1,a=a.getParent()),this.endContainer=a,this.endOffset=b,this.startContainer||(this.startContainer=a,this.startOffset=b),d(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setStart(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setStart(a,a.getLength()):this.setStart(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(a)}d(this)},setEndAt:function(a,b){switch(b){case CKEDITOR.POSITION_AFTER_START:this.setEnd(a,0);break;case CKEDITOR.POSITION_BEFORE_END:a.type==CKEDITOR.NODE_TEXT?this.setEnd(a,a.getLength()):this.setEnd(a,a.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(a);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(a)}d(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);return this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),d.appendBogus(),this.insertNode(d),this.moveToBookmark(c),d},splitBlock:function(a){var b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=new CKEDITOR.dom.elementPath(this.endContainer,this.root),d=b.block,e=c.block,f=null;return b.blockLimit.equals(c.blockLimit)?("br"!=a&&(d||(d=this.fixBlock(!0,a),e=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),e||(e=this.fixBlock(!1,a))),a=d&&this.checkStartOfBlock(),b=e&&this.checkEndOfBlock(),this.deleteContents(),d&&d.equals(e)&&(b?(f=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(e,CKEDITOR.POSITION_AFTER_END),e=null):a?(f=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d=null):(e=this.splitElement(d),d.is("ul","ol")||d.appendBogus())),{previousBlock:d,nextBlock:e,wasStartOfBlock:a,wasEndOfBlock:b,elementPath:f}):null},splitElement:function(a){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var b=this.extractContents(),c=a.clone(!1);return b.appendTo(c),c.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),c},removeEmptyBlocksAtEnd:function(){function a(a){return function(d){return b(d)||c(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isEmptyInlineRemoveable()||a.is("table")&&d.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var c,d=this.createBookmark(),e=this[b?"endPath":"startPath"](),f=e.block||e.blockLimit;f&&!f.equals(e.root)&&!f.getFirst(a(f));)c=f.getParent(),this[b?"setEndAt":"setStartAt"](f,CKEDITOR.POSITION_AFTER_END),f.remove(1),f=c;this.moveToBookmark(d)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,c){var d=c==CKEDITOR.START,e=this.clone();return e.collapse(d),e[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=b(d),e[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var b=this.startContainer,c=this.startOffset;return CKEDITOR.env.ie&&c&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.ltrim(b.substring(0,c)),h.test(b)&&this.trim(0,1)),this.trim(),b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=this.clone(),c.collapse(!0),c.setStartAt(b.block||b.blockLimit,CKEDITOR.POSITION_AFTER_START),b=new CKEDITOR.dom.walker(c),b.evaluator=a(),b.checkBackward()},checkEndOfBlock:function(){var b=this.endContainer,c=this.endOffset;return CKEDITOR.env.ie&&b.type==CKEDITOR.NODE_TEXT&&(b=CKEDITOR.tools.rtrim(b.substring(c)),h.test(b)&&this.trim(1,0)),this.trim(),b=new CKEDITOR.dom.elementPath(this.endContainer,this.root),c=this.clone(),c.collapse(!1),c.setEndAt(b.block||b.blockLimit,CKEDITOR.POSITION_BEFORE_END),b=new CKEDITOR.dom.walker(c),b.evaluator=a(),b.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.next()},checkReadOnly:function(){function a(a,b){for(;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if("false"==a.getAttribute("contentEditable")&&!a.data("cke-editable"))return 0;if(a.is("html")||"true"==a.getAttribute("contentEditable")&&(a.contains(b)||a.equals(b)))break}a=a.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&h.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var d=a,e=c,f=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(f=d[b?"getLast":"getFirst"](j)),!e&&!f&&(f=d[b?"getPrevious":"getNext"](j)),a=f}return!!c},moveToClosestEditablePosition:function(a,b){var c,d=new CKEDITOR.dom.range(this.root),e=0,f=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return d.moveToPosition(a,f[b?0:1]),a.is(CKEDITOR.dtd.$block)?(c=d[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(e=1,c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$block)&&"false"==c.getAttribute("contenteditable")?(d.setStartAt(c,CKEDITOR.POSITION_BEFORE_START),d.setEndAt(c,CKEDITOR.POSITION_AFTER_END)):d.moveToPosition(c,f[b?1:0])):e=1,e&&this.moveToRange(d),!!e},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:c(),getPreviousEditableNode:c(1),scrollIntoView:function(){var a,b,c,d=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),e=this.clone();e.optimize(),(c=e.startContainer.type==CKEDITOR.NODE_TEXT)?(b=e.startContainer.getText(),a=e.startContainer.split(e.startOffset),d.insertAfter(e.startContainer)):e.insertNode(d),d.scrollIntoView(),c&&(e.startContainer.setText(b),a.remove()),d.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function a(a){arguments.length<1||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function b(a,b,c){for(a=a.getNextSourceNode(b,null,c);!g(a);)a=a.getNextSourceNode(b,null,c);return a}function c(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function d(a,b,e,f){a:{null==f&&(f=c(e));for(var g;g=f.shift();)if(g.getDtd().p){f={element:g,remaining:f};break a}f=null}return f?(g=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!g.check(b)?d(a,b,e,f.remaining):(b=new CKEDITOR.dom.range(f.element),b.selectNodeContents(f.element),b=b.createIterator(),b.enlargeBr=a.enlargeBr,b.enforceRealBlocks=a.enforceRealBlocks,b.activeFilter=b.filter=g,a._.nestedEditable={element:f.element,container:e,remaining:f.remaining,iterator:b},1):0}function e(a,b,c){return b?(a=a.clone(),a.collapse(!c),a.checkBoundaryOfElement(b,c?CKEDITOR.START:CKEDITOR.END)):!1}var f=/^[\r\n\t ]+$/,g=CKEDITOR.dom.walker.bookmark(!1,!0),h=CKEDITOR.dom.walker.whitespaces(!0),i=function(a){return g(a)&&h(a)},j={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var c,h,k,l,m,a=a||"p";if(this._.nestedEditable){if(c=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,c;if(this.activeFilter=this.filter,d(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var n=this.range.clone();h=n.startPath();var o=n.endPath(),p=!n.collapsed&&e(n,h.block),q=!n.collapsed&&e(n,o.block,1);n.shrink(CKEDITOR.SHRINK_ELEMENT,!0),p&&n.setStartAt(h.block,CKEDITOR.POSITION_BEFORE_END),q&&n.setEndAt(o.block,CKEDITOR.POSITION_AFTER_START),h=n.endContainer.hasAscendant("pre",!0)||n.startContainer.hasAscendant("pre",!0),n.enlarge(this.forceBrBreak&&!h||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),n.collapsed||(h=new CKEDITOR.dom.walker(n.clone()),o=CKEDITOR.dom.walker.bookmark(!0,!0),h.evaluator=o,this._.nextNode=h.next(),h=new CKEDITOR.dom.walker(n.clone()),h.evaluator=o,h=h.previous(),this._.lastNode=h.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(o=this.range.clone(),o.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),o.checkEndOfBlock()&&(o=new CKEDITOR.dom.elementPath(o.endContainer,o.root),this._.lastNode=(o.block||o.blockLimit).getNextSourceNode(!0))),this._.lastNode&&n.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=n.document.createText(""),this._.lastNode.insertAfter(h)),n=null),this._.started=1,h=n}for(o=this._.nextNode,n=this._.lastNode,this._.nextNode=null;o;){var p=0,q=o.hasAscendant("pre"),r=o.type!=CKEDITOR.NODE_ELEMENT,s=0;if(r)o.type==CKEDITOR.NODE_TEXT&&f.test(o.getText())&&(r=0);else{var t=o.getName();if(CKEDITOR.dtd.$block[t]&&"false"==o.getAttribute("contenteditable")){c=o,d(this,a,c);break}if(o.isBlockBoundary(this.forceBrBreak&&!q&&{br:1})){if("br"==t)r=1;else if(!h&&!o.getChildCount()&&"hr"!=t){c=o,k=o.equals(n);break}h&&(h.setEndAt(o,CKEDITOR.POSITION_BEFORE_START),"br"!=t&&(this._.nextNode=o)),p=1}else{if(o.getFirst()){h||(h=this.range.clone(),h.setStartAt(o,CKEDITOR.POSITION_BEFORE_START)),o=o.getFirst();continue}r=1}}if(r&&!h&&(h=this.range.clone(),h.setStartAt(o,CKEDITOR.POSITION_BEFORE_START)),k=(!p||r)&&o.equals(n),h&&!p)for(;!o.getNext(i)&&!k;){if(t=o.getParent(),t.isBlockBoundary(this.forceBrBreak&&!q&&{br:1})){p=1,r=0,k||t.equals(n),h.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);break}o=t,r=1,k=o.equals(n),s=1}if(r&&h.setEndAt(o,CKEDITOR.POSITION_AFTER_END),o=b(o,s,n),(k=!o)||p&&h)break}if(!c){if(!h)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;c=new CKEDITOR.dom.elementPath(h.startContainer,h.root),o=c.blockLimit,p={div:1,th:1,td:1},c=c.block,!c&&o&&!this.enforceRealBlocks&&p[o.getName()]&&h.checkStartOfBlock()&&h.checkEndOfBlock()&&!o.equals(h.root)?c=o:!c||this.enforceRealBlocks&&c.is(j)?(c=this.range.document.createElement(a),h.extractContents().appendTo(c),c.trim(),h.insertNode(c),l=m=!0):"li"!=c.getName()?h.checkStartOfBlock()&&h.checkEndOfBlock()||(c=c.clone(!1),h.extractContents().appendTo(c),c.trim(),m=h.splitBlock(),l=!m.wasStartOfBlock,m=!m.wasEndOfBlock,h.insertNode(c)):k||(this._.nextNode=c.equals(n)?null:b(h.getBoundaryNodes().endNode,1,n))}return l&&(l=c.getPrevious())&&l.type==CKEDITOR.NODE_ELEMENT&&("br"==l.getName()?l.remove():l.getLast()&&"br"==l.getLast().$.nodeName.toLowerCase()&&l.getLast().remove()),m&&(l=c.getLast())&&l.type==CKEDITOR.NODE_ELEMENT&&"br"==l.getName()&&(!CKEDITOR.env.needsBrFiller||l.getPrevious(g)||l.getNext(g))&&l.remove(),this._.nextNode||(this._.nextNode=k||c.equals(n)||!n?null:b(c,1,n)),c}},CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,b){this.uiItems=[],this.exec=function(c){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&a.focus(),this.fire("exec")===!1?!0:b.exec.call(this,a,c)!==!1):!1},this.refresh=function(a,c){return!this.readOnly&&a.readOnly?!0:this.context&&!c.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),this.fire("refresh",{editor:a,path:c})===!1?!0:b.refresh&&b.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var c;this.checkAllowed=function(b){return b||"boolean"!=typeof c?c=a.activeFilter.checkFeature(this):c},CKEDITOR.tools.extend(this,b,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!b.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){return this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=a,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,c,d,e){var f,h,a=[];for(f in b){h=b[f],h="boolean"==typeof h?{}:"function"==typeof h?{match:h}:C(h),"$"!=f.charAt(0)&&(h.elements=f),c&&(h.featureName=c.toLowerCase());var i=h;i.elements=g(i.elements,/\s+/)||null,i.propertiesOnly=i.propertiesOnly||i.elements===!0;var j=/\s*,\s*/,k=void 0;for(k in G){i[k]=g(i[k],j)||null;var l=i,m=H[k],n=g(i[H[k]],j),o=i[k],p=[],q=!0,s=void 0;n?q=!1:n={};for(s in o)"!"==s.charAt(0)&&(s=s.slice(1),p.push(s),n[s]=!0,q=!1);for(;s=p.pop();)o[s]=o["!"+s],delete o["!"+s];l[m]=(q?!1:n)||null}i.match=i.match||null,d.push(h),a.push(h)}for(var t,b=e.elements,e=e.generic,c=0,d=a.length;d>c;++c){f=C(a[c]),h=f.classes===!0||f.styles===!0||f.attributes===!0,i=f,k=m=j=void 0;for(j in G)i[j]=r(i[j]);l=!0;for(k in H){j=H[k],m=i[j],n=[],o=void 0;for(o in m)n.push(o.indexOf("*")>-1?RegExp("^"+o.replace(/\*/g,".*")+"$"):o);m=n,m.length&&(i[j]=m,l=!1)}if(i.nothingRequired=l,i.noProperties=!(i.attributes||i.classes||i.styles),f.elements===!0||null===f.elements)e[h?"unshift":"push"](f);else{i=f.elements,delete f.elements;for(t in i)b[t]?b[t][h?"unshift":"push"](f):b[t]=[f]}}}function b(a,b,d,e){if((!a.match||a.match(b))&&(e||h(a,b))&&(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=c(a.attributes,b.attributes,d.validAttributes)),d.allStyles||(d.allStyles=c(a.styles,b.styles,d.validStyles)),!d.allClasses)){if(a=a.classes,b=b.classes,e=d.validClasses,a)if(a===!0)a=!0;else{for(var f,g=0,i=b.length;i>g;++g)f=b[g],e[f]||(e[f]=a(f));a=!1}else a=!1;d.allClasses=a}}function c(a,b,c){if(!a)return!1;if(a===!0)return!0;for(var d in b)c[d]||(c[d]=a(d));return!1}function d(a,b,c){if(!a.match||a.match(b)){if(a.noProperties)return!1;if(c.hadInvalidAttribute=e(a.attributes,b.attributes)||c.hadInvalidAttribute,c.hadInvalidStyle=e(a.styles,b.styles)||c.hadInvalidStyle,a=a.classes,b=b.classes,a){for(var d=!1,f=a===!0,g=b.length;g--;)(f||a(b[g]))&&(b.splice(g,1),d=!0);a=d}else a=!1;c.hadInvalidClass=a||c.hadInvalidClass}}function e(a,b){if(!a)return!1;var c,d=!1,e=a===!0;for(c in b)(e||a(c))&&(delete b[c],d=!0);return d}function f(a,b,c){return a.disabled||a.customConfig&&!c||!b?!1:(a._.cachedChecks={},!0)}function g(a,b){if(!a)return!1;if(a===!0)return a;if("string"==typeof a)return a=D(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var c,d={},e=0;for(c in a)d[c]=a[c],e++;return e?d:!1}function h(a,b){if(a.nothingRequired)return!0;var c,d,e,f;if(e=a.requiredClasses)for(f=b.classes,c=0;c<e.length;++c)if(d=e[c],"string"==typeof d){if(-1==CKEDITOR.tools.indexOf(f,d))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(f,d))return!1;return i(b.styles,a.requiredStyles)&&i(b.attributes,a.requiredAttributes)}function i(a,b){if(!b)return!0;for(var c,d=0;d<b.length;++d)if(c=b[d],"string"==typeof c){if(!(c in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,c))return!1;return!0}function j(a){if(!a)return{};for(var a=a.split(/\s*,\s*/).sort(),b={};a.length;)b[a.shift()]=E;return b}function k(a){for(var b,c,d,e,f={},g=1,a=D(a);b=a.match(I);)(c=b[2])?(d=l(c,"styles"),e=l(c,"attrs"),c=l(c,"classes")):d=e=c=null,f["$"+g++]={elements:b[1],classes:c,styles:d,attributes:e},a=a.slice(b[0].length);return f}function l(a,b){var c=a.match(J[b]);return c?D(c[1]):null}function m(a){var b=a.styleBackup=a.attributes.style,c=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1)),a.classes||(a.classes=c?c.split(/\s+/):[])}function n(a,c,e,f){var g,h=0;if(f.toHtml&&(c.name=c.name.replace(K,"$1")),f.doCallbacks&&a.elementCallbacks){a:for(var i,j=a.elementCallbacks,k=0,l=j.length;l>k;++k)if(i=j[k](c)){g=i;break a}if(g)return g}if(f.doTransform&&(g=a._.transformations[c.name])){for(m(c),j=0;j<g.length;++j)v(a,c,g[j]);p(c)}if(f.doFilter){a:{j=c.name,k=a._,a=k.allowedRules.elements[j],g=k.allowedRules.generic,j=k.disallowedRules.elements[j],k=k.disallowedRules.generic,l=f.skipRequired,i={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};var n,o;if(a||g){if(m(c),j)for(n=0,o=j.length;o>n;++n)if(d(j[n],c,i)===!1){a=null;break a}if(k)for(n=0,o=k.length;o>n;++n)d(k[n],c,i);if(a)for(n=0,o=a.length;o>n;++n)b(a[n],c,i,l);if(g)for(n=0,o=g.length;o>n;++n)b(g[n],c,i,l);a=i}else a=null}if(!a)return e.push(c),B;if(!a.valid)return e.push(c),B;o=a.validAttributes;var r=a.validStyles;g=a.validClasses;var s,t,j=c.attributes,u=c.styles,k=c.classes,l=c.classBackup,w=c.styleBackup,x=[];i=[];var y=/^data-cke-/;if(n=!1,delete j.style,delete j["class"],delete c.classBackup,delete c.styleBackup,!a.allAttributes)for(s in j)o[s]||(y.test(s)?s==(t=s.replace(/^data-cke-saved-/,""))||o[t]||(delete j[s],n=!0):(delete j[s],n=!0));if(!a.allStyles||a.hadInvalidStyle){for(s in u)a.allStyles||r[s]?x.push(s+":"+u[s]):n=!0;x.length&&(j.style=x.sort().join("; "))}else w&&(j.style=w);if(!a.allClasses||a.hadInvalidClass){for(s=0;s<k.length;++s)(a.allClasses||g[k[s]])&&i.push(k[s]);i.length&&(j["class"]=i.sort().join(" ")),l&&i.length<l.split(/\s+/).length&&(n=!0)}else l&&(j["class"]=l);if(n&&(h=B),!f.skipFinalValidation&&!q(c))return e.push(c),B}return f.toHtml&&(c.name=c.name.replace(L,"cke:$1")),h}function o(a){var b,c=[];for(b in a)b.indexOf("*")>-1&&c.push(b.replace(/\*/g,".*"));return c.length?RegExp("^(?:"+c.join("|")+")$"):null}function p(a){var b,c=a.attributes;delete c.style,delete c["class"],(b=CKEDITOR.tools.writeCssText(a.styles,!0))&&(c.style=b),a.classes.length&&(c["class"]=a.classes.sort().join(" "))}function q(a){switch(a.name){case"a":if(!a.children.length&&!a.attributes.name)return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function r(a){if(!a)return!1;if(a===!0)return!0;var b=o(a);return function(c){return c in a||b&&c.match(b)}}function s(){return new CKEDITOR.htmlParser.element("br")}function t(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||A.$block[a.name])}function u(a,b,c){var d=a.name;if(A.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(s()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());else if(A.$block[d]||"tr"==d)if("br"==b)a.previous&&!t(a.previous)&&(b=s(),b.insertBefore(a)),a.next&&!t(a.next)&&(b=s(),b.insertAfter(a)),a.replaceWithChildren();else{var e,d=a.children;a:{e=A[b];for(var f,g=0,h=d.length;h>g;++g)if(f=d[g],f.type==CKEDITOR.NODE_ELEMENT&&!e[f.name]){e=!1;break a}e=!0}if(e)a.name=b,a.attributes={},c.push({check:"parent-down",el:a});else{e=a.parent;for(var i,g=e.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==e.name,h=d.length;h>0;)f=d[--h],g&&(f.type==CKEDITOR.NODE_TEXT||f.type==CKEDITOR.NODE_ELEMENT&&A.$inline[f.name])?(i||(i=new CKEDITOR.htmlParser.element(b),i.insertAfter(a),c.push({check:"parent-down",el:i})),i.add(f,0)):(i=null,f.insertAfter(a),e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&f.type==CKEDITOR.NODE_ELEMENT&&!A[e.name][f.name]&&c.push({check:"el-up",el:f}));a.remove()}}else"style"==d?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function v(a,b,c){var d,e;for(d=0;d<c.length;++d)if(e=c[d],!(e.check&&!a.check(e.check,!1)||e.left&&!e.left(b))){e.right(b,M);break}}function w(a,b){var c,d,e,f,g=b.getDefinition(),h=g.attributes,i=g.styles;if(a.name!=g.element)return!1;for(c in h)if("class"==c){for(g=h[c].split(/\s+/),e=a.classes.join("|");f=g.pop();)if(-1==e.indexOf(f))return!1}else if(a.attributes[c]!=h[c])return!1;for(d in i)if(a.styles[d]!=i[d])return!1;return!0}function x(a,b){var c,d;return"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]),[{element:c,left:d,right:function(a,c){c.transform(a,b)}}]}function y(a){return function(b){return w(b,a)}}function z(a){return function(b,c){c[a](b)}}var A=CKEDITOR.dtd,B=1,C=CKEDITOR.tools.copy,D=CKEDITOR.tools.trim,E="cke-test",F=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(a){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,a instanceof CKEDITOR.editor){a=this.editor=a,this.customConfig=!0;var b=a.config.allowedContent;b===!0?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(F[a.enterMode]+" "+F[a.shiftEnterMode],"default",1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(b,c,d){if(!f(this,b,d))return!1;var e,g;if("string"==typeof b)b=k(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),c,d);e=b.getDefinition(),b={},d=e.attributes,b[e.element]=e={styles:e.styles,requiredStyles:e.styles&&CKEDITOR.tools.objectKeys(e.styles)},d&&(d=C(d),e.classes=d["class"]?d["class"].split(/\s+/):null,e.requiredClasses=e.classes,delete d["class"],e.attributes=d,e.requiredAttributes=d&&CKEDITOR.tools.objectKeys(d))}else if(CKEDITOR.tools.isArray(b)){for(e=0;e<b.length;++e)g=this.allow(b[e],c,d);return g}return a(this,b,c,this.allowedContent,this._.allowedRules),!0},applyTo:function(a,b,c,d){if(this.disabled)return!1;var e,f=this,g=[],h=this.editor&&this.editor.config.protectedSource,i=!1,j={doFilter:!c,doTransform:!0,doCallbacks:!0,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(e=n(f,a,g,j),e&B)i=!0;else if(2&e)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var c;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));c=[];var k,l,m;if(h)for(l=0;l<h.length;++l)if((m=d.match(h[l]))&&m[0].length==d.length){c=!0;break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d),1==d.children.length&&(k=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&n(f,k,c,j),c=!c.length}c||g.push(a)}},null,!0),g.length&&(i=!0);for(var k,a=[],d=F[d||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];c=g.pop();)c.type==CKEDITOR.NODE_ELEMENT?u(c,d,a):c.remove();for(;k=a.pop();)if(c=k.el,c.parent)switch(k.check){case"it":A.$removeEmpty[c.name]&&!c.children.length?u(c,d,a):q(c)||u(c,d,a);break;case"el-up":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!A[c.parent.name][c.name]&&u(c,d,a);break;case"parent-down":c.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!A[c.parent.name][c.name]&&u(c.parent,d,a)}return i},checkFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},disallow:function(b){return f(this,b,!0)?("string"==typeof b&&(b=k(b)),a(this,b,null,this.disallowedContent,this._.disallowedRules),!0):!1},addContentForms:function(a){if(!this.disabled&&a){var b,c,d,e=[];for(b=0;b<a.length&&!d;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(d=c);if(d){for(b=0;b<a.length;++b)e.push(x(a[b],d));this.addTransformations(e)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(a)},addFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0)},addTransformations:function(a){var b,c;if(!this.disabled&&a){var d,e=this._.transformations;for(d=0;d<a.length;++d){b=a[d];var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0;for(c=[],g=0;g<b.length;++g)h=b[g],"string"==typeof h?(h=h.split(/\s*:\s*/),i=h[0],j=null,k=h[1]):(i=h.check,j=h.left,k=h.right),f||(f=h,f=f.element?f.element:i?i.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element),j instanceof CKEDITOR.style&&(j=y(j)),c.push({check:i==f?null:i,left:j,right:"string"==typeof k?z(k):k});b=f,e[b]||(e[b]=[]),e[b].push(c)}}},check:function(a,b,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var d=a.length;d--;)if(this.check(a[d],b,c))return!0;return!1}var e,f;if("string"==typeof a){if(f=a+"<"+(b===!1?"0":"1")+(c?"1":"0")+">",f in this._.cachedChecks)return this._.cachedChecks[f];
d=k(a).$1,e=d.styles;var g=d.classes;d.name=d.elements,d.classes=g=g?g.split(/\s*,\s*/):[],d.styles=j(e),d.attributes=j(d.attributes),d.children=[],g.length&&(d.attributes["class"]=g.join(" ")),e&&(d.attributes.style=CKEDITOR.tools.writeCssText(d.styles)),e=d}else d=a.getDefinition(),e=d.styles,g=d.attributes||{},e?(e=C(e),g.style=CKEDITOR.tools.writeCssText(e,!0)):e={},e={name:d.element,attributes:g,classes:g["class"]?g["class"].split(/\s+/):[],styles:e,children:[]};var h,g=CKEDITOR.tools.clone(e),i=[];if(b!==!1&&(h=this._.transformations[e.name])){for(d=0;d<h.length;++d)v(this,e,h[d]);p(e)}return n(this,g,i,{doFilter:!0,doTransform:b!==!1,skipRequired:!c,skipFinalValidation:!c}),b=i.length>0?!1:CKEDITOR.tools.objectCompare(e.attributes,g.attributes,!0)?!0:!1,"string"==typeof a&&(this._.cachedChecks[f]=b),b},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var e,f=a.slice();if(this.check(F[c]))return c;for(d||(f=f.reverse());e=f.pop();)if(this.check(e))return b[e];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var G={styles:1,attributes:1,classes:1},H={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},I=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,J={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},K=/^cke:(object|embed|param)$/,L=/^(object|embed|param)$/,M=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(c=c||b,!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(c=c||b,!(c in a.attributes)){var d=a.styles[b],e=d&&d.match(/^(\d+)(?:\.\d*)?px$/);e?a.attributes[c]=e[1]:d==E&&(a.attributes[c]=E)}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;("left"==b||"right"==b)&&(a.styles["float"]=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];("left"==b||"right"==b)&&(a.attributes.align=b)}delete a.styles["float"]},matchesStyle:w,transform:function(a,b){if("string"==typeof b)a.name=b;else{var c,d,e,f,g=b.getDefinition(),h=g.styles,i=g.attributes;a.name=g.element;for(c in i)if("class"==c)for(g=a.classes.join("|"),e=i[c].split(/\s+/);f=e.pop();)-1==g.indexOf(f)&&a.classes.push(f);else a.attributes[c]=i[c];for(d in h)a.styles[d]=h[d]}}}}(),function(){CKEDITOR.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:a},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer),a&&(this.currentActive=a),this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function b(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;a||!c?b.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,b.call(this)},c,this)}},add:function(a,b){var c=a.getCustomData("focusmanager");if(!c||c!=this){c&&c.remove(a);var c="focus",d="blur";b&&(CKEDITOR.env.ie?(c="focusin",d="focusout"):CKEDITOR.event.useCapture=1);var e={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(c,e.focus,this),a.on(d,e.blur,this),b&&(CKEDITOR.event.useCapture=0),a.setCustomData("focusmanager",this),a.setCustomData("focusmanager_handlers",e)}},remove:function(a){a.removeCustomData("focusmanager");var b=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",b.blur),a.removeListener("focus",b.focus)}}}(),CKEDITOR.keystrokeHandler=function(a){return a.keystrokeHandler?a.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:a},this)},function(){var a,b=function(b){var b=b.data,c=b.getKeystroke(),d=this.keystrokes[c],e=this._.editor;return a=e.fire("key",{keyCode:c,domEvent:b})===!1,a||(d&&(a=e.execCommand(d,{from:"keystrokeHandler"})!==!1),a||(a=!!this.blockedKeystrokes[c])),a&&b.preventDefault(!0),!a},c=function(b){a&&(a=!1,b.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",b,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",c,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,b,c){a&&CKEDITOR.lang.languages[a]||(a=this.detect(b,a));var d=this,b=function(){d[a].dir=d.rtl[a]?"rtl":"ltr",c(a,d[a])};this[a]?b():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),b,this)},detect:function(a,b){var c=this.languages,b=b||navigator.userLanguage||navigator.language||a,d=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=d[1],d=d[2];return c[e+"-"+d]?e=e+"-"+d:c[e]||(e=null),CKEDITOR.lang.detect=e?function(){return e}:function(a){return a},e||a}}}(),CKEDITOR.scriptLoader=function(){var a={},b={};return{load:function(c,d,e,f){var g="string"==typeof c;g&&(c=[c]),e||(e=CKEDITOR);var h=c.length,i=[],j=[],k=function(a){d&&(g?d.call(e,a):d.call(e,i,j))};if(0===h)k(!0);else{var l=function(a,b){(b?i:j).push(a),--h<=0&&(f&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),k(b))},m=function(c,d){a[c]=1;var e=b[c];delete b[c];for(var f=0;f<e.length;f++)e[f](c,d)},n=function(c){if(a[c])l(c,!0);else{var e=b[c]||(b[c]=[]);if(e.push(l),!(e.length>1)){var f=new CKEDITOR.dom.element("script");f.setAttributes({type:"text/javascript",src:c}),d&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?f.$.onreadystatechange=function(){("loaded"==f.$.readyState||"complete"==f.$.readyState)&&(f.$.onreadystatechange=null,m(c,!0))}:(f.$.onload=function(){setTimeout(function(){m(c,!0)},0)},f.$.onerror=function(){m(c,!1)})),f.appendTo(CKEDITOR.document.getHead())}}};f&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var o=0;h>o;o++)n(c[o])}},queue:function(){function a(){var a;(a=b[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var b=[];return function(c,d){var e=this;b.push({scriptUrl:c,callback:function(){d&&d.apply(this,arguments),b.shift(),a.call(e)}}),1==b.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,b){this.basePath=a,this.fileName=b,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,b){if(this.registered[a])throw'[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.';var c=this.registered[a]=b||{};return c.name=a,c.path=this.getPath(a),CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",c),this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(b&&b.dir||this.basePath+a+"/")},getFilePath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(b?b.file:this.fileName+".js"))},addExternal:function(a,b,c){for(var a=a.split(","),d=0;d<a.length;d++){var e=a[d];c||(b=b.replace(/[^\/]+$/,function(a){return c=a,""})),this.externals[e]={dir:b,file:c||this.fileName+".js"}}},load:function(a,b,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var d=this.loaded,e=this.registered,f=[],g={},h={},i=0;i<a.length;i++){var j=a[i];if(j)if(d[j]||e[j])h[j]=this.get(j);else{var k=this.getFilePath(j);f.push(k),k in g||(g[k]=[]),g[k].push(j)}}CKEDITOR.scriptLoader.load(f,function(a,e){if(e.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+g[e[0]].join(",")+'" was not found at "'+e[0]+'".';for(var f=0;f<a.length;f++)for(var i=g[a[f]],j=0;j<i.length;j++){var k=i[j];h[k]=this.get(k),d[k]=1}b.call(c,h)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var b={};return function(c,d,e){var f={},g=function(c){a.call(this,c,function(a){CKEDITOR.tools.extend(f,a);var c,h=[];for(c in a){var i=a[c],j=i&&i.requires;if(!b[c]){if(i.icons)for(var k=i.icons.split(","),l=k.length;l--;)CKEDITOR.skin.addIcon(k[l],i.path+"icons/"+(CKEDITOR.env.hidpi&&i.hidpi?"hidpi/":"")+k[l]+".png");b[c]=1}if(j)for(j.split&&(j=j.split(",")),i=0;i<j.length;i++)f[j[i]]||h.push(j[i])}if(h.length)g.call(this,h);else{for(c in f)i=f[c],i.onLoad&&!i.onLoad._called&&(i.onLoad()===!1&&delete f[c],i.onLoad._called=1);d&&d.call(e||window,f)}},this)};g.call(this,c)}}),CKEDITOR.plugins.setLang=function(a,b,c){var d=this.get(a),a=d.langEntries||(d.langEntries={}),d=d.lang||(d.lang=[]);d.split&&(d=d.split(",")),-1==CKEDITOR.tools.indexOf(d,b)&&d.push(b),a[b]=c},CKEDITOR.ui=function(a){return a.ui?a.ui:(this.items={},this.instances={},this.editor=a,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(a,b,c){c.name=a.toLowerCase();var d=this.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(d,c)},get:function(a){return this.instances[a]},create:function(a){var b=this.items[a],c=b&&this._.handlers[b.type],d=b&&b.command&&this.editor.getCommand(b.command),c=c&&c.create.apply(this,b.args);return this.instances[a]=c,d&&d.uiItems.push(c),c&&!c.type&&(c.type=b.type),c},addHandler:function(a,b){this._.handlers[a]=b},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,d,f){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==d){if(!(d instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!f)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(f==CKEDITOR.ELEMENT_MODE_INLINE?d.is(CKEDITOR.dtd.$editable)||d.is("textarea"):f==CKEDITOR.ELEMENT_MODE_REPLACE?!d.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+d.getName()+'".');this.element=d,this.elementMode=f,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(d.getId()||d.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||b(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",c),this.on("selectionChange",function(a){e(this,a.data.path)}),this.on("activeFilterChange",function(){e(this,this.elementPath(),!0)}),this.on("mode",c),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){g(this,a)},0,this)}function b(){do var a="editor"+ ++m;while(CKEDITOR.instances[a]);return a}function c(){var a,b=this.commands;for(a in b)d(this,b[a])}function d(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function e(a,b,c){if(b){var d,e,f=a.commands;for(e in f)d=f[e],(c||d.contextSensitive)&&d.refresh(a,b)}}function f(a){var b=a.config.customConfig;if(!b)return!1;var b=CKEDITOR.getUrl(b),c=n[b]||(n[b]={});return c.fn?(c.fn.call(a,a.config),(CKEDITOR.getUrl(a.config.customConfig)==b||!f(a))&&a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},f(a)}),!0}function g(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}c=a.config,a.readOnly=!(!c.readOnly&&!(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&a.element.hasAttribute("disabled"))),a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1,a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode,c.skin&&(CKEDITOR.skinName=c.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),h(a)}),b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig),f(a)||a.fireOnce("customConfigLoaded")}function h(a){CKEDITOR.skin.loadPart("editor",function(){i(a)})}function i(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||d===!1?d:[a.lang.editor,a.name].join(", "),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),j(a)})}function j(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1),k(a)})}function k(a){var b=a.config,c=b.plugins,d=b.extraPlugins,e=b.removePlugins;if(d)var f=RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(f,""),c=c+(","+d);if(e)var g=RegExp("(?:^|,)(?:"+e.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(g,"");CKEDITOR.env.air&&(c+=",adobeair"),CKEDITOR.plugins.load(c.split(","),function(c){var d=[],e=[],f=[];a.plugins=c;for(var h in c){var i,j=c[h],k=j.lang,l=null,m=j.requires;if(CKEDITOR.tools.isArray(m)&&(m=m.join(",")),m&&(i=m.match(g)))for(;m=i.pop();)CKEDITOR.tools.setTimeout(function(a,b){throw Error('Plugin "'+a.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+b+'" plugin.')},0,null,[m,h]);k&&!a.lang[h]&&(k.split&&(k=k.split(",")),CKEDITOR.tools.indexOf(k,a.langCode)>=0?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&CKEDITOR.tools.indexOf(k,l)>=0?l:CKEDITOR.tools.indexOf(k,"en")>=0?"en":k[0]),j.langEntries&&j.langEntries[l]?(a.lang[h]=j.langEntries[l],l=null):f.push(CKEDITOR.getUrl(j.path+"lang/"+l+".js"))),e.push(l),d.push(j)}CKEDITOR.scriptLoader.load(f,function(){for(var c=["beforeInit","init","afterInit"],f=0;f<c.length;f++)for(var g=0;g<d.length;g++){var h=d[g];0===f&&e[g]&&h.lang&&h.langEntries&&(a.lang[h.name]=h.langEntries[e[g]]),h[c[f]]&&h[c[f]](a)}for(a.fireOnce("pluginsLoaded"),b.keystrokes&&a.setKeystroke(a.config.keystrokes),g=0;g<a.config.blockedKeystrokes.length;g++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[g]]=1;a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)})})}function l(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}a.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=a;var m=0,n={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var c=new CKEDITOR.command(this,b);return this.mode&&d(this,c),this.commands[a]=c},_attachToForm:function(){function a(a){b.updateElement(),b._.required&&!c.getValue()&&b.fire("required")===!1&&a.data.preventDefault()}var b=this,c=b.element,d=new CKEDITOR.dom.element(c.$.form);c.is("textarea")&&d&&(d.on("submit",a),d.$.submit&&d.$.submit.call&&d.$.submit.apply&&(d.$.submit=CKEDITOR.tools.override(d.$.submit,function(b){return function(){a(),b.apply?b.apply(this):b()}})),b.on("destroy",function(){d.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy"),!a&&l.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(a=this.getSelection(),!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",d)!==!1&&(d.returnValue=c.exec(d.commandData),!c.async&&this.fire("afterCommandExec",d)!==!1)?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if("string"!=typeof a){var b=this.element;b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){var d=!0,e=b;b&&"object"==typeof b&&(c=b.internal,e=b.callback,d=!b.noSnapshot),!c&&d&&this.fire("saveSnapshot"),(e||!c)&&this.once("dataReady",function(a){!c&&d&&this.fire("saveSnapshot"),e&&e.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b){this.fire("insertHtml",{dataValue:a,mode:b})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return l.call(this)},setKeystroke:function(){for(var a,b,c=this.keystrokeHandler.keystrokes,d=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],e=d.length;e--;)a=d[e],b=0,CKEDITOR.tools.isArray(a)&&(b=a[1],a=a[0]),b?c[a]=b:delete c[a]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)&&(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,b={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var d,e,f,g=0;d=this._.htmlPartsRegex.exec(c);)if(e=d.index,e>g&&(g=c.substring(g,e),f?f.push(g):this.onText(g)),g=this._.htmlPartsRegex.lastIndex,!(e=d[1])||(e=e.toLowerCase(),f&&CKEDITOR.dtd.$cdata[e]&&(this.onCDATA(f.join("")),f=null),f))if(f)f.push(d[0]);else if(e=d[3]){if(e=e.toLowerCase(),!/="/.test(e)){var h,i={};d=d[4];var j=!(!d||"/"!=d.charAt(d.length-1));if(d)for(;h=a.exec(d);){var k=h[1].toLowerCase();h=h[2]||h[3]||h[4]||"",i[k]=!h&&b[k]?k:CKEDITOR.tools.htmlDecodeAttr(h)}this.onTagOpen(e,i,j),!f&&CKEDITOR.dtd.$cdata[e]&&(f=[])}}else(e=d[2])&&this.onComment(e);else this.onTagClose(e);c.length>g&&this.onText(c.substring(g,c.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,b){this._.output.push(b?" />":">")},attribute:function(a,b){"string"==typeof b&&(b=CKEDITOR.tools.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var b=this._.output.join("");return a&&this.reset(),b}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,b=CKEDITOR.tools.indexOf(a,this),c=this.previous,d=this.next;c&&(c.next=d),d&&(d.previous=c),a.splice(b,1),this.parent=null},replaceWith:function(a){var b=this.parent.children,c=CKEDITOR.tools.indexOf(b,this),d=a.previous=this.previous,e=a.next=this.next;d&&(d.next=a),e&&(e.previous=a),b[c]=a,a.parent=this.parent,this.parent=null},insertAfter:function(a){var b=a.parent.children,c=CKEDITOR.tools.indexOf(b,a),d=a.next;b.splice(c+1,0,this),this.next=a.next,this.previous=a,a.next=this,d&&(d.previous=this),this.parent=a.parent},insertBefore:function(a){var b=a.parent.children,c=CKEDITOR.tools.indexOf(b,a);b.splice(c,0,this),this.next=a,(this.previous=a.previous)&&(a.previous.next=this),a.previous=this,this.parent=a.parent},getAscendant:function(a){for(var b=("function"==typeof a?a:"string"==typeof a?function(b){return b.name==a}:function(b){return b.name in a}),c=this.parent;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(b(c))return c;c=c.parent}return null},wrapWith:function(a){return this.replaceWith(a),a.add(this),a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}}(),CKEDITOR.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,b){var c=this.value;return(c=a.onComment(b,c,this))?"string"!=typeof c?(this.replaceWith(c),!1):(this.value=c,!0):(this.remove(),!1)},writeHtml:function(a,b){b&&this.filter(b),a.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,b){return(this.value=a.onText(b,this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(a,b){b&&this.filter(b),a.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var b=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},d=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),e={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(f,g,h){function i(a){var b;if(q.length>0)for(var c=0;c<q.length;c++){var d=q[c],e=d.name,f=CKEDITOR.dtd[e],g=s.name&&CKEDITOR.dtd[s.name];g&&!g[e]||a&&f&&!f[a]&&CKEDITOR.dtd[a]?e==s.name&&(l(s,s.parent,1),c--):(b||(j(),b=1),d=d.clone(),d.parent=s,s=d,q.splice(c,1),c--)}}function j(){for(;r.length;)l(r.shift(),s)}function k(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b,c=a.children.length,d=a.children[c-1];d&&d.type==CKEDITOR.NODE_TEXT&&((b=CKEDITOR.tools.rtrim(d.value))?d.value=b:a.children.length=c-1)}}function l(b,c,d){var c=c||s||p,e=s;void 0===b.previous&&(m(c,b)&&(s=c,o.onTagOpen(h,{}),b.returnPoint=c=s),k(b),(!a(b)||b.children.length)&&c.add(b),"pre"==b.name&&(u=!1),"textarea"==b.name&&(t=!1)),b.returnPoint?(s=b.returnPoint,delete b.returnPoint):s=d?c:e}function m(a,b){if((a==p||"body"==a.name)&&h&&(!a.name||CKEDITOR.dtd[a.name][h])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function n(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var o=new CKEDITOR.htmlParser,p=g instanceof CKEDITOR.htmlParser.element?g:"string"==typeof g?new CKEDITOR.htmlParser.element(g):new CKEDITOR.htmlParser.fragment,q=[],r=[],s=p,t="textarea"==p.name,u="pre"==p.name;o.onTagOpen=function(e,f,g,h){if(f=new CKEDITOR.htmlParser.element(e,f),f.isUnknown&&g&&(f.isEmpty=!0),f.isOptionalClose=h,a(f))q.push(f);else{if("pre"==e)u=!0;else{if("br"==e&&u)return void s.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==e&&(t=!0)}if("br"==e)r.push(f);else{for(;h=(g=s.name)?CKEDITOR.dtd[g]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):d,!(f.isUnknown||s.isUnknown||h[e]);)if(s.isOptionalClose)o.onTagClose(g);else if(e in c&&g in c)g=s.children,(g=g[g.length-1])&&"li"==g.name||l(g=new CKEDITOR.htmlParser.element("li"),s),!f.returnPoint&&(f.returnPoint=s),s=g;else if(e in CKEDITOR.dtd.$listItem&&!n(e,g))o.onTagOpen("li"==e?"ul":"dl",{},0,1);else if(g in b&&!n(e,g))!f.returnPoint&&(f.returnPoint=s),s=s.parent;else{if(g in CKEDITOR.dtd.$inline&&q.unshift(s),!s.parent){f.isOrphan=1;break}l(s,s.parent,1)}i(e),j(),f.parent=s,f.isEmpty?l(f):s=f}}},o.onTagClose=function(a){for(var b=q.length-1;b>=0;b--)if(a==q[b].name)return void q.splice(b,1);for(var c=[],d=[],e=s;e!=p&&e.name!=a;)e._.isBlockLike||d.unshift(e),c.push(e),e=e.returnPoint||e.parent;if(e!=p){for(b=0;b<c.length;b++){var f=c[b];l(f,f.parent)}s=e,e._.isBlockLike&&j(),l(e,e.parent),e==s&&(s=s.parent),q=q.concat(d)}"body"==a&&(h=!1)},o.onText=function(a){if(s._.hasInlineStarted&&!r.length||u||t||(a=CKEDITOR.tools.ltrim(a),0!==a.length)){var c=s.name,f=c?CKEDITOR.dtd[c]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):d;!t&&!f["#"]&&c in b?(o.onTagOpen(e[c]||""),o.onText(a)):(j(),i(),!u&&!t&&(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),a=new CKEDITOR.htmlParser.text(a),m(s,a)&&this.onTagOpen(h,{},0,1),s.add(a))}},o.onCDATA=function(a){s.add(new CKEDITOR.htmlParser.cdata(a))},o.onComment=function(a){j(),i(),s.add(new CKEDITOR.htmlParser.comment(a))},o.parse(f);for(j();s!=p;)l(s,s.parent,1);return k(p),p},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=b>0?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id)for(c=this.getFilterContext(c),b&&!this.parent&&a.onRoot(c,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)this.children[b].filter(a,c)===!1&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();for(c&&!this.parent&&b&&b.onRoot(d,this),b&&this.filterChildren(b,!1,d),b=0,c=this.children,d=c.length;d>b;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(d!==!1)for(var c=this.children,e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):(!b||d.type==b)&&a(d)},getFilterContext:function(a){return a||{}}}}(),function(){function a(){this.rules=[]}function b(b,c,d,e){var f,g;for(f in c)(g=b[f])||(g=b[f]=new a),g.add(c[f],d,e)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(b){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new a,this.attributeNameRules=new a,this.elementsRules={},this.attributesRules={},this.textRules=new a,this.commentRules=new a,this.rootRules=new a,b&&this.addRules(b,10)},proto:{addRules:function(a,c){var d;"number"==typeof c?d=c:c&&"priority"in c&&(d=c.priority),"number"!=typeof d&&(d=10),"object"!=typeof c&&(c={}),a.elementNames&&this.elementNameRules.addMany(a.elementNames,d,c),a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,d,c),a.elements&&b(this.elementsRules,a.elements,d,c),a.attributes&&b(this.attributesRules,a.attributes,d,c),a.text&&this.textRules.add(a.text,d,c),a.comment&&this.commentRules.add(a.comment,d,c),a.root&&this.rootRules.add(a.root,d,c)},applyTo:function(a){a.filter(this)},onElementName:function(a,b){return this.elementNameRules.execOnName(a,b)},onAttributeName:function(a,b){return this.attributeNameRules.execOnName(a,b)},onText:function(a,b,c){return this.textRules.exec(a,b,c)},onComment:function(a,b,c){return this.commentRules.exec(a,b,c)},onRoot:function(a,b){return this.rootRules.exec(a,b)},onElement:function(a,b){for(var c,d=[this.elementsRules["^"],this.elementsRules[b.name],this.elementsRules.$],e=0;3>e;e++)if(c=d[e]){if(c=c.exec(a,b,this),c===!1)return null;if(c&&c!=b)return this.onNode(a,c);if(b.parent&&!b.name)break}return b},onNode:function(a,b){var c=b.type;return c==CKEDITOR.NODE_ELEMENT?this.onElement(a,b):c==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,b.value)):c==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,b.value)):null},onAttribute:function(a,b,c,d){return(c=this.attributesRules[c])?c.exec(a,d,b,this):d}}}),CKEDITOR.htmlParser.filterRulesGroup=a,a.prototype={add:function(a,b,c){this.rules.splice(this.findIndex(b),0,{value:a,priority:b,options:c})},addMany:function(a,b,c){for(var d=[this.findIndex(b),0],e=0,f=a.length;f>e;e++)d.push({value:a[e],priority:b,options:c});this.rules.splice.apply(this.rules,d)},findIndex:function(a){for(var b=this.rules,c=b.length-1;c>=0&&a<b[c].priority;)c--;return c+1},exec:function(a,b){var c,d,e,f,g=b instanceof CKEDITOR.htmlParser.node||b instanceof CKEDITOR.htmlParser.fragment,h=Array.prototype.slice.call(arguments,1),i=this.rules,j=i.length;for(f=0;j>f;f++)if(g&&(c=b.type,d=b.name),e=i[f],!(a.nonEditable&&!e.options.applyToAll||a.nestedEditable&&e.options.excludeNestedEditable)){if(e=e.value.apply(null,h),e===!1||g&&e&&(e.name!=d||e.type!=c))return e;
null!=e&&(h[0]=b=e)}return b},execOnName:function(a,b){for(var c,d=0,e=this.rules,f=e.length;b&&f>d;d++)c=e[d],!(a.nonEditable&&!c.options.applyToAll||a.nestedEditable&&c.options.excludeNestedEditable)&&(b=b.replace(c.value[0],c.value[1]));return b}}}(),function(){function a(a,b){function h(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function i(a,b){return function(e){if(e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var g,i,k=[],l=c(e);if(l)for(j(l,1)&&k.push(l);l;)f(l)&&(g=d(l))&&j(g)&&((i=d(g))&&!f(i)?k.push(g):(h(m).insertAfter(g),g.remove())),l=l.previous;for(l=0;l<k.length;l++)k[l].remove();(k=("function"==typeof b?b(e):b)!==!1)&&((m||CKEDITOR.env.needsBrFiller||e.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(m||CKEDITOR.env.needsBrFiller||!(document.documentMode>7||e.name in CKEDITOR.dtd.tr||e.name in CKEDITOR.dtd.$listItem))?(k=c(e),k=!k||"form"==e.name&&"input"==k.name):k=!1),k&&e.add(h(a))}}}function j(a,b){if((!m||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;if(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(q))){if(c.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a),a.value=c[0]),!CKEDITOR.env.needsBrFiller&&m&&(!b||a.parent.name in n))return!0;if(!m&&((c=a.previous)&&"br"==c.name||!c||f(c)))return!0}return!1}var k,l={elements:{}},m="html"==b,n=CKEDITOR.tools.extend({},u);for(k in n)"#"in s[k]||delete n[k];for(k in n)l.elements[k]=i(m,a.config.fillEmptyBlocks);return l.root=i(m,!1),l.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var c=b.attributes;if("data-cke-bogus"in c||"data-cke-eol"in c)delete c["data-cke-bogus"];else{for(c=b.next;c&&e(c);)c=c.next;var i=d(b);!c&&f(b.parent)?g(b.parent,h(a)):f(c)&&i&&!f(i)&&h(a).insertBefore(c)}}}}(m),l}function b(a,b){return a!=CKEDITOR.ENTER_BR&&b!==!1?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function c(a){for(a=a.children[a.children.length-1];a&&e(a);)a=a.previous;return a}function d(a){for(a=a.previous;a&&e(a);)a=a.previous;return a}function e(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function f(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in u||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function g(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&(c.next=b,b.previous=c)}function h(a){a=a.attributes,"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function i(a){switch(a=a.attributes,a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function j(a){return a.replace(z,function(a,b,c){return"<"+b+c.replace(A,function(a,b){return B.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+">"})}function k(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+n(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function l(a){return a.replace(E,function(a,b){return decodeURIComponent(b)})}function m(a){return a.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(a){return"<!--"+r+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function n(a){return a.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)})}function o(a,b){var c=b._.dataStore;return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function p(a,b){for(var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,d=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(d),a=a.replace(/<\!--[\s\S]*?--\>/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"}),g=0;g<d.length;g++)a=a.replace(d[g],function(a){return a=a.replace(f,function(a,b,d){return c[d]}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(f,function(a,b,d){return"<!--"+r+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=>]+))+\s*>/g,function(a){return a.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(a,b){return e[e.id]=decodeURIComponent(b),"{cke_protected_"+e.id++ +"}"})}),a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,c,d,e){return"<"+c+d+">"+o(n(e),b)+"</"+c+">"})}CKEDITOR.htmlDataProcessor=function(c){var d,e,f=this;this.editor=c,this.dataFilter=d=new CKEDITOR.htmlParser.filter,this.htmlFilter=e=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,d.addRules(v),d.addRules(w,{applyToAll:!0}),d.addRules(a(c,"data"),{applyToAll:!0}),e.addRules(x),e.addRules(y,{applyToAll:!0}),e.addRules(a(c,"html"),{applyToAll:!0}),c.on("toHtml",function(a){var d,a=a.data,e=a.dataValue,e=p(e,c),e=k(e,D),e=j(e),e=k(e,C),e=e.replace(F,"$1cke:$2"),e=e.replace(H,"<cke:$1$2></cke:$1>"),e=e.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),e=e.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),f=a.context||c.editable().getName();CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==f&&(f="div",e="<pre>"+e+"</pre>",d=1),f=c.document.createElement(f),f.setHtml("a"+e),e=f.getHtml().substr(1),e=e.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),d&&(e=e.replace(/^<pre>|<\/pre>$/gi,"")),e=e.replace(G,"$1$2"),e=l(e),e=n(e),a.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(e,a.context,a.fixForBody===!1?!1:b(a.enterMode,c.config.autoParagraph))},null,null,5),c.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,!0,a.data.dontFilter,a.data.enterMode)&&c.fire("dataFiltered")},null,null,6),c.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10),c.on("toHtml",function(a){var a=a.data,b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(c),b=c.getHtml(!0),a.dataValue=m(b)},null,null,15),c.on("toDataFormat",function(a){var d=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(d=d.replace(/^<br *\/?>/i,"")),a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(d,a.data.context,b(a.data.enterMode,c.config.autoParagraph))},null,null,5),c.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10),c.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11),c.on("toDataFormat",function(a){var b=a.data.dataValue,d=f.writer;d.reset(),b.writeChildrenHtml(d),b=d.getHtml(!0),b=n(b),b=o(b,c),a.data.dataValue=b},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var e,f,g,h=this.editor;return b&&"object"==typeof b?(e=b.context,c=b.fixForBody,d=b.dontFilter,f=b.filter,g=b.enterMode):e=b,!e&&null!==e&&(e=h.editable().getName()),h.fire("toHtml",{dataValue:a,context:e,fixForBody:c,dontFilter:d,filter:f||h.filter,enterMode:g||h.enterMode}).dataValue},toDataFormat:function(a,b){var c,d,e;return b&&(c=b.context,d=b.filter,e=b.enterMode),!c&&null!==c&&(c=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:e||this.editor.enterMode}).dataValue}};var q=/(?:&nbsp;|\xa0)$/,r="{cke_protected}",s=CKEDITOR.dtd,t=["caption","colgroup","col","thead","tfoot","tbody"],u=CKEDITOR.tools.extend({},s.$blockLimit,s.$block),v={elements:{input:h,textarea:h}},w={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},x={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},a:function(a){return a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]?void 0:!1}}},y={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var c,d=["name","href","src"],e=0;e<d.length;e++)c="data-cke-saved-"+d[e],c in b&&delete b[d[e]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(t,a.name),d=CKEDITOR.tools.indexOf(t,b.name)),c>-1&&d>-1&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1),c>d?1:-1})},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&g(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:i,textarea:i},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(y.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var z=/<(a|area|img|input|source)\b([^>]*)>/gi,A=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,B=/^(href|src|name)$/i,C=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,D=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,E=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,F=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,G=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,H=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(a,b){this.name=a,this.attributes=b||{},this.children=[];var c=a||"",d=c.match(/^cke:(.*)/);d&&(c=d[1]),c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c),this.isEmpty=!!CKEDITOR.dtd.$empty[a],this.isUnknown=!CKEDITOR.dtd[a],this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(a){var b={};return((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){"font-family"==c&&(d=d.replace(/["']/g,"")),b[c.toLowerCase()]=d}),{rules:b,populate:function(a){var b=this.toString();b&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",b):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=b:a.style=b)},toString:function(){var a,c=[];for(a in b)b[a]&&c.push(a,":",b[a],";");return c.join("")}}},function(){function a(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var b=function(a,b){return a=a[0],b=b[0],b>a?-1:a>b?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var c,d,e=this,b=e.getFilterContext(b);if(b.off)return!0;for(e.parent||a.onRoot(b,e);;){if(c=e.name,!(d=a.onElementName(b,c)))return this.remove(),!1;if(e.name=d,!(e=a.onElement(b,e)))return this.remove(),!1;if(e!==this)return this.replaceWith(e),!1;if(e.name==c)break;if(e.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(e),!1;if(!e.name)return this.replaceWithChildren(),!1}c=e.attributes;var f,g;for(f in c){for(g=f,d=c[f];;){if(!(g=a.onAttributeName(b,f))){delete c[f];break}if(g==f)break;delete c[f],f=g}g&&((d=a.onAttribute(b,e,g,d))===!1?delete c[g]:c[g]=d)}return e.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:c.filterChildren,writeHtml:function(a,c){c&&this.filter(c);var d,e,f=this.name,g=[],h=this.attributes;a.openTag(f,h);for(d in h)g.push([d,h[d]]);for(a.sortAttributes&&g.sort(b),d=0,e=g.length;e>d;d++)h=g[d],a.attribute(h[0],h[1]);a.openTagClose(f,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(f)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(b){if(!b)return this.children.length?this.children[0]:null;"function"!=typeof b&&(b=a(b));for(var c=0,d=this.children.length;d>c;++c)if(b(this.children[c]))return this.children[c];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){for(var a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children,b=0,c=a.length;c>b;++b)a[b].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),c=this.clone(),d=0;d<b.length;++d)b[d].parent=c;return c.children=b,b[0]&&(b[0].previous=null),a>0&&(this.children[a-1].next=null),this.parent.add(c,this.getIndex()+1),c},addClass:function(a){if(!this.hasClass(a)){var b=this.attributes["class"]||"";this.attributes["class"]=b+(b?" ":"")+a}},removeClass:function(a){var b=this.attributes["class"];b&&((b=CKEDITOR.tools.trim(b.replace(RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b):!1},getFilterContext:function(a){var b=[];if(a||(a={off:!1,nonEditable:!1,nestedEditable:!1}),!a.off&&"off"==this.attributes["data-cke-processor"]&&b.push("off",!0),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0),b.length)for(var a=CKEDITOR.tools.copy(a),c=0;c<b.length;c+=2)a[b[c]]=b[c+1];return a}},!0)}(),function(){var a={},b=/{([^}]+)}/g,c=/([\\'])/g,d=/\n/g,e=/\r/g;CKEDITOR.template=function(f){if(a[f])this.output=a[f];else{var g=f.replace(c,"\\$1").replace(d,"\\n").replace(e,"\\r").replace(b,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'"});this.output=a[f]=Function("data","buffer","return buffer?buffer.push('"+g+"'):['"+g+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a,a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))}),a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(b,c){var d=a[b];return d?d:(d={name:b,source:c},CKEDITOR.fire("template",d),a[b]=new CKEDITOR.template(d.source))},CKEDITOR.getTemplate=function(b){return a[b]}}(),function(){var a=[];CKEDITOR.addCss=function(b){a.push(b)},CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(a,b){if(!CKEDITOR.env.isCompatible)return null;if(a=CKEDITOR.dom.element.get(a),a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var c=new CKEDITOR.editor(b,a,CKEDITOR.ELEMENT_MODE_INLINE),d=a.is("textarea")?a:null;return d?(c.setData(d.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!c.readOnly+'" class="cke_textarea_inline">'+d.getValue()+"</div>",CKEDITOR.document),a.insertAfter(d),d.hide(),d.$.form&&c._attachToForm()):c.setData(a.getHtml(),null,!0),c.on("loaded",function(){c.fire("uiReady"),c.editable(a),c.container=a,c.setData(c.getData(1)),c.resetDirty(),c.fire("contentDom"),c.mode="wysiwyg",c.fire("mode"),c.status="ready",c.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,c)},null,null,1e4),c.on("destroy",function(){d&&(c.container.clearCustomData(),c.container.remove(),d.show()),c.element.clearCustomData(),delete c.element}),c},CKEDITOR.inlineAll=function(){var a,b,c;for(c in CKEDITOR.dtd.$editable)for(var d=CKEDITOR.document.getElementsByTag(c),e=0,f=d.count();f>e;e++)a=d.getItem(e),"true"==a.getAttribute("contenteditable")&&(b={element:a,config:{}},CKEDITOR.fire("inline",b)!==!1&&CKEDITOR.inline(a,b.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function a(a,d,e,f){if(!CKEDITOR.env.isCompatible)return null;if(a=CKEDITOR.dom.element.get(a),a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var g=new CKEDITOR.editor(d,a,f);return f==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),g._.required=a.hasAttribute("required"),a.removeAttribute("required")),e&&g.setData(e,null,!0),g.on("loaded",function(){c(g),f==CKEDITOR.ELEMENT_MODE_REPLACE&&g.config.autoUpdateElement&&a.$.form&&g._attachToForm(),g.setMode(g.config.startupMode,function(){g.resetDirty(),g.status="ready",g.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,g)})}),g.on("destroy",b),g}function b(){var a=this.container,b=this.element;a&&(a.clearCustomData(),a.remove()),b&&(b.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.show(),this._.required&&b.setAttribute("required","required")),delete this.element)}function c(a){var b=a.name,c=a.element,d=a.elementMode,e=a.fire("uiSpace",{space:"top",html:""}).html,f=a.fire("uiSpace",{space:"bottom",html:""}).html,g=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),b=CKEDITOR.dom.element.createFromHtml(g.output({id:a.id,name:b,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:e?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+e+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:f?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+f+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));d==CKEDITOR.ELEMENT_MODE_REPLACE?(c.hide(),b.insertAfter(c)):c.append(b),a.container=b,e&&a.ui.space("top").unselectable(),f&&a.ui.space("bottom").unselectable(),c=a.config.width,d=a.config.height,c&&b.setStyle("width",CKEDITOR.tools.cssLength(c)),d&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(d)),b.disableContextMenu(),CKEDITOR.env.webkit&&b.on("focus",function(){a.focus()}),a.fireOnce("uiReady")}CKEDITOR.replace=function(b,c){return a(b,c,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(b,c,d){return a(b,c,d,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),b=0;b<a.length;b++){var c=null,d=a[b];if(d.name||d.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(d.className))continue}else if("function"==typeof arguments[0]&&(c={},arguments[0](d,c)===!1))continue;this.replace(d,c)}}},CKEDITOR.editor.prototype.addMode=function(a,b){(this._.modes||(this._.modes={}))[a]=b},CKEDITOR.editor.prototype.setMode=function(a,b){var c=this,d=this._.modes;if(a!=c.mode&&d&&d[a]){if(c.fire("beforeSetMode",a),c.mode){var e,f=c.checkDirty(),d=c._.previousModeData,g=0;c.fire("beforeModeUnload"),c.editable(0),c._.previousMode=c.mode,c._.previousModeData=e=c.getData(1),"source"==c.mode&&d==e&&(c.fire("lockSnapshot",{forceUpdate:!0}),g=1),c.ui.space("contents").setHtml(""),c.mode=""}else c._.previousModeData=c.getData(1);this._.modes[a](function(){c.mode=a,void 0!==f&&!f&&c.resetDirty(),g?c.fire("unlockSnapshot"):"wysiwyg"==a&&c.fire("saveSnapshot"),setTimeout(function(){c.fire("mode"),b&&b.call(c)},0)})}},CKEDITOR.editor.prototype.resize=function(a,b,c,d){var e=this.container,f=this.ui.space("contents"),g=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,d=d?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):e;d.setSize("width",a,!0),g&&(g.style.width="1%"),f.setStyle("height",Math.max(b-(c?0:(d.$.offsetHeight||0)-(f.$.clientHeight||0)),0)+"px"),g&&(g.style.width="100%"),this.fire("resize")},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var c,e=a.editor,f=a.data.path,h=f.blockLimit,i=a.data.selection,j=i.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(i=b(i,f))&&(i.appendBogus(),c=CKEDITOR.env.ie),g(e,f.block,h)&&j.collapsed&&!j.getCommonAncestor().isReadOnly()&&(f=j.clone(),f.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),h=new CKEDITOR.dom.walker(f),h.guard=function(a){return!d(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},(!h.checkForward()||f.checkStartOfBlock()&&f.checkEndOfBlock())&&(e=j.fixBlock(!0,e.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(e=e.getFirst(d))&&e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()).match(/^(?:&nbsp;|\xa0)$/)&&e.remove(),c=1,a.cancel())),c&&j.select()}function b(a,b){if(a.isFake)return 0;var c=b.block||b.blockLimit,e=c&&c.getLast(d);return!c||!c.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||c.is("pre")||c.getBogus()?void 0:c}function c(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),("submit"==b||"reset"==b)&&a.data.preventDefault())}function d(a){return m(a)&&n(a)}function e(a,b){return function(c){var d=CKEDITOR.dom.element.get(c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget);(!d||!b.equals(d)&&!b.contains(d))&&a.call(this,c)}}function f(a){function b(a){return function(b,e){return e&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(f)&&(c=b),e||!d(b)||a&&k(b)?void 0:!1}}var c,e=a.getRanges()[0],a=a.root,f={table:1,ul:1,ol:1,dl:1};if(e.startPath().contains(f)){var g=e.clone();if(g.collapse(1),g.setStartAt(a,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(g),a.guard=b(),a.checkBackward(),c)return g=e.clone(),g.collapse(),g.setEndAt(c,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(g),a.guard=b(!0),c=!1,a.checkForward(),c}return null}function g(a,b,c){return a.config.autoParagraph!==!1&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&a.editable().equals(c)&&!b||b&&"true"==b.getAttribute("contenteditable")}function h(a){a.editor.focus(),a.editor.fire("saveSnapshot")}function i(a){var b=a.editor;b.getSelection().scrollIntoView(),setTimeout(function(){b.fire("saveSnapshot")},0)}function j(a,b,c){for(var d=a.getCommonAncestor(b),b=a=c?b:a;(a=a.getParent())&&!d.equals(a)&&1==a.getChildCount();)b=a;b.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))return void a.focus();try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var c=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=e(b,this),c[0]=a,c[1]=b),CKEDITOR.dom.element.prototype.on.apply(this,c)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);return this._.listeners.push(b),b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a,b,c=this._.attrChanges;for(b in c)c.hasOwnProperty(b)&&(a=c[b],null!==a?this.setAttribute(b,a):this.removeAttribute(b))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertHtml:function(a,b){h(this),o(this,b||"html",a)},insertText:function(a){h(this);var b=this.editor,c=b.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:b.activeEnterMode,b=c==CKEDITOR.ENTER_BR,d=CKEDITOR.tools,a=d.htmlEncode(a.replace(/\r\n/g,"\n")),a=a.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),c=c==CKEDITOR.ENTER_P?"p":"div";if(!b){var e=/\n{2}/g;if(e.test(a))var f="<"+c+">",g="</"+c+">",a=f+a.replace(e,function(){return g+f})+g}a=a.replace(/\n/g,"<br>"),b||(a=a.replace(RegExp("<br>(?=</"+c+">)"),function(a){return d.repeat(a,2)})),a=a.replace(/^ | $/g,"&nbsp;"),a=a.replace(/(>|\s) /g,function(a,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),o(this,"text",a)},insertElement:function(a,b){b?this.insertElementIntoRange(a,b):this.insertElementIntoSelection(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&p(b);var g,h;if(f)for(;(g=b.getCommonAncestor(0,1))&&(h=CKEDITOR.dtd[g.getName()])&&(!h||!h[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());return b.insertNode(a),!0},insertElementIntoSelection:function(a){h(this);var b=this.editor,c=b.activeEnterMode,b=b.getSelection(),e=b.getRanges()[0],f=a.getName(),f=CKEDITOR.dtd.$block[f];this.insertElementIntoRange(a,e)&&(e.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),f&&((f=a.getNext(function(a){return d(a)&&!k(a)}))&&f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$block)?f.getDtd()["#"]?e.moveToElementEditStart(f):e.moveToElementEditEnd(a):f||c==CKEDITOR.ENTER_BR||(f=e.fixBlock(!0,c==CKEDITOR.ENTER_DIV?"div":"p"),e.moveToElementEditStart(f)))),b.selectRanges([e]),i(this)},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var a=this.editor;if(this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||a.config.ignoreEmptyParagraph!==!1&&(b=b.replace(l,function(a,b){return b})),a.setData(b,null,1)},this),this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this),this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this),this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode)},this),this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(a.readOnly),this.attachClass("cke_editable"),this.attachClass(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||a.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+a.config.contentsLangDirection),a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly,a.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),a.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",a.tabIndex),!this.is("textarea")){a.document=this.getDocument(),a.window=this.getWindow();var b=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var e=a.config.contentsLangDirection;this.getDirection(1)!=e&&this.changeAttr("dir",e);var g=CKEDITOR.getCss();g&&(e=b.getHead(),e.getCustomData("stylesheet")||(g=b.appendStyleText(g),g=new CKEDITOR.dom.element(g.ownerNode||g.owningElement),e.setCustomData("stylesheet",g),g.data("cke-temp",1))),e=b.getCustomData("stylesheet_ref")||0,b.setCustomData("stylesheet_ref",e+1),this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling),this.attachListener(this,"click",function(a){var a=a.data,b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var h={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var c,d=b.data.domEvent.getKey();if(d in h){var e,g,i,j,b=a.getSelection(),k=b.getRanges()[0],l=k.startPath(),d=8==d;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(e=b.getSelectedElement())||(e=f(b))?(a.fire("saveSnapshot"),k.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),k.select(),a.fire("saveSnapshot"),c=1):k.collapsed&&((g=l.block)&&(j=g[d?"getPrevious":"getNext"](m))&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("table")&&k[d?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),k[d?"checkEndOfBlock":"checkStartOfBlock"]()&&g.remove(),k["moveToElementEdit"+(d?"End":"Start")](j),k.select(),a.fire("saveSnapshot"),c=1):l.blockLimit&&l.blockLimit.is("td")&&(i=l.blockLimit.getAscendant("table"))&&k.checkBoundaryOfElement(i,d?CKEDITOR.START:CKEDITOR.END)&&(j=i[d?"getPrevious":"getNext"](m))?(a.fire("saveSnapshot"),k["moveToElementEdit"+(d?"End":"Start")](j),k.checkStartOfBlock()&&k.checkEndOfBlock()?j.remove():k.select(),a.fire("saveSnapshot"),c=1):(i=l.contains(["td","th","caption"]))&&k.checkBoundaryOfElement(i,d?CKEDITOR.START:CKEDITOR.END)&&(c=1))}return!c}),a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in h&&!this.getFirst(d)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())}),this.attachListener(this,"dblclick",function(b){return a.readOnly?!1:(b={element:b.data.getTarget()},void a.fire("doubleclick",b))}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),CKEDITOR.env.ie||this.attachListener(this,"mousedown",function(b){var c=b.data.getTarget();c.is("img","hr","input","textarea","select")&&!c.isReadOnly()&&(a.getSelection().selectElement(c),c.is("input","textarea","select")&&b.data.preventDefault())
}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(l,""))){var c=a.createRange();c.moveToElementEditStart(b),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(a,"key",function(b){if(b=b.data.domEvent.getKey(),b in h){var c=8==b,d=a.getSelection().getRanges()[0],b=d.startPath();if(d.collapsed){var e;a:{var f=b.block;if(f)if(d[c?"checkStartOfBlock":"checkEndOfBlock"]())if(d.moveToClosestEditablePosition(f,!c)&&d.collapsed){if(d.startContainer.type==CKEDITOR.NODE_ELEMENT){var g=d.startContainer.getChild(d.startOffset-(c?1:0));if(g&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("hr")){a.fire("saveSnapshot"),g.remove(),e=!0;break a}}if((d=d.startPath().block)&&(!d||!d.contains(f))){a.fire("saveSnapshot");var i;(i=(c?d:f).getBogus())&&i.remove(),e=a.getSelection(),i=e.createBookmarks(),(c?f:d).moveChildren(c?d:f,!1),b.lastElement.mergeSiblings(),j(f,d,!c),e.selectBookmarks(i),e=!0}}else e=!1;else e=!1;else e=!1}if(!e)return}else if(c=d,e=b.block,i=c.endPath().block,e&&i&&!e.equals(i)?(a.fire("saveSnapshot"),(f=e.getBogus())&&f.remove(),c.deleteContents(),i.getParent()&&(i.moveChildren(e,!1),b.lastElement.mergeSiblings(),j(e,i,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.select(),b=!0):b=!1,!b)return;return a.getSelection().scrollIntoView(),a.fire("saveSnapshot"),!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)};var k=CKEDITOR.dom.walker.bogus(),l=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,m=CKEDITOR.dom.walker.whitespaces(!0),n=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(b){var c=b.editor;c.on("insertElement",function(a){a=a.data,a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),c.on("selectionChange",function(b){if(!c.readOnly){var d=c.getSelection();d&&!d.isLocked&&(d=c.checkDirty(),c.fire("lockSnapshot"),a(b),c.fire("unlockSnapshot"),!d&&c.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;a.changeAttr("role","textbox"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c);var d=b.fire("ariaEditorHelpLabel",{}).label;if(d&&(c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var e=CKEDITOR.tools.getNextId(),d=CKEDITOR.dom.element.createFromHtml('<span id="'+e+'" class="cke_voice_label">'+d+"</span>");c.append(d),a.changeAttr("aria-describedby",e)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var o=function(){function a(a){return a.type==CKEDITOR.NODE_ELEMENT}function b(c,d){var e,f,g,h,i=[],k=d.range.startContainer;e=d.range.startPath();for(var k=j[k.getName()],l=0,m=c.getChildren(),n=m.count(),o=-1,p=-1,q=0,r=e.contains(j.$list);n>l;++l)e=m.getItem(l),a(e)?(g=e.getName(),r&&g in CKEDITOR.dtd.$list?i=i.concat(b(e,d)):(h=!!k[g],"br"!=g||!e.data("cke-eol")||l&&l!=n-1||(q=(f=l?i[l-1].node:m.getItem(l+1))&&(!a(f)||!f.is("br")),f=f&&a(f)&&j.$block[f.getName()]),-1==o&&!h&&(o=l),h||(p=l),i.push({isElement:1,isLineBreak:q,isBlock:e.isBlockBoundary(),hasBlockSibling:f,node:e,name:g,allowed:h}),f=q=0)):i.push({isElement:0,node:e,allowed:1});return o>-1&&(i[o].firstNotAllowed=1),p>-1&&(i[p].lastNotAllowed=1),i}function c(b,d){var e,f=[],g=b.getChildren(),h=g.count(),i=0,k=j[d],l=!b.is(j.$inline)||b.is("br");for(l&&f.push(" ");h>i;i++)e=g.getItem(i),a(e)&&!e.is(k)?f=f.concat(c(e,d)):f.push(e);return l&&f.push(" "),f}function e(b){return b&&a(b)&&(b.is(j.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function f(b,c,d,e){var g,h,i=b.clone();i.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(g=new CKEDITOR.dom.walker(i).next())&&a(g)&&k[g.getName()]&&(h=g.getPrevious())&&a(h)&&!h.getParent().equals(b.startContainer)&&d.contains(h)&&e.contains(g)&&g.isIdentical(h)&&(g.moveChildren(h),g.remove(),f(b,c,d,e))}function h(b,c){function d(b,c){return c.isBlock&&c.isElement&&!c.node.is("br")&&a(b)&&b.is("br")?(b.remove(),1):void 0}var e=c.endContainer.getChild(c.endOffset),f=c.endContainer.getChild(c.endOffset-1);e&&d(e,b[b.length-1]),f&&d(f,b[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var j=CKEDITOR.dtd,k={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},l={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},m=CKEDITOR.tools.extend({},j.$inline);return delete m.br,function(k,n,o){var p=k.editor,q=p.getSelection().getRanges()[0],r=!1;if("unfiltered_html"==n&&(n="html",r=!0),!q.checkReadOnly()){var s,t,u,v,w=new CKEDITOR.dom.elementPath(q.startContainer,q.root).blockLimit||q.root,n={type:n,dontFilter:r,editable:k,editor:p,range:q,blockLimit:w,mergeCandidates:[],zombies:[]},p=n.range,r=n.mergeCandidates;if("text"==n.type&&p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(s=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",p.document),p.insertNode(s),p.setStartAfter(s)),t=new CKEDITOR.dom.elementPath(p.startContainer),n.endPath=u=new CKEDITOR.dom.elementPath(p.endContainer),!p.collapsed){var w=u.block||u.blockLimit,x=p.getCommonAncestor();w&&!w.equals(x)&&!w.contains(x)&&p.checkEndOfBlock()&&n.zombies.push(w),p.deleteContents()}for(;(v=a(p.startContainer)&&p.startContainer.getChild(p.startOffset-1))&&a(v)&&v.isBlockBoundary()&&t.contains(v);)p.moveToPosition(v,CKEDITOR.POSITION_BEFORE_END);for(f(p,n.blockLimit,t,u),s&&(p.setEndBefore(s),p.collapse(),s.remove()),s=p.startPath(),(w=s.contains(e,!1,1))&&(p.splitElement(w),n.inlineStylesRoot=w,n.inlineStylesPeak=s.lastElement),s=p.createBookmark(),(w=s.startNode.getPrevious(d))&&a(w)&&e(w)&&r.push(w),(w=s.startNode.getNext(d))&&a(w)&&e(w)&&r.push(w),w=s.startNode;(w=w.getParent())&&e(w);)r.push(w);if(p.moveToBookmark(s),s=o){if(s=n.range,"text"==n.type&&n.inlineStylesRoot){for(v=n.inlineStylesPeak,p=v.getDocument().createText("{cke-peak}"),r=n.inlineStylesRoot.getParent();!v.equals(r);)p=p.appendTo(v.clone()),v=v.getParent();o=p.getOuterHtml().split("{cke-peak}").join(o)}if(v=n.blockLimit.getName(),/^\s+|\s+$/.test(o)&&"span"in CKEDITOR.dtd[v])var y='<span data-cke-marker="1">&nbsp;</span>',o=y+o+y;if(o=n.editor.dataProcessor.toHtml(o,{context:null,fixForBody:!1,dontFilter:n.dontFilter,filter:n.editor.activeFilter,enterMode:n.editor.activeEnterMode}),v=s.document.createElement("body"),v.setHtml(o),y&&(v.getFirst().remove(),v.getLast().remove()),(y=s.startPath().block)&&(1!=y.getChildCount()||!y.getBogus()))a:{var z;if(1==v.getChildCount()&&a(z=v.getFirst())&&z.is(l)){for(y=z.getElementsByTag("*"),s=0,r=y.count();r>s;s++)if(p=y.getItem(s),!p.is(m))break a;z.moveChildren(z.getParent(1)),z.remove()}}n.dataWrapper=v,s=o}if(s){z=n.range;var A,y=z.document,o=n.blockLimit;s=0;var B;v=[];var C,D,E,F,r=p=0;t=z.startContainer;var G,w=n.endPath.elements[0];for(u=w.getPosition(t),x=!(!w.getCommonAncestor(t)||u==CKEDITOR.POSITION_IDENTICAL||u&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),t=b(n.dataWrapper,n),h(t,z);s<t.length;s++){if(u=t[s],A=u.isLineBreak){A=z,E=o;var H=void 0,I=void 0;u.hasBlockSibling?A=1:(H=A.startContainer.getAscendant(j.$block,1),H&&H.is({div:1,p:1})?(I=H.getPosition(E),I==CKEDITOR.POSITION_IDENTICAL||I==CKEDITOR.POSITION_CONTAINS?A=0:(E=A.splitElement(H),A.moveToPosition(E,CKEDITOR.POSITION_AFTER_START),A=1)):A=0)}if(A)r=s>0;else{if(A=z.startPath(),!u.isBlock&&g(n.editor,A.block,A.blockLimit)&&(D=n.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&n.editor.config.autoParagraph!==!1?n.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&(D=y.createElement(D),D.appendBogus(),z.insertNode(D),CKEDITOR.env.needsBrFiller&&(B=D.getBogus())&&B.remove(),z.moveToPosition(D,CKEDITOR.POSITION_BEFORE_END)),(A=z.startPath().block)&&!A.equals(C)&&((B=A.getBogus())&&(B.remove(),v.push(A)),C=A),u.firstNotAllowed&&(p=1),p&&u.isElement){for(A=z.startContainer,E=null;A&&!j[A.getName()][u.name];){if(A.equals(o)){A=null;break}E=A,A=A.getParent()}if(A)E&&(F=z.splitElement(E),n.zombies.push(F),n.zombies.push(E));else{E=o.getName(),G=!s,A=s==t.length-1,E=c(u.node,E);for(var H=[],I=E.length,J=0,K=void 0,L=0,M=-1;I>J;J++)K=E[J]," "==K?(L||G&&!J||(H.push(new CKEDITOR.dom.text(" ")),M=H.length),L=1):(H.push(K),L=0);A&&M==H.length&&H.pop(),G=H}}if(G){for(;A=G.pop();)z.insertNode(A);G=0}else z.insertNode(u.node);u.lastNotAllowed&&s<t.length-1&&((F=x?w:F)&&z.setEndAt(F,CKEDITOR.POSITION_AFTER_START),p=0),z.collapse()}}n.dontMoveCaret=r,n.bogusNeededBlocks=v}B=n.range;var N;for(F=n.bogusNeededBlocks,G=B.createBookmark();C=n.zombies.pop();)C.getParent()&&(D=B.clone(),D.moveToElementEditStart(C),D.removeEmptyBlocksAtEnd());if(F)for(;C=F.pop();)CKEDITOR.env.needsBrFiller?C.appendBogus():C.append(B.document.createText(" "));for(;C=n.mergeCandidates.pop();)C.mergeSiblings();if(B.moveToBookmark(G),!n.dontMoveCaret){for(C=a(B.startContainer)&&B.startContainer.getChild(B.startOffset-1);C&&a(C)&&!C.is(j.$empty);){if(C.isBlockBoundary())B.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END);else{if(e(C)&&C.getHtml().match(/(\s|&nbsp;)$/g)){N=null;break}N=B.clone(),N.moveToPosition(C,CKEDITOR.POSITION_BEFORE_END)}C=C.getLast(d)}N&&B.moveToRange(N)}q.select(),i(k)}}}(),p=function(){function a(a){return a=new CKEDITOR.dom.walker(a),a.guard=function(a,b){return b?!1:a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0},a.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},a}function b(a,b,c){return b=a.getDocument().createElement(b),a.append(b,c),b}function c(a){var b,c=a.count();for(c;c-->0;)b=a.getItem(c),CKEDITOR.tools.trim(b.getHtml())||(b.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&b.getChildCount()&&b.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),g=!1;c(f.getElementsByTag("td")),c(f.getElementsByTag("th")),f=d.clone(),f.setStart(e,0),f=a(f).lastBackward(),f||(f=d.clone(),f.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0),f||(f=e),f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}()}(),function(){function a(){var a,b=this._.fakeSelection;b&&(a=this.getSelection(1),a&&a.isHidden()||(b.reset(),b=0)),(b||(b=a||this.getSelection(1),b&&b.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",b),a=this.elementPath(),a.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=a,this.fire("selectionChange",{selection:b,path:a})))}function b(){m=!0,l||(c.call(this),l=CKEDITOR.tools.setTimeout(c,200,this))}function c(){l=null,m&&(CKEDITOR.tools.setTimeout(a,0,this),m=!1)}function d(a){function b(b,c){return b&&b.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(c?"End":"Start")](b):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var c=a.startContainer,d=a.getPreviousNode(n,null,c),e=a.getNextNode(n,null,c);return!b(d)&&!b(e,1)&&(d||e||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus())?!1:!0}function e(a){return a.getCustomData("cke-fillingChar")}function f(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(b!==!1){var d,e=a.getDocument().getSelection().getNative(),f=e&&"None"!=e.type&&e.getRangeAt(0);if(c.getLength()>1&&f&&f.intersectsNode(c.$)){d=[e.anchorOffset,e.focusOffset],f=e.focusNode==c.$&&e.focusOffset>0,e.anchorNode==c.$&&e.anchorOffset>0&&d[0]--,f&&d[1]--;var h;f=e,f.isCollapsed||(h=f.getRangeAt(0),h.setStart(f.anchorNode,f.anchorOffset),h.setEnd(f.focusNode,f.focusOffset),h=h.collapsed),h&&d.unshift(d.pop())}}c.setText(g(c.getText())),d&&(c=e.getRangeAt(0),c.setStart(c.startContainer,d[0]),c.setEnd(c.startContainer,d[1]),e.removeAllRanges(),e.addRange(c))}}function g(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?" ":""})}function h(a,b,c){var d=a.on("focus",function(a){a.cancel()},null,null,-100);if(CKEDITOR.env.ie)var e=a.getDocument().on("selectionchange",function(a){a.cancel()},null,null,-100);else{var f=new CKEDITOR.dom.range(a);f.moveToElementEditStart(a);var g=a.getDocument().$.createRange();g.setStart(f.startContainer.$,f.startOffset),g.collapse(1),b.removeAllRanges(),b.addRange(g)}c&&a.focus(),d.removeListener(),e&&e.removeListener()}function i(a){var b=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',a.document);a.fire("lockSnapshot"),a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START),d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),c.selectRanges([d]),e.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=b}function j(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())}}}function k(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.getCommonAncestor().isReadOnly()&&a.splice(b,1),!c.collapsed){if(c.startContainer.isReadOnly())for(var d,e=c.startContainer;e&&!((d=e.type==CKEDITOR.NODE_ELEMENT)&&e.is("body")||!e.isReadOnly());)d&&"false"==e.getAttribute("contentEditable")&&c.setStartAfter(e),e=e.getParent();e=c.startContainer,d=c.endContainer;var f=c.startOffset,g=c.endOffset,h=c.clone();e&&e.type==CKEDITOR.NODE_TEXT&&(f>=e.getLength()?h.setStartAfter(e):h.setStartBefore(e)),d&&d.type==CKEDITOR.NODE_TEXT&&(g?h.setEndAfter(d):h.setEndBefore(d)),e=new CKEDITOR.dom.walker(h),e.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();return c.setEndBefore(d),c.collapsed&&a.splice(b--,1),d.getPosition(h.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e)),!0}return!1},e.next()}}return a}var l,m,n=CKEDITOR.dom.walker.invisible(1),o=function(){function a(a){return function(b){var c=b.editor.createRange();return c.moveToClosestEditablePosition(b.selected,a)&&b.editor.getSelection().selectRanges([c]),!1}}function b(a){return function(b){var c,d=b.editor,e=d.createRange();return(c=e.moveToClosestEditablePosition(b.selected,a))||(c=e.moveToClosestEditablePosition(b.selected,!a)),c&&d.getSelection().selectRanges([e]),d.fire("saveSnapshot"),b.selected.remove(),c||(e.moveToElementEditablePosition(d.editable()),d.getSelection().selectRanges([e])),d.fire("saveSnapshot"),!1}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(c){function d(){var a=e.getSelection();a&&a.removeAllRanges()}var e=c.editor;e.on("contentDom",function(){function c(){h=new CKEDITOR.dom.selection(e.getSelection()),h.lock()}function d(){k.removeListener("mouseup",d),n.removeListener("mouseup",d);var a=CKEDITOR.document.$.selection,b=a.createRange();"None"!=a.type&&b.parentElement().ownerDocument==i.$&&b.select()}var g,h,i=e.document,k=CKEDITOR.document,l=e.editable(),m=i.getBody(),n=i.getDocumentElement(),o=l.isInline();if(CKEDITOR.env.gecko&&l.attachListener(l,"focus",function(a){a.removeListener(),0!==g&&(a=e.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==l.$&&(a=e.createRange(),a.moveToElementEditStart(l),a.select())},null,null,-2),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){g&&CKEDITOR.env.webkit&&(g=e._.previousActive&&e._.previousActive.equals(i.getActive())),e.unlockSelection(g),g=0},null,null,-1),l.attachListener(l,"mousedown",function(){g=0}),(CKEDITOR.env.ie||o)&&(p?l.attachListener(l,"beforedeactivate",c,null,null,-1):l.attachListener(e,"selectionCheck",c,null,null,-1),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(h),g=1},null,null,-1),l.attachListener(l,"mousedown",function(){g=0})),CKEDITOR.env.ie&&!o){var q;l.attachListener(l,"mousedown",function(a){2==a.data.$.button&&(a=e.document.getSelection(),a&&a.getType()!=CKEDITOR.SELECTION_NONE||(q=e.window.getScrollPosition()))}),l.attachListener(l,"mouseup",function(a){2==a.data.$.button&&q&&(e.document.$.documentElement.scrollLeft=q.x,e.document.$.documentElement.scrollTop=q.y),q=null}),"BackCompat"!=i.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&n.on("mousedown",function(a){function b(a){if(a=a.data.$,d){var b=m.$.createTextRange();try{b.moveToPoint(a.clientX,a.clientY)}catch(c){}d.setEndPoint(f.compareEndPoints("StartToStart",b)<0?"EndToEnd":"StartToStart",b),d.select()}}function c(){n.removeListener("mousemove",b),k.removeListener("mouseup",c),n.removeListener("mouseup",c),d.select()}if(a=a.data,a.getTarget().is("html")&&a.$.y<n.$.clientHeight&&a.$.x<n.$.clientWidth){var d=m.$.createTextRange();try{d.moveToPoint(a.$.clientX,a.$.clientY)}catch(e){}var f=d.duplicate();n.on("mousemove",b),k.on("mouseup",c),n.on("mouseup",c)}}),CKEDITOR.env.version>7&&CKEDITOR.env.version<11&&n.on("mousedown",function(a){a.data.getTarget().is("html")&&(k.on("mouseup",d),n.on("mouseup",d))}))}if(l.attachListener(l,"selectionchange",a,e),l.attachListener(l,"keyup",b,e),l.attachListener(l,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck(),e.selectionChange(1)}),o&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var r;l.attachListener(l,"mousedown",function(){r=1}),l.attachListener(i.getDocumentElement(),"mouseup",function(){r&&b.call(e),r=0})}else l.attachListener(CKEDITOR.env.ie?l:i.getDocumentElement(),"mouseup",b,e);CKEDITOR.env.webkit&&l.attachListener(i,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:f(l)}},null,null,-1),l.attachListener(l,"keydown",j(e),null,null,-1)}),e.on("setData",function(){e.unlockSelection(),CKEDITOR.env.webkit&&d()}),e.on("contentDomUnload",function(){e.unlockSelection()}),CKEDITOR.env.ie9Compat&&e.on("beforeDestroy",d,null,null,9),e.on("dataReady",function(){delete e._.fakeSelection,delete e._.hiddenSelectionContainer,e.selectionChange(1)}),e.on("loadSnapshot",function(){var a=e.editable().getLast(function(a){return a.type==CKEDITOR.NODE_ELEMENT});a&&a.hasAttribute("data-cke-hidden-sel")&&a.remove()},null,null,100),e.on("key",function(a){if("wysiwyg"==e.mode){var b=e.getSelection();if(b.isFake){var c=o[a.data.keyCode];if(c)return c({editor:e,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})}),CKEDITOR.on("instanceReady",function(a){function b(){var a=d.editable();if(a&&(a=e(a))){var b=d.document.$.defaultView.getSelection();"Caret"==b.type&&b.anchorNode==a.$&&(i=1),h=a.getText(),a.setText(g(h))}}function c(){var a=d.editable();a&&(a=e(a))&&(a.setText(h),i&&(d.document.$.defaultView.getSelection().setPosition(a.$,a.getLength()),i=0))}var d=a.editor;if(CKEDITOR.env.webkit){d.on("selectionChange",function(){var a=d.editable(),b=e(a);b&&(b.getCustomData("ready")?f(a):b.setCustomData("ready",1))},null,null,-1),d.on("beforeSetMode",function(){f(d.editable())},null,null,-1);var h,i;d.on("beforeUndoImage",b),d.on("afterUndoImage",c),d.on("beforeGetData",b,null,null,0),d.on("getData",c)}}),CKEDITOR.editor.prototype.selectionChange=function(c){(c?a:b).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(a){return a=a||this.getSelection(1),a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var p="function"!=typeof window.getSelection,q=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection)var b=a,a=a.root;var c=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:q++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=a=c?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;c=p?this.document.$.selection:this.document.getWindow().$.getSelection(),CKEDITOR.env.webkit?("None"==c.type&&this.document.getActive().equals(a)||"Caret"==c.type&&c.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&h(a,c):CKEDITOR.env.gecko?c&&this.document.getActive().equals(a)&&c.anchorNode&&c.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&h(a,c,!0):CKEDITOR.env.ie&&(b=this.document.getActive(),p?"None"==c.type&&b&&b.equals(this.document.getDocumentElement())&&h(a,null,!0):((c=c&&c.anchorNode)&&(c=new CKEDITOR.dom.node(c)),b&&b.equals(this.document.getDocumentElement())&&c&&(a.equals(c)||a.contains(c))&&h(a,null,!0)));var d,e,a=this.getNative();if(a)if(a.getRangeAt)d=(e=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(e.commonAncestorContainer);else{try{e=a.createRange()}catch(f){}d=e&&CKEDITOR.dom.element.get(e.item&&e.item(0)||e.parentElement())}return(!d||d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_TEXT||!this.root.equals(d)&&!this.root.contains(d))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var r={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=p?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:p?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(c&&c.rangeCount){if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&c.endOffset-c.startOffset==1&&r[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=p?function(){function a(a){return new CKEDITOR.dom.node(a).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e,f,g,h,i=d.children,j=b.duplicate(),k=0,l=i.length-1,m=-1;l>=k;)if(m=Math.floor((k+l)/2),e=i[m],j.moveToElementText(e),g=j.compareEndPoints("StartToStart",b),g>0)l=m-1;else{if(!(0>g))return{container:d,offset:a(e)};k=m+1}if(-1==m||m==i.length-1&&0>g){if(j.moveToElementText(d),j.setEndPoint("StartToStart",b),j=j.text.replace(/(\r\n|\r)/g,"\n").length,i=d.childNodes,!j)return e=i[i.length-1],e.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:i.length}:{container:e,offset:e.nodeValue.length};for(d=i.length;j>0&&d>0;)f=i[--d],f.nodeType==CKEDITOR.NODE_TEXT&&(h=f,j-=f.nodeValue.length);return{container:h,offset:-j}}if(j.collapse(g>0?!0:!1),j.setEndPoint(g>0?"StartToStart":"EndToStart",b),j=j.text.replace(/(\r\n|\r)/g,"\n").length,!j)return{container:d,offset:a(e)+(g>0?0:1)};for(;j>0;)try{f=e[g>0?"previousSibling":"nextSibling"],f.nodeType==CKEDITOR.NODE_TEXT&&(j-=f.nodeValue.length,h=f),e=f}catch(n){return{container:d,offset:a(e)}}return{container:h,offset:g>0?-j:h.nodeValue.length+j}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),g=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<g.childNodes.length&&g.childNodes[h]!=f;h++);a.setStart(new CKEDITOR.dom.node(g),h),a.setEnd(new CKEDITOR.dom.node(g),h+1),d.push(a)}return d}return[]}}():function(){var a,b=[],c=this.getNative();if(!c)return b;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);a=new CKEDITOR.dom.range(this.root),a.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset),a.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset),b.push(a)}return b};return function(b){var c=this._.cache,d=c.ranges;return d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this))),b?k(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if(b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if(b=b.getChild(c.startOffset),b&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a,c,d=b.getRanges()[0].clone(),e=2;!(!e||(a=d.getEnclosedNode())&&a.type==CKEDITOR.NODE_ELEMENT&&r[a.getName()]&&(c=a));e--)d.shrink(CKEDITOR.SHRINK_ELEMENT);return c&&c.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=p?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;this.isLocked=0,this.reset(),a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection&&this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var c=a.checkDirty();a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot"),!c&&a.resetDirty()}delete a._.hiddenSelectionContainer}this.rev=q++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(a){var b=this.root.editor,b=b&&b._.hiddenSelectionContainer;if(this.reset(),b)for(var c,b=this.root,e=0;e<a.length;++e)c=a[e],c.endContainer.equals(b)&&(c.endOffset=Math.min(c.endOffset,b.getChildCount()));if(a.length)if(this.isLocked){var g=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(a),this.lock(),g&&!g.equals(this.root)&&g.focus()}else{var h,i,j;if((1!=a.length||(j=a[0]).collapsed||!(h=j.getEnclosedNode())||h.type!=CKEDITOR.NODE_ELEMENT||(j=j.clone(),j.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(i=j.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&(h=i),"false"!=h.getAttribute("contenteditable")))&&(h=void 0),h)this.fake(h);else{if(p){j=CKEDITOR.dom.walker.whitespaces(!0),i=/\ufeff|\u00a0/,b={table:1,tbody:1,tr:1},a.length>1&&(h=a[a.length-1],a[0].setEnd(h.endContainer,h.endOffset)),h=a[0];var k,l,m,a=h.collapsed;if((c=h.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in r&&(!c.is("a")||!c.getText()))try{return m=c.$.createControlRange(),m.addElement(c.$),void m.select()}catch(n){}(h.startContainer.type==CKEDITOR.NODE_ELEMENT&&h.startContainer.getName()in b||h.endContainer.type==CKEDITOR.NODE_ELEMENT&&h.endContainer.getName()in b)&&(h.shrink(CKEDITOR.NODE_ELEMENT,!0),a=h.collapsed),m=h.createBookmark(),b=m.startNode,a||(g=m.endNode),m=h.document.$.body.createTextRange(),m.moveToElementText(b.$),m.moveStart("character",1),g?(i=h.document.$.body.createTextRange(),i.moveToElementText(g.$),m.setEndPoint("EndToEnd",i),m.moveEnd("character",-1)):(k=b.getNext(j),l=b.hasAscendant("pre"),k=!(k&&k.getText&&k.getText().match(i))&&(l||!b.hasPrevious()||b.getPrevious().is&&b.getPrevious().is("br")),l=h.document.createElement("span"),l.setHtml("&#65279;"),l.insertBefore(b),k&&h.document.createText("").insertBefore(b)),h.setStartBefore(b),b.remove(),a?(k?(m.moveStart("character",-1),m.select(),h.document.$.selection.clear()):m.select(),h.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START),l.remove()):(h.setEndBefore(g),g.remove(),m.select())}else{if(g=this.getNative(),!g)return;for(this.removeAllRanges(),m=0;m<a.length;m++)if(m<a.length-1&&(k=a[m],l=a[m+1],i=k.clone(),i.setStart(k.endContainer,k.endOffset),i.setEnd(l.startContainer,l.startOffset),!i.collapsed&&(i.shrink(CKEDITOR.NODE_ELEMENT,!0),h=i.getCommonAncestor(),i=i.getEnclosedNode(),h.isReadOnly()||i&&i.isReadOnly())))l.setStart(k.startContainer,k.startOffset),a.splice(m--,1);else{h=a[m],l=this.document.$.createRange(),h.collapsed&&CKEDITOR.env.webkit&&d(h)&&(k=this.root,f(k,!1),i=k.getDocument().createText("​"),k.setCustomData("cke-fillingChar",i),h.insertNode(i),(k=i.getNext())&&!i.getPrevious()&&k.type==CKEDITOR.NODE_ELEMENT&&"br"==k.getName()?(f(this.root),h.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START)):h.moveToPosition(i,CKEDITOR.POSITION_AFTER_END)),l.setStart(h.startContainer.$,h.startOffset);try{l.setEnd(h.endContainer.$,h.endOffset)}catch(o){if(!(o.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw o;h.collapse(1),l.setEnd(h.endContainer.$,h.endOffset)
}g.addRange(l)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a){var b=this.root.editor;this.reset(),i(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a),d.setEndAfter(a),c.ranges=new CKEDITOR.dom.rangeList(d),c.selectedElement=c.startElement=a,c.type=CKEDITOR.SELECTION_ELEMENT,c.selectedText=c.nativeSel=null,this.isFake=1,this.rev=q++,b._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var b=[],c=0;c<a.length;c++){var d=new CKEDITOR.dom.range(this.root);d.moveToBookmark(a[c]),b.push(d)}return a.isFake?this.fake(b[0].getEnclosedNode()):this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[p?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)}return c}function b(c){var e=c.document;if(c.collapsed)e=q(this,e),c.insertNode(e),c.moveToPosition(e,CKEDITOR.POSITION_BEFORE_END);else{var f,g=this.element,h=this._.definition,i=h.ignoreReadonly,j=i||h.includeReadonly;null==j&&(j=c.root.getCustomData("cke_includeReadonly"));var k=CKEDITOR.dtd[g];k||(f=!0,k=CKEDITOR.dtd.span),c.enlarge(CKEDITOR.ENLARGE_INLINE,1),c.trim();var l,m=c.createBookmark(),o=m.startNode,p=m.endNode,r=o;if(!i){var s=c.getCommonAncestor(),i=a(o,s),s=a(p,s);i&&(r=i.getNextSourceNode(!0)),s&&(p=s)}for(r.getPosition(p)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){if(i=!1,r.equals(p))r=null,i=!0;else{var t=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,s=t&&"false"==r.getAttribute("contentEditable"),u=t&&r.getAttribute("data-nostyle");if(t&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(s&&j&&CKEDITOR.dtd.$block[t])for(var v=r,w=d(v),x=void 0,y=w.length,z=0,v=y&&new CKEDITOR.dom.range(v.getDocument());y>z;++z){var x=w[z],B=CKEDITOR.filter.instances[x.data("cke-filter")];(B?B.check(this):1)&&(v.selectNodeContents(x),b.call(this,v))}if(w=t?!k[t]||u?0:s&&!j?0:(r.getPosition(p)|C)==C&&(!h.childRule||h.childRule(r)):1){if(!(w=r.getParent())||!(w.getDtd()||CKEDITOR.dtd.span)[g]&&!f||h.parentRule&&!h.parentRule(w))i=!0;else if(l||t&&CKEDITOR.dtd.$removeEmpty[t]&&(r.getPosition(p)|C)!=C||(l=c.clone(),l.setStartBefore(r)),t=r.type,t==CKEDITOR.NODE_TEXT||s||t==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var E,t=r;(i=!t.getNext(A))&&(E=t.getParent(),k[E.getName()])&&(E.getPosition(o)|D)==D&&(!h.childRule||h.childRule(E));)t=E;l.setEndAfter(t)}}else i=!0;r=r.getNextSourceNode(u||s)}if(i&&l&&!l.collapsed){for(var F,G,H,i=q(this,e),s=i.hasAttributes(),u=l.getCommonAncestor(),t={},w={},x={},y={};i&&u;){if(u.getName()==g){for(F in h.attributes)!y[F]&&(H=u.getAttribute(G))&&(i.getAttribute(F)==H?w[F]=1:y[F]=1);for(G in h.styles)!x[G]&&(H=u.getStyle(G))&&(i.getStyle(G)==H?t[G]=1:x[G]=1)}u=u.getParent()}for(F in w)i.removeAttribute(F);for(G in t)i.removeStyle(G);s&&!i.hasAttributes()&&(i=null),i?(l.extractContents().appendTo(i),l.insertNode(i),n.call(this,i),i.mergeSiblings(),CKEDITOR.env.ie||i.$.normalize()):(i=new CKEDITOR.dom.element("span"),l.extractContents().appendTo(i),l.insertNode(i),n.call(this,i),i.remove(!0)),l=null}}c.moveToBookmark(m),c.shrink(CKEDITOR.SHRINK_TEXT),c.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),b=new CKEDITOR.dom.elementPath(j.getParent()),c=null,e=null,f=0;f<a.elements.length;f++){var g=a.elements[f];if(g==a.block||g==a.blockLimit)break;k.checkElementRemovable(g)&&(c=g)}for(f=0;f<b.elements.length&&(g=b.elements[f],g!=b.block&&g!=b.blockLimit);f++)k.checkElementRemovable(g)&&(e=g);e&&j.breakParent(e),c&&d.breakParent(c)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode;if(a.collapsed){for(var e,f,g=new CKEDITOR.dom.elementPath(d.getParent(),a.root),h=0;h<g.elements.length&&(f=g.elements[h])&&(f!=g.block&&f!=g.blockLimit);h++)if(this.checkElementRemovable(f)){var i;a.collapsed&&(a.checkBoundaryOfElement(f,CKEDITOR.END)||(i=a.checkBoundaryOfElement(f,CKEDITOR.START)))?(e=f,e.match=i?"start":"end"):(f.mergeSiblings(),f.is(this.element)?m.call(this,f):o(f,t(this)[f.getName()]))}if(e){for(f=d,h=0;i=g.elements[h],!i.equals(e);h++)i.match||(i=i.clone(),i.append(f),f=i);f["start"==e.match?"insertBefore":"insertAfter"](e)}}else{var j=c.endNode,k=this;for(b(),g=d;!g.equals(j);)e=g.getNextSourceNode(),g.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(g)&&(g.getName()==this.element?m.call(this,g):o(g,t(this)[g.getName()]),e.type==CKEDITOR.NODE_ELEMENT&&e.contains(d)&&(b(),e=d.getNext())),g=e}a.moveToBookmark(c),a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function d(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function e(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&r(a,this)}function f(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&a.removeStyle(e)}}function g(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var d,e,f=a.document;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(e=q(this,f,d),i(d,e));a.moveToBookmark(b)}function h(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),i(d,e)):m.call(this,d));a.moveToBookmark(b)}function i(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;if(d&&!e){if(e=b,(f=a.getBogus())&&f.remove(),f=a.getHtml(),f=k(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),f=f.replace(/([ \t\n\r]+|&nbsp;)/g," "),f=f.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var g=a.getDocument().createElement("div");g.append(e),e.$.outerHTML="<pre>"+f+"</pre>",e.copyAttributes(g.getFirst()),e=g.getFirst().remove()}else e.setHtml(f);b=e}else f?b=l(c?[a.getHtml()]:j(a),b):a.moveChildren(b);if(b.replace(a),d){var h,c=b;(h=c.getPrevious(B))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is("pre")&&(d=k(h.getHtml(),/\n$/,"")+"\n\n"+k(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),h.remove())}else c&&p(b)}function j(a){var b=[];return k(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}function k(a,b,c){var d="",e="",a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""});return d+a.replace(b,c)+e}function l(a,b){var c;a.length>1&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=k(e,/^[ \t]*\n/,""),e=k(e,/\n$/,""),e=k(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e),c.append(f)}else b.setHtml(e)}return c||b}function m(a,b){var c,d=this._.definition,e=d.attributes,d=d.styles,f=t(this)[a.getName()],g=CKEDITOR.tools.isEmpty(e)&&CKEDITOR.tools.isEmpty(d);for(c in e)("class"==c||this._.definition.fullMatch)&&a.getAttribute(c)!=u(c,e[c])||b&&"data-"==c.slice(0,5)||(g=a.hasAttribute(c),a.removeAttribute(c));for(var h in d)this._.definition.fullMatch&&a.getStyle(h)!=u(h,d[h],!0)||(g=g||!!a.getStyle(h),a.removeStyle(h));o(a,f,w[a.getName()]),g&&(this._.definition.alwaysRemoveElement?p(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?p(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function n(a){for(var b,c=t(this),d=a.getElementsByTag(this.element),e=d.count();--e>=0;)b=d.getItem(e),b.isReadOnly()||m.call(this,b,!0);for(var f in c)if(f!=this.element)for(d=a.getElementsByTag(f),e=d.count()-1;e>=0;e--)b=d.getItem(e),b.isReadOnly()||o(b,c[f])}function o(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var e,f=b[d][0];if(e=a.getAttribute(f)){var g=b[d][1];(null===g||g.test&&g.test(e)||"string"==typeof g&&e==g)&&a.removeAttribute(f)}}c||p(a)}function p(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(B),d=a.getNext(B);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br",1),d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function q(a,b,c){var d;return d=a.element,"*"==d&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=r(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function r(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);return c&&a.setAttribute("style",c),a}function s(a,b){for(var c in a)a[c]=a[c].replace(z,function(a,c){return b[c]})}function t(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var e,f,g=c[d];if("string"==typeof g?e=g.toLowerCase():(e=g.element?g.element.toLowerCase():a.element,f=g.attributes),g=b[e]||(b[e]={}),f){var h,g=g.attributes=g.attributes||[];for(h in f)g.push([h.toLowerCase(),f[h]])}}}return b}function u(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function v(a,b,c){for(var d,e=a.document,f=a.getRanges(),b=b?this.removeFromRange:this.applyToRange,g=f.createIterator();d=g.getNextRange();)b.call(this,d,c);a.selectRanges(f),e.removeCustomData("doc_processing_style")}var w={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},x={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},y=/\s*(?:;\s*|$)/,z=/#\((.+?)\)/g,A=CKEDITOR.dom.walker.bookmark(0,1),B=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(a=CKEDITOR.tools.clone(a),s(a.attributes,b),s(a.styles,b)),c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(w[c]?CKEDITOR.STYLE_BLOCK:x[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}},CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return v.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),v.call(this,a.getSelection(),0,a),this._.enterMode=b}},remove:function(a){if(a instanceof CKEDITOR.dom.document)return v.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode),v.call(this,a.getSelection(),1,a),this._.enterMode=b}},applyToRange:function(a){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?g:this.type==CKEDITOR.STYLE_OBJECT?e:null,this.applyToRange(a)},removeFromRange:function(a){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?h:this.type==CKEDITOR.STYLE_OBJECT?f:null,this.removeFromRange(a)},applyToObject:function(a){r(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var c,d=a.elements,e=0;e<d.length;e++)if(c=d[e],this.type!=CKEDITOR.STYLE_INLINE||c!=a.block&&c!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=c.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(c,!0,b))return!0}}return!1},checkApplicable:function(a,b,c){if(b&&b instanceof CKEDITOR.filter&&(c=b),c&&!c.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];(g=CKEDITOR.style.getStyleText(c))&&(d.style||e++,d.style=g),d._length=e,c=c._AC=d}if(!c._length)return!0;for(var h in c)if("_length"!=h){if(e=a.getAttribute(h)||"","style"==h)a:{d=c[h],"string"==typeof d&&(d=CKEDITOR.tools.parseCssText(d)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),g=void 0;for(g in d)if(!(g in e)||e[g]!=d[g]&&"inherit"!=d[g]&&"inherit"!=e[g]){d=!1;break a}d=!0}else d=c[h]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b,c){if(this.checkElementMatch(a,b,c))return!0;if(b=t(this)[a.getName()]){var d;if(!(b=b.attributes))return!0;for(c=0;c<b.length;c++)if(d=b[c][0],d=a.getAttribute(d)){var e=b[c][1];if(null===e||"string"==typeof e&&d==e||e.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["<",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');return(e=CKEDITOR.style.getStyleText(b))&&c.push(' style="',e,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(y,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(y,";");"inherit"==f?d+=g:c+=g}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a},this.setup&&this.setup(a)};return b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,!0),this.customHandlers[a.type]=b};var C=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,D=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,b){this.requiredContent=this.allowedContent=this.style=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus(),this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,b,c){CKEDITOR.stylesSet.addExternal(a,b,""),CKEDITOR.stylesSet.load(a,c)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,b){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;d.fn.call(this,e)}})),c.push({style:a,fn:b})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var b=this,c=b.config.stylesCombo_stylesSet||b.config.stylesSet;if(c===!1)a(null);else if(c instanceof Array)b._.stylesDefinitions=c,a(c);else{c||(c="default");var c=c.split(":"),d=c[0];CKEDITOR.stylesSet.addExternal(d,c[1]?c.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(d,function(c){b._.stylesDefinitions=c[d],a(b._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createComment(a)),CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var a,b={},c={};for(a in CKEDITOR.dtd.$blockLimit)a in CKEDITOR.dtd.$list||(b[a]=1);for(a in CKEDITOR.dtd.$block)a in CKEDITOR.dtd.$blockLimit||a in CKEDITOR.dtd.$empty||(c[a]=1);CKEDITOR.dom.elementPath=function(a,d){var e,f=null,g=null,h=[],i=a,d=d||a.getDocument().getBody();do if(i.type==CKEDITOR.NODE_ELEMENT){if(h.push(i),!this.lastElement&&(this.lastElement=i,i.is(CKEDITOR.dtd.$object)||"false"==i.getAttribute("contenteditable")))continue;if(i.equals(d))break;if(!g&&(e=i.getName(),"true"==i.getAttribute("contenteditable")?g=i:!f&&c[e]&&(f=i),b[e])){var j;if(j=!f){if(e="div"==e){a:{e=i.getChildren(),j=0;for(var k=e.count();k>j;j++){var l=e.getItem(j);if(l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[l.getName()]){e=!0;break a}}e=!1}e=!e}j=e}j?f=i:g=i}}while(i=i.getParent());g||(g=d),this.block=f,this.blockLimit=g,this.root=d,this.elements=h}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var b=this.elements,a=a&&a.elements;if(!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++)if(!b[c].equals(a[c]))return!1;return!0},contains:function(a,b,c){var d;"string"==typeof a&&(d=function(b){return b.getName()==a}),a instanceof CKEDITOR.dom.element?d=function(b){return b.equals(a)}:CKEDITOR.tools.isArray(a)?d=function(b){return CKEDITOR.tools.indexOf(a,b.getName())>-1}:"function"==typeof a?d=a:"object"==typeof a&&(d=function(b){return b.getName()in a});var e=this.elements,f=e.length;for(b&&f--,c&&(e=Array.prototype.slice.call(e,0),e.reverse()),b=0;f>b;b++)if(d(e[b]))return e[b];return null},isContextFor:function(a){var b;return a in CKEDITOR.dtd.$block?(b=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!b.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a)),this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var b=this.$.parentNode,c=b.childNodes.length,d=this.getLength(),e=this.getDocument(),f=new CKEDITOR.dom.text(this.$.splitText(a),e);return b.childNodes.length==c&&(a>=d?(f=e.createText(""),f.insertAfter(this)):(a=e.createText(""),a.insertAfter(f),a.remove())),f},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),function(){function a(a,b,c){var d=a.serializable,e=b[c?"endContainer":"startContainer"],f=c?"endOffset":"startOffset",g=d?b.document.getById(a.startNode):a.startNode,a=d?b.document.getById(a.endNode):a.endNode;return e.equals(g.getPrevious())?(b.startOffset=b.startOffset-e.getLength()-a.getPrevious().getLength(),e=a.getNext()):e.equals(a.getPrevious())&&(b.startOffset=b.startOffset-e.getLength(),e=a.getNext()),e.equals(g.getParent())&&b[f]++,e.equals(a.getParent())&&b[f]++,b[c?"endContainer":"startContainer"]=e,b}CKEDITOR.dom.rangeList=function(a){return a instanceof CKEDITOR.dom.rangeList?a:(a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[],CKEDITOR.tools.extend(a,b))};var b={createIterator:function(){var a,b=this,c=CKEDITOR.dom.walker.bookmark(),d=[];return{getNextRange:function(e){a=void 0===a?0:a+1;var f=b[a];if(f&&b.length>1){if(!a)for(var g=b.length-1;g>=0;g--)d.unshift(b[g].createBookmark(!0));if(e)for(var h=0;b[a+h+1];){for(var i=f.document,e=0,g=i.getById(d[h].endNode),i=i.getById(d[h+1].startNode);;){if(g=g.getNextSourceNode(!1),i.equals(g))e=1;else if(c(g)||g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary())continue;break}if(!e)break;h++}for(f.moveToBookmark(d.shift());h--;)g=b[++a],g.moveToBookmark(d.shift()),f.setEnd(g.endContainer,g.endOffset)}return f}}},createBookmarks:function(b){for(var c,d=[],e=0;e<this.length;e++){d.push(c=this[e].createBookmark(b,!0));for(var f=e+1;f<this.length;f++)this[f]=a(c,this[f]),this[f]=a(c,this[f],!0)}return d},createBookmarks2:function(a){for(var b=[],c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function b(b){var c=CKEDITOR.skin["ua_"+b],d=CKEDITOR.env;if(c)for(var e,c=c.split(",").sort(function(a,b){return a>b?-1:1}),f=0;f<c.length;f++)if(e=c[f],d.ie&&(e.replace(/^ie/,"")==d.version||d.quirks&&"iequirks"==e)&&(e="ie"),d[e]){b+="_"+c[f];break}return CKEDITOR.getUrl(a()+b+".css")}function c(a,c){f[a]||(CKEDITOR.document.appendStyleSheet(b(a)),f[a]=1),c&&c()}function d(a){var b=a.getById(g);return b||(b=a.getHead().append("style"),b.setAttribute("id",g),b.setAttribute("type","text/css")),b}function e(a,b,c){var d,e,f;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var g=0;g<a.length;g++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[g].$.sheet.addRule(b[e][0],f)}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?a[g].$.styleSheet.cssText=a[g].$.styleSheet.cssText+f:a[g].$.innerHTML=a[g].$.innerHTML+f}}var f={};CKEDITOR.skin={path:a,loadPart:function(b,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){c(b,d)}):c(b,d)},getPath:function(a){return CKEDITOR.getUrl(b(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var f;return a&&(a=a.toLowerCase(),b&&(f=this.icons[a+"-rtl"]),f||(f=this.icons[a])),a=c||f&&f.path||"",d=d||f&&f.offset,e=e||f&&f.bgsize||"16px",a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var b=d(CKEDITOR.document);return(this.setUiColor=function(a){var c=CKEDITOR.skin.chameleon,d=[[i,a]];this.uiColor=a,e([b],c(this,"editor"),d),e(h,c(this,"panel"),d)}).call(this,a)}});var g="cke_ui_color",h=[],i=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var b=a.editor,a=function(a){if(a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!a.getById("cke_ui_color")){a=d(a),h.push(a);var c=b.getUiColor();c&&e([a],CKEDITOR.skin.chameleon(b,"panel"),[[i,c]])}};b.on("panelShow",a),b.on("menuShow",a),b.config.uiColor&&b.setUiColor(b.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var b=a.getComputedStyle("border-top-color"),c=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!b||b!=c)}catch(d){CKEDITOR.env.hc=!1}a.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,b=0;b<a.length;b++)CKEDITOR.editor.prototype.constructor.apply(a[b][0],a[b][1]),CKEDITOR.add(a[b][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8",CKEDITOR.skin.chameleon=function(){var a=function(){return function(a,b){for(var c=a.match(/[^#]./g),d=0;3>d;d++){var e,f=c,g=d;e=parseInt(c[d],16),e=("0"+(0>b?0|e*(1+b):0|e+(255-e)*b).toString(16)).slice(-2),f[g]=e}return"#"+c.join("")}}(),b=function(){var a=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(b,c){return a.output({from:b,to:c})}}(),c={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(d,e){var f=d.uiColor,f={id:"."+d.id,defaultBorder:a(f,-.1),defaultGradient:b(a(f,.9),f),lightGradient:b(a(f,1),a(f,.7)),mediumGradient:b(a(f,.8),a(f,.5)),ckeButtonOn:b(a(f,.6),a(f,.7)),ckeResizer:a(f,-.4),ckeToolbarSeparator:a(f,.5),ckeColorauto:a(f,.8),dialogBody:a(f,.7),dialogTabSelected:b("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:a(f,-.6),elementsPathBg:f,menubuttonIcon:a(f,.5),menubuttonIconHover:a(f,.3)};return c[e].output(f).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={}),this._["default"]=this._.initValue=a["default"]||"",this._.required=a.required||!1;for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},b={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},c={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},d={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},e=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),f=/^on([A-Z]\w+)/,g=function(a){for(var b in a)(f.test(b)||"title"==b||"type"==b)&&delete a[b];return a};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(b,c,d,e){if(!(arguments.length<4)){var f=a.call(this,c);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var g={role:c.role||"presentation"};c.includeLabel&&(g["aria-labelledby"]=f.labelId),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"div",null,g,function(){var a=[],d=c.required?" cke_required":"";return"horizontal"!=c.labelLayout?a.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",c.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',c.controlStyle?' style="'+c.controlStyle+'"':"",' role="presentation">',e.call(this,b,c),"</div>"):(d={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(c.controlStyle?' style="'+c.controlStyle+'"':"")+">"+e.call(this,b,c)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(b,d,a)),a.join("")})}},textInput:function(b,c,d){if(!(arguments.length<3)){a.call(this,c);var e=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",f={"class":"cke_dialog_ui_input_"+c.type,id:e,type:c.type};c.validate&&(this.validate=c.validate),c.maxLength&&(f.maxlength=c.maxLength),c.size&&(f.size=c.size),c.inputStyle&&(f.style=c.inputStyle);
var g=this,h=!1;b.on("load",function(){g.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(h=!0)}),g.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&h&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),h=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=['<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'];c.width&&a.push('style="width:'+c.width+'" '),a.push("><input "),f["aria-labelledby"]=this._.labelId,this._.required&&(f["aria-required"]=this._.required);for(var b in f)a.push(b+'="'+f[b]+'" ');return a.push(" /></div>"),a.join("")})}},textarea:function(b,c,d){if(!(arguments.length<3)){a.call(this,c);var e=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",g={};c.validate&&(this.validate=c.validate),g.rows=c.rows||5,g.cols=c.cols||20,g["class"]="cke_dialog_ui_input_textarea "+(c["class"]||""),"undefined"!=typeof c.inputStyle&&(g.style=c.inputStyle),c.dir&&(g.dir=c.dir),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){g["aria-labelledby"]=this._.labelId,this._.required&&(g["aria-required"]=this._.required);var a,b=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',f,'" '];for(a in g)b.push(a+'="'+CKEDITOR.tools.htmlEncode(g[a])+'" ');return b.push(">",CKEDITOR.tools.htmlEncode(e._["default"]),"</textarea></div>"),b.join("")})}},checkbox:function(b,c,d){if(!(arguments.length<3)){var e=a.call(this,c,{"default":!!c["default"]});c.validate&&(this.validate=c.validate),CKEDITOR.ui.dialog.uiElement.call(this,b,c,d,"span",null,null,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],f=CKEDITOR.tools.getNextId()+"_label",h={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":f};return g(a),c["default"]&&(h.checked="checked"),"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.checkbox=new CKEDITOR.ui.dialog.uiElement(b,a,d,"input",null,h),d.push(' <label id="',f,'" for="',h.id,'"'+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(c.label),"</label>"),d.join("")})}},radio:function(b,c,d){if(!(arguments.length<3)){a.call(this,c),this._["default"]||(this._["default"]=this._.initValue=c.items[0][1]),c.validate&&(this.validate=c.valdiate);var e=[],f=this;c.role="radiogroup",c.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){for(var a=[],d=[],h=(c.id?c.id:CKEDITOR.tools.getNextId())+"_radio",i=0;i<c.items.length;i++){var j=c.items[i],k=void 0!==j[2]?j[2]:j[0],l=void 0!==j[1]?j[1]:j[0],m=CKEDITOR.tools.getNextId()+"_radio_input",n=m+"_label",m=CKEDITOR.tools.extend({},c,{id:m,title:null,type:null},!0),k=CKEDITOR.tools.extend({},m,{title:k},!0),o={type:"radio","class":"cke_dialog_ui_radio_input",name:h,value:l,"aria-labelledby":n},p=[];f._["default"]==l&&(o.checked="checked"),g(m),g(k),"undefined"!=typeof m.inputStyle&&(m.style=m.inputStyle),m.keyboardFocusable=!0,e.push(new CKEDITOR.ui.dialog.uiElement(b,m,p,"input",null,o)),p.push(" "),new CKEDITOR.ui.dialog.uiElement(b,k,p,"label",null,{id:n,"for":o.id},j[0]),a.push(p.join(""))}return new CKEDITOR.ui.dialog.hbox(b,e,a,d),d.join("")}),this._.children=e}},button:function(b,c,d){if(arguments.length){"function"==typeof c&&(c=c(b.getParentEditor())),a.call(this,c,{disabled:c.disabled||!1}),CKEDITOR.event.implementOn(this);var e=this;b.on("load",function(){var a=this.getElement();!function(){a.on("click",function(a){e.click(),a.data.preventDefault()}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(e.click(),a.data.preventDefault())})}(),a.unselectable()},this);var f=CKEDITOR.tools.extend({},c);delete f.style;var g=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,b,f,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true","class":c["class"],role:"button","aria-labelledby":g},'<span id="'+g+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(c.label)+"</span>")}},select:function(b,c,d){if(!(arguments.length<3)){var e=a.call(this,c);c.validate&&(this.validate=c.validate),e.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){var a=CKEDITOR.tools.extend({},c,{id:c.id?c.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],f=[],h={id:e.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};d.push('<div class="cke_dialog_ui_input_',c.type,'" role="presentation"'),c.width&&d.push('style="width:'+c.width+'" '),d.push(">"),void 0!=c.size&&(h.size=c.size),void 0!=c.multiple&&(h.multiple=c.multiple),g(a);for(var i,j=0;j<c.items.length&&(i=c.items[j]);j++)f.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==i[1]?i[1]:i[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(i[0]));return"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle),e.select=new CKEDITOR.ui.dialog.uiElement(b,a,d,"select",null,h,f.join("")),d.push("</div>"),d.join("")})}},file:function(b,c,d){if(!(arguments.length<3)){void 0===c["default"]&&(c["default"]="");var e=CKEDITOR.tools.extend(a.call(this,c),{definition:c,buttons:[]});c.validate&&(this.validate=c.validate),b.on("load",function(){CKEDITOR.document.getById(e.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,b,c,d,function(){e.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',e.frameId,'" title="',c.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")})}},fileButton:function(b,c,d){if(!(arguments.length<3)){a.call(this,c);var e=this;c.validate&&(this.validate=c.validate);var f=CKEDITOR.tools.extend({},c),g=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(a){var d=c["for"];g&&g.call(this,a)===!1||(b.getContentElement(d[0],d[1]).submit(),this.disable())},b.on("load",function(){b.getContentElement(c["for"][0],c["for"][1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,b,f,d)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(arguments.length<3)){var g=[],h=e.html;"<"!=h.charAt(0)&&(h="<span>"+h+"</span>");var i=e.focus;if(i){var j=this.focus;this.focus=function(){("function"==typeof i?i:j).call(this),this.fire("focus")},e.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,d,e,g,"span",null,null,""),g=g.join("").match(a),h=h.match(b)||["","",""],c.test(h[1])&&(h[1]=h[1].slice(0,-1),h[2]="/"+h[2]),f.push([h[1]," ",g[1]||"",h[2]].join(""))}}}(),fieldset:function(a,b,c,d,e){var f=e.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);return b.getChildCount()<1?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||a.getChildCount()<1?"":a.getChild(0).getText()},eventProcessors:e},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?CKEDITOR.env.ie?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;a.length>0;)a.remove(0);return this},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return!CKEDITOR.env.ie||CKEDITOR.env.version>8?e.onChange.apply(this,arguments):(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null)}},keyboardFocusable:!0},d,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var c,d=this._.children,e=0;e<d.length&&(c=d[e]);e++)c.getElement().$.checked=c.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a,b=this._.children;for(a=0;a<b.length;a++)if(b[a].getElement().$.checked)return void b[a].getElement().focus();b[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return CKEDITOR.env.ie?(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",b),null):e.onChange.apply(this,arguments)}}},d,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,d,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return a.$.forms.length>0?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b,c,d=/^on([A-Z]\w+)/,e=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(c in a)(b=c.match(d))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,a[c]):e(this,this._.dialog,b[1].toLowerCase(),a[c]));return this},reset:function(){function a(){c.$.open();var a="";d.size&&(a=d.size-(CKEDITOR.env.ie?7:0));var j=b.frameId+"_input";for(c.$.write(['<html dir="'+h+'" lang="'+i+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+h+'" lang="'+i+'" action="',CKEDITOR.tools.htmlEncode(d.action),'"><label id="',b.labelId,'" for="',j,'" style="display:none">',CKEDITOR.tools.htmlEncode(d.label),'</label><input style="width:100%" id="',j,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(d.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(a>0?a:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+g+")}","</script>"].join("")),c.$.close(),a=0;a<e.length;a++)e[a].enable()}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),d=b.definition,e=b.buttons,f=this.formLoadedNumber,g=this.formUnloadNumber,h=b.dialog._.editor.lang.dir,i=b.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),g=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(g)})),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",b),CKEDITOR.dialog.addUIElement("password",b),CKEDITOR.dialog.addUIElement("textarea",c),CKEDITOR.dialog.addUIElement("checkbox",c),CKEDITOR.dialog.addUIElement("radio",c),CKEDITOR.dialog.addUIElement("button",c),CKEDITOR.dialog.addUIElement("select",c),CKEDITOR.dialog.addUIElement("file",c),CKEDITOR.dialog.addUIElement("fileButton",c),CKEDITOR.dialog.addUIElement("html",c),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var d,e=b.children,f=[],g=[],h=0;h<e.length&&(d=e[h]);h++){var i=[];f.push(i),g.push(CKEDITOR.dialog._.uiElementBuilders[d.type].build(a,d,i))}return new CKEDITOR.ui.dialog[b.type](a,g,f,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function a(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function b(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;b+a>c;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function c(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;e>d;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function d(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function e(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function f(a){var a=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",p).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),b=a.getChild([0,0,0,0,0]),c=b.getChild(0),d=b.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(b.getParent())}return c.unselectable(),d.unselectable(),{element:a,parts:{dialog:a.getChild(0),title:c,close:d,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild([3,0,1,0])}}}function g(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function h(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}function i(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function j(a){function b(b){var c=a.getSize(),i=CKEDITOR.document.getWindow().getViewPaneSize(),j=b.data.$.screenX,k=b.data.$.screenY,l=j-d.x,m=k-d.y;d={x:j,y:k},e.x=e.x+l,e.y=e.y+m,a.move(e.x+h[3]<g?-h[3]:e.x-h[1]>i.width-c.width-g?i.width-c.width+("rtl"==f.lang.dir?0:h[1]):e.x,e.y+h[0]<g?-h[0]:e.y-h[2]>i.height-c.height-g?i.height-c.height+h[2]:e.y,1),b.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=w.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null;a.getElement().getFirst();var f=a.getParentEditor(),g=f.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20),a.parts.title.on("mousedown",function(f){if(d={x:f.data.$.screenX,y:f.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat){var g=w.getChild(0).getFrameDocument();g.on("mousemove",b),g.on("mouseup",c)}f.data.preventDefault()},a)}function k(a){function b(b){var c="rtl"==m.lang.dir,l=k.width,n=k.height,o=l+(b.data.$.screenX-d)*(c?-1:1)*(a._.moved?1:2),p=n+(b.data.$.screenY-e)*(a._.moved?1:2),q=a._.element.getFirst(),q=c&&q.getComputedStyle("right"),r=a.getPosition();r.y+p>j.height&&(p=j.height-r.y),(c?q:r.x)+o>j.width&&(o=j.width-(c?q:r.x)),(g==CKEDITOR.DIALOG_RESIZE_WIDTH||g==CKEDITOR.DIALOG_RESIZE_BOTH)&&(l=Math.max(f.minWidth||0,o-h)),(g==CKEDITOR.DIALOG_RESIZE_HEIGHT||g==CKEDITOR.DIALOG_RESIZE_BOTH)&&(n=Math.max(f.minHeight||0,p-i)),a.resize(l,n),a._.moved||a.layout(),b.data.preventDefault()}function c(){if(CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.document.removeListener("mousemove",b),l&&(l.remove(),l=null),CKEDITOR.env.ie6Compat){var a=w.getChild(0).getFrameDocument();a.removeListener("mouseup",c),a.removeListener("mousemove",b)}}var d,e,f=a.definition,g=f.resizable;if(g!=CKEDITOR.DIALOG_RESIZE_NONE){var h,i,j,k,l,m=a.getParentEditor(),n=CKEDITOR.tools.addFunction(function(f){k=a.getSize();var g=a.parts.contents;g.$.getElementsByTagName("iframe").length&&(l=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),g.append(l)),i=k.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),h=k.width-a.parts.contents.getSize("width",1),d=f.screenX,e=f.screenY,j=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),CKEDITOR.env.ie6Compat&&(g=w.getChild(0).getFrameDocument(),g.on("mousemove",b),g.on("mouseup",c)),f.preventDefault&&f.preventDefault()});a.on("load",function(){var b="";g==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":g==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+m.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(m.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event )">'+("ltr"==m.lang.dir?"◢":"◣")+"</div>"),a.parts.footer.append(b,1)}),m.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function l(a){a.data.preventDefault(1)}function m(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,e,f),g=x[c];g?g.show():(f=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(d="<html><body style=\\'background-color:"+d+";\\'></body></html>",f.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),f.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),f.push("</div>"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!=e?e:.5),g.on("keydown",l),g.on("keypress",l),g.on("keyup",l),g.appendTo(CKEDITOR.document.getBody()),x[c]=g),a.focusManager.add(g),w=g;var a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})},h=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;if(g.setStyles({left:a.x+"px",top:a.y+"px"}),c)do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)};if(v=a,b.on("resize",a),a(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&g.focus(),CKEDITOR.env.ie6Compat){var i=function(){h(),arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){i.prevScrollHandler=window.onscroll||function(){},window.onscroll=i},0),h()}}function n(a){w&&(a.focusManager.remove(w),a=CKEDITOR.document.getWindow(),w.hide(),a.removeListener("resize",v),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),v=null)}var o=CKEDITOR.tools.cssLength,p='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(c,g){function h(){var a=x._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;b>c;c++)a[c].focusIndex=c}function i(a){var b=x._.focusList,a=a||0;if(!(b.length<1)){var c=x._.currentFocusIndex;try{b[c].getInputElement().$.blur()}catch(d){}for(var e=c=(c+a+b.length)%b.length;a&&!b[e].isFocusable()&&(e=(e+a+b.length)%b.length,e!=c););b[e].focus(),"text"==b[e].type&&b[e].select()}}function l(d){if(x==CKEDITOR.dialog._.currentTop){var e=d.data.getKeystroke(),f="rtl"==c.lang.dir;if(n=o=0,9==e||e==CKEDITOR.SHIFT+9)e=e==CKEDITOR.SHIFT+9,x._.tabBarMode?(e=e?a.call(x):b.call(x),x.selectPage(e),x._.tabs[e][0].focus()):i(e?-1:1),n=1;else if(e==CKEDITOR.ALT+121&&!x._.tabBarMode&&x.getPageCount()>1)x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus(),n=1;else if(37!=e&&39!=e||!x._.tabBarMode)if(13!=e&&32!=e||!x._.tabBarMode)if(13==e)e=d.data.getTarget(),e.is("a","button","select","textarea")||e.is("input")&&"button"==e.$.type||((e=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(e.click,0,e),n=1),o=1;else{if(27!=e)return;(e=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(e.click,0,e):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),o=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1),n=1;else e=e==(f?39:37)?a.call(x):b.call(x),x.selectPage(e),x._.tabs[e][0].focus(),n=1;m(d)}}function m(a){n?a.data.preventDefault(1):o&&a.data.stopPropagation()}var n,o,p=CKEDITOR.dialog._.dialogDefinitions[g],r=CKEDITOR.tools.clone(q),s=c.config.dialog_buttonsOrder||"OS",t=c.lang.dir,v={};if(("OS"==s&&CKEDITOR.env.mac||"rtl"==s&&"ltr"==t||"ltr"==s&&"rtl"==t)&&r.buttons.reverse(),p=CKEDITOR.tools.extend(p(c),r),p=CKEDITOR.tools.clone(p),p=new u(this,p),r=f(c),this._={editor:c,element:r.element,name:g,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=r.parts,CKEDITOR.tools.setTimeout(function(){c.fire("ariaWidget",this.parts.contents)},0,this),r={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},r["rtl"==t?"right":"left"]=0,this.parts.dialog.setStyles(r),CKEDITOR.event.call(this),this.definition=p=CKEDITOR.fire("dialogDefinition",{name:g,definition:p},c).definition,!("removeDialogTabs"in c._)&&c.config.removeDialogTabs){for(r=c.config.removeDialogTabs.split(";"),t=0;t<r.length;t++)if(s=r[t].split(":"),2==s.length){var w=s[0];v[w]||(v[w]=[]),v[w].push(s[1])}c._.removeDialogTabs=v}if(c._.removeDialogTabs&&(v=c._.removeDialogTabs[g]))for(t=0;t<v.length;t++)p.removeContents(v[t]);p.onLoad&&this.on("load",p.onLoad),p.onShow&&this.on("show",p.onShow),p.onHide&&this.on("hide",p.onHide),p.onOk&&this.on("ok",function(a){c.fire("saveSnapshot"),setTimeout(function(){c.fire("saveSnapshot")},0),p.onOk.call(this,a)===!1&&(a.data.hide=!1)}),p.onCancel&&this.on("cancel",function(a){p.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var x=this,y=function(a){var b,c=x._.contents,d=!1;for(b in c)for(var e in c[b])if(d=a.call(this,c[b][e]))return};this.on("ok",function(a){y(function(b){if(b.validate){var c=b.validate(this),e="string"==typeof c||c===!1;return e&&(a.data.hide=!1,a.stop()),d.call(b,!e,"string"==typeof c?c:void 0),e}})},this,null,0),this.on("cancel",function(a){y(function(b){return b.isChanged()?(c.config.dialog_noConfirmCancel||confirm(c.lang.common.confirmCancel)||(a.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(a){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),a.data.preventDefault()},this),this.changeFocus=i;var z=this._.element;for(c.focusManager.add(z,1),this.on("show",function(){z.on("keydown",l,this),CKEDITOR.env.gecko&&z.on("keypress",m,this)}),this.on("hide",function(){z.removeListener("keydown",l),CKEDITOR.env.gecko&&z.removeListener("keypress",m),y(function(a){e.apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",l,this,null,0)}),this.on("show",function(){if(h(),c.config.dialog_startupFocusTab&&x._.pageCount>1)x._.tabBarMode=!0,x._.tabs[x._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,p.onFocus){var a=p.onFocus.call(this);a&&a.focus()}else i(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),j(this),k(this),new CKEDITOR.dom.text(p.title,CKEDITOR.document).appendTo(this.parts.title),t=0;t<p.contents.length;t++)(v=p.contents[t])&&this.addPage(v);for(this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1)),a.data.preventDefault())},this),t=[],v=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:p.buttons},t).getChild(),this.parts.footer.setHtml(t.join("")),t=0;t<v.length;t++)this._.buttons[v[t].id]=v[t]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%"),f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(b>0?b:0)+"px"},b[e?"right":"left"]=(a>0?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,m(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",z),a.on("keyup",A),this._.hasFocus=!1;for(var c in b.contents)if(b.contents[c]){var a=b.contents[c],d=this._.tabs[a.id],e=a.requiredContent,f=0;if(d){for(var g in this._.contents[a.id]){var i=this._.contents[a.id][g];"hbox"!=i.type&&"vbox"!=i.type&&i.getInputElement()&&(i.requiredContent&&!this._.editor.activeFilter.check(i.requiredContent)?i.disable():(i.enable(),f++))}!f||e&&!this._.editor.activeFilter.check(e)?d[0].addClass("cke_dialog_tab_disabled"):d[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),h(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()
})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(e>0?e:0)>c.height||b.width+(d>0?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),C(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else n(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",z),a.removeListener("keyup",A);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock(),CKEDITOR.env.iOS&&c.window.focus()},0)}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),g=0;d=f.shift();)!d.notAllowed&&"hbox"!=d.type&&"vbox"!=d.type&&g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());g||(a.hidden=!0),b=CKEDITOR.dom.element.createFromHtml(b.join("")),b.setAttribute("role","tabpanel"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),this.parts.tabs.append(c),a.accessKey&&(B(this,this,"CTRL+"+a.accessKey,E,D),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:a,currentPage:this._.currentTabId})!==!1){for(var b in this._.tabs){var d=this._.tabs[b][0],e=this._.tabs[b][1];b!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide()),e.setAttribute("aria-hidden",b!=a)}var f=this._.tabs[a];f[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(c(f[1]),f[1].show(),setTimeout(function(){c(f[1],1)},0)):f[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(b){var c=this._.tabs[b]&&this._.tabs[b][0];c&&1!=this._.pageCount&&c.isVisible()&&(b==this._.currentTabId&&this.selectPage(a.call(this)),c.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new g(this,a,b));else{this._.focusList.splice(b,0,new g(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return a=a.config.removeDialogTabs,!(a&&a.match(RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog,a.fire("ok",{hide:!0}).hide!==!1&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog,a.fire("cancel",{hide:!0}).hide!==!1&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var q={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},r=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return d;if(c&&d[c]&&(d=r(d[c],b,c)))return d}return null},s=function(a,b,c,d,e){if(c){for(var f,g=0;f=a[g];g++){if(f.id==c)return a.splice(g,0,b),b;if(d&&f[d]&&(f=s(f[d],b,c,d,!0)))return f}if(e)return null}return a.push(b),b},t=function(a,b,c){for(var d,e=0;d=a[e];e++){if(d.id==b)return a.splice(e,1);if(c&&d[c]&&(d=t(d[c],b,c)))return d}return null},u=function(a,b){this.dialog=a;for(var c,d=b.contents,e=0;c=d[e];e++)d[e]=c&&new i(a,c);CKEDITOR.tools.extend(this,b)};u.prototype={getContents:function(a){return r(this.contents,a)},getButton:function(a){return r(this.buttons,a)},addContents:function(a,b){return s(this.contents,a,b)},addButton:function(a,b){return s(this.buttons,a,b)},removeContents:function(a){t(this.contents,a)},removeButton:function(a){t(this.buttons,a)}},i.prototype={get:function(a){return r(this.elements,a,"children")},add:function(a,b){return s(this.elements,a,b,"children")},remove:function(a){t(this.elements,a,"children")}};var v,w,x={},y={},z=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=y[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},A=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=y[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))},B=function(a,b,c,d,e){(y[c]||(y[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},C=function(a){for(var b in y){for(var c=y[b],d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);0===c.length&&delete y[b]}},D=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},E=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(arguments.length<4)){var h=(d.call?d(b):d)||"div",i=["<",h," "],j=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},l=(g&&g.call?g.call(this,a,b):g)||"",m=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=b.id,b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(j.display="none",this.notAllowed=!0),k.id=m;var n={};b.type&&(n["cke_dialog_ui_"+b.type]=1),b.className&&(n[b.className]=1),b.disabled&&(n.cke_disabled=1);for(var o=k["class"]&&k["class"].split?k["class"].split(" "):[],m=0;m<o.length;m++)o[m]&&(n[o[m]]=1);o=[];for(m in n)o.push(m);k["class"]=o.join(" "),b.title&&(k.title=b.title),n=(b.style||"").split(";"),b.align&&(o=b.align,j["margin-left"]="left"==o?0:"auto",j["margin-right"]="right"==o?0:"auto");for(m in j)n.push(m+":"+j[m]);for(b.hidden&&n.push("display:none"),m=n.length-1;m>=0;m--)""===n[m]&&n.splice(m,1);n.length>0&&(k.style=(k.style?k.style+"; ":"")+n.join("; "));for(m in k)i.push(m+'="'+CKEDITOR.tools.htmlEncode(k[m])+'" ');i.push(">",l,"</",h,">"),c.push(i.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&B(this,a,"CTRL+"+b.accessKey);var p=this;a.on("load",function(){var b=p.getInputElement();if(b){var c=p.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,p.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){p.fire("blur"),c&&this.removeClass(c)})}}),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=p.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(arguments.length<4)){this._||(this._={});var f,g=this._.children=b,h=e&&e.widths||null,i=e&&e.height||null,j={role:"presentation"};e&&e.align&&(j.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},j,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(f=0;f<c.length;f++){var b="cke_dialog_ui_hbox_child",d=[];0===f&&(b="cke_dialog_ui_hbox_first"),f==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),h?h[f]&&d.push("width:"+o(h[f])):d.push("width:"+Math.floor(100/c.length)+"%"),i&&d.push("height:"+o(i)),e&&void 0!=e.padding&&d.push("padding:"+o(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g[f].align&&d.push("text-align:"+g[f].align),d.length>0&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[f],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(arguments.length<3)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,h=e&&e.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+o(g||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var i=[];b.push('<tr><td role="presentation" '),g&&i.push("width:"+o(g||"100%")),h?i.push("height:"+o(h[d])):e&&e.expand&&i.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!=e.padding&&i.push("padding:"+o(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&i.push("text-align:"+f[d].align),i.length>0&&b.push('style="',i.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var b,c,d=/^on([A-Z]\w+)/,e=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(c in a)(b=c.match(d))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,a[c]):e(this,this._.dialog,b[1].toLowerCase(),a[c]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return arguments.length<1?this._.children.concat():(a.splice||(a=[a]),a.length<2?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,c){for(var d,e=b.children,f=[],g=[],h=0;h<e.length&&(d=e[h]);h++){var i=[];f.push(i),g.push(CKEDITOR.dialog._.uiElementBuilders[d.type].build(a,d,i))}return new CKEDITOR.ui.dialog[b.type](a,g,f,c,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var b,c=this&&this.getValue?this.getValue():a[0],d=void 0,e=CKEDITOR.VALIDATE_AND,f=[];for(b=0;b<a.length&&"function"==typeof a[b];b++)f.push(a[b]);b<a.length&&"string"==typeof a[b]&&(d=a[b],b++),b<a.length&&"number"==typeof a[b]&&(e=a[b]);var g=e==CKEDITOR.VALIDATE_AND?!0:!1;for(b=0;b<f.length;b++)g=e==CKEDITOR.VALIDATE_AND?g&&f[b](c):g||f[b](c);return g?!0:d}},regex:function(a,b){return function(c){return c=this&&this.getValue?this.getValue():c,a.test(c)?!0:b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in x)x[c].remove();x={}}var d,a=a.editor._.storedDialogs;for(d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&m(this),"function"==typeof d)c=this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw n(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),c}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",function(b){b.data.dialog&&a.openDialog(b.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var b=this;a.addCommand("a11yHelp",{exec:function(){var c=a.langCode,c=b.availableLangs[c]?c:b.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"dialogs/lang/"+c+".js"),function(){a.lang.a11yhelp=b.langEntries[c],a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),a.on("ariaEditorHelpLabel",function(b){b.data.label=a.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var b=a.addCommand("about",new CKEDITOR.dialogCommand("about"));b.modes={wysiwyg:1,source:1},b.canUndo=!1,b.readOnly=1,a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var b=0,c=function(c,e,f,g){if(g){var g=new CKEDITOR.style(g),h=d[f];h.unshift(g),a.attachStyleStateChange(g,function(b){!a.readOnly&&a.getCommand(f).setState(b)}),a.addCommand(f,new CKEDITOR.styleCommand(g,{contentForms:h})),a.ui.addButton&&a.ui.addButton(c,{label:e,command:f,toolbar:"basicstyles,"+(b+=10)})}},d={bold:["strong","b",["span",function(a){return a=a.styles["font-weight"],"bold"==a||+a>=700}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},e=a.config,f=a.lang.basicstyles;c("Bold",f.bold,"bold",e.coreStyles_bold),c("Italic",f.italic,"italic",e.coreStyles_italic),c("Underline",f.underline,"underline",e.coreStyles_underline),c("Strike",f.strike,"strike",e.coreStyles_strike),c("Subscript",f.subscript,"subscript",e.coreStyles_subscript),c("Superscript",f.superscript,"superscript",e.coreStyles_superscript),a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var a={exec:function(a){var b=a.getCommand("blockquote").state,c=a.getSelection(),d=c&&c.getRanges()[0];if(d){var e=c.createBookmarks();if(CKEDITOR.env.ie){var f,g=e[0].startNode,h=e[0].endNode;if(g&&"blockquote"==g.getParent().getName())for(f=g;f=f.getNext();)if(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()){g.move(f,!0);break}if(h&&"blockquote"==h.getParent().getName())for(f=h;f=f.getPrevious();)if(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary()){h.move(f);break}}var i=d.createIterator();if(i.enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR,b==CKEDITOR.TRISTATE_OFF){for(g=[];b=i.getNextParagraph();)g.push(b);for(g.length<1&&(b=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),h=e.shift(),d.insertNode(b),b.append(new CKEDITOR.dom.text("",a.document)),d.moveToBookmark(h),d.selectNodeContents(b),d.collapse(!0),h=d.createBookmark(),g.push(b),e.unshift(h)),f=g[0].getParent(),d=[],h=0;h<g.length;h++)b=g[h],f=f.getCommonAncestor(b.getParent());for(b={table:1,tbody:1,tr:1,ol:1,ul:1};b[f.getName()];)f=f.getParent();for(h=null;g.length>0;){for(b=g.shift();!b.getParent().equals(f);)b=b.getParent();b.equals(h)||d.push(b),h=b}for(;d.length>0;)if(b=d.shift(),"blockquote"==b.getName()){for(h=new CKEDITOR.dom.documentFragment(a.document);b.getFirst();)h.append(b.getFirst().remove()),g.push(h.getLast());h.replace(b)}else g.push(b);for(d=a.document.createElement("blockquote"),d.insertBefore(g[0]);g.length>0;)b=g.shift(),d.append(b)}else if(b==CKEDITOR.TRISTATE_ON){for(h=[],f={};b=i.getNextParagraph();){for(g=d=null;b.getParent();){if("blockquote"==b.getParent().getName()){d=b.getParent(),g=b;break}b=b.getParent()}d&&g&&!g.getCustomData("blockquote_moveout")&&(h.push(g),CKEDITOR.dom.element.setMarker(f,g,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(f),b=[],g=[],f={};h.length>0;)i=h.shift(),d=i.getParent(),i.getPrevious()?i.getNext()?(i.breakParent(i.getParent()),g.push(i.getNext())):i.remove().insertAfter(d):i.remove().insertBefore(d),d.getCustomData("blockquote_processed")||(g.push(d),CKEDITOR.dom.element.setMarker(f,d,"blockquote_processed",!0)),b.push(i);for(CKEDITOR.dom.element.clearAllMarkers(f),h=g.length-1;h>=0;h--){d=g[h];a:{f=d;for(var i=0,j=f.getChildCount(),k=void 0;j>i&&(k=f.getChild(i));i++)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){f=!1;break a}f=!0}f&&d.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(d=!0;b.length;)if(i=b.shift(),"div"==i.getName()){for(h=new CKEDITOR.dom.documentFragment(a.document),d&&i.getPrevious()&&!(i.getPrevious().type==CKEDITOR.NODE_ELEMENT&&i.getPrevious().isBlockBoundary())&&h.append(a.document.createElement("br")),d=i.getNext()&&!(i.getNext().type==CKEDITOR.NODE_ELEMENT&&i.getNext().isBlockBoundary());i.getFirst();)i.getFirst().remove().appendTo(h);d&&h.append(a.document.createElement("br")),h.replace(i),d=!1}}c.selectBookmarks(e),a.focus()}},refresh:function(a,b){this.setState(a.elementPath(b.block||b.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(b){b.blockless||(b.addCommand("blockquote",a),b.ui.addButton&&b.ui.addButton("Blockquote",{label:b.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function a(a){function b(){var b=a.editable();b.on(s,function(a){(!CKEDITOR.env.ie||!p)&&m(a)}),CKEDITOR.env.ie&&b.on("paste",function(b){q||(e(),b.data.preventDefault(),m(b),g("paste")||a.openDialog("paste"))}),CKEDITOR.env.ie&&(b.on("contextmenu",f,null,null,0),b.on("beforepaste",function(a){a.data&&!a.data.$.ctrlKey&&!a.data.$.shiftKey&&f()},null,null,0)),b.on("beforecut",function(){!p&&i(a)});var c;b.attachListener(CKEDITOR.env.ie?b:a.document.getDocumentElement(),"mouseup",function(){c=setTimeout(function(){n()},0)}),a.on("destroy",function(){clearTimeout(c)}),b.on("keyup",n)}function c(b){return{type:b,canUndo:"cut"==b,startDisabled:!0,exec:function(){"cut"==this.type&&i();var b,c=this.type;if(CKEDITOR.env.ie)b=g(c);else try{b=a.document.$.execCommand(c,!1,null)}catch(d){b=!1}return b||alert(a.lang.clipboard[this.type+"Error"]),b}}}function d(){return{canUndo:!1,async:!0,exec:function(a,b){var c=function(b,c){b&&h(b.type,b.dataValue,!!c),a.fire("afterCommandExec",{name:"paste",command:d,returnValue:!!b})},d=this;"string"==typeof b?c({type:"auto",dataValue:b},1):a.getClipboardData(c)}}}function e(){q=1,setTimeout(function(){q=0},100)}function f(){p=1,setTimeout(function(){p=0},10)}function g(b){var c=a.document,d=c.getBody(),e=!1,f=function(){e=!0};return d.on(b,f),(CKEDITOR.env.version>7?c.$:c.$.selection.createRange()).execCommand(b),d.removeListener(b,f),e}function h(b,c,d){return b={type:b},d&&a.fire("beforePaste",b)===!1||!c?!1:(b.dataValue=c,a.fire("paste",b))}function i(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var b,c,d,e=a.getSelection();e.getType()==CKEDITOR.SELECTION_ELEMENT&&(b=e.getSelectedElement())&&(c=e.getRanges()[0],d=a.document.createText(""),d.insertBefore(b),c.setStartBefore(d),c.setEndAfter(b),e.selectRanges([c]),setTimeout(function(){b.getParent()&&(d.remove(),e.selectElement(b))},0))}}function j(b,c){var d,e=a.document,f=a.editable(),g=function(a){a.cancel()};if(!e.getById("cke_pastebin")){var h=a.getSelection(),i=h.createBookmarks();CKEDITOR.env.ie&&h.root.fire("selectionchange");var j=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!f.is("body")||CKEDITOR.env.ie?"div":"body",e);j.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var k=0,e=e.getWindow();CKEDITOR.env.webkit?(f.append(j),j.addClass("cke_editable"),f.is("body")||(k="static"!=f.getComputedStyle("position")?f:CKEDITOR.dom.element.get(f.$.offsetParent),k=k.getDocumentPosition().y)):f.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(j),j.setStyles({position:"absolute",top:e.getScrollPosition().y-k+10+"px",width:"1px",height:Math.max(1,e.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),(k=j.getParent().isReadOnly())?(j.setOpacity(0),j.setAttribute("contenteditable",!0)):j.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-1000px"),a.on("selectionChange",g,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(d=f.once("blur",g,null,null,-100)),k&&j.focus(),k=new CKEDITOR.dom.range(j),k.selectNodeContents(j);var l=k.select();CKEDITOR.env.ie&&(d=f.once("blur",function(){a.lockSelection(l)}));var m=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=m),d&&d.removeListener(),CKEDITOR.env.ie&&f.focus(),h.selectBookmarks(i),j.remove();var b;CKEDITOR.env.webkit&&(b=j.getFirst())&&b.is&&b.hasClass("Apple-style-span")&&(j=b),a.removeListener("selectionChange",g),c(j.getHtml())},0)}}function k(){if(CKEDITOR.env.ie){a.focus(),e();var b=a.focusManager;if(b.lock(),a.editable().fire(s)&&!g("paste"))return b.unlock(),!1;b.unlock()}else try{if(a.editable().fire(s)&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(c){return!1}return!0}function l(b){if("wysiwyg"==a.mode)switch(b.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:b=a.editable(),e(),!CKEDITOR.env.ie&&b.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:a.fire("saveSnapshot"),setTimeout(function(){a.fire("saveSnapshot")},50)}}function m(b){var c={type:"auto"},d=a.fire("beforePaste",c);j(b,function(a){a=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),d&&h(c.type,a,0,1)})}function n(){if("wysiwyg"==a.mode){var b=o("paste");a.getCommand("cut").setState(o("cut")),a.getCommand("copy").setState(o("copy")),a.getCommand("paste").setState(b),a.fire("pasteState",b)}}function o(b){if(r&&b in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==b)return CKEDITOR.TRISTATE_OFF;var b=a.getSelection(),c=b.getRanges();return b.getType()==CKEDITOR.SELECTION_NONE||1==c.length&&c[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var p=0,q=0,r=0,s=CKEDITOR.env.ie?"beforepaste":"paste";!function(){a.on("key",l),a.on("contentDom",b),a.on("selectionChange",function(a){r=a.data.selection.getRanges()[0].checkReadOnly(),n()}),a.contextMenu&&a.contextMenu.addListener(function(a,b){return r=b.getRanges()[0].checkReadOnly(),{cut:o("cut"),copy:o("copy"),paste:o("paste")}})}(),function(){function b(b,c,d,e,f){var g=a.lang.clipboard[c];a.addCommand(c,d),a.ui.addButton&&a.ui.addButton(b,{label:g,command:c,toolbar:"clipboard,"+e}),a.addMenuItems&&a.addMenuItem(c,{label:g,command:c,group:"clipboard",order:f})}b("Cut","cut",c("cut"),10,1),b("Copy","copy",c("copy"),20,4),b("Paste","paste",d(),30,8)}(),a.getClipboardData=function(b,c){function d(a){a.removeListener(),a.cancel(),c(a.data)}function e(a){a.removeListener(),a.cancel(),i=!0,c({type:h,dataValue:a.data})}function f(){this.customTitle=b&&b.title}var g=!1,h="auto",i=!1;c||(c=b,b=null),a.on("paste",d,null,null,0),a.on("beforePaste",function(a){a.removeListener(),g=!0,h=a.data.type},null,null,1e3),k()===!1&&(a.removeListener("paste",d),g&&a.fire("pasteDialog",f)?(a.on("pasteDialogCommit",e),a.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",e),setTimeout(function(){i||c(null)},10)})):c(null))}}function b(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function c(a,b){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(a%2==1?"<br>":"")}return b=b.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()}),b.match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&b.indexOf("<div>")>-1&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),b.match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1)})+"</p>"),b=b.replace(/<\/div><div>/g,"<br>"),b=b.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),b.indexOf("<br><br>")>-1&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return c(a.length/4)})+"</p>")),f(a,b))}function d(){var a=new CKEDITOR.htmlParser.filter,b={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},c=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),d={p:1,br:1,"cke:br":1},e=CKEDITOR.dtd,f=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),g=function(a){delete a.name,a.add(new CKEDITOR.htmlParser.text(" "))},h=function(a){for(var b,c=a;(c=c.next)&&c.name&&c.name.match(/^h\d$/);)for(b=new CKEDITOR.htmlParser.element("cke:br"),b.isEmpty=!0,a.add(b);b=c.children.shift();)a.add(b)};return a.addRules({elements:{h1:h,h2:h,h3:h,h4:h,h5:h,h6:h,img:function(a){var a=CKEDITOR.tools.trim(a.attributes.alt||""),b=" ";
return a&&!a.match(/(^http|\.(jpe?g|gif|png))/i)&&(b=" ["+a+"] "),new CKEDITOR.htmlParser.text(b)},td:g,th:g,$:function(a){var g,h=a.name;if(f[h])return!1;if(a.attributes={},"br"==h)return a;if(b[h])a.name="p";else if(c[h])delete a.name;else if(e[h]){if(g=new CKEDITOR.htmlParser.element("cke:br"),g.isEmpty=!0,CKEDITOR.dtd.$empty[h])return g;a.add(g,0),g=g.clone(),g.isEmpty=!0,a.add(g),delete a.name}return d[a.name]||delete a.name,a}}},{applyToAll:!0}),a}function e(a,b,c){var b=new CKEDITOR.htmlParser.fragment.fromHtml(b),d=new CKEDITOR.htmlParser.basicWriter;b.writeHtml(d,c);var b=d.getHtml(),b=b.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),e=0,b=b.replace(/<\/?p>/g,function(a){if("<p>"==a){if(++e>1)return"</p><p>"}else if(--e>0)return"</p><p>";return a}).replace(/<p><\/p>/g,"");return f(a,b)}function f(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(f){var g;a(f),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),f.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;if(b.indexOf("Apple-")>-1&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),b.indexOf('<br class="Apple-interchange-newline">')>-1&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var d,e,f=new CKEDITOR.dom.element("div");for(f.setHtml(b);1==f.getChildCount()&&(d=f.getFirst())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.hasClass("cke_editable")||d.hasClass("cke_contents"));)f=e=d;e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){return d.toLowerCase()in c?(a.data.preSniffing="html","<"+d):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){return d in c?(a.data.endsWithEOL=1,"</"+d+">"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),f.on("paste",function(a){var h,a=a.data,i=a.type,j=a.dataValue,k=f.config.clipboard_defaultContentType||"html";h="html"==i||"html"==a.preSniffing?"html":b(j),"htmlifiedtext"==h?j=c(f.config,j):"text"==i&&"html"==h&&(j=e(f.config,j,g||(g=d(f)))),a.startsWithEOL&&(j='<br data-cke-eol="1">'+j),a.endsWithEOL&&(j+='<br data-cke-eol="1">'),"auto"==i&&(i="html"==h||"html"==k?"html":"text"),a.type=i,a.dataValue=j,delete a.preSniffing,delete a.startsWithEOL,delete a.endsWithEOL},null,null,6),f.on("paste",function(a){a=a.data,f.insertHtml(a.dataValue,a.type),setTimeout(function(){f.fire("afterPaste")},0)},null,null,1e3),f.on("pasteDialog",function(a){setTimeout(function(){f.openDialog("paste",a.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),b=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(d,e){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},f))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("keydown",function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&this._.onKeyDown(b)===!1?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&this.onEscape(b)===!1&&a.data.preventDefault()},this),a=a.getBody(),a.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var f={editorId:d.id,id:this.id,langCode:d.langCode,dir:d.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":d.config.baseFloatZIndex+1};if(this.isFramed){var g=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";f.frame=b.output({id:this.id+"_frame",src:g})}return g=a.output(f),e&&e.push(g),g},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){var a=this._.blocks[a],b=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",c),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||this.onHide.call(this)!==!0)&&this.element.setStyle("display","none")},onKeyDown:function(a,b){var c=this.keys[a];switch(c){case"next":for(var d,e=this._.focusIndex,c=this.element.getElementsByTag("a");d=c.getItem(++e);)if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=e,d.focus();break}return d||b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(e=this._.focusIndex,c=this.element.getElementsByTag("a");e>0&&(d=c.getItem(--e));){if(d.getAttribute("_cke_focus")&&d.$.offsetWidth){this._.focusIndex=e,d.focus();break}d=null}return d||b?!1:(this._.focusIndex=c.count(),this.onKeyDown(a,1));case"click":case"mouseup":return e=this._.focusIndex,(d=e>=0&&this.element.getElementsByTag("a").getItem(e))&&(d.$[c]?d.$[c]():d.$["on"+c]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(a,c,d,e,f){var f=CKEDITOR.tools.genKey(c.getUniqueId(),d.getUniqueId(),a.lang.dir,a.uiColor||"",e.css||"",f||""),g=b[f];return g||(g=b[f]=new CKEDITOR.ui.panel(c,e),g.element=d.append(CKEDITOR.dom.element.createFromHtml(g.render(a),c)),g.element.setStyles({display:"none",position:"absolute"})),g}var b={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(b,c,d,e){function f(){j.hide()}d.forceIFrame=1,d.toolbarRelated&&b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(c=CKEDITOR.document.getById("cke_"+b.name));var g=c.getDocument(),e=a(b,g,c,d,e||0),h=e.element,i=h.getFirst(),j=this;h.disableContextMenu(),this.element=h,this._={editor:b,panel:e,parentElement:c,definition:d,document:g,iframe:i,children:[],dir:b.lang.dir},b.on("mode",f),b.on("resize",f),CKEDITOR.env.iOS||g.getWindow().on("resize",f)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,b,c,d,e,f){var g=this._.panel,h=g.showBlock(a);this.allowBlur(!1),a=this._.editor.editable(),this._.returnFocus=a.hasFocus?a:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var i=this.element,a=this._.iframe,a=CKEDITOR.env.ie?a:new CKEDITOR.dom.window(a.$.contentWindow),j=i.getDocument(),k=this._.parentElement.getPositionedAncestor(),l=b.getDocumentPosition(j),j=k?k.getDocumentPosition(j):{x:0,y:0},m="rtl"==this._.dir,n=l.x+(d||0)-j.x,o=l.y+(e||0)-j.y;!m||1!=c&&4!=c?m||2!=c&&3!=c||(n+=b.$.offsetWidth-1):n+=b.$.offsetWidth,(3==c||4==c)&&(o+=b.$.offsetHeight-1),this._.panel._.offsetParentId=b.getId(),i.setStyles({top:o+"px",left:0,display:""}),i.setOpacity(0),i.getFirst().removeStyle("width"),this._.editor.focusManager.add(a),this._.blurSet||(CKEDITOR.event.useCapture=!0,a.on("blur",function(a){function b(){delete this._.returnFocus,this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))},this),a.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(a.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),a.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),g.onEscape=CKEDITOR.tools.bind(function(a){return this.onEscape&&this.onEscape(a)===!1?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){if(i.removeStyle("width"),h.autoSize){var a=h.element.getDocument(),a=(CKEDITOR.env.webkit?h.element:a.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(i.$.offsetWidth||0)-(i.$.clientWidth||0)+3),i.setStyle("width",a+10+"px"),a=h.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(i.$.offsetHeight||0)-(i.$.clientHeight||0)+3),i.setStyle("height",a+"px"),g._.currentBlock.element.setStyle("display","none").removeStyle("display")}else i.removeStyle("height");m&&(n-=i.$.offsetWidth),i.setStyle("left",n+"px");var b=g.element.getWindow(),a=i.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,d=a.height||a.bottom-a.top,e=m?a.right:b.width-a.left,j=m?b.width-a.right:a.left;m?c>e&&(n=j>c?n+c:b.width>c?n-a.left:n-a.right+b.width):c>e&&(n=j>c?n-c:b.width>c?n-a.right+b.width:n-a.left),c=a.top,b.height-a.top<d&&(o=c>d?o-d:b.height>d?o-a.bottom+b.height:o-a.top),CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(i.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(n=CKEDITOR.env.ie8Compat?n-2*i.getDocument().getDocumentElement().$.scrollLeft:n-(a.$.scrollWidth-a.$.clientWidth)));var k,a=i.getFirst();(k=a.getCustomData("activePanel"))&&k.onHide&&k.onHide.call(this,1),a.setCustomData("activePanel",this),i.setStyles({top:o+"px",left:n+"px"}),i.setOpacity(1),f&&f()},this);g.isLoaded?a():g.onLoad=a,CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),h.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){!this.visible||this.onHide&&this.onHide.call(this)===!0||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(a=a&&this._.returnFocus)&&(CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(a){var b=this._.panel;return void 0!=a&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,b,c,d,e,f){(this._.activeChild!=a||a._.panel._.offsetParentId!=c.getId())&&(this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(b,c,d,e,f),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(a){var b=this._.activeChild;b&&(delete b.onHide,delete this._.activeChild,b.hide(),a&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var a,c=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(a in b){var d=b[a];c?d.destroy():d.element.hide()}c&&(b={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var b=a.config.menu_groups.split(","),c=a._.menuGroups={},d=a._.menuItems={},e=0;e<b.length;e++)c[b[e]]=e+1;a.addMenuGroup=function(a,b){c[a]=b||100},a.addMenuItem=function(a,b){c[b.group]&&(d[a]=new CKEDITOR.menuItem(this,a,b))},a.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},a.getMenuItem=function(a){return d[a]},a.removeMenuItem=function(a){delete d[a]}}}),function(){function a(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}var b='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(b+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(b+=' onblur="this.style.cssText = this.style.cssText;"');var b=b+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),c=CKEDITOR.addTemplate("menuItem",b+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),d=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,b){b=this._.definition=b||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=b.level||1;var c=CKEDITOR.tools.extend({},b.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),d=c.block.attributes=c.attributes||{};!d.role&&(d.role="menu"),this._.panelDefinition=c},_:{onShow:function(){var a=this.editor.getSelection(),b=a&&a.getStartElement(),c=this.editor.elementPath(),d=this._.listeners;this.removeAll();for(var e=0;e<d.length;e++){var f=d[e](b,a,c);if(f)for(var g in f){var h=this.editor.getMenuItem(g);!h||h.command&&!this.editor.getCommand(h.command).state||(h.state=f[g],this.add(h))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;return b?b._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var b=this._.subMenu,c=this.items[a];if(c=c.getItems&&c.getItems()){b?b.removeAll():(b=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),b.parent=this,b._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var d in c){var e=this.editor.getMenuItem(d);e&&(e.state=c[d],b.add(e))}var f=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+a));setTimeout(function(){b.show(f,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,c,d,e){if(this.parent||(this._.onShow(),this.items.length)){var c=c||("rtl"==this.editor.lang.dir?2:1),f=this.items,g=this.editor,h=this._.panel,i=this._.element;if(!h){h=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),h.onEscape=CKEDITOR.tools.bind(function(a){return this._.onEscape(a)===!1?!1:void 0},this),h.onShow=function(){h._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")},h.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),i=h.addBlock(this.id,this._.panelDefinition.block),i.autoSize=!0;var j=i.keys;j[40]="next",j[9]="next",j[38]="prev",j[CKEDITOR.SHIFT+9]="prev",j["rtl"==g.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",j[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(j[13]="mouseup"),i=this._.element=i.element,j=i.getDocument(),j.getBody().setStyle("overflow","hidden"),j.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,g.config.menu_subMenuDelay||400,this,[a])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this)}a(f);for(var j=g.elementPath(),j=['<div class="cke_menu'+(j&&j.direction()!=g.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],k=f.length,l=k&&f[0].group,m=0;k>m;m++){var n=f[m];l!=n.group&&(j.push('<div class="cke_menuseparator" role="separator"></div>'),l=n.group),n.render(this,m,j)}j.push("</div>"),i.setHtml(j.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(h,this.id,b,c,d,e):h.showBlock(this.id,b,c,d,e),g.fire("menuShow",[h])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,b,c){CKEDITOR.tools.extend(this,c,{order:0,className:"cke_menubutton__"+b}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=b},proto:{render:function(a,b,e){var f=a.id+(""+b),g="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,h="",i=g==CKEDITOR.TRISTATE_ON?"on":g==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(h=' aria-checked="'+(g==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var j=this.getItems,k="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",l=this.name;this.icon&&!/\./.test(this.icon)&&(l=this.icon),a={id:f,name:this.name,iconName:l,label:this.label,cls:this.className||"",state:i,hasPopup:j?"true":"false",disabled:g==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:b,iconStyle:CKEDITOR.skin.getIconStyle(l,"rtl"==this.editor.lang.dir,l==this.icon?null:this.icon,this.iconOffset),arrowHtml:j?d.output({label:k}):"",role:this.role?this.role:"menuitem",ariaChecked:h},c.output(a,e)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,b){if(a.on("contextmenu",function(a){var a=a.data,d=CKEDITOR.env.webkit?c:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!b||!d){if(a.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){var d=this.editor,e=new CKEDITOR.dom.elementPath(a.getTarget(),d.editable()).contains(function(a){return a.hasAttribute("contenteditable")},!0);e&&"false"==e.getAttribute("contenteditable")&&d.getSelection().fake(e)}var e=a.getTarget().getDocument(),f=a.getTarget().getDocument().getDocumentElement(),d=!e.equals(CKEDITOR.document),e=e.getWindow().getScrollPosition(),g=d?a.$.clientX:a.$.pageX||e.x+a.$.clientX,h=d?a.$.clientY:a.$.pageY||e.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(f,null,g,h)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var c,d=function(){c=0};a.on("keydown",function(a){c=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),a.on("keyup",d),a.on("contextmenu",d)}},open:function(a,b,c,d){this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,b,c,d)}}})},beforeInit:function(a){var b=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){b.addTarget(a.editable(),a.config.browserContextMenuOnCtrl!==!1)}),a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}}),a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a,d){function f(b){if(b=j.list[b],b.equals(a.editable())||"true"==b.getAttribute("contenteditable")){var c=a.createRange();c.selectNodeContents(b),c.select()}else a.getSelection().selectElement(b);a.focus()}function g(){h&&h.setHtml(c),delete j.list}var h,i=a.ui.spaceId("path"),j=a._.elementsPath,k=j.idBase;d.html=d.html+('<span id="'+i+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+i+'" class="cke_path" role="group" aria-labelledby="'+i+'_label">'+c+"</span>"),a.on("uiReady",function(){var b=a.ui.space("path");b&&a.focusManager.add(b,1)}),j.onClick=f;var l=CKEDITOR.tools.addFunction(f),m=CKEDITOR.tools.addFunction(function(b,c){var d,e=j.idBase,c=new CKEDITOR.dom.event(c);switch(d="rtl"==a.lang.dir,c.getKeystroke()){case d?39:37:case 9:return(d=CKEDITOR.document.getById(e+(b+1)))||(d=CKEDITOR.document.getById(e+"0")),d.focus(),!1;case d?37:39:case CKEDITOR.SHIFT+9:return(d=CKEDITOR.document.getById(e+(b-1)))||(d=CKEDITOR.document.getById(e+(j.list.length-1))),d.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return f(b),!1}return!0});a.on("selectionChange",function(){a.editable();for(var b,d=[],f=j.list=[],g=[],n=j.filters,o=!0,p=a.elementPath().elements,q=p.length;q--;){var r=p[q],s=0;b=r.data("cke-display-name")?r.data("cke-display-name"):r.data("cke-real-element-type")?r.data("cke-real-element-type"):r.getName(),o=r.hasAttribute("contenteditable")?"true"==r.getAttribute("contenteditable"):o,!o&&!r.hasAttribute("contenteditable")&&(s=1);for(var t=0;t<n.length;t++){var u=n[t](r,b);if(u===!1){s=1;break}b=u||b}s||(f.unshift(r),g.unshift(b))}for(f=f.length,n=0;f>n;n++)b=g[n],o=a.lang.elementspath.eleTitle.replace(/%1/,b),b=e.output({id:k+n,label:o,text:b,jsTitle:"javascript:void('"+b+"')",index:n,keyDownFn:m,clickFn:l}),d.unshift(b);h||(h=CKEDITOR.document.getById(i)),g=h,g.setHtml(d.join("")+c),a.fire("elementsPathUpdate",{space:g})}),a.on("readOnly",g),a.on("contentDomUnload",g),a.addCommand("elementsPathFocus",b),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var b;b={editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var c='<span class="cke_path_empty">&nbsp;</span>',d="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;"');var e=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+d+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(b){b._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},b.on("uiSpace",function(c){"bottom"==c.data.space&&a(b,c.data)})}})}(),function(){function a(a,d){var e,f;d.on("refresh",function(a){var d,e=[b];for(d in a.data.states)e.push(a.data.states[d]);this.setState(CKEDITOR.tools.search(e,c)?c:b)},d,null,100),d.on("exec",function(b){e=a.getSelection(),f=e.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},d,null,0),d.on("exec",function(){a.forceNextSelectionCheck(),e.selectBookmarks(f)},d,null,100)}var b=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(b){var c=CKEDITOR.plugins.indent.genericDefinition;a(b,b.addCommand("indent",new c(!0))),a(b,b.addCommand("outdent",new c)),b.ui.addButton&&(b.ui.addButton("Indent",{label:b.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),b.ui.addButton("Outdent",{label:b.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),b.on("dirChanged",function(a){var c=b.createRange(),d=a.data.node;c.setStartBefore(d),c.setEndAfter(d);for(var e,f=new CKEDITOR.dom.walker(c);e=f.next();)if(e.type==CKEDITOR.NODE_ELEMENT)if(!e.equals(d)&&e.getDirection())c.setStartAfter(e),f=new CKEDITOR.dom.walker(c);else{var g=b.config.indentClasses;if(g)for(var h="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],i=0;i<g.length;i++)e.hasClass(g[i]+h[0])&&(e.removeClass(g[i]+h[0]),e.addClass(g[i]+h[1]));g=e.getStyle("margin-right"),h=e.getStyle("margin-left"),g?e.setStyle("margin-left",g):e.removeStyle("margin-left"),h?e.setStyle("margin-right",h):e.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,c){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!c,this.relatedGlobal=c?"indent":"outdent",this.indentKey=c?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var c,d=a.getCommand(b.relatedGlobal);for(c in b.jobs)d.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),b.execJob(a,c)&&(d.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))},this,null,c),d.on("refresh",function(d){d.data.states||(d.data.states={}),d.data.states[b.name+"@"+c]=b.refreshJob(a,c,d.data.path)},this,null,c);a.addFeature(b)})(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,c){var d=this.jobs[c];return d.state!=b?d.exec.call(this,a):void 0},refreshJob:function(a,c,d){return c=this.jobs[c],c.state=a.activeFilter.checkFeature(this)?c.refresh.call(this,a,d):b,c.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a){function b(b){for(var c=e.startContainer,i=e.endContainer;c&&!c.getParent().equals(b);)c=c.getParent();for(;i&&!i.getParent().equals(b);)i=i.getParent();if(!c||!i)return!1;for(var j=c,c=[],k=!1;!k;)j.equals(i)&&(k=!0),c.push(j),j=j.getNext();if(c.length<1)return!1;for(j=b.getParents(!0),i=0;i<j.length;i++)if(j[i].getName&&h[j[i].getName()]){b=j[i];break}for(var j=f.isIndent?1:-1,i=c[0],c=c[c.length-1],k=CKEDITOR.plugins.list.listToArray(b,g),l=k[c.getCustomData("listarray_index")].indent,i=i.getCustomData("listarray_index");i<=c.getCustomData("listarray_index");i++)if(k[i].indent=k[i].indent+j,j>0){var m=k[i].parent;k[i].parent=new CKEDITOR.dom.element(m.getName(),m.getDocument())}for(i=c.getCustomData("listarray_index")+1;i<k.length&&k[i].indent>l;i++)k[i].indent=k[i].indent+j;if(c=CKEDITOR.plugins.list.arrayToList(k,g,null,a.config.enterMode,b.getDirection()),!f.isIndent){var n;if((n=b.getParent())&&n.is("li"))for(var o,j=c.listNode.getChildren(),p=[],i=j.count()-1;i>=0;i--)(o=j.getItem(i))&&o.is&&o.is("li")&&p.push(o)}if(c&&c.listNode.replace(b),p&&p.length)for(i=0;i<p.length;i++){for(o=b=p[i];(o=o.getNext())&&o.is&&o.getName()in h;)CKEDITOR.env.needsNbspFiller&&!b.getFirst(d)&&b.append(e.document.createText(" ")),b.append(o);b.insertAfter(n)}return c&&a.fire("contentDomInvalidated"),!0}for(var e,f=this,g=this.database,h=this.context,i=a.getSelection(),i=(i&&i.getRanges()).createIterator();e=i.getNextRange();){for(var j=e.getCommonAncestor();j&&(j.type!=CKEDITOR.NODE_ELEMENT||!h[j.getName()]);)j=j.getParent();if(j||(j=e.startPath().contains(h))&&e.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),!j){var k=e.getEnclosedNode();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.getName()in h&&(e.setStartAt(k,CKEDITOR.POSITION_AFTER_START),e.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),j=k)}if(j&&e.startContainer.type==CKEDITOR.NODE_ELEMENT&&e.startContainer.getName()in h&&(k=new CKEDITOR.dom.walker(e),k.evaluator=c,e.startContainer=k.next()),j&&e.endContainer.type==CKEDITOR.NODE_ELEMENT&&e.endContainer.getName()in h&&(k=new CKEDITOR.dom.walker(e),k.evaluator=c,e.endContainer=k.previous()),j)return b(j)}return 0}function b(a,b){return b||(b=a.contains(this.context)),b&&a.block&&a.block.equals(b.getFirst(c))}function c(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function d(a){return e(a)&&f(a)}var e=CKEDITOR.dom.walker.whitespaces(!0),f=CKEDITOR.dom.walker.bookmark(!1,!0),g=CKEDITOR.TRISTATE_DISABLED,h=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function d(c){e.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],c.on("key",function(a){if("wysiwyg"==c.mode&&a.data.keyCode==this.indentKey){var d=this.getContext(c.elementPath());!d||this.isIndent&&b.call(this,c.elementPath(),d)||(c.execCommand(this.relatedGlobal),a.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,c){var d=this.getContext(c),e=b.call(this,c,d);return d&&this.isIndent&&!e?h:g}:function(a,b){return!this.getContext(b)||this.isIndent?g:h},exec:CKEDITOR.tools.bind(a,this)}}var e=CKEDITOR.plugins.indent;e.registerCommands(c,{indentlist:new d(c,"indentlist",!0),outdentlist:new d(c,"outdentlist")}),CKEDITOR.tools.extend(d.prototype,e.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function a(a,b,c){function d(c){!(i=k[c?"getFirst":"getLast"]())||i.is&&i.isBlockBoundary()||!(j=b.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||j.is&&j.isBlockBoundary({br:1})||a.document.createElement("br")[c?"insertBefore":"insertAfter"](i)}for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(c,h,"list_item_processed",!0))}for(h=null,g=0;g<f.length;g++)h=f[g].getCustomData("listarray_index"),e[h].indent=-1;
for(g=h+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){for(f=e[g-1].indent+1-e[g].indent,h=e[g].indent;e[g]&&e[g].indent>=h;)e[g].indent=e[g].indent+f,g++;g--}var i,j,k=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;d(!0),d(),k.replace(b.root),a.fire("contentDomInvalidated")}function b(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function c(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](n);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d)}function d(a){var b;(b=function(b){var d=a[b?"getPrevious":"getNext"](k);d&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(a.getName())&&(c(a,d,null,!b),a.remove(),a=d)})(),b(1)}function e(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function f(a,b,e){a.fire("saveSnapshot"),e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var f=e.extractContents();b.trim(!1,!0);var h=b.createBookmark(),i=new CKEDITOR.dom.elementPath(b.startContainer),j=i.block,i=i.lastElement.getAscendant("li",1)||j,m=new CKEDITOR.dom.elementPath(e.startContainer),n=m.contains(CKEDITOR.dtd.$listItem),m=m.contains(CKEDITOR.dtd.$list);for(j?(j=j.getBogus())&&j.remove():m&&(j=m.getPrevious(k))&&l(j)&&j.remove(),(j=f.getLast())&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("br")&&j.remove(),(j=b.startContainer.getChild(b.startOffset))?f.insertBefore(j):b.startContainer.append(f),n&&(f=g(n))&&(i.contains(n)?(c(f,n.getParent(),n),f.remove()):i.append(f));e.checkStartOfBlock()&&e.checkEndOfBlock()&&(m=e.startPath(),f=m.block,f);)f.is("li")&&(i=f.getParent(),f.equals(i.getLast(k))&&f.equals(i.getFirst(k))&&(f=i)),e.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove();e=e.clone(),f=a.editable(),e.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return k(a)&&!l(a)},(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&d(e),b.moveToBookmark(h),b.select(),a.fire("saveSnapshot")}function g(a){return(a=a.getLast(k))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in h?a:null}var h={ol:1,ul:1},i=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark(),k=function(a){return!(i(a)||j(a))},l=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,c,d,e){if(!h[a.getName()])return[];d||(d=0),c||(c=[]);for(var f=0,g=a.getChildCount();g>f;f++){var i=a.getChild(f);if(i.type==CKEDITOR.NODE_ELEMENT&&i.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(i,b,c,d+1),"li"==i.$.nodeName.toLowerCase()){var j={parent:a,indent:d,element:i,contents:[]};e?j.grandparent=e:(j.grandparent=a.getParent(),j.grandparent&&"li"==j.grandparent.$.nodeName.toLowerCase()&&(j.grandparent=j.grandparent.getParent())),b&&CKEDITOR.dom.element.setMarker(b,i,"listarray_index",c.length),c.push(j);for(var k,l=0,m=i.getChildCount();m>l;l++)k=i.getChild(l),k.type==CKEDITOR.NODE_ELEMENT&&h[k.getName()]?CKEDITOR.plugins.list.listToArray(k,b,c,d+1,j.grandparent):j.contents.push(k)}}return c},arrayToList:function(a,b,c,d,e){if(c||(c=0),!a||a.length<c+1)return null;for(var f,g,i,l=a[c].parent.getDocument(),m=new CKEDITOR.dom.documentFragment(l),n=null,o=c,p=Math.max(a[c].indent,0),q=null,r=d==CKEDITOR.ENTER_P?"p":"div";;){var s=a[o];if(f=s.grandparent,g=s.element.getDirection(1),s.indent==p){for(n&&a[o].parent.getName()==n.getName()||(n=a[o].parent.clone(!1,1),e&&n.setAttribute("dir",e),m.append(n)),q=n.append(s.element.clone(0,1)),g!=n.getDirection(1)&&q.setAttribute("dir",g),f=0;f<s.contents.length;f++)q.append(s.contents[f].clone(1,1));o++}else if(s.indent==Math.max(p,0)+1)s=a[o-1].element.getDirection(1),o=CKEDITOR.plugins.list.arrayToList(a,null,o,d,s!=g?g:null),!q.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(l.$.documentMode>7)&&q.append(l.createText(" ")),q.append(o.listNode),o=o.nextIndex;else{if(-1!=s.indent||c||!f)return null;h[f.getName()]?(q=s.element.clone(!1,!0),g!=f.getDirection(1)&&q.setAttribute("dir",g)):q=new CKEDITOR.dom.documentFragment(l);var t,u,n=f.getDirection(1)!=g,v=s.element,w=v.getAttribute("class"),x=v.getAttribute("style"),y=q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(d!=CKEDITOR.ENTER_BR||n||x||w),z=s.contents.length;for(f=0;z>f;f++)if(t=s.contents[f],j(t)&&z>1)y?u=t.clone(1,1):q.append(t.clone(1,1));else if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){n&&!t.getDirection()&&t.setAttribute("dir",g),i=t;var A=v.getAttribute("style");A&&i.setAttribute("style",A.replace(/([^;])$/,"$1;")+(i.getAttribute("style")||"")),w&&t.addClass(w),i=null,u&&(q.append(u),u=null),q.append(t.clone(1,1))}else y?(i||(i=l.createElement(r),q.append(i),n&&i.setAttribute("dir",g)),x&&i.setAttribute("style",x),w&&i.setAttribute("class",w),u&&(i.append(u),u=null),i.append(t.clone(1,1))):q.append(t.clone(1,1));u&&((i||q).append(u),u=null),q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&o!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(g=q.getLast())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("br")&&g.remove(),g=q.getLast(k),(!g||!(g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.$block)))&&q.append(l.createElement("br"))),g=q.$.nodeName.toLowerCase(),("div"==g||"p"==g)&&q.appendBogus(),m.append(q),n=null,o++}if(i=null,a.length<=o||Math.max(a[o].indent,0)<p)break}if(b)for(a=m.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(c=a,l=e=d=void 0,d=c.getDirection()))){for(e=c.getParent();e&&!(l=e.getDirection());)e=e.getParent();d==l&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:m,nextIndex:o}}};var m=/^h[1-6]$/,n=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);b.prototype={exec:function(b){this.refresh(b,b.elementPath());var c=b.config,e=b.getSelection(),f=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var g=b.editable();if(g.getFirst(k)){var i=1==f.length&&f[0];(c=i&&i.getEnclosedNode())&&c.is&&this.type==c.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else c.enterMode==CKEDITOR.ENTER_BR?g.appendBogus():f[0].fixBlock(1,c.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(f)}for(var c=e.createBookmarks(!0),g=[],j={},f=f.createIterator(),l=0;(i=f.getNextRange())&&++l;){var n=i.getBoundaryNodes(),o=n.startNode,p=n.endNode;for(o.type==CKEDITOR.NODE_ELEMENT&&"td"==o.getName()&&i.setStartAt(n.startNode,CKEDITOR.POSITION_AFTER_START),p.type==CKEDITOR.NODE_ELEMENT&&"td"==p.getName()&&i.setEndAt(n.endNode,CKEDITOR.POSITION_BEFORE_END),i=i.createIterator(),i.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;n=i.getNextParagraph();)if(!n.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(j,n,"list_block",1);for(var q,r=b.elementPath(n),o=r.elements,p=0,r=r.blockLimit,s=o.length-1;s>=0&&(q=o[s]);s--)if(h[q.getName()]&&r.contains(q)){r.removeCustomData("list_group_object_"+l),(o=q.getCustomData("list_group_object"))?o.contents.push(n):(o={root:q,contents:[n]},g.push(o),CKEDITOR.dom.element.setMarker(j,q,"list_group_object",o)),p=1;break}p||(p=r,p.getCustomData("list_group_object_"+l)?p.getCustomData("list_group_object_"+l).contents.push(n):(o={root:p,contents:[n]},CKEDITOR.dom.element.setMarker(j,p,"list_group_object_"+l,o),g.push(o)))}}for(q=[];g.length>0;)if(o=g.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(h[o.root.getName()]){for(f=b,l=o,o=j,i=q,p=CKEDITOR.plugins.list.listToArray(l.root,o),r=[],n=0;n<l.contents.length;n++)s=l.contents[n],(s=s.getAscendant("li",!0))&&!s.getCustomData("list_item_processed")&&(r.push(s),CKEDITOR.dom.element.setMarker(o,s,"list_item_processed",!0));for(var s=l.root.getDocument(),t=void 0,u=void 0,n=0;n<r.length;n++){var v=r[n].getCustomData("listarray_index"),t=p[v].parent;t.is(this.type)||(u=s.createElement(this.type),t.copyAttributes(u,{start:1,type:1}),u.removeStyle("list-style-type"),p[v].parent=u)}for(o=CKEDITOR.plugins.list.arrayToList(p,o,null,f.config.enterMode),p=void 0,r=o.listNode.getChildCount(),n=0;r>n&&(p=o.listNode.getChild(n));n++)p.getName()==this.type&&i.push(p);o.listNode.replace(l.root),f.fire("contentDomInvalidated")}else{for(p=b,n=o,i=q,r=n.contents,f=n.root.getDocument(),l=[],1==r.length&&r[0].equals(n.root)&&(o=f.createElement("div"),r[0].moveChildren&&r[0].moveChildren(o),r[0].append(o),r[0]=o),n=n.contents[0].getParent(),s=0;s<r.length;s++)n=n.getCommonAncestor(r[s].getParent());for(t=p.config.useComputedState,p=o=void 0,t=void 0===t||t,s=0;s<r.length;s++)for(u=r[s];v=u.getParent();){if(v.equals(n)){l.push(u),!p&&u.getDirection()&&(p=1),u=u.getDirection(t),null!==o&&(o=o&&o!=u?null:u);break}u=v}if(!(l.length<1)){for(r=l[l.length-1].getNext(),s=f.createElement(this.type),i.push(s),t=i=void 0;l.length;)i=l.shift(),t=f.createElement("li"),i.is("pre")||m.test(i.getName())||"false"==i.getAttribute("contenteditable")?i.appendTo(t):(i.copyAttributes(t),o&&i.getDirection()&&(t.removeStyle("direction"),t.removeAttribute("dir")),i.moveChildren(t),i.remove()),t.appendTo(s);o&&p&&s.setAttribute("dir",o),r?s.insertBefore(r):s.appendTo(n)}}else this.state==CKEDITOR.TRISTATE_ON&&h[o.root.getName()]&&a.call(this,b,o,j);for(s=0;s<q.length;s++)d(q[s]);CKEDITOR.dom.element.clearAllMarkers(j),e.selectBookmarks(c),b.focus()},refresh:function(a,b){var c=b.contains(h,1),d=b.blockLimit||b.root;this.setState(c&&d.contains(c)&&c.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new b("numberedlist","ol")),a.addCommand("bulletedlist",new b("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(b){var c=b.data.domEvent.getKey();if("wysiwyg"==a.mode&&c in{8:1,46:1}){var d=a.getSelection().getRanges()[0],i=d&&d.startPath();if(d&&d.collapsed){var j=8==c,m=a.editable(),n=new CKEDITOR.dom.walker(d.clone());if(n.evaluator=function(a){return k(a)&&!l(a)},n.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},c=d.clone(),j){var o,p;(o=i.contains(h))&&d.checkBoundaryOfElement(o,CKEDITOR.START)&&(o=o.getParent())&&o.is("li")&&(o=g(o))?(p=o,o=o.getPrevious(k),c.moveToPosition(o&&l(o)?o:p,CKEDITOR.POSITION_BEFORE_START)):(n.range.setStartAt(m,CKEDITOR.POSITION_AFTER_START),n.range.setEnd(d.startContainer,d.startOffset),(o=n.previous())&&o.type==CKEDITOR.NODE_ELEMENT&&(o.getName()in h||o.is("li"))&&(o.is("li")||(n.range.selectNodeContents(o),n.reset(),n.evaluator=e,o=n.previous()),p=o,c.moveToElementEditEnd(p))),p?(f(a,c,d),b.cancel()):(c=i.contains(h))&&d.checkBoundaryOfElement(c,CKEDITOR.START)&&(p=c.getFirst(k),d.checkBoundaryOfElement(p,CKEDITOR.START)&&(o=c.getPrevious(k),g(p)?o&&(d.moveToElementEditEnd(o),d.select()):a.execCommand("outdent"),b.cancel()))}else(p=i.contains("li"))?(n.range.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),m=(i=p.getLast(k))&&e(i)?i:p,p=0,(o=n.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName()in h&&o.equals(i)?(p=1,o=n.next()):d.checkBoundaryOfElement(m,CKEDITOR.END)&&(p=1),p&&o&&(d=d.clone(),d.moveToElementEditStart(o),f(a,c,d),b.cancel())):(n.range.setEndAt(m,CKEDITOR.POSITION_BEFORE_END),(o=n.next())&&o.type==CKEDITOR.NODE_ELEMENT&&o.is(h)&&(o=o.getFirst(k),i.block&&d.checkStartOfBlock()&&d.checkEndOfBlock()?(i.block.remove(),d.moveToElementEditStart(o),d.select()):g(o)?(d.moveToElementEditStart(o),d.select()):(d=d.clone(),d.moveToElementEditStart(o),f(a,c,d)),b.cancel()));setTimeout(function(){a.selectionChange(1)})}}}))}})}(),function(){function a(a){var b=a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},!0);return a.root.equals(b)?a:(b=new CKEDITOR.dom.range(b),b.moveToRange(a),b)}function b(a,b,c){c=a.config.forceEnterMode||c,"wysiwyg"==a.mode&&(b||(b=a.activeEnterMode),a.elementPath().isContextFor("p")||(b=CKEDITOR.ENTER_BR,c=1),a.fire("saveSnapshot"),b==CKEDITOR.ENTER_BR?g(a,b,null,c):h(a,b,null,c),a.fire("saveSnapshot"))}function c(a){for(var a=a.getSelection().getRanges(!0),b=a.length-1;b>0;b--)a[b].deleteContents();return a[0]}CKEDITOR.plugins.add("enterkey",{init:function(a){a.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){b(a)}}),a.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){b(a,a.activeShiftEnterMode,1)}}),a.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var d=CKEDITOR.dom.walker.whitespaces(),e=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,f,h,j){if(h=h||c(b)){var k,h=a(h),l=h.document,m=h.checkStartOfBlock(),n=h.checkEndOfBlock(),o=b.elementPath(h.startContainer),p=o.block,q=f==CKEDITOR.ENTER_DIV?"div":"p";if(m&&n){if(p&&(p.is("li")||p.getParent().is("li"))){p.is("li")||(p=p.getParent()),h=p.getParent(),k=h.getParent();var j=!p.hasPrevious(),r=!p.hasNext(),q=b.getSelection(),s=q.createBookmarks(),m=p.getDirection(1),n=p.getAttribute("class"),t=p.getAttribute("style"),u=k.getDirection(1)!=m,b=b.enterMode!=CKEDITOR.ENTER_BR||u||t||n;if(k.is("li"))j||r?p[j?"insertBefore":"insertAfter"](k):p.breakParent(k);else{if(b)o.block.is("li")?(k=l.createElement(f==CKEDITOR.ENTER_P?"p":"div"),u&&k.setAttribute("dir",m),t&&k.setAttribute("style",t),n&&k.setAttribute("class",n),p.moveChildren(k)):k=o.block,j||r?k[j?"insertBefore":"insertAfter"](h):(p.breakParent(h),k.insertAfter(h));else if(p.appendBogus(!0),j||r)for(;l=p[j?"getFirst":"getLast"]();)l[j?"insertBefore":"insertAfter"](h);else for(p.breakParent(h);l=p.getLast();)l.insertAfter(h);p.remove()}return void q.selectBookmarks(s)}if(p&&p.getParent().is("blockquote"))return p.breakParent(p.getParent()),p.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getPrevious().remove(),p.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getNext().remove(),h.moveToElementEditStart(p),void h.select()}else if(p&&p.is("pre")&&!n)return void g(b,f,h,j);if(m=h.splitBlock(q)){if(f=m.previousBlock,p=m.nextBlock,o=m.wasStartOfBlock,b=m.wasEndOfBlock,p?(s=p.getParent(),s.is("li")&&(p.breakParent(s),p.move(p.getNext(),1))):f&&(s=f.getParent())&&s.is("li")&&(f.breakParent(s),s=f.getNext(),h.moveToElementEditStart(s),f.move(f.getPrevious())),o||b){if(f?(f.is("li")||!i.test(f.getName())&&!f.is("pre"))&&(k=f.clone()):p&&(k=p.clone()),k?j&&!k.is("li")&&k.renameNode(q):s&&s.is("li")?k=s:(k=l.createElement(q),f&&(r=f.getDirection())&&k.setAttribute("dir",r)),l=m.elementPath)for(j=0,q=l.elements.length;q>j&&(s=l.elements[j],!s.equals(l.block)&&!s.equals(l.blockLimit));j++)CKEDITOR.dtd.$removeEmpty[s.getName()]&&(s=s.clone(),k.moveChildren(s),k.append(s));k.appendBogus(),k.getParent()||h.insertNode(k),k.is("li")&&k.removeAttribute("value"),!CKEDITOR.env.ie||!o||b&&f.getChildCount()||(h.moveToElementEditStart(b?f:k),h.select()),h.moveToElementEditStart(o&&!b?p:k)}else p.is("li")&&(k=h.clone(),k.selectNodeContents(p),k=new CKEDITOR.dom.walker(k),k.evaluator=function(a){return!(e(a)||d(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(s=k.next())&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?l.createElement("br"):l.createText(" ")).insertBefore(s)),p&&h.moveToElementEditStart(p);h.select(),h.scrollIntoView()}}},enterBr:function(a,b,d,e){if(d=d||c(a)){var f=d.document,g=d.checkEndOfBlock(),j=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),k=j.block,l=k&&j.block.getName();e||"li"!=l?(!e&&g&&i.test(l)?(g=k.getDirection())?(f=f.createElement("div"),f.setAttribute("dir",g),f.insertAfter(k),d.setStart(f,0)):(f.createElement("br").insertAfter(k),CKEDITOR.env.gecko&&f.createText("").insertAfter(k),d.setStartAt(k.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==l&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?f.createText("\r"):f.createElement("br"),d.deleteContents(),d.insertNode(a),CKEDITOR.env.needsBrFiller?(f.createText("").insertAfter(a),g&&(k||j.blockLimit).appendBogus(),a.getNext().$.nodeValue="",d.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START)):d.setStartAt(a,CKEDITOR.POSITION_AFTER_END)),d.collapse(!0),d.select(),d.scrollIntoView()):h(a,b,d,e)}}};var f=CKEDITOR.plugins.enterkey,g=f.enterBr,h=f.enterBlock,i=/^h[1-6]$/}(),function(){function a(a,b){var c={},d=[],e={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,f){var g=b?"&"+f+";":e[f];return c[g]=b?e[f]:"&"+f+";",d.push(g),""});if(!b&&a){var f,a=a.split(","),g=document.createElement("div");for(g.innerHTML="&"+a.join(";&")+";",f=g.innerHTML,g=null,g=0;g<f.length;g++){var h=f.charAt(g);c[h]="&"+a[g]+";",d.push(h)}}return c.regex=d.join(b?"|":""),c}CKEDITOR.plugins.add("entities",{afterInit:function(b){var c=b.config;if(b=(b=b.dataProcessor)&&b.htmlFilter){var d=[];c.basicEntities!==!1&&d.push("nbsp,gt,lt,amp"),c.entities&&(d.length&&d.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),c.entities_latin&&d.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&d.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),c.entities_additional&&d.push(c.entities_additional));var e=a(d.join(",")),f=e.regex?"["+e.regex+"]":"a^";delete e.regex,c.entities&&c.entities_processNumerical&&(f="[^ -~]|"+f);var f=RegExp(f,"g"),g=function(a){return"force"!=c.entities_processNumerical&&e[a]?e[a]:"&#"+a.charCodeAt(0)+";"},h=a("nbsp,gt,lt,amp,shy",!0),i=RegExp(h.regex,"g"),j=function(a){return h[a]};b.addRules({text:function(a){return a.replace(i,j).replace(f,g)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,b,c,d){b=b||"80%",c=c||"70%","string"==typeof b&&b.length>1&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),640>b&&(b=640),420>c&&(c=420);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10),d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+b+",height="+c+",top="+e+",left="+f,g=window.open("",null,d,!0);if(!g)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(g.moveTo(f,e),g.resizeTo(b,c)),g.focus(),g.location.href=a}catch(h){window.open(a,null,d,!0)}return!0}}),function(){function a(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function b(a){return a+="",a.charAt(0).toUpperCase()+a.substr(1)}function c(){var c=this.getDialog(),d=c.getParentEditor();d._.filebrowserSe=this;var e=d.config["filebrowser"+b(c.getName())+"WindowWidth"]||d.config.filebrowserWindowWidth||"80%",c=d.config["filebrowser"+b(c.getName())+"WindowHeight"]||d.config.filebrowserWindowHeight||"70%",f=this.filebrowser.params||{};f.CKEditor=d.name,f.CKEditorFuncNum=d._.filebrowserFn,f.langCode||(f.langCode=d.langCode),f=a(this.filebrowser.url,f),d.popup(f,e,c,d.config.filebrowserWindowFeatures||d.config.fileBrowserWindowFeatures)}function d(){var a=this.getDialog();return a.getParentEditor()._.filebrowserSe=this,a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function e(b,c,d){var e=d.params||{};e.CKEditor=b.name,e.CKEditorFuncNum=b._.filebrowserFn,e.langCode||(e.langCode=b.langCode),c.action=a(d.url,e),c.filebrowser=d}function f(a,g,h,i){if(i&&i.length)for(var j,k=i.length;k--;)if(j=i[k],("hbox"==j.type||"vbox"==j.type||"fieldset"==j.type)&&f(a,g,h,j.children),j.filebrowser)if("string"==typeof j.filebrowser&&(j.filebrowser={action:"fileButton"==j.type?"QuickUpload":"Browse",target:j.filebrowser}),"Browse"==j.filebrowser.action){var l=j.filebrowser.url;void 0===l&&(l=a.config["filebrowser"+b(g)+"BrowseUrl"],void 0===l&&(l=a.config.filebrowserBrowseUrl)),l&&(j.onClick=c,j.filebrowser.url=l,j.hidden=!1)}else if("QuickUpload"==j.filebrowser.action&&j["for"]&&(l=j.filebrowser.url,void 0===l&&(l=a.config["filebrowser"+b(g)+"UploadUrl"],void 0===l&&(l=a.config.filebrowserUploadUrl)),l)){var m=j.onClick;j.onClick=function(a){var b=a.sender;return m&&m.call(b,a)===!1?!1:d.call(b,a)},j.filebrowser.url=l,j.hidden=!1,e(a,h.getContents(j["for"][0]).get(j["for"][1]),j.filebrowser)}}function g(a,b,c){if(-1!==c.indexOf(";")){for(var c=c.split(";"),d=0;d<c.length;d++)if(g(a,b,c[d]))return!0;return!1}return(a=a.getContents(b).get(c).filebrowser)&&a.url}function h(a,b){var c=this._.filebrowserSe.getDialog(),d=this._.filebrowserSe["for"],e=this._.filebrowserSe.filebrowser.onSelect;d&&c.getContentElement(d[0],d[1]).reset(),"function"==typeof b&&b.call(this._.filebrowserSe)===!1||e&&e.call(this._.filebrowserSe,a,b)===!1||("string"==typeof b&&b&&alert(b),a&&(d=this._.filebrowserSe,c=d.getDialog(),(d=d.filebrowser.target||null)&&(d=d.split(":"),(e=c.getContentElement(d[0],d[1]))&&(e.setValue(a),c.selectPage(d[0])))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(h,a),a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var b,c=a.data.definition,d=0;d<c.contents.length;++d)(b=c.contents[d])&&(f(a.editor,a.data.name,c,b.elements),b.hidden&&b.filebrowser&&(b.hidden=!g(c,b.id,b.filebrowser)))})}(),function(){function a(a){var d=a.config,e=a.fire("uiSpace",{space:"top",html:""}).html,f=function(){function e(a,b,d){h.setStyle(b,c(d)),h.setStyle("position",a)}function g(a){var b=j.getDocumentPosition();switch(a){case"top":e("absolute","top",b.y-n-q);break;case"pin":e("fixed","top",s);break;case"bottom":e("absolute","top",b.y+(l.height||l.bottom-l.top)+q)}i=a}var i,j,k,l,m,n,o,p=d.floatSpaceDockedOffsetX||0,q=d.floatSpaceDockedOffsetY||0,r=d.floatSpacePinnedOffsetX||0,s=d.floatSpacePinnedOffsetY||0;return function(d){if(j=a.editable())if(d&&"focus"==d.name&&h.show(),h.removeStyle("left"),h.removeStyle("right"),k=h.getClientRect(),l=j.getClientRect(),m=b.getViewPaneSize(),n=k.height,o="pageXOffset"in b.$?b.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,i){g(n+q<=l.top?"top":n+q>m.height-l.bottom?"pin":"bottom");var e,d=m.width/2,d=l.left>0&&l.right<m.width&&l.width>k.width?"rtl"==a.config.contentsLangDirection?"right":"left":d-l.left>l.right-d?"left":"right";k.width>m.width?(d="left",e=0):(e="left"==d?l.left>0?l.left:0:l.right<m.width?m.width-l.right:0,e+k.width>m.width&&(d="left"==d?"right":"left",e=0)),h.setStyle(d,c(("pin"==i?r:p)+e+("pin"==i?0:"left"==d?o:-o)))}else i="pin",g("pin"),f(d)}}();if(e){var g=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),h=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(g.output({content:e,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(d.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),i=CKEDITOR.tools.eventsBuffer(500,f),j=CKEDITOR.tools.eventsBuffer(100,f);h.unselectable(),h.on("mousedown",function(a){a=a.data,a.getTarget().hasAscendant("a",1)||a.preventDefault()}),a.on("focus",function(c){f(c),a.on("change",i.input),b.on("scroll",j.input),b.on("resize",j.input)}),a.on("blur",function(){h.hide(),a.removeListener("change",i.input),b.removeListener("scroll",j.input),b.removeListener("resize",j.input)}),a.on("destroy",function(){b.removeListener("scroll",j.input),b.removeListener("resize",j.input),h.clearCustomData(),h.remove()}),a.focusManager.hasFocus&&h.show(),a.focusManager.add(h,1)}}var b=CKEDITOR.document.getWindow(),c=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(b){b.on("loaded",function(){a(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),b=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),c=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),d=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){var b=b||{},c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=!0),!c.role&&(c.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",c.role),c=this.keys,c[40]="next",c[9]="next",c[38]="prev",c[CKEDITOR.SHIFT+9]="prev",c[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(c[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var b=a.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(b),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var b=this.toggle(a);this.onClick&&this.onClick(a,b)},this)),this._.click}},proto:{add:function(a,c,e){var f=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=f;var g;g=CKEDITOR.tools.htmlEncodeAttr(a).replace(d,"\\'"),a={id:f,val:g,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(e||a),text:c||a},this._.pendingList.push(b.output(a))},startGroup:function(a){this._.close();var b=CKEDITOR.tools.getNextId();this._.groups[a]=b,this._.pendingHtml.push(c.output({id:b,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),b&&"ul"==b.getName()&&b.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a,b=this._.items,c=this._.groups,d=this.element.getDocument();for(a in b)d.getById(b[a]).setStyle("display","");for(var e in c)b=d.getById(c[e]),a=b.getNext(),b.setStyle("display",""),a&&"ul"==a.getName()&&a.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();var a=this._.items[a],b=this.element.getDocument().getById(a);b.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(b)},unmark:function(a){var b=this.element.getDocument(),a=this._.items[a],c=b.getById(a);c.removeClass("cke_selected"),b.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(c)},unmarkAll:function(){var a,b=this._.items,c=this.element.getDocument();for(a in b){var d=b[a];c.getById(d).removeClass("cke_selected"),c.getById(d+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var b,c=this.element.getElementsByTag("a"),d=-1;if(a){for(b=this.element.getDocument().getById(this._.items[a]).getFirst();a=c.getItem(++d);)if(a.equals(b)){this._.focusIndex=d;break}}else this.element.focus();b&&setTimeout(function(){b.focus()},0)}}})}}),function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),a=a+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',b=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),c=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,d){var e,f=CKEDITOR.env,g=this._.id=CKEDITOR.tools.getNextId(),h="",i=this.command;this._.editor=a;var j={id:g,button:this,editor:a,focus:function(){CKEDITOR.document.getById(g).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},k=CKEDITOR.tools.addFunction(function(a){return j.onkey?(a=new CKEDITOR.dom.event(a),j.onkey(j,a.getKeystroke())!==!1):void 0}),l=CKEDITOR.tools.addFunction(function(a){var b;return j.onfocus&&(b=j.onfocus(j,new CKEDITOR.dom.event(a))!==!1),b
}),m=0;if(j.clickFn=e=CKEDITOR.tools.addFunction(function(){m&&(a.unlockSelection(1),m=0),j.execute(),f.iOS&&a.focus()}),this.modes){var n={},o=function(){var b=a.mode;b&&(b=this.modes[b]?void 0!=n[b]?n[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(n[a.mode]=this._.state)},this),a.on("activeFilterChange",o,this),a.on("mode",o,this),!this.readOnly&&a.on("readOnly",o,this)}else i&&(i=a.getCommand(i))&&(i.on("state",function(){this.setState(i.state)},this),h+=i.state==CKEDITOR.TRISTATE_ON?"on":i.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst(),b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl"),d.setAttribute("style",CKEDITOR.skin.getIconStyle(p,"rtl"==b,this.icon,this.iconOffset))},this),i||(h+="off");var p=o=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(p=this.icon,this.icon=null),h={id:g,name:o,iconName:p,label:this.label,cls:this.className||"",state:h,ariaDisabled:"disabled"==h?"true":"false",title:this.title,titleJs:f.gecko&&!f.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:k,focusFn:l,clickFn:e,style:CKEDITOR.skin.getIconStyle(p,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?b.output():""},c.output(h,d),this.onRender&&this.onRender(),j},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)}}(),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),b=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1}),a=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document,a.className="cke_combopanel",a.block={multiSelect:a.multiSelect,attributes:a.attributes},a.toolbarRelated=!0,this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,c){function d(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var b=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(b=CKEDITOR.TRISTATE_DISABLED),this.setState(b),this.setValue(""),b!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var e=CKEDITOR.env,f="cke_"+this.id,g=CKEDITOR.tools.addFunction(function(b){l&&(a.unlockSelection(1),l=0),i.execute(b)},this),h=this,i={id:f,combo:this,focus:function(){CKEDITOR.document.getById(f).getChild(1).focus()},execute:function(b){var c=h._;if(c.state!=CKEDITOR.TRISTATE_DISABLED)if(h.createPanel(a),c.on)c.panel.hide();else{h.commit();var d=h.getValue();d?c.list.mark(d):c.list.unmarkAll(),c.panel.showBlock(h.id,new CKEDITOR.dom.element(b),4)}},clickFn:g};a.on("activeFilterChange",d,this),a.on("mode",d,this),a.on("selectionChange",d,this),!this.readOnly&&a.on("readOnly",d,this);var j=CKEDITOR.tools.addFunction(function(b,c){var b=new CKEDITOR.dom.event(b),d=b.getKeystroke();switch(40==d&&a.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),d){case 13:case 32:case 40:CKEDITOR.tools.callFunction(g,c);break;default:i.onkey(i,d)}b.preventDefault()}),k=CKEDITOR.tools.addFunction(function(){i.onfocus&&i.onfocus()}),l=0;return i.keyDownFn=j,e={id:f,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:e.gecko&&!e.hc?"":(this.title||"").replace("'",""),keydownFn:j,focusFn:k,clickFn:g},b.output(e,c),this.onRender&&this.onRender(),i},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,c=this._.panelDefinition.block,d=b.parent||CKEDITOR.document.getBody(),e="cke_combopanel__"+this.name,f=new CKEDITOR.ui.floatPanel(a,d,b),g=f.addListBlock(this.id,c),h=this;f.onShow=function(){this.element.addClass(e),h.setState(CKEDITOR.TRISTATE_ON),h._.on=1,h.editorFocus&&!a.focusManager.hasFocus&&a.focus(),h.onOpen&&h.onOpen(),a.once("panelShow",function(){g.focus(!g.multiSelect&&h.getValue())})},f.onHide=function(b){this.element.removeClass(e),h.setState(h.modes&&h.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),h._.on=0,!b&&h.onClose&&h.onClose()},f.onEscape=function(){f.hide(1)},g.onClick=function(a,b){h.onClick&&h.onClick.call(h,a,b),f.hide()},this._.panel=f,this._.list=g,f.getBlock(this.id).onHide=function(){h._.on=0,h.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(a,b){this._.value=a;var c=this.document.getById("cke_"+this.id+"_text");c&&(a||b?c.removeClass("cke_combo_inlinelabel"):(b=this.label,c.addClass("cke_combo_inlinelabel")),c.setText("undefined"!=typeof b?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(a){if(this._.state!=a){var b=this.document.getById("cke_"+this.id);b.setState(a,"cke_combo"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var b=a.config,c=a.lang.format,d=b.format_tags.split(";"),e={},f=0,g=[],h=0;h<d.length;h++){var i=d[h],j=new CKEDITOR.style(b["format_"+i]);(!a.filter.customConfig||a.filter.check(j))&&(f++,e[i]=j,e[i]._.enterMode=a.config.enterMode,g.push(j))}0!==f&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:g,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(b.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in e){var b=c["tag_"+a];this.add(a,e[a].buildPreview(b),b)}},onClick:function(b){a.focus(),a.fire("saveSnapshot");var b=e[b],c=a.elementPath();a[b.checkActive(c,a)?"removeStyle":"applyStyle"](b),setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var c=this.getValue(),b=b.data.path;this.refresh();for(var d in e)if(e[d].checkActive(b,a))return void(d!=c&&this.setValue(d,a.lang.format["tag_"+d]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in e)a.activeFilter.check(e[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var c in e)if(a.activeFilter.check(e[c]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var a={canUndo:!1,exec:function(a){var b=a.document.createElement("hr");a.insertElement(b)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(b){b.blockless||(b.addCommand("horizontalrule",a),b.ui.addButton&&b.ui.addButton("HorizontalRule",{label:b.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){var b=new CKEDITOR.htmlWriter;b.forceSimpleAmpersand=a.config.forceSimpleAmpersand,b.indentationChars=a.config.dataIndentationChars||"	",a.dataProcessor.writer=b}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var a,b=CKEDITOR.dtd;for(a in CKEDITOR.tools.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))this.setRules(a,{indent:!b[a]["#"],breakBeforeOpen:1,breakBeforeClose:!b[a]["#"],breakAfterClose:1,needsSpace:a in b.$block&&!(a in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var b=this._.rules[a];this._.afterCloser&&b&&b.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():b&&b.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",a),this._.afterCloser=0},openTagClose:function(a,b){var c=this._.rules[a];b?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push(">"),c&&c.indent&&(this._.indentation=this._.indentation+this.indentationChars)),c&&c.breakAfterOpen&&this.lineBreak(),"pre"==a&&(this._.inPre=1)},attribute:function(a,b){"string"==typeof b&&(this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&")),b=CKEDITOR.tools.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this._.rules[a];b&&b.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():b&&b.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",a,">"),"pre"==a&&(this._.inPre=0),b&&b.breakAfterClose&&(this.lineBreak(),this._.needsSpace=b.needsSpace),this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))),this._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(a,b){var c=this._.rules[a];c?CKEDITOR.tools.extend(c,b,!0):this._.rules[a]=b}}}),function(){function a(a,b){return b||(b=a.getSelection().getSelectedElement()),b&&b.is("img")&&!b.data("cke-realelement")&&!b.isReadOnly()?b:void 0}function b(a){var b=a.getStyle("float");return("inherit"==b||"none"==b)&&(b=0),b||(b=a.getAttribute("align")),b}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(b){if(!b.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var c="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(b,"image","advanced")&&(c="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),b.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:c,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"}),b.on("doubleclick",function(a){var b=a.data.element;!b.is("img")||b.data("cke-realelement")||b.isReadOnly()||(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(c){return a(b,c)?{image:CKEDITOR.TRISTATE_OFF}:void 0})}},afterInit:function(c){function d(d){var e=c.getCommand("justify"+d);e&&(("left"==d||"right"==d)&&e.on("exec",function(e){var f,g=a(c);g&&(f=b(g),f==d?(g.removeStyle("float"),d==b(g)&&g.removeAttribute("align")):g.setStyle("float",d),e.cancel())}),e.on("refresh",function(e){var f=a(c);f&&(f=b(f),this.setState(f==d?CKEDITOR.TRISTATE_ON:"right"==d||"left"==d?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),e.cancel())}))}c.plugins.image2||(d("left"),d("right"),d("center"),d("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function a(a,b){var c=d.exec(a),e=d.exec(b);if(c){if(!c[2]&&"px"==e[2])return e[1];if("px"==c[2]&&!e[2])return e[1]+"px"}return b}var b=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,d=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,e={elements:{$:function(c){var d=c.attributes;if((d=(d=(d=d&&d["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(d)))&&d.children[0])&&c.attributes["data-cke-resizable"]){var e=new b(c).rules,c=d.attributes,f=e.width,e=e.height;f&&(c.width=a(c.width,f)),e&&(c.height=a(c.height,e))}return d}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(e,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(a,d,e,f){var g=this.lang.fakeobjects,g=g[e]||g.unknown,d={"class":d,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:g,title:g,align:a.getAttribute("align")||""};return CKEDITOR.env.hc||(d.src=CKEDITOR.tools.transparentImageData),e&&(d["data-cke-real-element-type"]=e),f&&(d["data-cke-resizable"]=f,e=new b,f=a.getAttribute("width"),a=a.getAttribute("height"),f&&(e.rules.width=c(f)),a&&(e.rules.height=c(a)),e.populate(d)),this.document.createElement("img",{attributes:d})},CKEDITOR.editor.prototype.createFakeParserElement=function(a,d,e,f){var g,h=this.lang.fakeobjects,h=h[e]||h.unknown;return g=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(g),g=g.getHtml(),d={"class":d,"data-cke-realelement":encodeURIComponent(g),"data-cke-real-node-type":a.type,alt:h,title:h,align:a.attributes.align||""},CKEDITOR.env.hc||(d.src=CKEDITOR.tools.transparentImageData),e&&(d["data-cke-real-element-type"]=e),f&&(d["data-cke-resizable"]=f,f=a.attributes,a=new b,e=f.width,f=f.height,void 0!=e&&(a.rules.width=c(e)),void 0!=f&&(a.rules.height=c(f)),a.populate(d)),new CKEDITOR.htmlParser.element("img",d)},CKEDITOR.editor.prototype.restoreRealElement=function(b){if(b.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var c=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(b.data("cke-realelement")),this.document);if(b.data("cke-resizable")){var d=b.getStyle("width"),b=b.getStyle("height");d&&c.setAttribute("width",a(c.getAttribute("width"),d)),b&&c.setAttribute("height",a(c.getAttribute("height"),b))}return c}}(),function(){function a(a){return a.replace(/'/g,"\\$&")}function b(a){for(var b,c=a.length,d=[],e=0;c>e;e++)b=a.charCodeAt(e),d.push(b);return"String.fromCharCode("+d.join(",")+")"}function c(b,c){var d,e,f=b.plugins.link,g=f.compiledProtectionFunction.params;e=[f.compiledProtectionFunction.name,"("];for(var h=0;h<g.length;h++)f=g[h].toLowerCase(),d=c[f],h>0&&e.push(","),e.push("'",d?a(encodeURIComponent(c[f])):"","'");return e.push(")"),e.join("")}function d(a){var b,a=a.config.emailProtection||"";return a&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,function(a,c,d){b.name=c,b.params=[],d.replace(/[^,\s]+/g,function(a){b.params.push(a)})})),b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(a){return c.replace(/%1/g,"rtl"==a?"right":"left").replace(/%2/g,"cke_contents_"+a)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]")),a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"})),a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),a.addCommand("unlink",new CKEDITOR.unlinkCommand),a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),a.setKeystroke(CKEDITOR.CTRL+76,"link"),a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),a.on("doubleclick",function(b){var c=CKEDITOR.plugins.link.getSelectedLink(a)||b.data.element;c.isReadOnly()||(c.is("a")?(b.data.dialog=!c.getAttribute("name")||c.getAttribute("href")&&c.getChildCount()?"link":"anchor",b.data.link=c):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,c)&&(b.data.dialog="anchor"))},null,null,0),a.on("doubleclick",function(b){b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,20),a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(b){if(!b||b.isReadOnly())return null;if(b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b),!b&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var c={};return b.getAttribute("href")&&b.getChildCount()&&(c={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),b&&b.hasAttribute("name")&&(c.anchor=c.removeAnchor=CKEDITOR.TRISTATE_OFF),c}),this.compiledProtectionFunction=d(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}});var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push(function(b,c){return"a"!=c||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)&&(!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount())?void 0:"anchor"})}});var e=/^javascript:/,f=/^mailto:([^?]+)(?:\?(.+))?$/,g=/subject=([^;?:@&=$,\/]*)/,h=/body=([^;?:@&=$,\/]*)/,i=/^#(.*)$/,j=/^((?:http|https|ftp|news):\/\/)?(.*)$/,k=/^(_(?:self|top|parent|blank))$/,l=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,m=/^javascript:([^(]+)\(([^)]+)\)$/,n=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,o=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,p={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a){var b=a.getSelection(),c=b.getSelectedElement();return c&&c.is("a")?c:(b=b.getRanges()[0])?(b.shrink(CKEDITOR.SHRINK_TEXT),a.elementPath(b.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(a){for(var b,c=a.editable(),d=c.isInline()&&!a.plugins.divarea?a.document:c,c=d.getElementsByTag("a"),d=d.getElementsByTag("img"),e=[],f=0;b=c.getItem(f++);)(b.data("cke-saved-name")||b.hasAttribute("name"))&&e.push({name:b.data("cke-saved-name")||b.getAttribute("name"),id:b.getAttribute("id")});for(f=0;b=d.getItem(f++);)(b=this.tryRestoreFakeAnchor(a,b))&&e.push({name:b.getAttribute("name"),id:b.getAttribute("id")});return e},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var c=a.restoreRealElement(b);if(c.data("cke-saved-name"))return c}},parseLinkAttributes:function(a,b){var c,d=b&&(b.data("cke-saved-href")||b.getAttribute("href"))||"",q=a.plugins.link.compiledProtectionFunction,r=a.config.emailProtection,s={};if(d.match(e)&&("encode"==r?d=d.replace(l,function(a,b,c){return"mailto:"+String.fromCharCode.apply(String,b.split(","))+(c&&c.replace(/\\'/g,"'"))}):r&&d.replace(m,function(a,b,c){if(b==q.name){s.type="email";for(var d,e,a=s.email={},b=/(^')|('$)/g,c=c.match(/[^,\s]+/g),f=c.length,g=0;f>g;g++)d=decodeURIComponent,e=c[g].replace(b,"").replace(/\\'/g,"'"),e=d(e),d=q.params[g].toLowerCase(),a[d]=e;a.address=[a.name,a.domain].join("@")}})),!s.type)if(r=d.match(i))s.type="anchor",s.anchor={},s.anchor.name=s.anchor.id=r[1];else if(r=d.match(f)){c=d.match(g),d=d.match(h),s.type="email";var t=s.email={};t.address=r[1],c&&(t.subject=decodeURIComponent(c[1])),d&&(t.body=decodeURIComponent(d[1]))}else d&&(c=d.match(j))&&(s.type="url",s.url={},s.url.protocol=c[1],s.url.url=c[2]);if(b){if(d=b.getAttribute("target"))s.target={type:d.match(k)?d:"frame",name:d};else if(d=(d=b.data("cke-pa-onclick")||b.getAttribute("onclick"))&&d.match(n))for(s.target={type:"popup",name:d[1]};r=o.exec(d[2]);)"yes"!=r[2]&&"1"!=r[2]||r[1]in{height:1,width:1,top:1,left:1}?isFinite(r[2])&&(s.target[r[1]]=r[2]):s.target[r[1]]=!0;var u,d={};for(u in p)(r=b.getAttribute(u))&&(d[p[u]]=r);(u=b.data("cke-saved-name")||d.advName)&&(d.advName=u),CKEDITOR.tools.isEmpty(d)||(s.advanced=d)}return s},getLinkAttributes:function(d,e){var f=d.config.emailProtection||"",g={};switch(e.type){case"url":var f=e.url&&void 0!=e.url.protocol?e.url.protocol:"http://",h=e.url&&CKEDITOR.tools.trim(e.url.url)||"";g["data-cke-saved-href"]=0===h.indexOf("/")?h:f+h;break;case"anchor":f=e.anchor&&e.anchor.id,g["data-cke-saved-href"]="#"+(e.anchor&&e.anchor.name||f||"");break;case"email":var i=e.email,h=i.address;switch(f){case"":case"encode":var j=encodeURIComponent(i.subject||""),k=encodeURIComponent(i.body||""),i=[];j&&i.push("subject="+j),k&&i.push("body="+k),i=i.length?"?"+i.join("&"):"","encode"==f?(f=["javascript:void(location.href='mailto:'+",b(h)],i&&f.push("+'",a(i),"'"),f.push(")")):f=["mailto:",h,i];break;default:f=h.split("@",2),i.name=f[0],i.domain=f[1],f=["javascript:",c(d,i)]}g["data-cke-saved-href"]=f.join("")}if(e.target)if("popup"==e.target.type){for(var f=["window.open(this.href, '",e.target.name||"","', '"],l=["resizable","status","location","toolbar","menubar","fullscreen","scrollbars","dependent"],h=l.length,j=function(a){e.target[a]&&l.push(a+"="+e.target[a])},i=0;h>i;i++)l[i]=l[i]+(e.target[l[i]]?"=yes":"=no");j("width"),j("left"),j("height"),j("top"),f.push(l.join(","),"'); return false;"),g["data-cke-pa-onclick"]=f.join("")}else"notSet"!=e.target.type&&e.target.name&&(g.target=e.target.name);if(e.advanced){for(var m in p)(f=e.advanced[p[m]])&&(g[m]=f);g.name&&(g["data-cke-saved-name"]=g.name)}g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]),m=CKEDITOR.tools.extend({target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},p);for(var n in g)delete m[n];return{set:g,removed:CKEDITOR.tools.objectKeys(m)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(a){var b=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});a.removeStyle(b)},refresh:function(a,b){var c=b.lastElement&&b.lastElement.getAscendant("a",!0);this.setState(c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var b,c=a.getSelection(),d=c.createBookmarks();c&&(b=c.getSelectedElement())&&(b.getChildCount()?b.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b))?b.remove(1):(b=CKEDITOR.plugins.link.getSelectedLink(a))&&(b.hasAttribute("href")?(b.removeAttributes({name:1,"data-cke-saved-name":1}),b.removeClass("cke_anchor")):b.remove(1)),c.selectBookmarks(d)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function a(a,b,c){return k(b)&&k(c)&&c.equals(b.getNext(function(a){return!(W(a)||X(a)||l(a))}))}function b(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function c(a){var b=a.element;if(b&&k(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var c=f(b);if("true"==c.getAttribute("contenteditable"))return b;if(c.is(a.triggers))return c}return null}function d(a,b,c){return t(a,b),t(a,c),a=b.size.bottom,c=c.size.top,a&&c?0|(a+c)/2:a||c}function e(a,b,c){return b=b[c?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!W(b)||k(b)&&!l(b)&&!j(a,b)})}function f(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function g(a){var b=a.doc,c=z('<span contenteditable="false" style="'+S+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),d=CKEDITOR.getUrl(this.path+"images/"+(A.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");for(x(c,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[x(z('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:S+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+d+") center no-repeat "+a.boxColor+";cursor:pointer;"+(A.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(A.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),x(z(U,b),{base:T+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),x(z(U,b),{base:T+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){t(a,this);var b=a.holdDistance,c=this.size;return c&&a.mouse.y>c.top-b&&a.mouse.y<c.bottom+b&&a.mouse.x>c.left-b&&a.mouse.x<c.right+b?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,f=d.lower,g=e||f,h=g.getParent(),i={};this.trigger=d,e&&t(a,e,!0),f&&t(a,f,!0),t(a,h,!0),a.inInlineMode&&u(a,!0),h.equals(c)?(i.left=b.scroll.x,i.right=-b.scroll.x,i.width=""):(i.left=g.size.left-g.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),i.width=g.size.outerWidth+g.size.margin.left+g.size.margin.right+b.scroll.x,i.right=""),e&&f?i.top=e.size.margin.bottom===f.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<f.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-f.size.margin.top:e?f||(i.top=e.size.bottom+e.size.margin.bottom):i.top=f.size.top-f.size.margin.top,d.is(J)||i.top>b.scroll.y-15&&i.top<b.scroll.y+5?(i.top=a.inInlineMode?0:b.scroll.y,this.look(J)):d.is(K)||i.top>b.pane.bottom-5&&i.top<b.pane.bottom+15?(i.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(K)):(a.inInlineMode&&(i.top=i.top-(b.editable.top+b.editable.border.top)),this.look(L)),a.inInlineMode&&(i.top--,i.top=i.top+b.editable.scroll.top,i.left=i.left+b.editable.scroll.left);for(var j in i)i[j]=CKEDITOR.tools.cssLength(i[j]);this.setStyles(i)},look:function(a){if(this.oldLook!=a){for(var b,c=this.lineChildren.length;c--;)(b=this.lineChildren[c]).setAttribute("style",b.base+b.looks[0|a/2]);this.oldLook=a}},wrap:new y("span",a.doc)}),b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(L),c.appendTo(c.wrap),c.unselectable(),c.lineChildren[0].on("mouseup",function(b){c.detach(),h(a,function(b){var c=a.line.trigger;b[c.is(E)?"insertBefore":"insertAfter"](c.is(E)?c.lower:c.upper)},!0),a.editor.focus(),!A.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),c.on("mousedown",function(a){a.data.preventDefault(!0)}),a.line=c}function h(a,b,c){var d,e=new CKEDITOR.dom.range(a.doc),g=a.editor;A.ie&&a.enterMode==CKEDITOR.ENTER_BR?d=a.doc.createText(M):(d=(d=f(a.element,!0))&&d.data("cke-enter-mode")||a.enterMode,d=new y(D[d],a.doc),d.is("br")||a.doc.createText(M).appendTo(d)),c&&g.fire("saveSnapshot"),b(d),e.moveToPosition(d,CKEDITOR.POSITION_AFTER_START),g.getSelection().selectRanges([e]),a.hotNode=d,c&&g.fire("saveSnapshot")}function i(a,b){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function d(c){var d=A.ie&&A.version<9?" ":M,e=a.hotNode&&a.hotNode.getText()==d&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!b;h(a,function(d){e&&a.hotNode&&a.hotNode.remove(),d[b?"insertAfter":"insertBefore"](c),d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!b}),a.lastCmdDirection=!!b
}),!A.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),a.line.detach()}return function(g){var h,g=g.getSelection().getStartElement(),g=g.getAscendant(Q,1);if(!o(a,g)&&g&&!g.equals(a.editable)&&!g.contains(a.editable)){(h=f(g))&&"false"==h.getAttribute("contenteditable")&&(g=h),a.element=g,h=e(a,g,!b);var i;k(h)&&h.is(a.triggers)&&h.is(P)&&(!e(a,h,!b)||(i=e(a,h,!b))&&k(i)&&i.is(a.triggers))?d(h):(i=c(a,g),k(i)&&(e(a,i,!b)?(g=e(a,i,!b))&&k(g)&&g.is(a.triggers)&&d(i):d(i)))}}}()}}function j(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var c=a.line;return c.wrap.equals(b)||c.wrap.contains(b)}function k(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function l(a){if(!k(a))return!1;var b;return(b=m(a))||(k(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1),b}function m(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function n(a,b){return k(b)?b.is(a.triggers):null}function o(a,b){if(!b)return!1;for(var c=b.getParents(1),d=c.length;d--;)for(var e=a.tabuList.length;e--;)if(c[d].hasAttribute(a.tabuList[e]))return!0;return!1}function p(a,b,c){return(b=b[c?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(O)}))?(t(a,b),c?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y):!1}function q(a){var c=a.editable,d=a.mouse,e=a.view,f=a.triggerOffset;u(a);var g=d.y>(a.inInlineMode?e.editable.top+e.editable.height/2:Math.min(e.editable.height,e.pane.height)/2),c=c[g?"getLast":"getFirst"](function(a){return!(W(a)||X(a))});return c?(j(a,c)&&(c=a.line.wrap[g?"getPrevious":"getNext"](function(a){return!(W(a)||X(a))})),k(c)&&!l(c)&&n(a,c)?(t(a,c),!g&&c.size.top>=0&&d.y>0&&d.y<c.size.top+f?(a=a.inInlineMode||0===e.scroll.y?J:L,new b([null,c,E,H,a])):g&&c.size.bottom<=e.pane.height&&d.y>c.size.bottom-f&&d.y<e.pane.height?(a=a.inInlineMode||c.size.bottom>e.pane.height-f&&c.size.bottom<e.pane.height?K:L,new b([c,null,F,H,a])):null):null):null}function r(a){var d=a.mouse,f=a.view,g=a.triggerOffset,h=c(a);if(!h)return null;t(a,h);var i,j,g=Math.min(g,0|h.size.outerHeight/2),m=[];if(d.y>h.size.top-1&&d.y<h.size.top+g)j=!1;else{if(!(d.y>h.size.bottom-g&&d.y<h.size.bottom+1))return null;j=!0}if(l(h)||p(a,h,j)||h.getParent().is(N))return null;var o=e(a,h,!j);if(o){if(o&&o.type==CKEDITOR.NODE_TEXT)return null;if(k(o)){if(l(o)||!n(a,o)||o.getParent().is(N))return null;m=[o,h][j?"reverse":"concat"]().concat([G,H])}}else h.equals(a.editable[j?"getLast":"getFirst"](a.isRelevant))?(u(a),j&&d.y>h.size.bottom-g&&d.y<f.pane.height&&h.size.bottom>f.pane.height-g&&h.size.bottom<f.pane.height?i=K:d.y>0&&d.y<h.size.top+g&&(i=J)):i=L,m=[null,h][j?"reverse":"concat"]().concat([j?F:E,H,i,h.equals(a.editable[j?"getLast":"getFirst"](a.isRelevant))?j?K:J:L]);return 0 in m?new b(m):null}function s(a,b,c,d){for(var e=function(){var c=A.ie?b.$.currentStyle:a.win.$.getComputedStyle(b.$,"");return A.ie?function(a){return c[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return c.getPropertyValue(a)}}(),f=b.getDocumentPosition(),g={},h={},i={},j={},k=Z.length;k--;)g[Z[k]]=parseInt(e("border-"+Z[k]+"-width"),10)||0,i[Z[k]]=parseInt(e("padding-"+Z[k]),10)||0,h[Z[k]]=parseInt(e("margin-"+Z[k]),10)||0;return(!c||d)&&v(a,d),j.top=f.y-(c?0:a.view.scroll.y),j.left=f.x-(c?0:a.view.scroll.x),j.outerWidth=b.$.offsetWidth,j.outerHeight=b.$.offsetHeight,j.height=j.outerHeight-(i.top+i.bottom+g.top+g.bottom),j.width=j.outerWidth-(i.left+i.right+g.left+g.right),j.bottom=j.top+j.outerHeight,j.right=j.left+j.outerWidth,a.inInlineMode&&(j.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),x({border:g,padding:i,margin:h,ignoreScroll:c},j,!0)}function t(a,b,c){if(!k(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==c&&b.size.date>new Date-R)return null}else b.size={};return x(b.size,s(a,b,c),{date:+new Date},!0)}function u(a,b){a.view.editable=s(a,a.editable,b,!0)}function v(a,b){a.view||(a.view={});var c=a.view;if(b||!(c&&c.date>new Date-R)){var d=a.win,c=d.getScrollPosition(),d=d.getViewPaneSize();x(a.view,{scroll:{x:c.x,y:c.y,width:a.doc.$.documentElement.scrollWidth-d.width,height:a.doc.$.documentElement.scrollHeight-d.height},pane:{width:d.width,height:d.height,bottom:d.height+c.y},date:+new Date},!0)}}function w(a,c,d,e){for(var f=e,g=e,h=0,i=!1,j=!1,k=a.view.pane.height,l=a.mouse;l.y+h<k&&l.y-h>0&&(i||(i=c(f,e)),j||(j=c(g,e)),!i&&l.y-h>0&&(f=d(a,{x:l.x,y:l.y-h})),!j&&l.y+h<k&&(g=d(a,{x:l.x,y:l.y+h})),!i||!j);)h+=2;return new b([f,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var d,f,n,p=a.config,t=p.magicline_triggerOffset||30,w={editor:a,enterMode:p.enterMode,triggerOffset:t,holdDistance:0|t*(p.magicline_holdDistance||.5),boxColor:p.magicline_color||"#ff0000",rtl:"rtl"==p.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(p.magicline_tabuList||[]),triggers:p.magicline_everywhere?Q:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};w.isRelevant=function(a){return k(a)&&!j(w,a)&&!l(a)},a.on("contentDom",function(){var k=a.editable(),l=a.document,t=a.window;x(w,{editable:k,inInlineMode:k.isInline(),doc:l,win:t,hotNode:null},!0),w.boundary=w.inInlineMode?w.editable:w.doc.getDocumentElement(),k.is(C.$inline)||(w.inInlineMode&&!m(k)&&k.setStyles({position:"relative",top:null,left:null}),g.call(this,w),v(w),k.attachListener(a,"beforeUndoImage",function(){w.line.detach()}),k.attachListener(a,"beforeGetData",function(){w.line.wrap.getParent()&&(w.line.detach(),a.once("getData",function(){w.line.attach()},null,null,1e3))},null,null,0),k.attachListener(w.inInlineMode?l:l.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(w.inInlineMode){var c=b.data.$.clientX,b=b.data.$.clientY;v(w),u(w,!0);var d=w.view.editable,e=w.view.scroll;c>d.left-e.x&&c<d.right-e.x&&b>d.top-e.y&&b<d.bottom-e.y||(clearTimeout(n),n=null,w.line.detach())}else clearTimeout(n),n=null,w.line.detach()}),k.attachListener(k,"keyup",function(){w.hiddenMode=0}),k.attachListener(k,"keydown",function(b){if("wysiwyg"==a.mode)switch(b=b.data.getKeystroke(),a.getSelection().getStartElement(),b){case 2228240:case 16:w.hiddenMode=1,w.line.detach()}}),k.attachListener(w.inInlineMode?k:l,"mousemove",function(b){if(f=!0,"wysiwyg"==a.mode&&!a.readOnly&&!n){var c={x:b.data.$.clientX,y:b.data.$.clientY};n=setTimeout(function(){w.mouse=c,n=w.trigger=null,v(w),f&&!w.hiddenMode&&a.focusManager.hasFocus&&!w.line.mouseNear()&&(w.element=V(w,!0))&&((w.trigger=q(w)||r(w)||Y(w))&&!o(w,w.trigger.upper||w.trigger.lower)?w.line.attach().place():(w.trigger=null,w.line.detach()),f=!1)},30)}}),k.attachListener(t,"scroll",function(){"wysiwyg"==a.mode&&(w.line.detach(),A.webkit&&(w.hiddenMode=1,clearTimeout(d),d=setTimeout(function(){w.mouseDown||(w.hiddenMode=0)},50)))}),k.attachListener(B?l:t,"mousedown",function(){"wysiwyg"==a.mode&&(w.line.detach(),w.hiddenMode=1,w.mouseDown=1)}),k.attachListener(B?l:t,"mouseup",function(){w.hiddenMode=0,w.mouseDown=0}),a.addCommand("accessPreviousSpace",i(w)),a.addCommand("accessNextSpace",i(w,!0)),a.setKeystroke([[p.magicline_keystrokePrevious,"accessPreviousSpace"],[p.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,c,d,e;for(e in{p:1,br:1,div:1})for(b=a.document.getElementsByTag(e),d=b.count();d--;)if((c=b.getItem(d)).data("cke-magicline-hot"))return w.hotNode=c,void(w.lastCmdDirection="true"===c.data("cke-magicline-dir")?!0:!1)}),this.backdoor={accessFocusSpace:h,boxTrigger:b,isLine:j,getAscendantTrigger:c,getNonEmptyNeighbour:e,getSize:s,that:w,triggerEdge:r,triggerEditable:q,triggerExpand:Y})},this)}});var x=CKEDITOR.tools.extend,y=CKEDITOR.dom.element,z=y.createFromHtml,A=CKEDITOR.env,B=CKEDITOR.env.ie&&CKEDITOR.env.version<9,C=CKEDITOR.dtd,D={},E=128,F=64,G=32,H=16,I=8,J=4,K=2,L=1,M=" ",N=C.$listItem,O=C.$tableContent,P=x({},C.$nonEditable,C.$empty),Q=C.$block,R=100,S="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",T=S+"border-color:transparent;display:block;border-style:solid;",U="<span>"+M+"</span>";D[CKEDITOR.ENTER_BR]="br",D[CKEDITOR.ENTER_P]="p",D[CKEDITOR.ENTER_DIV]="div",b.prototype={set:function(a,b,c){return this.properties=a+b+(c||L),this},is:function(a){return(this.properties&a)==a}};var V=function(){function a(a,b){var c=a.$.elementFromPoint(b.x,b.y);return c&&c.nodeType?new CKEDITOR.dom.element(c):null}return function(b,c,d){if(!b.mouse)return null;var e=b.doc,f=b.line.wrap,d=d||b.mouse,g=a(e,d);return c&&j(b,g)&&(f.hide(),g=a(e,d),f.show()),!g||g.type!=CKEDITOR.NODE_ELEMENT||!g.$||A.ie&&A.version<9&&!b.boundary.equals(g)&&!b.boundary.contains(g)?null:g}}(),W=CKEDITOR.dom.walker.whitespaces(),X=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Y=function(){function b(b){var e,f,g,h=b.element;if(!k(h)||h.contains(b.editable)||h.isReadOnly())return null;if(g=w(b,function(a,b){return!b.equals(a)},function(a,b){return V(a,!0,b)},h),e=g.upper,f=g.lower,a(b,e,f))return g.set(G,I);if(e&&h.contains(e))for(;!e.getParent().equals(h);)e=e.getParent();else e=h.getFirst(function(a){return c(b,a)});if(f&&h.contains(f))for(;!f.getParent().equals(h);)f=f.getParent();else f=h.getLast(function(a){return c(b,a)});if(!e||!f)return null;if(t(b,e),t(b,f),!(b.mouse.y>e.size.top&&b.mouse.y<f.size.bottom))return null;for(var i,j,l,m,h=Number.MAX_VALUE;f&&!f.equals(e)&&(j=e.getNext(b.isRelevant));)i=Math.abs(d(b,e,j)-b.mouse.y),h>i&&(h=i,l=e,m=j),e=j,t(b,e);return l&&m&&b.mouse.y>l.size.top&&b.mouse.y<m.size.bottom?(g.upper=l,g.lower=m,g.set(G,I)):null}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||X(b)||l(b)||j(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(c){var d,e=b(c);if(d=e){d=e.upper;var f=e.lower;d=!d||!f||l(f)||l(d)||f.equals(d)||d.equals(f)||f.contains(d)||d.contains(f)?!1:n(c,d)&&n(c,f)&&a(c,d,f)?!0:!1}return d?e:null}}(),Z=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var b=[],c=["style","className"],d=0;d<c.length;d++){var e=a.$.elements.namedItem(c[d]);e&&(e=new CKEDITOR.dom.element(e),b.push([e,e.nextSibling]),e.remove())}return b}function b(a,b){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&b.length>0)for(var c=b.length-1;c>=0;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function c(c,d){var e=a(c),f={},g=c.$;return d||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",d||(g.style.cssText="position: static; overflow: visible"),b(e),f}function d(c,d){var e=a(c),f=c.$;"class"in d&&(f.className=d["class"]),"inline"in d&&(f.style.cssText=d.inline),b(e)}function e(a){if(!a.editable().isInline()){var b,c=CKEDITOR.instances;for(b in c){var d=c[b];"wysiwyg"!=d.mode||d.readOnly||(d=d.document.getBody(),d.setAttribute("contentEditable",!1),d.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function b(){var b=k.getViewPaneSize();a.resize(b.width,b.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f,g,h,i=a.lang,j=CKEDITOR.document,k=j.getWindow(),l=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var m=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),n=a.ui.space("contents");if("wysiwyg"==a.mode){var o=a.getSelection();f=o&&o.getRanges(),g=k.getScrollPosition()}else{var p=a.editable().$;f=!CKEDITOR.env.ie&&[p.selectionStart,p.selectionEnd],g=[p.scrollLeft,p.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(k.on("resize",b),h=k.getScrollPosition(),o=a.container;o=o.getParent();)o.setCustomData("maximize_saved_styles",c(o)),o.setStyle("z-index",a.config.baseFloatZIndex-5);n.setCustomData("maximize_saved_styles",c(n,!0)),m.setCustomData("maximize_saved_styles",c(m,!0)),n={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},j.getDocumentElement().setStyles(n),!CKEDITOR.env.gecko&&j.getDocumentElement().setStyle("position","fixed"),(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&j.getBody().setStyles(n),CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(0,0)},0):k.$.scrollTo(0,0),m.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),m.$.offsetLeft,m.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"}),m.addClass("cke_maximized"),b(),n=m.getDocumentPosition(),m.setStyles({left:-1*n.x+"px",top:-1*n.y+"px"}),CKEDITOR.env.gecko&&e(a)}else if(this.state==CKEDITOR.TRISTATE_ON){for(k.removeListener("resize",b),n=[n,m],o=0;o<n.length;o++)d(n[o],n[o].getCustomData("maximize_saved_styles")),n[o].removeCustomData("maximize_saved_styles");for(o=a.container;o=o.getParent();)d(o,o.getCustomData("maximize_saved_styles")),o.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){k.$.scrollTo(h.x,h.y)},0):k.$.scrollTo(h.x,h.y),m.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(m.setStyle("display","inline"),setTimeout(function(){m.setStyle("display","block")},0)),a.fire("resize")}this.toggleState(),(o=this.uiItems[0])&&(n=this.state==CKEDITOR.TRISTATE_OFF?i.maximize.maximize:i.maximize.minimize,o=CKEDITOR.document.getById(o._.id),o.getChild(1).setHtml(n),o.setAttribute("title",n),o.setAttribute("href",'javascript:void("'+n+'");')),"wysiwyg"==a.mode?f?(CKEDITOR.env.gecko&&e(a),a.getSelection().selectRanges(f),(p=a.getSelection().getStartElement())&&p.scrollIntoView(!0)):k.$.scrollTo(g.x,g.y):(f&&(p.selectionStart=f[0],p.selectionEnd=f[1]),p.scrollLeft=g[0],p.scrollTop=g[1]),f=g=null,l=this.state,a.fire("maximize",this.state)},canUndo:!1}),a.ui.addButton&&a.ui.addButton("Maximize",{label:i.maximize.maximize,command:"maximize",toolbar:"tools,10"}),a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:l)},null,null,100)}}})}(),function(){function a(a,b,c){var d=CKEDITOR.cleanWord;return d?c():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||b+"filter/default.js"),CKEDITOR.scriptLoader.load(a,c,null,!0)),!d}function b(a){a.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(c){var d=0,e=this.path;c.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a){var c=this;d=1,a.once("beforePaste",b),a.getClipboardData({title:a.lang.pastefromword.title},function(b){b&&a.fire("paste",{type:"html",dataValue:b.dataValue}),a.fire("afterCommandExec",{name:"pastefromword",command:c,returnValue:!!b})})}}),c.ui.addButton&&c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),c.on("pasteState",function(a){c.getCommand("pastefromword").setState(a.data)}),c.on("paste",function(b){var f=b.data,g=f.dataValue;if(g&&(d||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(g))){var h=a(c,e,function(){h?c.fire("paste",f):(!c.config.pasteFromWordPromptCleanup||d||confirm(c.lang.pastefromword.confirmCleanup))&&(f.dataValue=CKEDITOR.cleanWord(g,c))});h&&b.cancel()}},null,null,3)}})}(),function(){var a={canUndo:!1,async:!0,exec:function(b){b.getClipboardData({title:b.lang.pastetext.title},function(c){c&&b.fire("paste",{type:"text",dataValue:c.dataValue}),b.fire("afterCommandExec",{name:"pastetext",command:a,returnValue:!!c})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(b){b.addCommand("pastetext",a),b.ui.addButton&&b.ui.addButton("PasteText",{label:b.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),b.config.forcePasteAsPlainText&&b.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),b.on("pasteState",function(a){b.getCommand("pastetext").setState(a.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var b,c=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),d=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=CKEDITOR.plugins.removeformat.filter,f=a.getSelection().getRanges(),g=f.createIterator(),h=function(a){return a.type==CKEDITOR.NODE_ELEMENT};b=g.getNextRange();){b.collapsed||b.enlarge(CKEDITOR.ENLARGE_ELEMENT);var i=b.createBookmark(),j=i.startNode,k=i.endNode,l=function(b){for(var d,f=a.elementPath(b),g=f.elements,h=1;(d=g[h])&&(!d.equals(f.block)&&!d.equals(f.blockLimit));h++)c.test(d.getName())&&e(a,d)&&b.breakParent(d)};if(l(j),k)for(l(k),j=j.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);j&&!j.equals(k);)if(j.isReadOnly()){if(j.getPosition(k)&CKEDITOR.POSITION_CONTAINS)break;j=j.getNext(h)}else l=j.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==j.getName()&&j.data("cke-realelement")||!e(a,j)||(c.test(j.getName())?j.remove(1):(j.removeAttributes(d),a.fire("removeFormatCleanup",j))),j=l;b.moveToBookmark(i)}a.forceNextSelectionCheck(),a.getSelection().selectRanges(f)}}},filter:function(a,b){for(var c=a._.removeFormatFilters||[],d=0;d<c.length;d++)if(c[d](b)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){var b,c,d,e,f=a.config,g=a.ui.spaceId("resizer"),h=a.element?a.element.getDirection(1):"ltr";if(!f.resize_dir&&(f.resize_dir="vertical"),void 0==f.resize_maxWidth&&(f.resize_maxWidth=3e3),void 0==f.resize_maxHeight&&(f.resize_maxHeight=3e3),void 0==f.resize_minWidth&&(f.resize_minWidth=750),void 0==f.resize_minHeight&&(f.resize_minHeight=250),f.resize_enabled!==!1){var i=null,j=("both"==f.resize_dir||"horizontal"==f.resize_dir)&&f.resize_minWidth!=f.resize_maxWidth,k=("both"==f.resize_dir||"vertical"==f.resize_dir)&&f.resize_minHeight!=f.resize_maxHeight,l=function(g){var i=b,l=c,m=i+(g.data.$.screenX-d)*("rtl"==h?-1:1),g=l+(g.data.$.screenY-e);j&&(i=Math.max(f.resize_minWidth,Math.min(m,f.resize_maxWidth))),k&&(l=Math.max(f.resize_minHeight,Math.min(g,f.resize_maxHeight))),a.resize(j?i:null,l)},m=function(){CKEDITOR.document.removeListener("mousemove",l),CKEDITOR.document.removeListener("mouseup",m),a.document&&(a.document.removeListener("mousemove",l),a.document.removeListener("mouseup",m))},n=CKEDITOR.tools.addFunction(function(g){i||(i=a.getResizable()),b=i.$.offsetWidth||0,c=i.$.offsetHeight||0,d=g.screenX,e=g.screenY,f.resize_minWidth>b&&(f.resize_minWidth=b),f.resize_minHeight>c&&(f.resize_minHeight=c),CKEDITOR.document.on("mousemove",l),CKEDITOR.document.on("mouseup",m),a.document&&(a.document.on("mousemove",l),a.document.on("mouseup",m)),g.preventDefault&&g.preventDefault()});a.on("destroy",function(){CKEDITOR.tools.removeFunction(n)}),a.on("uiSpace",function(b){if("bottom"==b.data.space){var c="";j&&!k&&(c=" cke_resizer_horizontal"),!j&&k&&(c=" cke_resizer_vertical");var d='<span id="'+g+'" class="cke_resizer'+c+" cke_resizer_"+h+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event)">'+("ltr"==h?"◢":"◣")+"</span>";b.data.html="ltr"==h&&"ltr"==c?b.data.html+d:d+b.data.html}},a,null,100),a.on("maximize",function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(a){var b=this._,c=b.menu;b.state!==CKEDITOR.TRISTATE_DISABLED&&(b.on&&c?c.hide():(b.previousState=b.state,c||(c=b.menu=new CKEDITOR.menu(a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.common.options}}}),c.onHide=CKEDITOR.tools.bind(function(){var c=this.command?a.getCommand(this.command).modes:this.modes;this.setState(!c||c[a.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED),b.on=0},this),this.onMenu&&c.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),b.on=1,setTimeout(function(){c.show(CKEDITOR.document.getById(b.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){delete b.panel,this.base(b),this.hasArrow=!0,this.click=a},statics:{handler:{create:function(a){return new CKEDITOR.ui.menuButton(a)}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(a){var b=this,c=CKEDITOR.plugins.scayt;this.bindEvents(a),this.parseConfig(a),this.addRule(a),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(a);var d=a.lang.scayt,e=CKEDITOR.env;a.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:d.text_title,title:d.text_title,modes:{wysiwyg:!(e.ie&&(e.version<8||e.quirks))},toolbar:"spellchecker,20",refresh:function(){var b=a.ui.instances.Scayt.getState();a.scayt&&(b=c.state[a.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.fire("scaytButtonState",b)},onRender:function(){var b=this;a.on("scaytButtonState",function(a){void 0!==typeof a.data&&b.setState(a.data)})},onMenu:function(){var b=a.scayt;return a.getMenuItem("scaytToggle").label=a.lang.scayt[b&&c.state[a.name]?"btn_disable":"btn_enable"],b={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:b?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:a.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED},a.config.scayt_uiTabs[0]||delete b.scaytOptions,a.config.scayt_uiTabs[1]||delete b.scaytLangs,a.config.scayt_uiTabs[2]||delete b.scaytDict,b}}),a.contextMenu&&a.addMenuItems&&(a.contextMenu.addListener(function(){var c,d=a.scayt;if(d){var e=d.getSelectionNode();(e=e?e.getAttribute(d.getNodeAttribute()):e)&&(c=b.menuGenerator(a,e,b),d.showBanner("."+a.contextMenu._.definition.panel.className.split(" ").join(" .")))}return c}),a.contextMenu._.onHide=CKEDITOR.tools.override(a.contextMenu._.onHide,function(b){return function(){var c=a.scayt;return c&&c.hideBanner(),b.apply(this)}}))},addMenuItems:function(a){var b=this,c=CKEDITOR.plugins.scayt;a.addMenuGroup("scaytButton");var d=a.config.scayt_contextMenuItemsOrder.split("|");if(d&&d.length)for(var e=0;e<d.length;e++)a.addMenuGroup("scayt_"+d[e],e-10);d={scaytToggle:{label:a.lang.scayt.btn_enable,group:"scaytButton",onClick:function(){var b=a.scayt;c.state[a.name]=!c.state[a.name],c.state[a.name]===!0?b||c.createScayt(a):b&&c.destroy(a)}},scaytAbout:{label:a.lang.scayt.btn_about,group:"scaytButton",onClick:function(){a.scayt.tabToOpen="about",a.lockSelection(),a.openDialog(b.dialogName)}},scaytOptions:{label:a.lang.scayt.btn_options,group:"scaytButton",onClick:function(){a.scayt.tabToOpen="options",a.lockSelection(),a.openDialog(b.dialogName)}},scaytLangs:{label:a.lang.scayt.btn_langs,group:"scaytButton",onClick:function(){a.scayt.tabToOpen="langs",a.lockSelection(),a.openDialog(b.dialogName)}},scaytDict:{label:a.lang.scayt.btn_dictionaries,group:"scaytButton",onClick:function(){a.scayt.tabToOpen="dictionaries",a.lockSelection(),a.openDialog(b.dialogName)}}},a.plugins.wsc&&(d.WSC={label:a.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var b=CKEDITOR.plugins.scayt,c=a.scayt,d=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(d=d.replace(/\s/g,""))?(c&&b.state[a.name]&&c.setMarkupPaused&&c.setMarkupPaused(!0),a.lockSelection(),a.execCommand("checkspell")):alert("Nothing to check!")}}),a.addMenuItems(d)},bindEvents:function(a){var b=CKEDITOR.plugins.scayt,c=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;CKEDITOR.on("dialogDefinition",function(a){"scaytDialog"===a.data.name&&a.data.definition.dialog.on("cancel",function(){return!1},this,null,-1)});var d=function(){a.scayt&&b.destroy(a)},e=function(){b.state[a.name]&&!a.readOnly&&b.createScayt(a)},f=function(){c?(a.on("blur",d),a.on("focus",e),a.focusManager.hasFocus&&e()):e()};a.on("contentDom",f),a.on("beforeCommandExec",function(c){c.data.name in b.options.disablingCommandExec&&"wysiwyg"==a.mode?(c=a.scayt)&&(b.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):("bold"===c.data.name||"italic"===c.data.name||"underline"===c.data.name||"strike"===c.data.name||"subscript"===c.data.name||"superscript"===c.data.name)&&(c=a.scayt)&&(c.removeMarkupInSelectionNode(),c.fire("startSpellCheck"))}),a.on("beforeSetMode",function(c){"source"==c.data&&(c=a.scayt)&&(b.destroy(a),a.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED))}),a.on("afterCommandExec",function(b){var c;"wysiwyg"!=a.mode||"undo"!=b.data.name&&"redo"!=b.data.name||(c=a.scayt)&&setTimeout(function(){c.fire("startSpellCheck")},250)}),a.on("readOnly",function(c){var d;c&&(d=a.scayt,c.editor.readOnly===!0?d&&d.fire("removeMarkupInDocument",{}):d?d.fire("startSpellCheck"):"wysiwyg"==c.editor.mode&&b.state[c.editor.name]===!0&&(b.createScayt(a),c.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),a.on("beforeDestroy",d),a.on("setData",function(){d(),a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&f()},this,null,50),a.on("insertElement",function(){var b=a.scayt;b&&(b.removeMarkupInSelectionNode(),b.fire("startSpellCheck"))},this,null,50),a.on("insertHtml",function(){var b=a.scayt;b&&(b.removeMarkupInSelectionNode(),b.fire("startSpellCheck"))},this,null,50),a.on("scaytDialogShown",function(b){b.data.selectPage(a.scayt.tabToOpen)})},parseConfig:function(a){var b=CKEDITOR.plugins.scayt;if(b.replaceOldOptionsNames(a.config),"boolean"!=typeof a.config.scayt_autoStartup&&(a.config.scayt_autoStartup=!1),b.state[a.name]=a.config.scayt_autoStartup,a.config.scayt_contextCommands||(a.config.scayt_contextCommands="ignore|ignoreall|add"),a.config.scayt_contextMenuItemsOrder||(a.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),a.config.scayt_sLang||(a.config.scayt_sLang="en_US"),(void 0===a.config.scayt_maxSuggestions||"number"!=typeof a.config.scayt_maxSuggestions||a.config.scayt_maxSuggestions<0)&&(a.config.scayt_maxSuggestions=5),(void 0===a.config.scayt_customDictionaryIds||"string"!=typeof a.config.scayt_customDictionaryIds)&&(a.config.scayt_customDictionaryIds=""),(void 0===a.config.scayt_userDictionaryName||"string"!=typeof a.config.scayt_userDictionaryName)&&(a.config.scayt_userDictionaryName=null),"string"==typeof a.config.scayt_uiTabs&&3===a.config.scayt_uiTabs.split(",").length){var c=[],d=[];a.config.scayt_uiTabs=a.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(a.config.scayt_uiTabs,function(a){1===Number(a)||0===Number(a)?(d.push(!0),c.push(Number(a))):d.push(!1)}),a.config.scayt_uiTabs=null===CKEDITOR.tools.search(d,!1)?c:[1,1,1]}else a.config.scayt_uiTabs=[1,1,1];"string"!=typeof a.config.scayt_serviceProtocol&&(a.config.scayt_serviceProtocol=null),"string"!=typeof a.config.scayt_serviceHost&&(a.config.scayt_serviceHost=null),"string"!=typeof a.config.scayt_servicePort&&(a.config.scayt_servicePort=null),"string"!=typeof a.config.scayt_servicePath&&(a.config.scayt_servicePath=null),a.config.scayt_moreSuggestions||(a.config.scayt_moreSuggestions="on"),"string"!=typeof a.config.scayt_customerId&&(a.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof a.config.scayt_srcUrl&&(b=document.location.protocol,b=-1!=b.search(/https?:/)?b:"http:",a.config.scayt_srcUrl=b+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0)},addRule:function(a){var b=a.dataProcessor,c=b&&b.htmlFilter,d=a._.elementsPath&&a._.elementsPath.filters,b=b&&b.dataFilter,e=a.addRemoveFormatFilter,f=function(b){var c=CKEDITOR.plugins.scayt;return a.scayt&&b.hasAttribute(c.options.data_attribute_name)?!1:void 0},g=function(b){var c=CKEDITOR.plugins.scayt,d=!0;return a.scayt&&b.hasAttribute(c.options.data_attribute_name)&&(d=!1),d};d&&d.push(f),b&&b.addRules({elements:{span:function(b){var c=CKEDITOR.plugins.scayt;return c&&c.state[a.name]&&b.classes&&CKEDITOR.tools.search(b.classes,c.options.misspelled_word_class)&&(b.classes&&b.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete b.attributes.style,delete b.name):delete b.classes[CKEDITOR.tools.indexOf(b.classes,c.options.misspelled_word_class)]),b}}}),c&&c.addRules({elements:{span:function(b){var c=CKEDITOR.plugins.scayt;return c&&c.state[a.name]&&b.hasClass(c.options.misspelled_word_class)&&b.attributes[c.options.data_attribute_name]&&(b.removeClass(c.options.misspelled_word_class),delete b.attributes[c.options.data_attribute_name],delete b.name),b}}}),e&&e.call(a,g)},scaytMenuDefinition:function(a){var b=this,a=a.scayt;return{scayt_ignore:{label:a.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:a.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:a.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var b=a.scayt;setTimeout(function(){b.addWordToUserDictionary()},10)}},option:{label:a.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(a){a.scayt.tabToOpen="options",a.lockSelection(),a.openDialog(b.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[0]?!0:!1}},language:{label:a.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs",a.lockSelection(),a.openDialog(b.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[1]?!0:!1}},dictionary:{label:a.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen="dictionaries",a.lockSelection(),a.openDialog(b.dialogName)},verification:function(a){return 1==a.config.scayt_uiTabs[2]?!0:!1}},about:{label:a.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about",a.lockSelection(),a.openDialog(b.dialogName)}}}},buildSuggestionMenuItems:function(a,b){var c={},d={},e=a.scayt;if(b.length>0&&"no_any_suggestions"!==b[0])for(var f=0;f<b.length;f++){var g="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[f].replace(" ","_");a.addCommand(g,this.createCommand(CKEDITOR.plugins.scayt.suggestions[f])),f<a.config.scayt_maxSuggestions?(a.addMenuItem(g,{label:b[f],command:g,group:"scayt_suggest",order:f+1}),c[g]=CKEDITOR.TRISTATE_OFF):(a.addMenuItem(g,{label:b[f],command:g,group:"scayt_moresuggest",order:f+1}),d[g]=CKEDITOR.TRISTATE_OFF,"on"===a.config.scayt_moreSuggestions&&(a.addMenuItem("scayt_moresuggest",{label:e.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return d}}),c.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else c.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,a.addCommand("no_scayt_suggest",{exec:function(){}}),a.addMenuItem("no_scayt_suggest",{label:e.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return c},menuGenerator:function(a,b){var c=a.scayt,d=this.scaytMenuDefinition(a),e={},f=a.config.scayt_contextCommands.split("|");if(c.fire("getSuggestionsList",{lang:c.getLang(),word:b}),e=this.buildSuggestionMenuItems(a,CKEDITOR.plugins.scayt.suggestions),"off"==a.config.scayt_contextCommands)return e;for(var g in d)(-1!=CKEDITOR.tools.indexOf(f,g.replace("scayt_",""))||"all"==a.config.scayt_contextCommands)&&(e[g]=CKEDITOR.TRISTATE_OFF,"function"==typeof d[g].verification&&!d[g].verification(a)&&delete e[g],a.addCommand(g,{exec:d[g].exec}),a.addMenuItem(g,{label:a.lang.scayt[d[g].label]||d[g].label,command:g,group:d[g].group,order:d[g].order}));
return e},createCommand:function(a){return{exec:function(b){b.scayt.replaceSelectionNode({word:a})}}}}),CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(a){for(var b in a)b in this.backCompatibilityMap&&(a[this.backCompatibilityMap[b]]=a[b],delete a[b])},createScayt:function(a){var b=this;this.loadScaytLibrary(a,function(a){var c={lang:a.config.scayt_sLang,container:"BODY"==a.editable().$.nodeName?a.document.getWindow().$.frameElement:a.editable().$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,data_attribute_name:b.options.data_attribute_name,misspelled_word_class:b.options.misspelled_word_class};a.config.scayt_serviceProtocol&&(c.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(c.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(c.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(c.service_path=a.config.scayt_servicePath),c=new SCAYT.CKSCAYT(c,function(){},function(){}),c.subscribe("suggestionListSend",function(a){for(var b={},c=[],d=0;d<a.suggestionList.length;d++)b[a.suggestionList[d]]||(b[a.suggestionList[d]]=a.suggestionList[d],c.push(a.suggestionList[d]));CKEDITOR.plugins.scayt.suggestions=c}),a.scayt=c,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)})},destroy:function(a){a.scayt&&a.scayt.destroy(),delete a.scayt,a.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(a,b){var c=this;"undefined"==typeof window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?(this.loadingHelper[a.name]=b,this.loadingHelper.loadOrder.push(a.name),CKEDITOR.scriptLoader.load(a.config.scayt_srcUrl,function(){var a;CKEDITOR.fireOnce("scaytReady");for(var b=0;b<c.loadingHelper.loadOrder.length;b++)a=c.loadingHelper.loadOrder[b],"function"==typeof c.loadingHelper[a]&&c.loadingHelper[a](CKEDITOR.instances[a]),delete c.loadingHelper[a];c.loadingHelper.loadOrder=[]})):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),a.scayt||"function"==typeof b&&b(a))}},CKEDITOR.on("scaytReady",function(){if(CKEDITOR.config.scayt_handleCheckDirty===!0){var a=CKEDITOR.editor.prototype;a.checkDirty=CKEDITOR.tools.override(a.checkDirty,function(a){return function(){var b=null,c=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt){if(b="ready"==this.status)var d=c.removeMarkupFromString(this.getSnapshot()),c=c.removeMarkupFromString(this._.previousValue),b=b&&c!==d}else b=a.call(this);return b}}),a.resetDirty=CKEDITOR.tools.override(a.resetDirty,function(a){return function(){var b=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt?this._.previousValue=b.removeMarkupFromString(this.getSnapshot()):a.call(this)}})}if(CKEDITOR.config.scayt_handleUndoRedo===!0){var a=CKEDITOR.plugins.undo.Image.prototype,b="function"==typeof a.equalsContent?"equalsContent":"equals";a[b]=CKEDITOR.tools.override(a[b],function(a){return function(b){var c=b.editor.scayt,d=this.contents,e=b.contents,f=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[b.editor.name]&&b.editor.scayt&&(this.contents=c.removeMarkupFromString(d)||"",b.contents=c.removeMarkupFromString(e)||""),f=a.apply(this,arguments),this.contents=d,b.contents=e,f}})}}),function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){if(a.document){var b=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[b]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(a)},init:function(b){var c=b.addCommand("showborders",a);c.canUndo=!1,b.config.startupShowBorders!==!1&&c.setState(CKEDITOR.TRISTATE_ON),b.on("mode",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(b)},null,null,100),b.on("contentDom",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(b)}),b.on("removeFormatCleanup",function(a){a=a.data,b.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||parseInt(a.getAttribute("border"),10)<=0)&&a.addClass("cke_show_border")})},afterInit:function(a){var b=a.dataProcessor,a=b&&b.dataFilter,b=b&&b.htmlFilter;a&&a.addRules({elements:{table:function(a){var a=a.attributes,b=a["class"],c=parseInt(a.border,10);c&&!(0>=c)||b&&-1!=b.indexOf("cke_show_border")||(a["class"]=(b||"")+" cke_show_border")}}}),b&&b.addRules({elements:{table:function(a){var a=a.attributes,b=a["class"];b&&(a["class"]=b.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(a){var b=a.data.name;("table"==b||"tableProperties"==b)&&(a=a.data.definition,b=a.getContents("info").get("txtBorder"),b.commit=CKEDITOR.tools.override(b.commit,function(a){return function(b,c){a.apply(this,arguments);var d=parseInt(this.getValue(),10);c[!d||0>=d?"addClass":"removeClass"]("cke_show_border")}}),(a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))&&(a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(b,c){a.apply(this,arguments),parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(b){function c(){var a=e&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),a&&this.focus()}if(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var d=CKEDITOR.plugins.sourcearea;b.addMode("source",function(d){var e=b.ui.space("contents").getDocument().createElement("textarea");e.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",b.config.sourceAreaTabSize||4))),e.setAttribute("dir","ltr"),e.addClass("cke_source cke_reset cke_enable_context_menu"),b.ui.space("contents").append(e),e=b.editable(new a(b,e)),e.setData(b.getData(1)),CKEDITOR.env.ie&&(e.attachListener(b,"resize",c,e),e.attachListener(CKEDITOR.document.getWindow(),"resize",c,e),CKEDITOR.tools.setTimeout(c,0,e)),b.fire("ariaWidget",this),d()}),b.addCommand("source",d.commands.source),b.ui.addButton&&b.ui.addButton("Source",{label:b.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),b.on("mode",function(){b.getCommand("source").setState("source"==b.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var e=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot"),a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var b=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),a.addCommand("specialchar",{exec:function(){var c=a.langCode,c=b.availableLangs[c]?c:b.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"dialogs/lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,b.langEntries[c]),a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var b=a.config,c=a.lang.stylescombo,d={},e=[],f=[];a.on("stylesSet",function(c){if(c=c.data.styles){for(var g,h,i,j=0,k=c.length;k>j;j++)g=c[j],a.blockless&&g.element in CKEDITOR.dtd.$block||(h=g.name,g=new CKEDITOR.style(g),(!a.filter.customConfig||a.filter.check(g))&&(g._name=h,g._.enterMode=b.enterMode,g._.type=i=g.assignedTo||g.type,g._.weight=j+1e3*(i==CKEDITOR.STYLE_OBJECT?1:i==CKEDITOR.STYLE_BLOCK?2:3),d[h]=g,e.push(g),f.push(g)));e.sort(function(a,b){return a._.weight-b._.weight})}}),a.ui.addRichCombo("Styles",{label:c.label,title:c.panelTitle,toolbar:"styles,10",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(b.contentsCss),multiSelect:!0,attributes:{"aria-label":c.panelTitle}},init:function(){var a,b,d,f,g,h;for(g=0,h=e.length;h>g;g++)a=e[g],b=a._name,f=a._.type,f!=d&&(this.startGroup(c["panelTitle"+f]),d=f),this.add(b,a.type==CKEDITOR.STYLE_OBJECT?b:a.buildPreview(),b);this.commit()},onClick:function(b){a.focus(),a.fire("saveSnapshot");var b=d[b],c=a.elementPath();a[b.checkActive(c,a)?"removeStyle":"applyStyle"](b),a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){for(var c,e=this.getValue(),b=b.data.path.elements,f=0,g=b.length;g>f;f++){c=b[f];for(var h in d)if(d[h].checkElementRemovable(c,!0,a))return void(h!=e&&this.setValue(h))}this.setValue("")},this)},onOpen:function(){var b=a.getSelection().getSelectedElement(),b=a.elementPath(b),e=[0,0,0,0];this.showAll(),this.unmarkAll();for(var f in d){var g=d[f],h=g._.type;g.checkApplicable(b,a,a.activeFilter)?e[h]++:this.hideItem(f),g.checkActive(b,a)&&this.mark(f)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_BLOCK]),e[CKEDITOR.STYLE_INLINE]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_INLINE]),e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var b=a.elementPath();if(b){for(var c in d)if(d[c].checkApplicable(b,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){d={},e=[]}})}})}(),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.editable().hasFocus){var c,d=b.getSelection();if(c=new CKEDITOR.dom.elementPath(d.getCommonAncestor(),d.root).contains({td:1,th:1},1)){var d=b.createRange(),e=CKEDITOR.tools.tryThese(function(){var b=c.getParent().$.cells[c.$.cellIndex+(a?-1:1)];return b.parentNode.parentNode,b},function(){var b=c.getParent(),b=b.getAscendant("table").$.rows[b.$.rowIndex+(a?-1:1)];return b.cells[a?b.cells.length-1:0]});if(e||a){if(!e)return!0;e=new CKEDITOR.dom.element(e),d.moveToElementEditStart(e),(!d.checkStartOfBlock()||!d.checkEndOfBlock())&&d.selectNodeContents(e)}else{for(var f=c.getAscendant("table").$,e=c.getParent().$.cells,f=new CKEDITOR.dom.element(f.insertRow(-1),b.document),g=0,h=e.length;h>g;g++)f.append(new CKEDITOR.dom.element(e[g],b.document).clone(!1,!1)).appendBogus();d.moveToElementEditStart(f)}return d.select(!0),!0}}return!1}}}var b={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},d={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(e){for(var f=e.config.enableTabKeyTools!==!1,g=e.config.tabSpaces||0,h="";g--;)h+=" ";h&&e.on("key",function(a){9==a.data.keyCode&&(e.insertHtml(h),a.cancel())}),f&&e.on("key",function(a){(9==a.data.keyCode&&e.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&e.execCommand("selectPreviousCell"))&&a.cancel()}),e.addCommand("blur",CKEDITOR.tools.extend(c,b)),e.addCommand("blurBack",CKEDITOR.tools.extend(d,b)),e.addCommand("selectNextCell",a()),e.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,b){var c,d,e,f,g,h,i=void 0===b?this.getTabIndex():b;if(0>=i)for(g=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);g;){if(g.isVisible()&&0===g.getTabIndex()){e=g;break}g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(g=this.getDocument().getBody().getFirst();g=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&g.equals(this)){if(d=!0,a){if(!(g=g.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(g)&&(c=1);if(g.isVisible()&&!((h=g.getTabIndex())<0)){if(c&&h==i){e=g;break}h>i&&(!e||!f||f>h)?(e=g,f=h):e||0!==h||(e=g,f=h)}}e&&e.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,b){for(var c,d,e,f,g=void 0===b?this.getTabIndex():b,h=0,i=this.getDocument().getBody().getLast();i=i.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!c)if(!d&&i.equals(this)){if(d=!0,a){if(!(i=i.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;c=1}}else d&&!this.contains(i)&&(c=1);if(i.isVisible()&&!((f=i.getTabIndex())<0))if(0>=g){if(c&&0===f){e=i;break}f>h&&(e=i,h=f)}else{if(c&&f==g){e=i;break}g>f&&(!e||f>h)&&(e=i,h=f)}}e&&e.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function b(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",b())),a.addCommand("tableDelete",b({exec:function(a){var b=a.elementPath().contains("table",1);if(b){var c=b.getParent(),d=a.editable();1==c.getChildCount()&&!c.is("td","th")&&!c.equals(d)&&(b=c),a=a.createRange(),a.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove(),a.select()}}})),a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}}),a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function a(a){function b(a){c.length>0||a.type!=CKEDITOR.NODE_ELEMENT||!m.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(d,a,"selected_cell",!0),c.push(a))}for(var a=a.getRanges(),c=[],d={},e=0;e<a.length;e++){var f=a[e];if(f.collapsed)f=f.getCommonAncestor(),(f=f.getAscendant("td",!0)||f.getAscendant("th",!0))&&c.push(f);else{var g,f=new CKEDITOR.dom.walker(f);for(f.guard=b;g=f.next();)g.type==CKEDITOR.NODE_ELEMENT&&g.is(CKEDITOR.dtd.table)||(g=g.getAscendant("td",!0)||g.getAscendant("th",!0))&&!g.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(d,g,"selected_cell",!0),c.push(g))}}return CKEDITOR.dom.element.clearAllMarkers(d),c}function b(b,c){for(var d=a(b),e=d[0],f=e.getAscendant("table"),e=e.getDocument(),g=d[0].getParent(),h=g.$.rowIndex,d=d[d.length-1],i=d.getParent().$.rowIndex+d.$.rowSpan-1,d=new CKEDITOR.dom.element(f.$.rows[i]),h=c?h:i,g=c?g:d,d=CKEDITOR.tools.buildTableMap(f),f=d[h],h=c?d[h-1]:d[h+1],d=d[0].length,e=e.createElement("tr"),i=0;f[i]&&d>i;i++){var j;f[i].rowSpan>1&&h&&f[i]==h[i]?(j=f[i],j.rowSpan=j.rowSpan+1):(j=new CKEDITOR.dom.element(f[i]).clone(),j.removeAttribute("rowSpan"),j.appendBogus(),e.append(j),j=j.$),i+=j.colSpan-1}c?e.insertBefore(g):e.insertAfter(g)}function c(b){if(b instanceof CKEDITOR.dom.selection){for(var d=a(b),e=d[0].getAscendant("table"),f=CKEDITOR.tools.buildTableMap(e),b=d[0].getParent().$.rowIndex,d=d[d.length-1],g=d.getParent().$.rowIndex+d.$.rowSpan-1,d=[],h=b;g>=h;h++){for(var i=f[h],j=new CKEDITOR.dom.element(e.$.rows[h]),k=0;k<i.length;k++){var l=new CKEDITOR.dom.element(i[k]),m=l.getParent().$.rowIndex;1==l.$.rowSpan?l.remove():(l.$.rowSpan=l.$.rowSpan-1,m==h&&(m=f[h+1],m[k-1]?l.insertAfter(new CKEDITOR.dom.element(m[k-1])):new CKEDITOR.dom.element(e.$.rows[h+1]).append(l,1))),k+=l.$.colSpan-1}d.push(j)}for(f=e.$.rows,e=new CKEDITOR.dom.element(f[g+1]||(b>0?f[b-1]:null)||e.$.parentNode),h=d.length;h>=0;h--)c(d[h]);return e}return b instanceof CKEDITOR.dom.element&&(e=b.getAscendant("table"),1==e.$.rows.length?e.remove():b.remove()),null}function d(a,b){for(var c=b?1/0:0,d=0;d<a.length;d++){var e;e=a[d];for(var f=b,g=e.getParent().$.cells,h=0,i=0;i<g.length;i++){var j=g[i],h=h+(f?1:j.colSpan);if(j==e.$)break}e=h-1,(b?c>e:e>c)&&(c=e)}return c}function e(b,c){for(var e=a(b),f=e[0].getAscendant("table"),g=d(e,1),e=d(e),g=c?g:e,h=CKEDITOR.tools.buildTableMap(f),f=[],e=[],i=h.length,j=0;i>j;j++)f.push(h[j][g]),e.push(c?h[j][g-1]:h[j][g+1]);for(j=0;i>j;j++)f[j]&&(f[j].colSpan>1&&e[j]==f[j]?(g=f[j],g.colSpan=g.colSpan+1):(g=new CKEDITOR.dom.element(f[j]).clone(),g.removeAttribute("colSpan"),g.appendBogus(),g[c?"insertBefore":"insertAfter"].call(g,new CKEDITOR.dom.element(f[j])),g=g.$),j+=g.rowSpan-1)}function f(a,b){var c=a.getStartElement();if(c=c.getAscendant("td",1)||c.getAscendant("th",1)){var d=c.clone();d.appendBogus(),b?d.insertBefore(c):d.insertAfter(c)}}function g(b){if(b instanceof CKEDITOR.dom.selection){var c,b=a(b),d=b[0]&&b[0].getAscendant("table");a:{var e=0;c=b.length-1;for(var f,i,j={};f=b[e++];)CKEDITOR.dom.element.setMarker(j,f,"delete_cell",!0);for(e=0;f=b[e++];)if((i=f.getPrevious())&&!i.getCustomData("delete_cell")||(i=f.getNext())&&!i.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(j),c=i;break a}CKEDITOR.dom.element.clearAllMarkers(j),i=b[0].getParent(),(i=i.getPrevious())?c=i.getLast():(i=b[c].getParent(),c=(i=i.getNext())?i.getChild(0):null)}for(i=b.length-1;i>=0;i--)g(b[i]);c?h(c,!0):d&&d.remove()}else b instanceof CKEDITOR.dom.element&&(d=b.getParent(),1==d.getChildCount()?d.remove():b.remove())}function h(a,b){var c=a.getDocument(),d=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(d.focus(),c.focus()),c=new CKEDITOR.dom.range(c),c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(b?!1:!0)),c.select(!0)}function i(a,b,c){if(a=a[b],"undefined"==typeof c)return a;for(b=0;a&&b<a.length;b++){if(c.is&&a[b]==c.$)return b;if(b==c)return new CKEDITOR.dom.element(a[b])}return c.is?-1:null}function j(b,c,d){var e,f=a(b);if((c?1!=f.length:f.length<2)||(e=b.getCommonAncestor())&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("table"))return!1;var g,b=f[0];e=b.getAscendant("table");var h=CKEDITOR.tools.buildTableMap(e),j=h.length,k=h[0].length,l=b.getParent().$.rowIndex,m=i(h,l,b);if(c){var n;try{var o=parseInt(b.getAttribute("rowspan"),10)||1;g=parseInt(b.getAttribute("colspan"),10)||1,n=h["up"==c?l-o:"down"==c?l+o:l]["left"==c?m-g:"right"==c?m+g:m]}catch(p){return!1}if(!n||b.$==n)return!1;f["up"==c||"left"==c?"unshift":"push"](new CKEDITOR.dom.element(n))}for(var c=b.getDocument(),q=l,o=n=0,r=!d&&new CKEDITOR.dom.documentFragment(c),s=0,c=0;c<f.length;c++){g=f[c];var t=g.getParent(),u=g.getFirst(),v=g.$.colSpan,w=g.$.rowSpan,t=t.$.rowIndex,x=i(h,t,g),s=s+v*w,o=Math.max(o,x-m+v);n=Math.max(n,t-l+w),d||(v=g,(w=v.getBogus())&&w.remove(),v.trim(),g.getChildren().count()&&(t==q||!u||u.isBlockBoundary&&u.isBlockBoundary({br:1})||(q=r.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!q.is||!q.is("br"))&&r.append("br"),g.moveChildren(r)),c?g.remove():g.setHtml("")),q=t}if(d)return n*o==s;for(r.moveChildren(b),b.appendBogus(),o>=k?b.removeAttribute("rowSpan"):b.$.rowSpan=n,n>=j?b.removeAttribute("colSpan"):b.$.colSpan=o,d=new CKEDITOR.dom.nodeList(e.$.rows),f=d.count(),c=f-1;c>=0;c--)e=d.getItem(c),e.$.cells.length||(e.remove(),f++);return b}function k(b,c){var d=a(b);if(d.length>1)return!1;if(c)return!0;var e,d=d[0],f=d.getParent(),g=f.getAscendant("table"),h=CKEDITOR.tools.buildTableMap(g),j=f.$.rowIndex,k=i(h,j,d),l=d.$.rowSpan;if(l>1){e=Math.ceil(l/2);for(var m,l=Math.floor(l/2),f=j+e,g=new CKEDITOR.dom.element(g.$.rows[f]),h=i(h,f),f=d.clone(),j=0;j<h.length;j++){if(m=h[j],m.parentNode==g.$&&j>k){f.insertBefore(new CKEDITOR.dom.element(m));break}m=null}m||g.append(f)}else for(l=e=1,g=f.clone(),g.insertAfter(f),g.append(f=d.clone()),m=i(h,j),k=0;k<m.length;k++)m[k].rowSpan++;return f.appendBogus(),d.$.rowSpan=e,f.$.rowSpan=l,1==e&&d.removeAttribute("rowSpan"),1==l&&f.removeAttribute("rowSpan"),f}function l(b,c){var d=a(b);if(d.length>1)return!1;if(c)return!0;var d=d[0],e=d.getParent(),f=e.getAscendant("table"),f=CKEDITOR.tools.buildTableMap(f),g=i(f,e.$.rowIndex,d),h=d.$.colSpan;if(h>1)e=Math.ceil(h/2),h=Math.floor(h/2);else{for(var h=e=1,j=[],k=0;k<f.length;k++){var l=f[k];j.push(l[g]),l[g].rowSpan>1&&(k+=l[g].rowSpan-1)}for(f=0;f<j.length;f++)j[f].colSpan++}return f=d.clone(),f.insertAfter(d),f.appendBogus(),d.$.colSpan=e,f.$.colSpan=h,1==e&&d.removeAttribute("colSpan"),1==h&&f.removeAttribute("colSpan"),f}var m=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(d){function i(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function m(a,b){var c=d.addCommand(a,b);d.addFeature(c)}var n=d.lang.table;m("cellProperties",new CKEDITOR.dialogCommand("cellProperties",i({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),m("rowDelete",i({requiredContent:"table",exec:function(a){a=a.getSelection(),h(c(a))}})),m("rowInsertBefore",i({requiredContent:"table",exec:function(a){a=a.getSelection(),b(a,!0)}})),m("rowInsertAfter",i({requiredContent:"table",exec:function(a){a=a.getSelection(),b(a)}})),m("columnDelete",i({requiredContent:"table",exec:function(b){for(var c,d,b=b.getSelection(),b=a(b),e=b[0],f=b[b.length-1],b=e.getAscendant("table"),g=CKEDITOR.tools.buildTableMap(b),i=[],j=0,k=g.length;k>j;j++)for(var l=0,m=g[j].length;m>l;l++)g[j][l]==e.$&&(c=l),g[j][l]==f.$&&(d=l);for(j=c;d>=j;j++)for(l=0;l<g.length;l++)f=g[l],e=new CKEDITOR.dom.element(b.$.rows[l]),f=new CKEDITOR.dom.element(f[j]),f.$&&(1==f.$.colSpan?f.remove():f.$.colSpan=f.$.colSpan-1,l+=f.$.rowSpan-1,e.$.cells.length||i.push(e));d=b.$.rows[0]&&b.$.rows[0].cells,c=new CKEDITOR.dom.element(d[c]||(c?d[c-1]:b.$.parentNode)),i.length==k&&b.remove(),c&&h(c,!0)}})),m("columnInsertBefore",i({requiredContent:"table",exec:function(a){a=a.getSelection(),e(a,!0)}})),m("columnInsertAfter",i({requiredContent:"table",exec:function(a){a=a.getSelection(),e(a)}})),m("cellDelete",i({requiredContent:"table",exec:function(a){a=a.getSelection(),g(a)}})),m("cellMerge",i({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a){h(j(a.getSelection()),!0)}})),m("cellMergeRight",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){h(j(a.getSelection(),"right"),!0)}})),m("cellMergeDown",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){h(j(a.getSelection(),"down"),!0)}})),m("cellVerticalSplit",i({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){h(k(a.getSelection()))}})),m("cellHorizontalSplit",i({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){h(l(a.getSelection()))}})),m("cellInsertBefore",i({requiredContent:"table",exec:function(a){a=a.getSelection(),f(a,!0)}})),m("cellInsertAfter",i({requiredContent:"table",exec:function(a){a=a.getSelection(),f(a)}})),d.addMenuItems&&d.addMenuItems({tablecell:{label:n.cell.menu,group:"tablecell",order:1,getItems:function(){var b=d.getSelection(),c=a(b);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:j(b,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:j(b,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:j(b,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:k(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:l(b,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:c.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:n.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:n.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:n.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:n.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:n.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:n.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:n.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:n.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:n.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:n.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:n.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:n.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:n.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:n.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:n.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:n.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:n.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),d.contextMenu&&d.contextMenu.addListener(function(a,b,c){return(a=c.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:a},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a){for(var a=a.$.rows,b=-1,c=[],d=0;d<a.length;d++){b++,!c[b]&&(c[b]=[]);for(var e=-1,f=0;f<a[d].cells.length;f++){var g=a[d].cells[f];for(e++;c[b][e];)e++;for(var h=isNaN(g.colSpan)?1:g.colSpan,g=isNaN(g.rowSpan)?1:g.rowSpan,i=0;g>i;i++){c[b+i]||(c[b+i]=[]);for(var j=0;h>j;j++)c[b+i][e+j]=a[d].cells[f]}e+=h-1}}return c},function(){function a(a){function c(){for(var c=d(),f=CKEDITOR.tools.clone(a.config.toolbarGroups)||b(a),g=0;g<f.length;g++){var h=f[g];if("/"!=h){"string"==typeof h&&(h=f[g]={name:h});var i,j=h.groups;if(j)for(var k=0;k<j.length;k++)i=j[k],(i=c[i])&&e(h,i);(i=c[h.name])&&e(h,i)}}return f}function d(){var b,c,d,e={};for(b in a.ui.items)c=a.ui.items[b],d=c.toolbar||"others",d=d.split(","),c=d[0],d=parseInt(d[1]||-1,10),e[c]||(e[c]=[]),e[c].push({name:b,order:d});for(c in e)e[c]=e[c].sort(function(a,b){return a.order==b.order?0:b.order<0?-1:a.order<0?1:a.order<b.order?-1:1});return e}function e(b,c){if(c.length){b.items?b.items.push(a.ui.create("-")):b.items=[];for(var d;d=c.shift();)d="string"==typeof d?d:d.name,g&&-1!=CKEDITOR.tools.indexOf(g,d)||(d=a.ui.create(d))&&a.addFeature(d)&&b.items.push(d)}}function f(a){var b,c,d,f=[];for(b=0;b<a.length;++b)c=a[b],d={},"/"==c?f.push(c):CKEDITOR.tools.isArray(c)?(e(d,CKEDITOR.tools.clone(c)),f.push(d)):c.items&&(e(d,CKEDITOR.tools.clone(c.items)),d.name=c.name,f.push(d));return f}var g=a.config.removeButtons,g=g&&g.split(","),h=a.config.toolbar;return"string"==typeof h&&(h=a.config["toolbar_"+h]),a.toolbar=h?f(h):c()}function b(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var c=function(){this.toolbars=[],this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var a,b=0;a=this.toolbars[b++];)for(var c,d=0;c=a.items[d++];)if(c.focus)return void c.focus()};var d={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(b){var e,f=function(a,c){var d,g="rtl"==b.lang.dir,h=b.config.toolbarGroupCycling,i=g?37:39,g=g?39:37,h=void 0===h||h;
switch(c){case 9:case CKEDITOR.SHIFT+9:for(;!d||!d.items.length;)if(d=9==c?(d?d.next:a.toolbar.next)||b.toolbox.toolbars[0]:(d?d.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1],d.items.length)for(a=d.items[e?d.items.length-1:0];a&&!a.focus;)(a=e?a.previous:a.next)||(d=0);return a&&a.focus(),!1;case i:d=a;do d=d.next,!d&&h&&(d=a.toolbar.items[0]);while(d&&!d.focus);return d?d.focus():f(a,9),!1;case 40:return a.button&&a.button.hasArrow?(b.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),a.execute()):f(a,40==c?i:g),!1;case g:case 38:d=a;do d=d.previous,!d&&h&&(d=a.toolbar.items[a.toolbar.items.length-1]);while(d&&!d.focus);return d?d.focus():(e=1,f(a,CKEDITOR.SHIFT+9),e=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("uiSpace",function(d){if(d.data.space==b.config.toolbarLocation){d.removeListener(),b.toolbox=new c;var e,g,h=CKEDITOR.tools.getNextId(),i=['<span id="',h,'" class="cke_voice_label">',b.lang.toolbar.toolbars,"</span>",'<span id="'+b.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',h,'" onmousedown="return false;">'],h=b.config.toolbarStartupExpanded!==!1;b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&i.push('<span class="cke_toolbox_main"'+(h?">":' style="display:none">'));for(var j=b.toolbox.toolbars,k=a(b),l=0;l<k.length;l++){var m,n,o,p=0,q=k[l];if(q)if(e&&(i.push("</span>"),g=e=0),"/"===q)i.push('<span class="cke_toolbar_break"></span>');else{o=q.items||q;for(var r=0;r<o.length;r++){var s,t=o[r];if(t)if(t.type==CKEDITOR.UI_SEPARATOR)g=e&&t;else{if(s=t.canGroup!==!1,!p){m=CKEDITOR.tools.getNextId(),p={id:m,items:[]},n=q.name&&(b.lang.toolbar.toolbarGroups[q.name]||q.name),i.push('<span id="',m,'" class="cke_toolbar"',n?' aria-labelledby="'+m+'_label"':"",' role="toolbar">'),n&&i.push('<span id="',m,'_label" class="cke_voice_label">',n,"</span>"),i.push('<span class="cke_toolbar_start"></span>');var u=j.push(p)-1;u>0&&(p.previous=j[u-1],p.previous.next=p)}s?e||(i.push('<span class="cke_toolgroup" role="presentation">'),e=1):e&&(i.push("</span>"),e=0),m=function(a){a=a.render(b,i),u=p.items.push(a)-1,u>0&&(a.previous=p.items[u-1],a.previous.next=a),a.toolbar=p,a.onkey=f,a.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}},g&&(m(g),g=0),m(t)}}e&&(i.push("</span>"),g=e=0),p&&i.push('<span class="cke_toolbar_end"></span></span>')}}if(b.config.toolbarCanCollapse&&i.push("</span>"),b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var v=CKEDITOR.tools.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){CKEDITOR.tools.removeFunction(v)}),b.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),c=b.getPrevious(),d=a.ui.space("contents"),e=c.getParent(),f=parseInt(d.$.style.height,10),g=e.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(c.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(c.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(h?"▲":"◀"),d.setStyle("height",f-(e.$.offsetHeight-g)+"px"),a.fire("resize")},modes:{wysiwyg:1,source:1}}),b.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),i.push('<a title="'+(h?b.lang.toolbar.toolbarCollapse:b.lang.toolbar.toolbarExpand)+'" id="'+b.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),h||i.push(" cke_toolbox_collapser_min"),i.push('" onclick="CKEDITOR.tools.callFunction('+v+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}i.push("</span>"),d.data.html=d.data.html+i.join("")}}),b.on("destroy",function(){if(this.toolbox){var a,b,c,d,e=0;for(a=this.toolbox.toolbars;e<a.length;e++)for(c=a[e].items,b=0;b<c.length;b++)d=c[b],d.clickFn&&CKEDITOR.tools.removeFunction(d.clickFn),d.keyDownFn&&CKEDITOR.tools.removeFunction(d.keyDownFn)}}),b.on("uiReady",function(){var a=b.ui.space("toolbox");a&&b.focusManager.add(a,1)}),b.addCommand("toolbarFocus",d),b.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),b.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),b.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,c,d){var e=b(this.editor),f=0===c,g={name:a};if(d){if(d=CKEDITOR.tools.search(e,function(a){return a.name==d}))return!d.groups&&(d.groups=[]),c&&(c=CKEDITOR.tools.indexOf(d.groups,c),c>=0)?void d.groups.splice(c+1,0,a):void(f?d.groups.splice(0,0,a):d.groups.push(a));c=null}c&&(c=CKEDITOR.tools.indexOf(e,function(a){return a.name==c})),f?e.splice(0,0,a):"number"==typeof c?e.splice(c+1,0,g):e.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],b={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(b){function d(a){g.enabled&&a.data.command.canUndo!==!1&&g.save()}function e(){g.enabled=b.readOnly?!1:"wysiwyg"==b.mode,g.onChange()}var g=b.undoManager=new c(b),h=g.editingHandler=new f(g),i=b.addCommand("undo",{exec:function(){g.undo()&&(b.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),j=b.addCommand("redo",{exec:function(){g.redo()&&(b.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});b.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]),g.onChange=function(){i.setState(g.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),j.setState(g.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},b.on("beforeCommandExec",d),b.on("afterCommandExec",d),b.on("saveSnapshot",function(a){g.save(a.data&&a.data.contentOnly)}),b.on("contentDom",h.attachListeners,h),b.on("instanceReady",function(){b.fire("saveSnapshot")}),b.on("beforeModeUnload",function(){"wysiwyg"==b.mode&&g.save(!0)}),b.on("mode",e),b.on("readOnly",e),b.ui.addButton&&(b.ui.addButton("Undo",{label:b.lang.undo.undo,command:"undo",toolbar:"undo,10"}),b.ui.addButton("Redo",{label:b.lang.undo.redo,command:"redo",toolbar:"undo,20"})),b.resetUndo=function(){g.reset(),b.fire("saveSnapshot")},b.on("updateSnapshot",function(){g.currentImage&&g.update()}),b.on("lockSnapshot",function(a){a=a.data,g.lock(a&&a.dontUpdate,a&&a.forceUpdate)}),b.on("unlockSnapshot",g.unlock,g)}}),CKEDITOR.plugins.undo={};var c=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=a.config.undoStackSize||20,this.strokesLimit=25,this.editor=a,this.reset()};c.prototype={type:function(a,b){var d=c.getKeyGroup(a),e=this.strokesRecorded[d]+1,b=b||e>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),b?(e=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[d]=e,this.previousKeyGroup=d},keyGroupChanged:function(a){return c.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,c){var e=this.editor;if(this.locked||"ready"!=e.status||"wysiwyg"!=e.mode)return!1;var f=e.editable();if(!f||"ready"!=f.status)return!1;if(f=this.snapshots,b||(b=new d(e)),b.contents===!1)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1}else c!==!1&&e.fire("change");return f.splice(this.index+1,f.length-this.index-1),f.length==this.limit&&f.shift(),this.index=f.push(b)-1,this.currentImage=b,c!==!1&&this.refreshState(),!0},restoreImage:function(a){var b,c=this.editor;a.bookmarks&&(c.focus(),b=c.getSelection()),this.locked={level:999},this.editor.loadSnapshot(a.contents),a.bookmarks?b.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(b=this.editor.document.getBody().$.createTextRange(),b.collapse(!0),b.select()),this.locked=null,this.index=a.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),c.fire("change")},getNextImage:function(a){var b,c=this.snapshots,d=this.currentImage;if(d)if(a){for(b=this.index-1;b>=0;b--)if(a=c[b],!d.equalsContent(a))return a.index=b,a}else for(b=this.index+1;b<c.length;b++)if(a=c[b],!d.equalsContent(a))return a.index=b,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new d(this.editor));for(var b=this.index,c=this.snapshots;b>0&&this.currentImage.equalsContent(c[b-1]);)b-=1;c.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var b=this.snapshots,c=b[b.length-1];return c.equalsContent(a)&&!c.equalsSelection(a)?(this.currentImage=b[b.length-1]=a,!0):!1},lock:function(a,b){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var c=null;if(b)c=!0;else{var e=new d(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(e)&&(c=e)}this.locked={update:c,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;if(this.locked=null,a===!0)this.update();else if(a){var b=new d(this.editor,!0);a.equalsContent(b)||this.update()}}}},c.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},c.keyGroups={PRINTABLE:0,FUNCTIONAL:1},c.isNavigationKey=function(a){return!!c.navigationKeyCodes[a]},c.getKeyGroup=function(a){var d=c.keyGroups;return b[a]?d.FUNCTIONAL:d.PRINTABLE},c.getOppositeKeyGroup=function(a){var b=c.keyGroups;return a==b.FUNCTIONAL?b.PRINTABLE:b.FUNCTIONAL},c.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&c.getKeyGroup(a)==c.keyGroups.FUNCTIONAL};var d=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a,a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=c,b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0)),a.fire("afterUndoImage")},e=/\b(?:href|src|name)="[^"]*?"/gi;d.prototype={equalsContent:function(a){var b=this.contents,a=a.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(b=b.replace(e,""),a=a.replace(e,"")),b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks,a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,e.end))return!1}}return!0}};var f=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a,this.ignoreInputEvent=!1,this.keyEventsStack=new g,this.lastKeydownImage=null};f.prototype={onKeydown:function(b){if(CKEDITOR.tools.indexOf(a,b.data.getKeystroke())>-1)b.data.preventDefault();else{this.keyEventsStack.cleanUp(b);var b=b.data.getKey(),e=this.undoManager;this.keyEventsStack.getLast(b)||this.keyEventsStack.push(b),this.lastKeydownImage=new d(e.editor),(c.isNavigationKey(b)||this.undoManager.keyGroupChanged(b))&&(e.strokesRecorded[0]||e.strokesRecorded[1])&&(e.save(!1,this.lastKeydownImage),e.resetType())}},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0)),this.keyEventsStack.increment(a.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var b=this.undoManager,a=a.data.getKey(),e=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a),c.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new d(b.editor,!0))||(e>0?b.type(a):c.isNavigationKey(a)&&this.onNavigationKey(!0))},onNavigationKey:function(a){var b=this.undoManager;(a||!b.save(!0,null,!1))&&b.updateSelection(new d(b.editor)),b.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,b=a.editable(),d=this;b.attachListener(b,"keydown",function(a){d.onKeydown(a),c.ieFunctionalKeysBug(a.data.getKey())&&d.onInput()},null,null,999),b.attachListener(b,CKEDITOR.env.ie?"keypress":"input",d.onInput,d,null,999),b.attachListener(b,"keyup",d.onKeyup,d,null,999),b.attachListener(b,"paste",d.ignoreInputEventListener,d,null,999),b.attachListener(b,"drop",d.ignoreInputEventListener,d,null,999),b.attachListener(b.isInline()?b:a.document.getDocumentElement(),"click",function(){d.onNavigationKey()},null,null,999),b.attachListener(this.undoManager.editor,"blur",function(){d.keyEventsStack.remove(9)},null,null,999)}};var g=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};g.prototype={push:function(a){return this.stack[this.stack.push({keyCode:a,inputs:0})-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var b=this.stack.length;b--;)if(this.stack[b].keyCode==a)return b;return-1},getLast:function(a){return a=this.getLastIndex(a),-1!=a?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a),-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,b=0;a--;)b+=this.stack[a].inputs;return b},cleanUp:function(a){a=a.data.$,!a.ctrlKey&&!a.metaKey&&this.remove(17),a.shiftKey||this.remove(16),a.altKey||this.remove(18)}}}(),CKEDITOR.config.wsc_removeGlobalVariable=!0,CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(a){a.config.wsc_onFinish="function"==typeof a.config.wsc_onFinish?a.config.wsc_onFinish:function(){},a.config.wsc_onClose="function"==typeof a.config.wsc_onClose?a.config.wsc_onClose:function(){}},parseConfig:function(a){a.config.wsc_customerId=a.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",a.config.wsc_customDictionaryIds=a.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",a.config.wsc_userDictionaryName=a.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",a.config.wsc_customLoaderScript=a.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=a.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version=CKEDITOR.version+" | %Rev%"},init:function(a){var b=CKEDITOR.env;this.parseConfig(a),this.parseApi(a),a.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||b.ie&&(b.version<8||b.quirks))},"undefined"==typeof a.plugins.scayt&&a.ui.addButton&&a.ui.addButton("SpellChecker",{label:a.lang.wsc.toolbar,click:function(a){var b=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.container.getText():a.document.getBody().getText();(b=b.replace(/\s/g,""))?a.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&CKEDITOR.env.version<=7?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function a(a){var c=this.editor,d=a.document,e=d.body,f=d.getElementById("cke_actscrpt");f&&f.parentNode.removeChild(f),(f=d.getElementById("cke_shimscrpt"))&&f.parentNode.removeChild(f),(f=d.getElementById("cke_basetagscrpt"))&&f.parentNode.removeChild(f),CKEDITOR.env.gecko&&(e.contentEditable=!1,CKEDITOR.env.version<2e4&&(e.innerHTML=e.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var a=new CKEDITOR.dom.range(new CKEDITOR.dom.document(d));a.setStart(new CKEDITOR.dom.node(e),0),c.getSelection().selectRanges([a])},0))),e.contentEditable=!0,CKEDITOR.env.ie&&(e.hideFocus=!0,e.disabled=!0,e.removeAttribute("disabled")),delete this._.isLoadingData,this.$=e,d=new CKEDITOR.dom.document(d),this.setup(),CKEDITOR.env.ie&&(d.getDocumentElement().addClass(d.$.compatMode),c.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(d,"selectionchange",function(){var a=d.getBody(),b=c.getSelection(),e=b&&b.getRanges()[0];e&&a.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&e.startContainer.equals(a)&&setTimeout(function(){e=c.getSelection().getRanges()[0],e.startContainer.equals("body")||(a.getFirst().remove(1),e.moveToElementEditEnd(a),e.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>10)&&d.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){c.editable().focus()})}),b(c);try{c.document.$.execCommand("2D-position",!1,!0)}catch(g){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==c.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){c.getSelection().scrollIntoView()},0);else if(c.window.$.innerHeight>this.$.offsetHeight){var d=c.createRange();d[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this),d.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(d,"blur",function(){try{d.$.selection.empty()}catch(a){}}),CKEDITOR.env.iOS&&this.attachListener(d,"touchend",function(){a.focus()}),f=c.document.getElementsByTag("title").getItem(0),f.data("cke-title",f.getText()),CKEDITOR.env.ie&&(c.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),c.fire("contentDom"),this._.isPendingFocus&&(c.focus(),this._.isPendingFocus=!1),setTimeout(function(){c.fire("dataReady")},0),CKEDITOR.env.ie&&setTimeout(function(){if(c.document){var a=c.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0,this)}function b(a){function b(){var b;a.editable().attachListener(a,"selectionChange",function(){var d=a.getSelection().getSelectedElement();d&&(b&&(b.detachEvent("onresizestart",c),b=null),d.$.attachEvent("onresizestart",c),b=d.$)})}function c(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var d=a.document.$;d.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),d.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(e){}else CKEDITOR.env.ie&&CKEDITOR.env.version<11&&a.config.disableObjectResizing&&b(a)}function c(){var a=[];if(CKEDITOR.document.$.documentMode>=8){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var b,c=[];for(b in CKEDITOR.dtd.$removeEmpty)c.push("html.CSS1Compat "+b+"[contenteditable=false]");a.push(c.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(b){function c(c){c&&c.removeListener(),a.editable(new d(a,f.$.contentWindow.document.body)),a.setData(a.getData(1),b)}var e="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",f=CKEDITOR.dom.element.createFromHtml('<iframe src="'+e+'" frameBorder="0"></iframe>');f.setStyles({width:"100%",height:"100%"}),f.addClass("cke_wysiwyg_frame cke_reset");var g=a.ui.space("contents");g.append(f),(e=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&f.on("load",c);var h=a.title,i=a.fire("ariaEditorHelpLabel",{}).label;if(h&&(CKEDITOR.env.ie&&i&&(h+=", "+i),f.setAttribute("title",h)),i){var h=CKEDITOR.tools.getNextId(),j=CKEDITOR.dom.element.createFromHtml('<span id="'+h+'" class="cke_voice_label">'+i+"</span>");g.append(j,1),f.setAttribute("aria-describedby",h)}a.on("beforeModeUnload",function(a){a.removeListener(),j&&j.remove()}),f.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!e&&c(),CKEDITOR.env.webkit&&(e=function(){g.setStyle("width","100%"),f.hide(),f.setSize("width",g.getSize("width")),g.removeStyle("width"),f.show()},f.setCustomData("onResize",e),CKEDITOR.document.getWindow().on("resize",e)),a.fire("ariaWidget",f)})}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var b=this.config,c=b.contentsCss;CKEDITOR.tools.isArray(c)||(b.contentsCss=c?[c]:[]),b.contentsCss.push(a)};var d=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(b){CKEDITOR.tools.setTimeout(a,0,this,b)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,b){var d=this.editor;if(b)this.setHtml(a),d.fire("dataReady");else{this._.isLoadingData=!0,d._.dataStore={id:1};var e=d.config,f=e.fullPage,g=e.docType,h=CKEDITOR.tools.buildStyleHtml(c()).replace(/<style>/,'<style data-cke-temp="1">');f||(h+=CKEDITOR.tools.buildStyleHtml(d.config.contentsCss));var i=e.baseHref?'<base href="'+e.baseHref+'" data-cke-temp="1" />':"";f&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return d.docType=g=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return d.xmlDeclaration=a,""})),a=d.dataProcessor.toHtml(a),f?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),i&&(a=a.replace(/<head[^>]*?>/,"$&"+i)),a=a.replace(/<\/head\s*>/,h+"$&"),a=g+a):a=e.docType+'<html dir="'+e.contentsLangDirection+'" lang="'+(e.contentsLanguage||d.langCode)+'"><head><title>'+this._.docTitle+"</title>"+i+h+"</head><body"+(e.bodyId?' id="'+e.bodyId+'"':"")+(e.bodyClass?' class="'+e.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),e='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(e+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),i&&CKEDITOR.env.ie&&CKEDITOR.env.version<10&&(e+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,e),this.clearCustomData(),this.clearListeners(),d.fire("contentDomUnload");var j=this.getDocument();try{j.write(a)}catch(k){setTimeout(function(){j.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();var a=this.editor,b=a.config,c=b.fullPage,d=c&&a.docType,e=c&&a.xmlDeclaration,f=this.getDocument(),c=c?f.getDocumentElement().getOuterHtml():f.getBody().getHtml();return CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),c=a.dataProcessor.toDataFormat(c),e&&(c=e+"\n"+c),d&&(c=d+"\n"+c),c},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:d.baseProto.focus.call(this)},detach:function(){var a=this.editor,b=a.document,a=a.window.getFrame();d.baseProto.detach.call(this),this.clearCustomData(),b.getDocumentElement().clearCustomData(),a.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(b=a.removeCustomData("onResize"))&&b.removeListener(),a.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filebrowser,floatingspace,listblock,button,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,toolbar,undo,wsc,wysiwygarea",CKEDITOR.config.skin="moono",function(){var a=function(a,b){for(var c=CKEDITOR.getUrl("plugins/"+b),a=a.split(","),d=0;d<a.length;d++)CKEDITOR.skin.icons[a[d]]={path:c,offset:-a[++d],bgsize:a[++d]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,creatediv,456,,docprops-rtl,480,,docprops,504,,find-rtl,528,,find,552,,replace,576,,flash,600,,button,624,,checkbox,648,,form,672,,hiddenfield,696,,imagebutton,720,,radio,744,,select-rtl,768,,select,792,,textarea-rtl,816,,textarea,840,,textfield-rtl,864,,textfield,888,,horizontalrule,912,,iframe,936,,image,960,,indent-rtl,984,,indent,1008,,outdent-rtl,1032,,outdent,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,mathjax,1392,,maximize,1416,,newpage-rtl,1440,,newpage,1464,,pagebreak-rtl,1488,,pagebreak,1512,,pastefromword-rtl,1536,,pastefromword,1560,,pastetext-rtl,1584,,pastetext,1608,,placeholder,1632,,preview-rtl,1656,,preview,1680,,print,1704,,removeformat,1728,,save,1752,,scayt,1776,,selectall,1800,,showblocks-rtl,1824,,showblocks,1848,,smiley,1872,,source-rtl,1896,,source,1920,,sourcedialog-rtl,1944,,sourcedialog,1968,,specialchar,1992,,table,2016,,templates-rtl,2040,,templates,2064,,uicolor,2088,,redo-rtl,2112,,redo,2136,,undo-rtl,2160,,undo,2184,,simplebox,4416,auto,spellchecker,2232,","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,creatediv,456,auto,docprops-rtl,480,auto,docprops,504,auto,find-rtl,528,auto,find,552,auto,replace,576,auto,flash,600,auto,button,624,auto,checkbox,648,auto,form,672,auto,hiddenfield,696,auto,imagebutton,720,auto,radio,744,auto,select-rtl,768,auto,select,792,auto,textarea-rtl,816,auto,textarea,840,auto,textfield-rtl,864,auto,textfield,888,auto,horizontalrule,912,auto,iframe,936,auto,image,960,auto,indent-rtl,984,auto,indent,1008,auto,outdent-rtl,1032,auto,outdent,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,mathjax,1392,auto,maximize,1416,auto,newpage-rtl,1440,auto,newpage,1464,auto,pagebreak-rtl,1488,auto,pagebreak,1512,auto,pastefromword-rtl,1536,auto,pastefromword,1560,auto,pastetext-rtl,1584,auto,pastetext,1608,auto,placeholder,1632,auto,preview-rtl,1656,auto,preview,1680,auto,print,1704,auto,removeformat,1728,auto,save,1752,auto,scayt,1776,auto,selectall,1800,auto,showblocks-rtl,1824,auto,showblocks,1848,auto,smiley,1872,auto,source-rtl,1896,auto,source,1920,auto,sourcedialog-rtl,1944,auto,sourcedialog,1968,auto,specialchar,1992,auto,table,2016,auto,templates-rtl,2040,auto,templates,2064,auto,uicolor,2088,auto,redo-rtl,2112,auto,redo,2136,auto,undo-rtl,2160,auto,undo,2184,auto,simplebox,2208,auto,spellchecker,2232,auto","icons.png")}())}();